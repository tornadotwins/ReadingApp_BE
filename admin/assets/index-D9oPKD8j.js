var X=Object.defineProperty;var Y=(e,t,i)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var N=(e,t,i)=>Y(e,typeof t!="symbol"?t+"":t,i);import{B as ee,j as o,a as x}from"./createTheme-DavofyfB.js";import{C as oe,s as n,z as a,h as d,a4 as te,a5 as ne,D as ae,E as re,a6 as ie,N as le,A as se,W as ue,H as ce,J as de,X as xe}from"./App-CY2O0GiX.js";import{T as S,b as B,f as k,B as v,h as ge,i as E,j as he,k as p,A as be}from"./index-BUEI90ZM.js";import{S as D}from"./index-CuRX-9Q0.js";import{I as T,g as fe,a as me}from"./index-CPDxVhOv.js";var O={},ke=ee;Object.defineProperty(O,"__esModule",{value:!0});var $=O.default=void 0,Ce=ke(oe()),Se=o;$=O.default=(0,Ce.default)((0,Se.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");const Be=n(a)({width:"100%",boxSizing:"border-box",margin:"0px",padding:"8px 22px",backgroundColor:"#000",color:"#FFF",display:"flex",alignItems:"center"});n(a)({margin:"0px"});const pe=n(a)({display:"flex",alignItems:"center",marginLeft:"50px",cursor:"pointer",transitionDuration:".25s","&:hover":{transform:"scale(1.2)"}}),je=n(a)({width:"18px",marginRight:"8px",display:"flex",alignItems:"center",justifyContent:"center"}),ye=n("img")({width:"100%"}),ve=e=>o.jsxs(pe,{onClick:()=>e.onClick,children:[o.jsx(je,{children:o.jsx(ye,{src:T.icon_tool})}),o.jsx(d,{fontFamily:"'Baloo Da 2'",fontWeight:"700",fontSize:16,lineHeight:24,color:"white",children:e.toolName})]}),Te=e=>o.jsxs(Be,{children:[o.jsx(d,{fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:16,lineHeight:24,children:"Tools: "}),e.tools.map((t,i)=>o.jsx(ve,{toolName:t.toolName,onClick:t.onClick},i))]}),Oe=n(a)({display:"flex"}),Ie=n(a)(({isselected:e})=>({width:"135px",padding:"8px 25px",border:"1px solid #000",textAlign:"center",cursor:"pointer",boxSizing:"border-box",backgroundColor:e=="true"?"#1B7695":"#F0F5FB",color:e=="true"?"#fff":"#000"})),we=e=>o.jsx(Oe,{children:e.books.map((t,i)=>o.jsx(Ie,{onClick:t.onClick,isselected:t.bookTitle==e.selectedBook?"true":"false",children:o.jsx(d,{fontFamily:"'Baloo Da 2'",fontWeight:"500",fontSize:16,lineHeight:24,children:t.bookTitle})},i))});n(a)({width:"100%",backgroundColor:"#F0F5FB",padding:"5px 20px"});const Fe=n(a)(({status:e})=>({width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #155D74",cursor:"pointer",backgroundColor:e==S?"#FFAA5D":e==B?"#155D74":"#fff",color:e==S?"#155D74":e==B?"#fff":"#155D74"})),j=e=>o.jsx(Fe,{status:e.translationStatus,onClick:e.onClick,children:o.jsx(d,{fontFamily:"Inter",fontSize:16,fontWeight:"500",children:e.chapterNumber==0?"Intr":e.chapterNumber.toString()})}),Ae=n(a)({margin:"2px 0px",display:"flex"}),Ne=n(a)({width:"100px",minWidth:"100px",maxWidth:"200px",marginRight:"10px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",padding:"9px 0px"}}),De=n(a)({display:"flex",flexGrow:1}),Re=n(a)({display:"flex",justifyContent:"center",marginRight:"3px",minWidth:"45px","& >*":{flexGrow:1}}),R=n(a)({display:"flex",flexWrap:"wrap",gap:"2px"});function L(e){var t,i;return o.jsxs(Ae,{children:[!e.isQuranOrZabur&&e.subBook&&o.jsx(Ne,{children:o.jsx(d,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"400",children:(t=e.subBook.subBookTitle)==null?void 0:t[e.languageCode]})}),o.jsxs(De,{children:[o.jsx(Re,{children:e.subBook&&!!e.subBook.noChapter&&e.subBook.chapterInfos[0].chapterNumber==0&&o.jsx(j,{chapterNumber:0,onClick:()=>{},translationStatus:k})}),!e.isQuranOrZabur&&o.jsx(R,{children:e.subBook&&((i=e.subBook.chapterInfos)==null?void 0:i.map((r,c)=>o.jsx(j,{chapterNumber:r.chapterNumber,translationStatus:r.translationStatus||k,onClick:()=>{}},c)))}),e.isQuranOrZabur&&o.jsx(R,{children:e.book&&e.book.subBooks&&e.book.subBooks.map((r,c)=>o.jsx(j,{chapterNumber:r.subBookNumber,translationStatus:r.chapterInfos[0].translationStatus||k,onClick:()=>{}},c))})]})]})}const Le=n(a)(({isquranorzabur:e})=>({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",paddingRight:e=="true"?"120px":"0px",boxSizing:"border-box",maxWidth:"650px"})),_e=n(a)({display:"flex",marginBottom:"15px"}),We=n("img")({width:"24px",height:"24px",marginRight:"10px"}),_=e=>o.jsxs(Le,{isquranorzabur:e.isQuranOrZabur?"true":"false",children:[o.jsxs(_e,{children:[o.jsx(We,{src:T.icon_book}),o.jsx(d,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"700",children:`${e.bookTitle} text - ${e.language} - chapters:`})]}),!e.isQuranOrZabur&&e.bookInfo.subBooks.map((t,i)=>o.jsx(L,{subBook:t,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur},i)),e.isQuranOrZabur&&o.jsx(L,{book:e.bookInfo,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur})]});n(a)({width:"100%",backgroundColor:"#F0F5FB",padding:"5px 20px"});const Qe=n(a)(({status:e})=>({width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #155D74",cursor:"pointer",backgroundColor:e==S?"#FFAA5D":e==B?"#155D74":"#fff",color:e==S?"#155D74":e==B?"#fff":"#155D74"})),y=e=>o.jsx(Qe,{status:e.audioStatus,onClick:e.onClick,children:o.jsx(d,{fontFamily:"Inter",fontSize:16,fontWeight:"500",children:e.chapterNumber==0?"Intr":e.chapterNumber.toString()})}),Ze=n(a)({margin:"10px 0px",display:"flex"}),Ee=n(a)({width:"100px",minWidth:"100px",maxWidth:"200px",marginRight:"10px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",padding:"9px 0px"}}),$e=n(a)({display:"flex",flexGrow:1}),Ue=n(a)({display:"flex",justifyContent:"center",marginRight:"3px",minWidth:"45px","& >*":{flexGrow:1}}),W=n(a)({display:"flex",flexWrap:"wrap",gap:"2px"});function Q(e){var t,i;return o.jsxs(Ze,{children:[!e.isQuranOrZabur&&e.subBook&&o.jsx(Ee,{children:o.jsx(d,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"400",children:(t=e.subBook.subBookTitle)==null?void 0:t[e.languageCode]})}),o.jsxs($e,{children:[o.jsx(Ue,{children:e.subBook&&!!e.subBook.noChapter&&e.subBook.chapterInfos[0].chapterNumber==0&&o.jsx(y,{chapterNumber:0,onClick:()=>{},audioStatus:k})}),!e.isQuranOrZabur&&o.jsx(W,{children:e.subBook&&((i=e.subBook.chapterInfos)==null?void 0:i.map((r,c)=>{var l;return o.jsx(y,{chapterNumber:r.chapterNumber,audioStatus:((l=r.chapterAudio)==null?void 0:l[e.languageCode])||k,onClick:()=>{}},c)}))}),e.isQuranOrZabur&&o.jsx(W,{children:e.book&&e.book.subBooks&&e.book.subBooks.map((r,c)=>{var l;return o.jsx(y,{chapterNumber:r.subBookNumber,audioStatus:((l=r.chapterInfos[0].chapterAudio)==null?void 0:l[e.languageCode])||k,onClick:()=>{}},c)})})]})]})}const ze=n(a)(({isquranorzabur:e})=>({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",paddingRight:e=="true"?"120px":"0px",boxSizing:"border-box",maxWidth:"650px"})),qe=n(a)({display:"flex",marginBottom:"15px"}),Me=n("img")({width:"24px",height:"24px",marginRight:"10px"}),Z=e=>o.jsxs(ze,{isquranorzabur:e.isQuranOrZabur?"true":"false",children:[o.jsxs(qe,{children:[o.jsx(Me,{src:T.icon_audio}),o.jsx(d,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"700",children:`${e.bookTitle} Audio - ${e.language} - chapters:`})]}),!e.isQuranOrZabur&&e.bookInfo.subBooks.map((t,i)=>o.jsx(Q,{subBook:t,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur},i)),e.isQuranOrZabur&&o.jsx(Q,{book:e.bookInfo,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur})]}),He=n(a)({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",maxWidth:"650px"}),Pe=n(a)({display:"flex"});n("img")({width:"24px",height:"24px",marginRight:"10px"});const Ke=e=>o.jsx(He,{children:o.jsx(Pe,{children:o.jsx(d,{color:"red",fontFamily:"'Baloo Da 2'",fontWeight:"700",fontSize:30,children:"Coming Soon"})})}),Ge=n(a)({position:"relative",minHeight:"100vh",width:"100%","& >.MuiBox-root:first-of-type":{backgroundColor:"#1B7695","& >.MuiBox-root":{color:"#F6FCFC"}}}),Je=n(a)({width:"100%",height:"calc(100% - 73px)",margin:"auto",marginTop:"73px"}),Ve=n(a)({width:"650px",display:"flex",justifyContent:"center",alignItems:"center",margin:"20px 40px 0px 40px","& .MuiFormControl-root":{width:"unset",marginLeft:"15px"},"& .MuiBox-root":{fontFamily:'"Baloo Da 2" !important'}}),Xe=n(a)({margin:"20px 40px"}),Ye=n(a)({margin:"5px 40px",padding:"15px",maxWidth:"650px",boxSizing:"border-box",display:"flex",justifyContent:"center","& .MuiButtonBase-root":{boxSizing:"border-box",textTransform:"none",backgroundColor:"#FFAA5D",padding:"8px 15px",borderRadius:"0px",border:"1px solid #474747","&:hover":{backgroundColor:"#EECC5D"}}});class eo{constructor(){N(this,"getBookInfoByTitle",t=>new Promise((i,r)=>{const c=ne+`/books/${t}/bookInfoByTitle`;te.get(c).then(l=>{l.data?i(l.data):r(l.data.error)}).catch(l=>{r(l)})}))}}const oo=new eo,to=[{bookTitle:"App Text",value:"App Text"},{bookTitle:v,value:"Qur'an"},{bookTitle:ge,value:"Injil"},{bookTitle:E,value:"Zabur"},{bookTitle:he,value:"Tawrat"}],no=[{value:"Text",label:"Text"},{value:"Audio",label:"Audio"},{value:"Reference",label:"Reference"}],ao=[{toolName:"Western",onClick:()=>{}},{toolName:"Arabic",onClick:()=>{}}],ro=e=>{const[t,i]=x.useState(v),[r,c]=x.useState(""),[l,U]=x.useState("Text"),[z,q]=x.useState([]),[M,I]=x.useState(!1),[g,w]=x.useState(null),H=re(),P=ie(),F=x.useCallback(()=>{var s;return(s=e.currentUser)!=null&&s.roles?e.currentUser.roles.reduce((f,m)=>{if(m.role!=="none"){const h=fe(m.language);f.some(V=>V.value===h)||f.push({value:h,label:m.language})}return f},[]):[]},[e.currentUser]);x.useEffect(()=>{const u=F();q(u),u.length>0&&!u.some(s=>s.value===r)&&c(u[0].value)},[e.currentUser,r,F]),x.useEffect(()=>{(async()=>{I(!0);try{const s=localStorage.getItem(p),f=s?JSON.parse(s):[],m=f.find(h=>h.bookTitle.en===t);if(m)w(m);else{const h=await oo.getBookInfoByTitle(t);w(h);const A=[...f,h];localStorage.setItem(p,JSON.stringify(A))}}catch(s){ce.error(s instanceof Error?s.message:String(s),{position:"top-right",draggable:!0,theme:"colored",transition:de,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})}finally{I(!1)}})()},[t]);const K=u=>{const s=u.target.value;c(s)},G=u=>{const s=u.target.value;U(s)},J=()=>{localStorage.removeItem(be),localStorage.removeItem(p),e.dispatch({type:xe.SET_CURRENT_USER,payload:{user:null}}),H("/admin")},C=t===v||t===E,b=me(r);return o.jsxs(o.Fragment,{children:[o.jsxs(Ge,{flexDirection:P?"column":"row",children:[o.jsx(le,{isLoggedIn:!0,username:e.currentUser.username,isAdmin:e.currentUser.isAdmin,onLogOut:J}),o.jsxs(Je,{children:[o.jsx(Te,{tools:ao}),o.jsx(Xe,{children:o.jsx(we,{books:to.map(u=>({bookTitle:u.bookTitle,onClick:()=>i(u.value)})),selectedBook:t})}),o.jsxs(Ve,{children:[o.jsx(d,{color:"#155D74",fontWeight:"700",fontFamily:"'Baloo Da 2'",children:`${t} ${C?"overview":""}`}),o.jsx(D,{label:"",options:z,value:r,backgroundColor:"#fff",textColor:"#155D74",onChange:K}),!C&&o.jsx(D,{label:"",options:no,value:l,backgroundColor:"#fff",textColor:"#155D74",onChange:G})]}),!C&&o.jsx(Ye,{children:o.jsx(se,{icon:o.jsx($,{}),label:`Import ${l} into ${b} ${t}`,onClick:()=>{}})}),g&&!C&&o.jsxs(o.Fragment,{children:[l==="Text"&&o.jsx(_,{bookTitle:t,language:b,languageCode:r,bookInfo:g,isQuranOrZabur:!1}),l==="Audio"&&o.jsx(Z,{bookTitle:t,language:b,languageCode:r,bookInfo:g,isQuranOrZabur:!1}),l==="Reference"&&o.jsx(Ke,{bookTitle:t,language:b,languageCode:r,bookInfo:g})]}),g&&C&&o.jsxs(o.Fragment,{children:[o.jsx(_,{bookTitle:t,language:b,languageCode:r,bookInfo:g,isQuranOrZabur:!0}),o.jsx(Z,{bookTitle:t,language:b,languageCode:r,bookInfo:g,isQuranOrZabur:!0})]})]})]}),M&&o.jsx(ue,{})]})};function io(e){return{dispatch:e}}function lo(e){return{currentUser:e.user.currentUser}}const bo=ae(lo,io)(ro);export{bo as default};
