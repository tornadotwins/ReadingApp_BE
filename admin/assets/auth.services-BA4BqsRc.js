var l=Object.defineProperty;var g=(n,e,a)=>e in n?l(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a;var o=(n,e,a)=>g(n,typeof e!="symbol"?e+"":e,a);import{j as d}from"./createTheme-1BGCtfCo.js";import{x as m,T as f,y as S,E as x,z as k,$ as A,C as u,G as c,I as h}from"./index-FX6HVIdQ.js";function M(n){const e=a=>{n.onKeyDown&&n.onKeyDown(a)};return d.jsxs(d.Fragment,{children:[d.jsxs(m,{children:[d.jsx(f,{fontFamily:'"Baloo Da 2"',fontWeight:"400",fontSize:16,lineHeight:24,textAlign:"center",children:n.label}),d.jsx(S,{required:n.required,type:n.type,value:n.value,inputRef:n.reference,placeholder:n.placeholder,onKeyDown:e,onChange:n.onChange})]}),n.error&&d.jsx(x,{children:n.error})]})}function P(){return d.jsx(k,{children:d.jsx(A,{width:50,height:50,color:"white"})})}class w{constructor(){o(this,"login",e=>new Promise((a,r)=>{const i=h+"/admin/auth/login";u.post(i,e).then(s=>{s.data.user?(this.setSession(s.data.token),a(s.data.user)):r(s.data.error)}).catch(s=>{r(this.getErrorMessage(s))})}));o(this,"logout",()=>{this.setSession("")});o(this,"fetchUsers",()=>new Promise((e,a)=>{const r=h+"/admin/auth/users",i=this.getAccessToken();i&&this.setSession(i),u.get(r).then(s=>{s.data.users?e(s.data.users):a(s.data.error)}).catch(s=>{a(this.getErrorMessage(s))})}));o(this,"saveUser",e=>new Promise((a,r)=>{const i=h+"/admin/auth/save-user",s=this.getAccessToken();s&&this.setSession(s),u.post(i,e).then(t=>{t.data.user?a(t.data.user):r(t.data.error)}).catch(t=>{r(this.getErrorMessage(t))})}));o(this,"deleteUser",e=>new Promise((a,r)=>{const i=h+`/admin/auth/${e}`,s=this.getAccessToken();s&&this.setSession(s),u.delete(i).then(t=>{t.data.user?a(t.data.user):r(t.data.error)}).catch(t=>{r(this.getErrorMessage(t))})}));o(this,"updateUser",e=>new Promise((a,r)=>{const i=h+"/admin/auth",s=this.getAccessToken();s&&this.setSession(s),u.put(i,e).then(t=>{t.data.user?a(t.data.user):r(t.data.error)}).catch(t=>{r(this.getErrorMessage(t))})}));o(this,"updateUsers",e=>new Promise((a,r)=>{const i=h+"/admin/auth/users",s=this.getAccessToken();s&&this.setSession(s),u.put(i,e).then(t=>{t.data.users?a(t.data.users):r(t.data.error)}).catch(t=>{r(this.getErrorMessage(t))})}));o(this,"addLanguage",e=>new Promise((a,r)=>{const i=h+"/admin/auth/language",s=this.getAccessToken();s&&this.setSession(s),u.put(i,{language:e}).then(t=>{t.data.users?a(t.data.users):r(t.data.error)}).catch(t=>{r(this.getErrorMessage(t))})}));o(this,"deleteLanguage",e=>new Promise((a,r)=>{const i=h+`/admin/auth/language/${e}`,s=this.getAccessToken();s&&this.setSession(s),u.delete(i).then(t=>{t.data.users?a(t.data.users):r(t.data.error)}).catch(t=>{r(this.getErrorMessage(t))})}));o(this,"setSession",e=>{e?(localStorage.setItem(c,e),u.defaults.headers.common.Authorization=`Bearer ${e}`):(localStorage.removeItem(c),delete u.defaults.headers.common.Authorization)});o(this,"getAccessToken",()=>localStorage.getItem(c));o(this,"isValidToken",e=>!!e);o(this,"isAuthenticated",()=>!!this.getAccessToken())}getErrorMessage(e){let a=e.message;if(e.response&&e.response.data&&typeof e.response.data=="object"){const r=e.response.data;r.message&&(a=r.message)}return a}}const v=new w;export{M as I,P as L,v as a};
