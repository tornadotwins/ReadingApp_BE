import{B as le,j as o,a as h}from"./createTheme-z9-v4ZeL.js";import{C as se,s as t,z as n,h as b,D as ue,E as ce,a2 as de,X as B,W as ge,H as xe,J as he,N as be,A as fe}from"./App-6DAum8n2.js";import{T as v,b as j,f as C,B as T,A as ke,h as $,i as Ce,j as me}from"./index-CRP6jEEk.js";import{S as N}from"./index-BYg5-_fH.js";import{I as q,g as Se,a as Be}from"./index-CMK80U5Z.js";import{b as pe,T as ve,B as je}from"./book.services-czYvkRbO.js";var I={},ye=le;Object.defineProperty(I,"__esModule",{value:!0});var z=I.default=void 0,Oe=ye(se()),Te=o;z=I.default=(0,Oe.default)((0,Te.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");t(n)({width:"100%",backgroundColor:"#F0F5FB",padding:"5px 20px"});const Ie=t(n)(({status:e})=>({width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #155D74",cursor:"pointer",backgroundColor:e==v?"#FFAA5D":e==j?"#155D74":"#fff",color:e==v?"#155D74":e==j?"#fff":"#155D74"})),y=e=>{var s,u;return o.jsx(Ie,{status:e.translationStatus,onClick:()=>{var i;return e.onClick(((i=e.chapterInfo)==null?void 0:i.chapterId)||"")},children:o.jsx(b,{fontFamily:"Inter",fontSize:16,fontWeight:"500",children:e.chapterInfo?e.chapterInfo.chapterNumber==0?"Intr":e.chapterInfo.chapterNumber.toString():((s=e.subBookInfo)==null?void 0:s.subBookNumber)==0?"Intr":(u=e.subBookInfo)==null?void 0:u.subBookNumber.toString()})})},we=t(n)({margin:"2px 0px",display:"flex"}),Fe=t(n)({width:"100px",minWidth:"100px",maxWidth:"200px",marginRight:"10px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",padding:"9px 0px"}}),Ae=t(n)({display:"flex",flexGrow:1}),_e=t(n)({display:"flex",justifyContent:"center",marginRight:"3px",minWidth:"45px","& >*":{flexGrow:1}}),R=t(n)({display:"flex",flexWrap:"wrap",gap:"2px"});function E(e){var s,u;return o.jsxs(we,{children:[!e.isQuranOrZabur&&e.subBook&&o.jsx(Fe,{children:o.jsx(b,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"400",children:(s=e.subBook.subBookTitle)==null?void 0:s[e.languageCode]})}),o.jsxs(Ae,{children:[o.jsx(_e,{children:e.subBook&&!!e.subBook.noChapter&&e.subBook.chapterInfos[0].chapterNumber==0&&o.jsx(y,{chapterInfo:e.subBook.chapterInfos[0],translationStatus:C,onClick:e.onChapterClick})}),!e.isQuranOrZabur&&o.jsx(R,{children:e.subBook&&((u=e.subBook.chapterInfos)==null?void 0:u.map((i,d)=>o.jsx(y,{subBookInfo:e.subBook,chapterInfo:i,translationStatus:i.translationStatus||C,onClick:e.onChapterClick},d)))}),e.isQuranOrZabur&&o.jsx(R,{children:e.book&&e.book.subBooks&&e.book.subBooks.map((i,d)=>o.jsx(y,{subBookInfo:i,translationStatus:i.chapterInfos[0].translationStatus||C,onClick:()=>{}},d))})]})]})}const De=t(n)(({isquranorzabur:e})=>({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",paddingRight:e=="true"?"120px":"0px",boxSizing:"border-box",maxWidth:"650px"})),Ne=t(n)({display:"flex",marginBottom:"15px"}),Re=t("img")({width:"24px",height:"24px",marginRight:"10px"}),L=e=>o.jsxs(De,{isquranorzabur:e.isQuranOrZabur?"true":"false",children:[o.jsxs(Ne,{children:[o.jsx(Re,{src:q.icon_book}),o.jsx(b,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"700",children:`${e.bookTitle} text - ${e.language} - chapters:`})]}),!e.isQuranOrZabur&&e.bookInfo.subBooks.map((s,u)=>o.jsx(E,{subBook:s,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur,onChapterClick:e.onClickSquare},u)),e.isQuranOrZabur&&o.jsx(E,{book:e.bookInfo,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur,onChapterClick:e.onClickSquare})]});t(n)({width:"100%",backgroundColor:"#F0F5FB",padding:"5px 20px"});const Ee=t(n)(({status:e})=>({width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #155D74",cursor:"pointer",backgroundColor:e==v?"#FFAA5D":e==j?"#155D74":"#fff",color:e==v?"#155D74":e==j?"#fff":"#155D74"})),O=e=>o.jsx(Ee,{status:e.audioStatus,onClick:e.onClick,children:o.jsx(b,{fontFamily:"Inter",fontSize:16,fontWeight:"500",children:e.chapterNumber==0?"Intr":e.chapterNumber.toString()})}),Le=t(n)({margin:"10px 0px",display:"flex"}),Qe=t(n)({width:"100px",minWidth:"100px",maxWidth:"200px",marginRight:"10px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",padding:"9px 0px"}}),Ze=t(n)({display:"flex",flexGrow:1}),We=t(n)({display:"flex",justifyContent:"center",marginRight:"3px",minWidth:"45px","& >*":{flexGrow:1}}),Q=t(n)({display:"flex",flexWrap:"wrap",gap:"2px"});function Z(e){var s,u;return o.jsxs(Le,{children:[!e.isQuranOrZabur&&e.subBook&&o.jsx(Qe,{children:o.jsx(b,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"400",children:(s=e.subBook.subBookTitle)==null?void 0:s[e.languageCode]})}),o.jsxs(Ze,{children:[o.jsx(We,{children:e.subBook&&!!e.subBook.noChapter&&e.subBook.chapterInfos[0].chapterNumber==0&&o.jsx(O,{chapterNumber:0,onClick:()=>{},audioStatus:C})}),!e.isQuranOrZabur&&o.jsx(Q,{children:e.subBook&&((u=e.subBook.chapterInfos)==null?void 0:u.map((i,d)=>{var l;return o.jsx(O,{chapterNumber:i.chapterNumber,audioStatus:((l=i.chapterAudio)==null?void 0:l[e.languageCode])||C,onClick:()=>{}},d)}))}),e.isQuranOrZabur&&o.jsx(Q,{children:e.book&&e.book.subBooks&&e.book.subBooks.map((i,d)=>{var l;return o.jsx(O,{chapterNumber:i.subBookNumber,audioStatus:((l=i.chapterInfos[0].chapterAudio)==null?void 0:l[e.languageCode])||C,onClick:()=>{}},d)})})]})]})}const Ue=t(n)(({isquranorzabur:e})=>({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",paddingRight:e=="true"?"120px":"0px",boxSizing:"border-box",maxWidth:"650px"})),$e=t(n)({display:"flex",marginBottom:"15px"}),qe=t("img")({width:"24px",height:"24px",marginRight:"10px"}),W=e=>o.jsxs(Ue,{isquranorzabur:e.isQuranOrZabur?"true":"false",children:[o.jsxs($e,{children:[o.jsx(qe,{src:q.icon_audio}),o.jsx(b,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"700",children:`${e.bookTitle} Audio - ${e.language} - chapters:`})]}),!e.isQuranOrZabur&&e.bookInfo.subBooks.map((s,u)=>o.jsx(Z,{subBook:s,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur},u)),e.isQuranOrZabur&&o.jsx(Z,{book:e.bookInfo,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur})]}),ze=t(n)({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",maxWidth:"650px"}),Me=t(n)({display:"flex"});t("img")({width:"24px",height:"24px",marginRight:"10px"});const Ge=e=>o.jsx(ze,{children:o.jsx(Me,{children:o.jsx(b,{color:"red",fontFamily:"'Baloo Da 2'",fontWeight:"700",fontSize:30,children:"Coming Soon"})})}),Ke=t(n)({position:"relative",minHeight:"100vh",width:"100%","& >.MuiBox-root:first-of-type":{backgroundColor:"#1B7695","& >.MuiBox-root":{color:"#F6FCFC"}}}),He=t(n)({width:"100%",height:"calc(100% - 73px)",margin:"auto",marginTop:"73px"}),Pe=t(n)({width:"650px",display:"flex",alignItems:"center",margin:"20px 40px 0px 40px","& .MuiFormControl-root":{width:"unset",marginLeft:"15px"},"& .MuiBox-root":{fontFamily:'"Baloo Da 2" !important'}}),Je=t(n)({margin:"20px 40px"}),Ve=t(n)({margin:"5px 40px",padding:"15px",maxWidth:"650px",boxSizing:"border-box",display:"flex",justifyContent:"center","& .MuiButtonBase-root":{boxSizing:"border-box",textTransform:"none",backgroundColor:"#FFAA5D",padding:"8px 15px",borderRadius:"0px",border:"1px solid #474747","&:hover":{backgroundColor:"#EECC5D"}}}),Xe=[{bookTitle:"App Text",value:"App Text"},{bookTitle:T,value:"Qur'an"},{bookTitle:Ce,value:"Injil"},{bookTitle:$,value:"Zabur"},{bookTitle:me,value:"Tawrat"}],U=[{value:"Text",label:"Text"},{value:"Audio",label:"Audio"},{value:"Reference",label:"Reference"}],Ye=[{toolName:"Western",onClick:()=>{}},{toolName:"Arabic",onClick:()=>{}}],eo=e=>{const[s,u]=h.useState([]),[i,d]=h.useState(!1),[l,w]=h.useState(null),[c,M]=h.useState(T),[x,F]=h.useState(""),[m,G]=h.useState(U[0].value),A=ce(),K=de(),_=h.useCallback(()=>{var a;if(!((a=e.currentUser)!=null&&a.roles))return[];const r=e.currentUser.roles.reduce((g,p)=>{if(p.role!=="none"){const k=Se(p.language);g.some(ie=>ie.value===k)||g.push({value:k,label:p.language})}return g},[]);return e.currentLanguage||e.dispatch({type:B.SET_CURRENT_LANGUAGE,payload:{language:r[0].value}}),r},[e.currentUser]);h.useEffect(()=>{const r=_();u(r),r.length>0&&!r.some(a=>a.value===x)&&F(r[0].value)},[e.currentUser,x,_]),h.useEffect(()=>{(async()=>{d(!0);try{const a=e.bookInfos.find(g=>g.bookTitle.en===c);if(a)w(a);else{const g=await pe.getBookInfoByTitle(c);w(g),e.dispatch({type:B.ADD_BOOKINFO,payload:{bookInfo:g}})}d(!1)}catch(a){xe.error(a instanceof Error?a.message:String(a),{position:"top-right",draggable:!0,theme:"colored",transition:he,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),d(!1)}})()},[c,e.bookInfos]);const H=r=>{const a=r.target.value;F(a),e.dispatch({type:B.SET_CURRENT_LANGUAGE,payload:{language:a}})},P=r=>{const a=r.target.value;G(a)},J=r=>{const a=l==null?void 0:l.subBooks.find(k=>k.chapterInfos.find(D=>D.chapterId==r)),g=a==null?void 0:a.chapterInfos.find(k=>k.chapterId==r);A("/admin/chapteroverview",{state:{chapterId:r,bookTitle:c,subBookInfo:a,chapterInfo:g,languages:s}})},V=()=>{localStorage.removeItem(ke),e.dispatch({type:B.RESET_USER}),e.dispatch({type:B.RESET_BOOK}),A("/admin")},S=c===T||c===$,f=Be(x),X=()=>o.jsx(be,{isLoggedIn:!0,username:e.currentUser.username,isAdmin:e.currentUser.isAdmin,onLogOut:V}),Y=()=>o.jsx(Je,{children:o.jsx(je,{books:Xe.map(r=>({bookTitle:r.bookTitle,onClick:()=>M(r.value)})),selectedBook:c})}),ee=()=>o.jsxs(Pe,{children:[o.jsx(b,{color:"#155D74",fontWeight:"700",fontFamily:"'Baloo Da 2'",children:`${c} ${S?"overview":""}`}),o.jsx(N,{label:"",options:s,value:x,backgroundColor:"#fff",textColor:"#155D74",onChange:H}),!S&&o.jsx(N,{label:"",options:U,value:m,backgroundColor:"#fff",textColor:"#155D74",onChange:P})]}),oe=()=>o.jsx(Ve,{children:o.jsx(fe,{icon:o.jsx(z,{}),label:`Import ${m} into ${f} ${c}`,onClick:()=>{}})}),te=()=>o.jsx(o.Fragment,{children:l&&!S&&o.jsxs(o.Fragment,{children:[m==="Text"&&o.jsx(L,{bookTitle:c,language:f,languageCode:x,bookInfo:l,isQuranOrZabur:!1,onClickSquare:J}),m==="Audio"&&o.jsx(W,{bookTitle:c,language:f,languageCode:x,bookInfo:l,isQuranOrZabur:!1}),m==="Reference"&&o.jsx(Ge,{bookTitle:c,language:f,languageCode:x,bookInfo:l})]})}),ne=()=>o.jsx(o.Fragment,{children:l&&S&&o.jsxs(o.Fragment,{children:[o.jsx(L,{bookTitle:c,language:f,languageCode:x,bookInfo:l,isQuranOrZabur:!0,onClickSquare:()=>{}}),o.jsx(W,{bookTitle:c,language:f,languageCode:x,bookInfo:l,isQuranOrZabur:!0})]})}),ae=()=>o.jsxs(o.Fragment,{children:[te(),ne()]}),re=()=>o.jsxs(He,{children:[o.jsx(ve,{tools:Ye}),Y(),ee(),!S&&oe(),ae()]});return o.jsxs(o.Fragment,{children:[o.jsxs(Ke,{flexDirection:K?"column":"row",children:[X(),re()]}),i&&o.jsx(ge,{})]})};function oo(e){return{dispatch:e}}function to(e){return{currentUser:e.user.currentUser,bookInfos:e.book.bookInfos,currentLanguage:e.book.language}}const uo=ue(to,oo)(eo);export{uo as default};
