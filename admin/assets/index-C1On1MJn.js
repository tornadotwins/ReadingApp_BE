import{j as t,a as k}from"./createTheme-C_Nmnn35.js";import{s as o,B as u,T as I,t as Ce,u as ke,K as Se,F as A,Q as Te,E as ve,A as H,H as J,w as Be,q as Oe}from"./App-DaaHOIBI.js";import{d as ye}from"./CloudUpload-B4pWLRZn.js";import{I as le,g as Ie,a as pe}from"./images-B-3euPqr.js";import{T as w,f as F,C as se,h as K,B as M,i as G,j as je,k as Y,n as Ae,b as we,o as Fe,J as _e,p as Ne,q as Ee,r as Re}from"./index-CaI9eg9J.js";import{S as V}from"./index-CFdtRtyq.js";import{T as Le,B as De}from"./index-C21iL05o.js";import{b as Ue}from"./book.services-BuwRYMQE.js";import{t as Ze}from"./translator.services-BQDpZOCP.js";o(u)({width:"100%",backgroundColor:"#F0F5FB",padding:"5px 20px"});const Qe=o(u)(({status:e})=>({width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #155D74",cursor:"pointer",backgroundColor:e==w?"#FFAA5D":e==F?"#155D74":e==se?"#F0F5FB":"#fff",color:e==w?"#155D74":e==F?"#fff":"#155D74"})),q=e=>{var g,x,a,f,c,d;return t.jsx(Qe,{status:e.isPublished?w:e.isCompleted?F:e.chapterInfo&&!((x=(g=e.chapterInfo)==null?void 0:g.verses)!=null&&x.length)?se:K,onClick:()=>{var b;return e.onClick(((b=e.chapterInfo)==null?void 0:b.chapterId)||"")},children:t.jsx(I,{fontFamily:"Inter",fontSize:16,fontWeight:"500",children:e.isSpecialBook?((a=e.subBookInfo)==null?void 0:a.subBookNumber)==0?"Intr":(c=(f=e.subBookInfo)==null?void 0:f.subBookNumber)==null?void 0:c.toString():e.chapterInfo&&(e.chapterInfo.chapterNumber==0?"Intr":(d=e.chapterInfo.chapterNumber)==null?void 0:d.toString())})})},Pe=o(u)({margin:"2px 0px",display:"flex"}),We=o(u)({width:"100px",minWidth:"100px",maxWidth:"200px",marginRight:"10px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",padding:"9px 0px"}}),$e=o(u)({display:"flex",flexGrow:1}),qe=o(u)({display:"flex",justifyContent:"center",marginRight:"3px",minWidth:"45px","& >*":{flexGrow:1}}),X=o(u)({display:"flex",flexWrap:"wrap",gap:"2px"});function ee(e){var g,x,a,f,c,d,b,p,_,U,s,Z,m,R,T,Q,B,P,L,W;return t.jsxs(Pe,{children:[!e.isQuranOrZabur&&e.subBook&&t.jsx(We,{children:t.jsx(I,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"400",children:((a=(x=(g=e.subBookTitleInfo)==null?void 0:g.find(r=>{var O,C;return r.variable===((C=(O=e.subBook)==null?void 0:O.subBookTitle)==null?void 0:C.en)}))==null?void 0:x.text)==null?void 0:a[e.languageCode])||((c=(f=e.subBook)==null?void 0:f.subBookTitle)==null?void 0:c.en)})}),t.jsxs($e,{children:[t.jsxs(qe,{children:[e.subBook&&!e.subBook.noChapter&&((b=(d=e.subBook)==null?void 0:d.chapterInfos[0])==null?void 0:b.chapterNumber)==0&&t.jsx(q,{chapterInfo:e.subBook.chapterInfos[0],isCompleted:(_=(p=e.subBook.chapterInfos[0])==null?void 0:p.chapterIsCompleted)==null?void 0:_[e.languageCode],isPublished:(s=(U=e.subBook.chapterInfos[0])==null?void 0:U.chapterIsPublished)==null?void 0:s[e.languageCode],onClick:e.onChapterClick}),e.isQuranOrZabur&&e.book&&t.jsx(q,{chapterInfo:(m=(Z=e.book)==null?void 0:Z.subBooks[0])==null?void 0:m.chapterInfos[0],isCompleted:((Q=(T=(R=e.book)==null?void 0:R.subBooks[0].chapterInfos[0])==null?void 0:T.chapterIsCompleted)==null?void 0:Q[e.languageCode])||!1,isPublished:((L=(P=(B=e.book)==null?void 0:B.subBooks[0].chapterInfos[0])==null?void 0:P.chapterIsPublished)==null?void 0:L[e.languageCode])||!1,onClick:e.onChapterClick})]}),!e.isQuranOrZabur&&t.jsx(X,{children:e.subBook&&((W=e.subBook.chapterInfos)==null?void 0:W.map((r,O)=>{var C,j;return(r==null?void 0:r.chapterNumber)!==0&&t.jsx(q,{subBookInfo:e.subBook,chapterInfo:r,isCompleted:((C=r==null?void 0:r.chapterIsCompleted)==null?void 0:C[e.languageCode])||!1,isPublished:((j=r==null?void 0:r.chapterIsPublished)==null?void 0:j[e.languageCode])||!1,onClick:e.onChapterClick},O)}))}),e.isQuranOrZabur&&t.jsx(X,{children:e.book&&e.book.subBooks&&e.book.subBooks.map((r,O)=>{var C,j,D,$,y;return((C=r.chapterInfos[0])==null?void 0:C.chapterNumber)!==0&&t.jsx(q,{subBookInfo:r,chapterInfo:r.chapterInfos[0],isCompleted:r.chapterInfos&&((D=(j=r.chapterInfos[0])==null?void 0:j.chapterIsCompleted)==null?void 0:D[e.languageCode])||!1,isPublished:r.chapterInfos&&((y=($=r.chapterInfos[0])==null?void 0:$.chapterIsPublished)==null?void 0:y[e.languageCode])||!1,isSpecialBook:!0,onClick:()=>e.onChapterClick(r.chapterInfos&&(r==null?void 0:r.chapterInfos[0].chapterId))},O)})})]})]})}const Ge=o(u)(({isquranorzabur:e})=>({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",paddingRight:e=="true"?"120px":"0px",boxSizing:"border-box",maxWidth:"650px","@media screen and (max-width: 670px)":{paddingRight:"0px"}})),Ke=o(u)({display:"flex",marginBottom:"15px"}),ze=o("img")({width:"24px",height:"24px",marginRight:"10px"}),te=e=>t.jsxs(Ge,{isquranorzabur:e.isQuranOrZabur?"true":"false",children:[t.jsxs(Ke,{children:[t.jsx(ze,{src:le.icon_book}),t.jsx(I,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"700",children:`${e.bookTitle} text - ${e.language} - chapters:`})]}),!e.isQuranOrZabur&&e.bookInfo.subBooks.map((g,x)=>t.jsx(ee,{subBook:g,subBookTitleInfo:e.subBookTitleInfo||[],languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur,onChapterClick:e.onClickSquare},x)),e.isQuranOrZabur&&t.jsx(ee,{book:e.bookInfo,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur,onChapterClick:e.onClickSquare})]});o(u)({width:"100%",backgroundColor:"#F0F5FB",padding:"5px 20px"});const He=o(u)(({status:e})=>({width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #155D74",cursor:"pointer",backgroundColor:e==w?"#FFAA5D":e==F?"#155D74":"#fff",color:e==w?"#155D74":e==F?"#fff":"#155D74"})),oe=e=>{var g;return t.jsx(He,{status:e.audioStatus,onClick:()=>e.onClick(e.chapterId),children:t.jsx(I,{fontFamily:"Inter",fontSize:16,fontWeight:"500",children:e.chapterNumber==0?"Intr":(g=e.chapterNumber)==null?void 0:g.toString()})})},Je=o(u)({margin:"10px 0px",display:"flex"}),Me=o(u)({width:"100px",minWidth:"100px",maxWidth:"200px",marginRight:"10px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",padding:"9px 0px"}}),Ye=o(u)({display:"flex",flexGrow:1}),Ve=o(u)({display:"flex",justifyContent:"center",marginRight:"3px",minWidth:"45px","& >*":{flexGrow:1}}),ae=o(u)({display:"flex",flexWrap:"wrap",gap:"2px"});function ne(e){var g,x;return t.jsxs(Je,{children:[!e.isQuranOrZabur&&e.subBook&&t.jsx(Me,{children:t.jsx(I,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"400",children:(g=e.subBook.subBookTitle)==null?void 0:g[e.languageCode]})}),t.jsxs(Ye,{children:[t.jsx(Ve,{}),!e.isQuranOrZabur&&t.jsx(ae,{children:e.subBook&&((x=e.subBook.chapterInfos)==null?void 0:x.map((a,f)=>{const d=(Array.isArray(a.chapterAudio)?a.chapterAudio:[]).find(b=>b.language===e.languageCode);return a.chapterNumber!==0&&t.jsx(oe,{chapterNumber:a.chapterNumber,chapterId:a.chapterId,audioStatus:d!=null&&d.isPublished?w:d!=null&&d.isCompleted?F:K,onClick:e.moveToAudioOverview},f)}))}),e.isQuranOrZabur&&t.jsx(ae,{children:e.book&&e.book.subBooks&&e.book.subBooks.map((a,f)=>{var b,p;const d=(Array.isArray((b=a==null?void 0:a.chapterInfos[0])==null?void 0:b.chapterAudio)?a==null?void 0:a.chapterInfos[0].chapterAudio:[]).find(_=>_.language==e.languageCode);return a.chapterInfos[0].chapterNumber!=0&&t.jsx(oe,{chapterNumber:a==null?void 0:a.subBookNumber,chapterId:(p=a==null?void 0:a.chapterInfos[0])==null?void 0:p.chapterId,audioStatus:d!=null&&d.isPublished?w:d!=null&&d.isCompleted?F:K,onClick:e.moveToAudioOverview},f)})})]})]})}const Xe=o(u)(({isquranorzabur:e})=>({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",paddingRight:e=="true"?"120px":"0px",boxSizing:"border-box",maxWidth:"650px","@media screen and (max-width: 670px)":{paddingRight:"0px"}})),et=o(u)({display:"flex",marginBottom:"15px"}),tt=o("img")({width:"24px",height:"24px",marginRight:"10px"}),re=e=>t.jsxs(Xe,{isquranorzabur:e.isQuranOrZabur?"true":"false",children:[t.jsxs(et,{children:[t.jsx(tt,{src:le.icon_audio}),t.jsx(I,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"700",children:`${e.bookTitle} Audio - ${e.language} - chapters:`})]}),!e.isQuranOrZabur&&e.bookInfo.subBooks.map((g,x)=>t.jsx(ne,{subBook:g,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur,moveToAudioOverview:e.moveToAudioOverview},x)),e.isQuranOrZabur&&t.jsx(ne,{book:e.bookInfo,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur,moveToAudioOverview:e.moveToAudioOverview})]}),ot=o(u)({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",maxWidth:"650px"}),at=o(u)({display:"flex"});o("img")({width:"24px",height:"24px",marginRight:"10px"});const nt=e=>t.jsx(ot,{children:t.jsx(at,{children:t.jsx(I,{color:"red",fontFamily:"'Baloo Da 2'",fontWeight:"700",fontSize:30,children:"Coming Soon"})})}),rt=o(u)({position:"relative",minHeight:"100vh",width:"100%","& >.MuiBox-root:first-of-type":{backgroundColor:"#1B7695","& >.MuiBox-root":{color:"#F6FCFC"}}}),it=o(u)({width:"100%",height:"calc(100% - 73px)",margin:"auto",marginTop:"73px"}),lt=o(u)({width:"650px",display:"flex",justifyContent:"center",alignItems:"center",margin:"20px 40px 0px 40px","& .MuiFormControl-root":{width:"unset",marginLeft:"15px"},"& .MuiBox-root":{fontFamily:'"Baloo Da 2" !important'},"@media screen and (max-width: 670px)":{width:"unset"}}),st=o(u)({margin:"20px 40px"}),ut=o(u)({margin:"5px 40px",padding:"15px",maxWidth:"650px",boxSizing:"border-box",display:"flex",justifyContent:"center","& .MuiButtonBase-root":{boxSizing:"border-box",textTransform:"none",backgroundColor:"#FFAA5D",padding:"8px 15px",borderRadius:"0px",border:"1px solid #474747","&:hover":{backgroundColor:"#EECC5D"}}}),ie=[{value:"Text",label:"Text"},{value:"Audio",label:"Audio"},{value:"Reference",label:"Reference"}],ct=[{toolName:"Western",onClick:()=>{}},{toolName:"Arabic",onClick:()=>{}}],dt=e=>{const[g,x]=k.useState([]),[a,f]=k.useState(!1),[c,d]=k.useState(null),[b,p]=k.useState([]),[_,U]=k.useState([]),[s,Z]=k.useState(e.currentBook||M),[m,R]=k.useState(e.currentLanguage||"en"),[T,Q]=k.useState(ie[0].value),B=ke(),P=Se(),L=k.useCallback(()=>{var i;if(!((i=e.currentUser)!=null&&i.roles))return[];const n=e.currentUser.roles.reduce((l,h)=>{if(h.role!=="none"||e.currentUser.isAdmin){const S=Ie(h.language);l.some(v=>v.value===S)||l.push({value:S,label:h.language})}return l},[]);return e.currentLanguage||e.dispatch({type:A.SET_CURRENT_LANGUAGE,payload:{language:n[0].value}}),n},[e.currentUser]);k.useEffect(()=>{const n=L();x(n),n.length>0&&!n.some(i=>i.value===m)&&R(n[0].value)},[e.currentUser,m,L]),k.useEffect(()=>{(async()=>{try{const i=await Ze.getAllAppTexts();if(i&&i.length>0)switch(s){case Y:{const l=i.find(h=>h.pageTitle===Ae);p((l==null?void 0:l.texts)||[]);break}case G:{const l=i.find(h=>h.pageTitle===je);U((l==null?void 0:l.texts)||[]);break}}}catch{H.error("Failed to fetch sub book titles",{position:"top-right",draggable:!0,theme:"colored",transition:J,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})}})()},[s]),k.useEffect(()=>{s=="App Text"?j():(async()=>{f(!0);try{const i=e.bookInfos.find(l=>l.bookTitle.en===s);if(i)d(i);else{const l=await Ue.getBookInfoByTitle(s),h={bookId:l.bookId,bookImage:l.bookImage,bookTitle:l.bookTitle,subBooks:l.subBooks};d(l),e.dispatch({type:A.ADD_BOOKINFO,payload:{bookInfo:h}})}f(!1)}catch{H.error("Failed to fetch book information",{position:"top-right",draggable:!0,theme:"colored",transition:J,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),f(!1)}})()},[s,e.bookInfos]);const W=n=>{const i=n.target.value;R(i),e.dispatch({type:A.SET_CURRENT_LANGUAGE,payload:{language:i}})},r=n=>{const i=n.target.value;Q(i)},O=n=>{Z(n),e.dispatch({type:A.SET_BOOK,payload:{bookTitle:n}})},C=(n,i=!1)=>{const l=c==null?void 0:c.subBooks.find(v=>{var z;return(z=v==null?void 0:v.chapterInfos)==null?void 0:z.find(me=>me.chapterId==n)}),h=l==null?void 0:l.chapterInfos.find(v=>v.chapterId==n),S=(h==null?void 0:h.chapterNumber)||0,E={chapterId:n,isImport:i,subBookInfo:l,chapterInfo:h,languages:g};S?B("/admin/chapteroverview",{state:E}):B("/admin/introoverview",{state:E})},j=()=>{B("/admin/apptext")},D=n=>{const i=c==null?void 0:c.subBooks.find(S=>{var E;return(E=S==null?void 0:S.chapterInfos)==null?void 0:E.find(v=>v.chapterId==n)}),l=i==null?void 0:i.chapterInfos.find(S=>S.chapterId==n);B("/admin/audiooverview",{state:{chapterId:n,subBookInfo:i,chapterInfo:l,languages:g}})},$=()=>{localStorage.removeItem(we),e.dispatch({type:A.RESET_USER}),e.dispatch({type:A.RESET_BOOK}),e.dispatch({type:A.RESET_APP_TEXT_PAGES}),B("/admin")},y=s===M||s===G,N=pe(m),ue=()=>t.jsx(Be,{isLoggedIn:!0,username:e.currentUser.username,isAdmin:e.currentUser.isAdmin,isTranslationPage:!0,onLogOut:$}),ce=()=>t.jsx(st,{children:t.jsx(De,{books:Fe.map(n=>({bookTitle:n.bookTitle,onClick:()=>O(n.value)})),selectedBook:s})}),de=()=>t.jsxs(lt,{children:[t.jsx(I,{color:"#155D74",fontWeight:"700",fontFamily:"'Baloo Da 2'",children:`${s} ${y?"overview":""}`}),t.jsx(V,{label:"",options:g,value:m,backgroundColor:"#fff",textColor:"#155D74",onChange:W}),!y&&s!==_e&&s!==Ne&&s!==Ee&&s!==Re&&t.jsx(V,{label:"",options:ie,value:T,backgroundColor:"#fff",textColor:"#155D74",onChange:r})]}),ge=()=>T=="Text"&&t.jsx(ut,{children:t.jsx(Oe,{icon:t.jsx(ye,{}),label:`Import ${T} into ${N} ${s}`,onClick:()=>C((c==null?void 0:c.subBooks[1].chapterInfos[1].chapterId)||"",!0)})}),he=()=>t.jsx(t.Fragment,{children:c&&!y&&t.jsxs(t.Fragment,{children:[T==="Text"&&t.jsx(te,{bookTitle:s,language:N,languageCode:m,bookInfo:c,subBookTitleInfo:s===Y?b:s===G?_:[],isQuranOrZabur:!1,onClickSquare:C}),T==="Audio"&&t.jsx(re,{bookTitle:s,language:N,languageCode:m,bookInfo:c,isQuranOrZabur:!1,moveToAudioOverview:D}),T==="Reference"&&t.jsx(nt,{bookTitle:s,language:N,languageCode:m,bookInfo:c})]})}),xe=()=>t.jsx(t.Fragment,{children:c&&y&&t.jsxs(t.Fragment,{children:[t.jsx(te,{bookTitle:s,language:N,languageCode:m,bookInfo:c,isQuranOrZabur:!0,onClickSquare:C}),t.jsx(re,{bookTitle:s,language:N,languageCode:m,bookInfo:c,isQuranOrZabur:!0,moveToAudioOverview:D})]})}),fe=()=>t.jsxs(t.Fragment,{children:[he(),xe()]}),be=()=>t.jsxs(it,{children:[t.jsx(Le,{tools:ct}),ce(),de(),!y&&ge(),fe()]});return t.jsxs(t.Fragment,{children:[t.jsxs(rt,{flexDirection:P?"column":"row",children:[ue(),be()]}),t.jsx(Te,{}),a&&t.jsx(ve,{})]})};function gt(e){return{dispatch:e}}function ht(e){return{currentUser:e.user.currentUser,bookInfos:e.book.bookInfos,currentLanguage:e.book.language,currentBook:e.book.book}}const Bt=Ce(ht,gt)(dt);export{Bt as default};
