var na=Object.defineProperty;var sa=(e,r,o)=>r in e?na(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o;var Lt=(e,r,o)=>sa(e,typeof r!="symbol"?r+"":r,o);import{a as l,Y as rt,_ as w,j as s,v as Ae,V as Nt,W as $t,Q as Dt,U as ia,c as la,O as Zt}from"./createTheme-CESjDXJd.js";import{ae as ua,af as ca,ag as Ft,ah as da,ai as Bt,aj as gt,ak as _t,al as xt,O as pa,a3 as ha,aa as ze,s as C,am as ea,a7 as ma,an as we,ab as fa,B as O,V as Ht,r as ta,T as Oe,t as ba,W as ga,u as xa,K as va,F as ie,A as le,H as ue,q as ct,Q as ka,E as ya,w as Sa,a2 as Ca}from"./App-ACnKWV2j.js";import{d as Ta,S as Ia}from"./index-CktoK6Gz.js";import{T as Pa,B as wa}from"./index-CHPSpr2a.js";import{F as zt}from"./index-BqkR6IdS.js";import{c as Vt,b as Aa,o as La,k as Ut,v as Wt,B as Ba,i as _a}from"./index-CjTr2aLw.js";import{S as Rt}from"./index-C8ybWuM7.js";import{T as Ra}from"./index-DGCtSLm6.js";import{b as dt}from"./book.services-40XIe2lB.js";import"./index-BvG7Ce-h.js";import"./images-B-3euPqr.js";import"./TableContainer-hfo_qYZm.js";const Oa={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Ea(e,r,o=(u,c)=>u===c){return e.length===r.length&&e.every((u,c)=>o(u,r[c]))}const ja=2;function aa(e,r){return e-r}function Kt(e,r){var o;const{index:u}=(o=e.reduce((c,v,E)=>{const p=Math.abs(r-v);return c===null||p<c.distance||p===c.distance?{distance:p,index:E}:c},null))!=null?o:{};return u}function pt(e,r){if(r.current!==void 0&&e.changedTouches){const o=e;for(let u=0;u<o.changedTouches.length;u+=1){const c=o.changedTouches[u];if(c.identifier===r.current)return{x:c.clientX,y:c.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function vt(e,r,o){return(e-r)*100/(o-r)}function Ma(e,r,o){return(o-r)*e+r}function Na(e){if(Math.abs(e)<1){const o=e.toExponential().split("e-"),u=o[0].split(".")[1];return(u?u.length:0)+parseInt(o[1],10)}const r=e.toString().split(".")[1];return r?r.length:0}function $a(e,r,o){const u=Math.round((e-o)/r)*r+o;return Number(u.toFixed(Na(r)))}function Gt({values:e,newValue:r,index:o}){const u=e.slice();return u[o]=r,u.sort(aa)}function ht({sliderRef:e,activeIndex:r,setActive:o}){var u,c;const v=gt(e.current);if(!((u=e.current)!=null&&u.contains(v.activeElement))||Number(v==null||(c=v.activeElement)==null?void 0:c.getAttribute("data-index"))!==r){var E;(E=e.current)==null||E.querySelector(`[type="range"][data-index="${r}"]`).focus()}o&&o(r)}function mt(e,r){return typeof e=="number"&&typeof r=="number"?e===r:typeof e=="object"&&typeof r=="object"?Ea(e,r):!1}const Da={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},Fa=e=>e;let ft;function qt(){return ft===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?ft=CSS.supports("touch-action","none"):ft=!0),ft}function Ha(e){const{"aria-labelledby":r,defaultValue:o,disabled:u=!1,disableSwap:c=!1,isRtl:v=!1,marks:E=!1,max:p=100,min:A=0,name:D,onChange:ee,onChangeCommitted:ne,orientation:k="horizontal",rootRef:W,scale:K=Fa,step:z=1,shiftStep:fe=10,tabIndex:Q,value:Ee}=e,q=l.useRef(void 0),[be,L]=l.useState(-1),[ve,T]=l.useState(-1),[Le,Be]=l.useState(!1),ge=l.useRef(0),[te,de]=ua({controlled:Ee,default:o??A,name:"Slider"}),X=ee&&((n,i,d)=>{const y=n.nativeEvent||n,S=new y.constructor(y.type,y);Object.defineProperty(S,"target",{writable:!0,value:{value:i,name:D}}),ee(S,i,d)}),pe=Array.isArray(te);let j=pe?te.slice().sort(aa):[te];j=j.map(n=>n==null?A:rt(n,A,p));const xe=E===!0&&z!==null?[...Array(Math.floor((p-A)/z)+1)].map((n,i)=>({value:A+z*i})):E||[],F=xe.map(n=>n.value),{isFocusVisibleRef:Y,onBlur:Ve,onFocus:je,ref:Ue}=ca(),[ke,ye]=l.useState(-1),H=l.useRef(null),N=Ft(Ue,H),Me=Ft(W,N),Se=n=>i=>{var d;const y=Number(i.currentTarget.getAttribute("data-index"));je(i),Y.current===!0&&ye(y),T(y),n==null||(d=n.onFocus)==null||d.call(n,i)},Ce=n=>i=>{var d;Ve(i),Y.current===!1&&ye(-1),T(-1),n==null||(d=n.onBlur)==null||d.call(n,i)},G=(n,i)=>{const d=Number(n.currentTarget.getAttribute("data-index")),y=j[d],S=F.indexOf(y);let g=i;if(xe&&z==null){const re=F[F.length-1];g>re?g=re:g<F[0]?g=F[0]:g=g<y?F[S-1]:F[S+1]}if(g=rt(g,A,p),pe){c&&(g=rt(g,j[d-1]||-1/0,j[d+1]||1/0));const re=g;g=Gt({values:j,newValue:g,index:d});let se=d;c||(se=g.indexOf(re)),ht({sliderRef:H,activeIndex:se})}de(g),ye(d),X&&!mt(g,te)&&X(n,g,d),ne&&ne(n,g)},We=n=>i=>{var d;if(z!==null){const y=Number(i.currentTarget.getAttribute("data-index")),S=j[y];let g=null;(i.key==="ArrowLeft"||i.key==="ArrowDown")&&i.shiftKey||i.key==="PageDown"?g=Math.max(S-fe,A):((i.key==="ArrowRight"||i.key==="ArrowUp")&&i.shiftKey||i.key==="PageUp")&&(g=Math.min(S+fe,p)),g!==null&&(G(i,g),i.preventDefault())}n==null||(d=n.onKeyDown)==null||d.call(n,i)};da(()=>{if(u&&H.current.contains(document.activeElement)){var n;(n=document.activeElement)==null||n.blur()}},[u]),u&&be!==-1&&L(-1),u&&ke!==-1&&ye(-1);const Ke=n=>i=>{var d;(d=n.onChange)==null||d.call(n,i),G(i,i.target.valueAsNumber)},Ne=l.useRef(void 0);let V=k;v&&k==="horizontal"&&(V+="-reverse");const M=({finger:n,move:i=!1})=>{const{current:d}=H,{width:y,height:S,bottom:g,left:re}=d.getBoundingClientRect();let se;V.indexOf("vertical")===0?se=(g-n.y)/S:se=(n.x-re)/y,V.indexOf("-reverse")!==-1&&(se=1-se);let I;if(I=Ma(se,A,p),z)I=$a(I,z,A);else{const Pe=Kt(F,I);I=F[Pe]}I=rt(I,A,p);let Z=0;if(pe){i?Z=Ne.current:Z=Kt(j,I),c&&(I=rt(I,j[Z-1]||-1/0,j[Z+1]||1/0));const Pe=I;I=Gt({values:j,newValue:I,index:Z}),c&&i||(Z=I.indexOf(Pe),Ne.current=Z)}return{newValue:I,activeIndex:Z}},_=Bt(n=>{const i=pt(n,q);if(!i)return;if(ge.current+=1,n.type==="mousemove"&&n.buttons===0){ae(n);return}const{newValue:d,activeIndex:y}=M({finger:i,move:!0});ht({sliderRef:H,activeIndex:y,setActive:L}),de(d),!Le&&ge.current>ja&&Be(!0),X&&!mt(d,te)&&X(n,d,y)}),ae=Bt(n=>{const i=pt(n,q);if(Be(!1),!i)return;const{newValue:d}=M({finger:i,move:!0});L(-1),n.type==="touchend"&&T(-1),ne&&ne(n,d),q.current=void 0,J()}),oe=Bt(n=>{if(u)return;qt()||n.preventDefault();const i=n.changedTouches[0];i!=null&&(q.current=i.identifier);const d=pt(n,q);if(d!==!1){const{newValue:S,activeIndex:g}=M({finger:d});ht({sliderRef:H,activeIndex:g,setActive:L}),de(S),X&&!mt(S,te)&&X(n,S,g)}ge.current=0;const y=gt(H.current);y.addEventListener("touchmove",_,{passive:!0}),y.addEventListener("touchend",ae,{passive:!0})}),J=l.useCallback(()=>{const n=gt(H.current);n.removeEventListener("mousemove",_),n.removeEventListener("mouseup",ae),n.removeEventListener("touchmove",_),n.removeEventListener("touchend",ae)},[ae,_]);l.useEffect(()=>{const{current:n}=H;return n.addEventListener("touchstart",oe,{passive:qt()}),()=>{n.removeEventListener("touchstart",oe),J()}},[J,oe]),l.useEffect(()=>{u&&J()},[u,J]);const $e=n=>i=>{var d;if((d=n.onMouseDown)==null||d.call(n,i),u||i.defaultPrevented||i.button!==0)return;i.preventDefault();const y=pt(i,q);if(y!==!1){const{newValue:g,activeIndex:re}=M({finger:y});ht({sliderRef:H,activeIndex:re,setActive:L}),de(g),X&&!mt(g,te)&&X(i,g,re)}ge.current=0;const S=gt(H.current);S.addEventListener("mousemove",_,{passive:!0}),S.addEventListener("mouseup",ae)},$=vt(pe?j[0]:A,A,p),Te=vt(j[j.length-1],A,p)-$,De=(n={})=>{const i=_t(n),d={onMouseDown:$e(i||{})},y=w({},i,d);return w({},n,{ref:Me},y)},Fe=n=>i=>{var d;(d=n.onMouseOver)==null||d.call(n,i);const y=Number(i.currentTarget.getAttribute("data-index"));T(y)},Ge=n=>i=>{var d;(d=n.onMouseLeave)==null||d.call(n,i),T(-1)};return{active:be,axis:V,axisProps:Da,dragging:Le,focusedThumbIndex:ke,getHiddenInputProps:(n={})=>{var i;const d=_t(n),y={onChange:Ke(d||{}),onFocus:Se(d||{}),onBlur:Ce(d||{}),onKeyDown:We(d||{})},S=w({},d,y);return w({tabIndex:Q,"aria-labelledby":r,"aria-orientation":k,"aria-valuemax":K(p),"aria-valuemin":K(A),name:D,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":(i=e.step)!=null?i:void 0,disabled:u},n,S,{style:w({},Oa,{direction:v?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:De,getThumbProps:(n={})=>{const i=_t(n),d={onMouseOver:Fe(i||{}),onMouseLeave:Ge(i||{})};return w({},n,i,d)},marks:xe,open:ve,range:pe,rootRef:Me,trackLeap:Te,trackOffset:$,values:j,getThumbStyle:n=>({pointerEvents:be!==-1&&be!==n?"none":void 0})}}const za=e=>!e||!xt(e);function Va(e){return ha("MuiSlider",e)}const ce=pa("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Ua=e=>{const{open:r}=e;return{offset:ze(r&&ce.valueLabelOpen),circle:ce.valueLabelCircle,label:ce.valueLabelLabel}};function Wa(e){const{children:r,className:o,value:u}=e,c=Ua(e);return r?l.cloneElement(r,{className:ze(r.props.className)},s.jsxs(l.Fragment,{children:[r.props.children,s.jsx("span",{className:ze(c.offset,o),"aria-hidden":!0,children:s.jsx("span",{className:c.circle,children:s.jsx("span",{className:c.label,children:u})})})]})):null}const Ka=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","shiftStep","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function Yt(e){return e}const Ga=C("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:o}=e;return[r.root,r[`color${Ae(o.color)}`],o.size!=="medium"&&r[`size${Ae(o.size)}`],o.marked&&r.marked,o.orientation==="vertical"&&r.vertical,o.track==="inverted"&&r.trackInverted,o.track===!1&&r.trackFalse]}})(({theme:e})=>{var r;return{borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${ce.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${ce.dragging}`]:{[`& .${ce.thumb}, & .${ce.track}`]:{transition:"none"}},variants:[...Object.keys(((r=e.vars)!=null?r:e).palette).filter(o=>{var u;return((u=e.vars)!=null?u:e).palette[o].main}).map(o=>({props:{color:o},style:{color:(e.vars||e).palette[o].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}}),qa=C("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,r)=>r.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Ya=C("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,r)=>r.track})(({theme:e})=>{var r;return{display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.keys(((r=e.vars)!=null?r:e).palette).filter(o=>{var u;return((u=e.vars)!=null?u:e).palette[o].main}).map(o=>({props:{color:o,track:"inverted"},style:w({},e.vars?{backgroundColor:e.vars.palette.Slider[`${o}Track`],borderColor:e.vars.palette.Slider[`${o}Track`]}:w({backgroundColor:Nt(e.palette[o].main,.62),borderColor:Nt(e.palette[o].main,.62)},e.applyStyles("dark",{backgroundColor:$t(e.palette[o].main,.5)}),e.applyStyles("dark",{borderColor:$t(e.palette[o].main,.5)})))}))]}}),Xa=C("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,r)=>{const{ownerState:o}=e;return[r.thumb,r[`thumbColor${Ae(o.color)}`],o.size!=="medium"&&r[`thumbSize${Ae(o.size)}`]]}})(({theme:e})=>{var r;return{position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${ce.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.keys(((r=e.vars)!=null?r:e).palette).filter(o=>{var u;return((u=e.vars)!=null?u:e).palette[o].main}).map(o=>({props:{color:o},style:{[`&:hover, &.${ce.focusVisible}`]:w({},e.vars?{boxShadow:`0px 0px 0px 8px rgba(${e.vars.palette[o].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${Dt(e.palette[o].main,.16)}`},{"@media (hover: none)":{boxShadow:"none"}}),[`&.${ce.active}`]:w({},e.vars?{boxShadow:`0px 0px 0px 14px rgba(${e.vars.palette[o].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${Dt(e.palette[o].main,.16)}`})}}))]}}),Ja=C(Wa,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,r)=>r.valueLabel})(({theme:e})=>w({zIndex:1,whiteSpace:"nowrap"},e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${ce.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${ce.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]})),Qa=C("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>ea(e)&&e!=="markActive",overridesResolver:(e,r)=>{const{markActive:o}=e;return[r.mark,o&&r.markActive]}})(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]})),Za=C("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>ea(e)&&e!=="markLabelActive",overridesResolver:(e,r)=>r.markLabel})(({theme:e})=>w({},e.typography.body2,{color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]})),eo=e=>{const{disabled:r,dragging:o,marked:u,orientation:c,track:v,classes:E,color:p,size:A}=e,D={root:["root",r&&"disabled",o&&"dragging",u&&"marked",c==="vertical"&&"vertical",v==="inverted"&&"trackInverted",v===!1&&"trackFalse",p&&`color${Ae(p)}`,A&&`size${Ae(A)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",r&&"disabled",A&&`thumbSize${Ae(A)}`,p&&`thumbColor${Ae(p)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return fa(D,Va,E)},to=({children:e})=>e,ao=l.forwardRef(function(r,o){var u,c,v,E,p,A,D,ee,ne,k,W,K,z,fe,Q,Ee,q,be,L,ve,T,Le,Be,ge;const te=ma({props:r,name:"MuiSlider"}),de=ia(),{"aria-label":X,"aria-valuetext":pe,"aria-labelledby":j,component:xe="span",components:F={},componentsProps:Y={},color:Ve="primary",classes:je,className:Ue,disableSwap:ke=!1,disabled:ye=!1,getAriaLabel:H,getAriaValueText:N,marks:Me=!1,max:Se=100,min:Ce=0,orientation:G="horizontal",shiftStep:We=10,size:Ke="medium",step:Ne=1,scale:V=Yt,slotProps:M,slots:_,track:ae="normal",valueLabelDisplay:oe="off",valueLabelFormat:J=Yt}=te,$e=la(te,Ka),$=w({},te,{isRtl:de,max:Se,min:Ce,classes:je,disabled:ye,disableSwap:ke,orientation:G,marks:Me,color:Ve,size:Ke,step:Ne,shiftStep:We,scale:V,track:ae,valueLabelDisplay:oe,valueLabelFormat:J}),{axisProps:Te,getRootProps:De,getHiddenInputProps:Fe,getThumbProps:Ge,open:nt,active:Ie,axis:_e,focusedThumbIndex:n,range:i,dragging:d,marks:y,values:S,trackOffset:g,trackLeap:re,getThumbStyle:se}=Ha(w({},$,{rootRef:o}));$.marked=y.length>0&&y.some(R=>R.label),$.dragging=d,$.focusedThumbIndex=n;const I=eo($),Z=(u=(c=_==null?void 0:_.root)!=null?c:F.Root)!=null?u:Ga,Pe=(v=(E=_==null?void 0:_.rail)!=null?E:F.Rail)!=null?v:qa,st=(p=(A=_==null?void 0:_.track)!=null?A:F.Track)!=null?p:Ya,qe=(D=(ee=_==null?void 0:_.thumb)!=null?ee:F.Thumb)!=null?D:Xa,it=(ne=(k=_==null?void 0:_.valueLabel)!=null?k:F.ValueLabel)!=null?ne:Ja,Ye=(W=(K=_==null?void 0:_.mark)!=null?K:F.Mark)!=null?W:Qa,Xe=(z=(fe=_==null?void 0:_.markLabel)!=null?fe:F.MarkLabel)!=null?z:Za,lt=(Q=(Ee=_==null?void 0:_.input)!=null?Ee:F.Input)!=null?Q:"input",Je=(q=M==null?void 0:M.root)!=null?q:Y.root,kt=(be=M==null?void 0:M.rail)!=null?be:Y.rail,Qe=(L=M==null?void 0:M.track)!=null?L:Y.track,Ze=(ve=M==null?void 0:M.thumb)!=null?ve:Y.thumb,et=(T=M==null?void 0:M.valueLabel)!=null?T:Y.valueLabel,yt=(Le=M==null?void 0:M.mark)!=null?Le:Y.mark,St=(Be=M==null?void 0:M.markLabel)!=null?Be:Y.markLabel,Ct=(ge=M==null?void 0:M.input)!=null?ge:Y.input,Tt=we({elementType:Z,getSlotProps:De,externalSlotProps:Je,externalForwardedProps:$e,additionalProps:w({},za(Z)&&{as:xe}),ownerState:w({},$,Je==null?void 0:Je.ownerState),className:[I.root,Ue]}),It=we({elementType:Pe,externalSlotProps:kt,ownerState:$,className:I.rail}),Pt=we({elementType:st,externalSlotProps:Qe,additionalProps:{style:w({},Te[_e].offset(g),Te[_e].leap(re))},ownerState:w({},$,Qe==null?void 0:Qe.ownerState),className:I.track}),Re=we({elementType:qe,getSlotProps:Ge,externalSlotProps:Ze,ownerState:w({},$,Ze==null?void 0:Ze.ownerState),className:I.thumb}),wt=we({elementType:it,externalSlotProps:et,ownerState:w({},$,et==null?void 0:et.ownerState),className:I.valueLabel}),tt=we({elementType:Ye,externalSlotProps:yt,ownerState:$,className:I.mark}),at=we({elementType:Xe,externalSlotProps:St,ownerState:$,className:I.markLabel}),At=we({elementType:lt,getSlotProps:Fe,externalSlotProps:Ct,ownerState:$});return s.jsxs(Z,w({},Tt,{children:[s.jsx(Pe,w({},It)),s.jsx(st,w({},Pt)),y.filter(R=>R.value>=Ce&&R.value<=Se).map((R,U)=>{const ot=vt(R.value,Ce,Se),He=Te[_e].offset(ot);let he;return ae===!1?he=S.indexOf(R.value)!==-1:he=ae==="normal"&&(i?R.value>=S[0]&&R.value<=S[S.length-1]:R.value<=S[0])||ae==="inverted"&&(i?R.value<=S[0]||R.value>=S[S.length-1]:R.value>=S[0]),s.jsxs(l.Fragment,{children:[s.jsx(Ye,w({"data-index":U},tt,!xt(Ye)&&{markActive:he},{style:w({},He,tt.style),className:ze(tt.className,he&&I.markActive)})),R.label!=null?s.jsx(Xe,w({"aria-hidden":!0,"data-index":U},at,!xt(Xe)&&{markLabelActive:he},{style:w({},He,at.style),className:ze(I.markLabel,at.className,he&&I.markLabelActive),children:R.label})):null]},U)}),S.map((R,U)=>{const ot=vt(R,Ce,Se),He=Te[_e].offset(ot),he=oe==="off"?to:it;return s.jsx(he,w({},!xt(he)&&{valueLabelFormat:J,valueLabelDisplay:oe,value:typeof J=="function"?J(V(R),U):J,index:U,open:nt===U||Ie===U||oe==="on",disabled:ye},wt,{children:s.jsx(qe,w({"data-index":U},Re,{className:ze(I.thumb,Re.className,Ie===U&&I.active,n===U&&I.focusVisible),style:w({},He,se(U),Re.style),children:s.jsx(lt,w({"data-index":U,"aria-label":H?H(U):X,"aria-valuenow":V(R),"aria-labelledby":j,"aria-valuetext":N?N(V(R),U):pe,value:S[U]},At))}))}),U)})]}))}),oo=C(O)({position:"relative",minHeight:"100vh",width:"100%","& >.MuiBox-root:first-of-type":{backgroundColor:"#1B7695","& >.MuiBox-root":{color:"#F6FCFC"}}}),ro=C(O)({margin:"20px 40px"}),no=C(O)({margin:"20px 40px",display:"flex",alignItems:"center","@media screen and (max-width: 800px)":{display:"block"}}),so=C(O)({height:"40px",display:"flex",alignItems:"center",cursor:"pointer",marginRight:"250px",transitionDuration:".25s","&:hover":{transform:"scale(1.1)"},"& .MuiSvgIcon-root":{width:"16px",marginRight:"10px",fill:"#155D74"},"@media screen and (max-width: 1050px)":{marginRight:"100px"},"@media screen and (max-width: 900px)":{marginRight:"30px"}}),io=C(O)({display:"flex",justifyContent:"space-between",alignItems:"center","& >.MuiBox-root":{minWidth:"100px",marginRight:"20px"},"& > .MuiFormControl-root":{marginRight:"20px"},"@media screen and (max-width: 900px)":{"& >.MuiBox-root":{minWidth:"50px",marginRight:"10px"}},"@media screen and (max-width: 650px)":{display:"block","& > .MuiFormControl-root":{alignItems:"start","& .MuiInputBase-root":{width:"100%"}}}}),lo=C(O)({width:"100%",height:"calc(100% - 73px)",margin:"auto",marginTop:"73px"}),Xt=C(O)({height:"calc(100% - 73px)",margin:"20px 40px","& :nth-of-type(2)":{border:"1px solid #A1A1A1",borderRadius:"5px","& input":{width:"100%",cursor:"pointer"}}}),uo=C(O)({display:"flex",alignItems:"center",justifyContent:"space-between",margin:"20px 40px",boxSizing:"border-box"}),bt=C(O)(({isdisable:e})=>({display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#FFAA5D",color:"#474747",border:"1px solid #474747",cursor:e=="true"?"not-allowed":"pointer",opacity:e=="true"?".8":"1","& :hover":{backgroundColor:"#DD883B"},"& button":{textTransform:"capitalize",borderRadius:"0px",width:"100%","& .MuiBox-root":{backgroundColor:"transparent"}}})),co=C(O)({display:"flex",justifyContent:"space-between",width:"20%",alignItems:"center"}),po=C(O)({boxSizing:"border-box",margin:"20px 40px"}),ho=C(O)({marginTop:"15px","& >.MuiPaper-root":{width:"100%",marginLeft:"0px"}});C(O)({display:"flex",backgroundColor:"#007bff",borderRadius:"10px",height:"10px",boxSizing:"border-box",margin:"20px 40px",cursor:"pointer"});C(O)({position:"absolute",height:"100%",cursor:"pointer",transition:"background-color 0.3s"});C(O)({position:"absolute"});C(O)({display:"flex",boxSizing:"border-box",margin:"20px 40px"});const mo=C(O)({display:"flex",alignItems:"center",margin:"20px 40px"});class fo{constructor(){Lt(this,"uploadAudio",r=>new Promise((o,u)=>{const c=Vt+"/audio/uploadAudio";Ht.post(c,r).then(v=>{o(v.data)}).catch(v=>{u(v)})}));Lt(this,"saveMarker",r=>new Promise((o,u)=>{const c=Vt+"/audio/saveMarker";Ht.post(c,r).then(v=>{o(v.data)}).catch(v=>{u(v)})}))}}const Jt=new fo;var Ot={},bo=Zt;Object.defineProperty(Ot,"__esModule",{value:!0});var oa=Ot.default=void 0,go=bo(ta()),xo=s;oa=Ot.default=(0,go.default)((0,xo.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");var Et={},vo=Zt;Object.defineProperty(Et,"__esModule",{value:!0});var ra=Et.default=void 0,ko=vo(ta()),yo=s;ra=Et.default=(0,ko.default)((0,yo.jsx)("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"}),"Pause");const So=C(O)({width:"100%",display:"flex",alignItems:"center"}),Co=C(O)({width:"100%",overflow:"hidden",padding:"0px 10px"}),To=C(ao)({color:"red",opacity:"1",height:"5px","& .MuiSlider-thumb":{width:"13.25px",height:"14px",color:"red",transition:"0.3s cubic-bezier(.47,1.64,.41,.8)","&::before":{boxShadow:"0 2px 12px 0 rgba(0,0,0,0.4)"},"&:hover, &.Mui-focusVisible":{boxShadow:"0px 0px 0px 8px rgb(0 0 0 / 16%)"},"&.Mui-active":{width:20,height:20}}}),Io=C(O)({display:"flex",alignItems:"center",justifyContent:"space-between"}),Po=C(O)({display:"flex",marginRight:"20px"}),Qt=C(O)({cursor:"pointer"});function wo(e){const[r,o]=l.useState(0),[u,c]=l.useState(e.currentTime),v=l.useRef(new Audio);l.useEffect(()=>{const k=v.current;e.src&&k.src!==e.src&&(k.src=e.src,k.load(),k.oncanplaythrough=()=>{e.isPlaying&&k.play()});const W=()=>{o(k.duration),e.setAudioDuration(k.duration)},K=()=>{e.setCurrentTime(Math.floor(k.currentTime)),e.endTime&&k.currentTime>=e.endTime&&(k.pause(),e.setIsPlaying(!1))};return k.addEventListener("loadedmetadata",W),k.addEventListener("timeupdate",K),()=>{k.removeEventListener("loadedmetadata",W),k.removeEventListener("timeupdate",K)}},[e.src,e.isPlaying,e.startTime,e.endTime]),l.useEffect(()=>{c(e.currentTime)},[e.currentTime]),l.useEffect(()=>{e.setCurrentTime(u)},[u]),l.useEffect(()=>{const k=v.current;e.isPlaying?(k.currentTime=e.startTime,k.play()):k.pause()},[e.isPlaying,e.startTime,e.endTime]);const E=(k,W)=>{const K=v.current;if(K){const z=Array.isArray(W)?W[0]:W;K.currentTime=z,c(z),e.setCurrentTime(z),e.setStartTime(z),e.onTimeChange(z),e.setCurrentAudioHandler("Audio Player"),K.play().catch(fe=>{console.error("Error playing audio after selecting a point:",fe)}),e.setIsPlaying(!0)}},p=()=>{v.current.pause()},A=()=>{v.current.play().catch(W=>{console.error("Error resuming playback after dragging:",W)})},D=k=>{const W=Math.floor(k/60),K=Math.floor(k%60);return`${W}:${K<10?`0${K}`:K}`},ee=()=>s.jsxs(Co,{children:[s.jsx(To,{"aria-label":"time-indicator",value:u,min:0,max:Math.floor(r),step:1,onChange:E,onMouseDown:p,onMouseUp:A}),s.jsxs(Io,{children:[s.jsx(Oe,{children:D(u)}),s.jsx(Oe,{children:"-"+D(Math.floor(r-u))})]})]}),ne=()=>s.jsx(Po,{children:e.isPlaying?s.jsx(Qt,{onClick:()=>e.setIsPlaying(!1),children:s.jsx(ra,{})}):s.jsx(Qt,{onClick:()=>e.setIsPlaying(!0),children:s.jsx(oa,{})})});return s.jsxs(So,{children:[ne(),ee()]})}const Ao=C(O)({display:"flex",backgroundColor:"#007bff",borderRadius:"10px",height:"10px",boxSizing:"border-box",margin:"20px 40px",cursor:"pointer",position:"relative"}),Lo=C(O)(({isactive:e})=>({position:"absolute",width:"5px",height:e=="true"?"20px":"10px",backgroundColor:e=="true"?"orange":"red",boxShadow:e=="true"?"0 0 10px 2px rgba(255, 165, 0, 0.5)":"none",transition:"background-color 0.3s ease, box-shadow 0.3s ease",bottom:e=="true"?"-5px":"0px"}));function Bo(e){const r=o=>{const u=o.currentTarget,c=o.clientX-u.getBoundingClientRect().left;let v=null;for(let E=0;E<e.startTimes.length;E++){const p=e.startTimes[E]/e.duration*u.offsetWidth,A=E+1<e.startTimes.length?e.startTimes[E+1]/e.duration*u.offsetWidth:u.offsetWidth;if(c>=p&&c<A){v=e.startTimes[E];break}}e.setCurrentAudioHandler("Time Line"),e.setAudioStartTime(v||0)};return l.useEffect(()=>{e.setAudioStartTime(e.activeStartTime)},[e.activeStartTime]),s.jsx(Ao,{onClick:r,children:e.startTimes.map((o,u)=>s.jsx(Lo,{isactive:o===e.activeStartTime?"true":"false",style:{left:`${o/e.duration*100}%`}},u))})}const _o=[{toolName:"Western",onClick:()=>{}},{toolName:"Arabic",onClick:()=>{}}];function Ro(e){var jt;const r=ga(),o=r.state,[u,c]=l.useState(!1),[v,E]=l.useState(null),[p,A]=l.useState(o==null?void 0:o.subBookInfo),[D,ee]=l.useState(o==null?void 0:o.chapterInfo),[ne,k]=l.useState([]),[W,K]=l.useState([]),[z,fe]=l.useState([]),[Q,Ee]=l.useState(e.currentBook),[q,be]=l.useState((jt=o==null?void 0:o.subBookInfo)==null?void 0:jt.subBookId),[L,ve]=l.useState(o==null?void 0:o.chapterId),[T,Le]=l.useState(e.currentLanguage),[Be,ge]=l.useState(0),[te,de]=l.useState(0),[X,pe]=l.useState(!1),[j,xe]=l.useState(!1),[F,Y]=l.useState(""),[Ve,je]=l.useState(""),[Ue,ke]=l.useState(""),[ye,H]=l.useState(""),[N,Me]=l.useState(null),[Se,Ce]=l.useState(""),[G,We]=l.useState(null),[Ke,Ne]=l.useState(""),[V,M]=l.useState([]),[_,ae]=l.useState([]),[oe,J]=l.useState(0),[$e,$]=l.useState(0),[Te,De]=l.useState(0),[Fe,Ge]=l.useState(0),[nt,Ie]=l.useState(!1),_e=l.useRef(new Audio),n=xa(),i=va(),d=l.useMemo(()=>{var t;return(t=r==null?void 0:r.state)==null?void 0:t.languages},[e.currentUser]);l.useEffect(()=>{window.scrollTo({top:0})},[]);const y=()=>{localStorage.removeItem(Aa),e.dispatch({type:ie.RESET_USER}),e.dispatch({type:ie.RESET_BOOK}),e.dispatch({type:ie.RESET_APP_TEXT_PAGES}),n("/admin")},S=()=>s.jsx(Sa,{isLoggedIn:!0,username:e.currentUser.username,isAdmin:e.currentUser.isAdmin,isTranslationPage:!0,onLogOut:y}),g=l.useCallback(async t=>(c(!0),await dt.getChapterInfoByChapterId(t)),[L]);l.useEffect(()=>{(async()=>{var a;c(!0);try{const b=e.bookInfos.find(x=>x.bookTitle.en==Q);if(b){E(b);const f=Array.from(new Set(b.subBooks.map(m=>m.subBookId))).map(m=>b.subBooks.find(P=>P.subBookId===m)).map(m=>{var P;return{label:(P=m.subBookTitle)==null?void 0:P[T],value:m.subBookId}});K(f),f.some(m=>m.value===q)||be(((a=f[0])==null?void 0:a.value)||"")}if(L){const x=e.chapterInfos.find(f=>f.chapterId==L);x?ee(x):g(L).then(f=>{ee(f),e.dispatch({type:ie.ADD_CHAPTERINFO,payload:{chapterInfo:f}}),c(!1)}).catch(()=>{c(!1)})}}catch{le.error("Failed to load book information",{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})}finally{c(!1)}})()},[Q]),l.useEffect(()=>{var x,f,m,P,B;const t=e.bookInfos.find(h=>(h==null?void 0:h.bookTitle.en)==e.currentBook),a=t==null?void 0:t.subBooks.find(h=>h.subBookId==q);a&&A(a),H(((x=a==null?void 0:a.subBookTitle)==null?void 0:x[T])||""),Y(((f=a==null?void 0:a.subBookTitle)==null?void 0:f.ar)||""),ke(((m=a==null?void 0:a.subBookTitle)==null?void 0:m.en)||""),je(((P=a==null?void 0:a.subBookTitle)==null?void 0:P.transliteration)||"");const b=(B=a==null?void 0:a.chapterInfos)==null?void 0:B.map(h=>({value:h.chapterId,label:h.chapterNumber==0?"Introduction":h.chapterNumber.toString()}));b&&o.chapterId?(fe(b),ve(o.chapterId)):b&&(fe(b),ve(b[0].value))},[q,e.currentBook]),l.useEffect(()=>{const t=e.chapterInfos.find(a=>a.chapterId==L);t?(ee(t),k((t==null?void 0:t.verses)||[])):g(L).then(a=>{ee(a),k(a.verses||[]),e.dispatch({type:ie.ADD_CHAPTERINFO,payload:{chapterInfo:a}}),c(!1)}).catch(()=>{ge(0),de(0),pe(!1),xe(!1),le.warning("Chapter is empty.",{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),c(!1)}),o.chapterId=""},[L]),l.useEffect(()=>{var x,f,m,P,B,h;de(0);const t=(x=D==null?void 0:D.chapterAudio)==null?void 0:x.find(me=>me.language==T),a=(t==null?void 0:t.isCompleted)||!1,b=(t==null?void 0:t.isPublished)||!1;pe(a),xe(b),ge(((f=D==null?void 0:D.verses)==null?void 0:f.length)||0),(m=D.verses)==null||m.map(me=>de(ut=>{var Mt;return(Mt=me==null?void 0:me.verseAudioStart)!=null&&Mt[T]?ut+1:ut})),H(((P=p==null?void 0:p.subBookTitle)==null?void 0:P[T])||""),Y(((B=p==null?void 0:p.subBookTitle)==null?void 0:B.ar)||""),ke(((h=p==null?void 0:p.subBookTitle)==null?void 0:h.en)||""),ve(D.chapterId)},[ne,v,p,D,T]);const re=t=>{Ee(t),n("/admin/bookoverview"),e.dispatch({type:ie.SET_BOOK,payload:{bookTitle:t}})},se=()=>s.jsx(ro,{children:s.jsx(wa,{books:La.map(t=>({bookTitle:t.bookTitle,onClick:()=>re(t.value)})),selectedBook:Q})}),I=t=>{const a=t.target.value;be(a)},Z=t=>{const a=t.target.value;ve(a)},Pe=t=>{const a=t.target.value;Le(a),e.dispatch({type:ie.SET_CURRENT_LANGUAGE,payload:{language:a}})},st=()=>s.jsxs(no,{children:[s.jsxs(so,{onClick:()=>n("/admin/bookoverview"),children:[s.jsx(Ta,{}),s.jsx(Oe,{fontFamily:"Inter",color:"#155D74",fontWeight:"500",children:"overview"})]}),s.jsxs(io,{children:[s.jsx(Oe,{fontFamily:"Inter",color:"#155D74",fontWeight:"500",children:Q==Ut||Q==Wt?"Go to: ":"Go to Surah: "}),s.jsx(Rt,{label:"",options:W,value:W.find(t=>t.value===q)?q:"",backgroundColor:"#fff",textColor:"#155D74",onChange:I}),(Q==Ut||Q==Wt)&&s.jsx(Rt,{label:"",options:z,value:z.find(t=>t.value===L)?L:"",backgroundColor:"#fff",textColor:"#155D74",onChange:Z}),s.jsx(Rt,{label:"",options:d,value:T,backgroundColor:"#fff",textColor:"#155D74",onChange:Pe})]})]}),qe=t=>{const a={chapterAudio:t.audio,chapterId:t._id,chapterNumber:t.chapterNumber,chapterTranslated:t.isTranslated,chapterIsCompleted:t.isCompleted,chapterIsPublished:t.isPublished,subBookId:t.subBook},b=e.bookInfos.map(x=>({...x,subBooks:x.subBooks.map(f=>({...f,chapterInfos:f.chapterInfos.map(m=>m.chapterId===L?{...m,...a}:m)}))}));e.dispatch({type:ie.SET_BOOKINFOS,payload:{bookInfos:b}}),e.dispatch({type:ie.UPDATE_CHAPTERINFOS,payload:{chapterInfo:a}})},it=t=>{const a={chapterInfos:(p==null?void 0:p.chapterInfos)||[],subBookId:(p==null?void 0:p.subBookId)||"",subBookNumber:(p==null?void 0:p.subBookNumber)||1,subBookTitle:t.title,noChapter:!0},b=e.bookInfos.map(x=>({...x,subBooks:x.subBooks.map(f=>f.subBookId==q?{...f,...a}:f)}));e.dispatch({type:ie.SET_BOOKINFOS,payload:{bookInfos:b}})},Ye=async t=>{var x,f;const a=(x=e.chapterInfos)==null?void 0:x.find(m=>m.chapterId==L),b=(f=a==null?void 0:a.chapterAudio)==null?void 0:f.some(m=>m.language==T);if(a&&b){pe(t),xe(t&&j),c(!0);const P=(a==null?void 0:a.chapterAudio).map(h=>h.language==T?{...h,isCompleted:!X,isPublished:t&&j}:h),B={chapterNumber:a.chapterNumber||1,subBook:a.subBookId||"",audio:P,isTranslated:a.chapterTranslated,isCompleted:a.chapterIsCompleted,isPublished:a.chapterIsPublished};dt.updateChapterInfo({chapterId:L,newChapterInfo:B}).then(h=>{const me={chapterId:h._id,chapterNumber:h.chapterNumber,chapterTranslated:h.isTranslated,chapterAudio:h.audio,subBookId:h.subBook,chapterIsCompleted:h.isCompleted,chapterIsPublished:h.isPublished,verses:h.verses};qe(h),Re(me),le.success(`Success to ${t?"complete":"incomplete"} the audio`,{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),c(!1)}).catch(()=>{le.error("Failed to complete the audio",{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),c(!1)})}else le.error("Failed to complete the chapter because of no audio",{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})},Xe=async t=>{var x,f;const a=(x=e.chapterInfos)==null?void 0:x.find(m=>m.chapterId==L),b=(f=a==null?void 0:a.chapterAudio)==null?void 0:f.some(m=>m.language==T);if(a&&b&&X){xe(t),c(!0);const P=(a==null?void 0:a.chapterAudio).map(h=>h.language==T?{...h,isPublished:!j}:h),B={chapterNumber:a.chapterNumber||1,subBook:a.subBookId||"",audio:P,isTranslated:a.chapterTranslated,isCompleted:a.chapterIsCompleted,isPublished:a.chapterIsPublished};dt.updateChapterInfo({chapterId:L,newChapterInfo:B}).then(h=>{const me={chapterId:h._id,chapterNumber:h.chapterNumber,chapterTranslated:h.isTranslated,chapterAudio:h.audio,subBookId:h.subBook,chapterIsCompleted:h.isCompleted,chapterIsPublished:h.isPublished,verses:h.verses};qe(h),Re(me),le.success(`Success to ${t?"publish":"withhold"} the audio`,{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),c(!1)}).catch(()=>{le.error("Failed to publish the audio",{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),c(!1)})}else le.error("Failed to publish the chapter because of no audio",{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})},lt=t=>{T=="en"?ke(t):T=="ar"&&Y(t),H(t)},Je=t=>{T=="ar"&&H(t),Y(t)},kt=t=>{T=="en"&&H(t),ke(t)},Qe=(t,a,b,x)=>{const f={[`${T}`]:t,ar:a,transliteration:b,en:x},m={...p,subBookTitle:f},P={title:m.subBookTitle,number:m.subBookNumber||1,book:(v==null?void 0:v.bookId)||"",noChapter:!0};p!=null&&p.subBookId?(c(!0),dt.updateSubBookInfo({subBookId:p==null?void 0:p.subBookId,newSubBookInfo:P}).then(B=>{it(B),c(!1)}).catch(()=>{le.error("Failed to update the summary of chapter",{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),c(!1)})):le.error(Ca,{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})},Ze=()=>s.jsx(Ia,{currentUser:e.currentUser,currentBook:e.currentBook,totalCountVerse:Be,languageCountVerse:te,isComplete:X,isPublish:j,isSpecialBook:Q==Ba||Q==_a,currentLanguage:T,arabicChapterTitle:F,englishChapterTitle:Ue,transliteration:Ve,currentChapterTitle:ye,handleComplete:t=>Ye(t),handlePublish:t=>Xe(t),handleCurrentChapterTitleChange:t=>lt(t),handleArabicChapterTitleChange:t=>Je(t),handleTransliterationChapterTitleChange:t=>je(t),handleEnglishChapterTitleChange:t=>kt(t),handleUpdateChapterSummary:Qe});l.useEffect(()=>{if(N){const t=URL.createObjectURL(N);Ce(t),Ie(!1)}},[N]);const et=()=>s.jsxs(Xt,{children:[s.jsx(Oe,{color:"#155D74",fontFamily:"'Baloo Da 2'",children:"Select Audio File:"}),s.jsx(zt,{type:".mp3, .m4a",onChange:t=>Me(t.target.files?t.target.files[0]:null)})]}),yt=t=>{const a=t.split(":");if(a.length!==4)throw new Error(`Invalid timecode format: ${t}`);const b=parseInt(a[0],10)||0,x=parseInt(a[1],10)||0,f=parseInt(a[2],10)||0,m=parseInt(a[3],10)||0;return b*3600+x*60+f+m/25},St=t=>{const a=t.split(`
`),b=[];let x=null;a.forEach(P=>{const B=P.match(/(\d{2}:\d{2}:\d{2}:\d{2})/);B&&(x=B[1]);const h=P.match(/\|M:(.*?)(\s|$)/);if(h&&x){const me=h[1].trim(),ut=yt(x)-3600;b.push({name:me,time:ut.toFixed(2)})}});const f="Verse Number, Marker Name, Marker Time",m=b.map((P,B)=>`${B+1}, ${P.name},${P.time}`);return[f,...m].join(`
`)},Ct=()=>{var x;const t=new Blob([Ke],{type:"text/csv"}),a=document.createElement("a");a.href=URL.createObjectURL(t);const b=`${Date.now()}_${(x=G==null?void 0:G.name)==null?void 0:x.split(".edl")[0]}.csv`;a.download=b,document.body.appendChild(a),a.click(),document.body.removeChild(a)},Tt=t=>{const a=t.split(`
`).filter(f=>f.trim()!==""),b=a[0].split(",").map(f=>f.trim());return a.slice(1).map(f=>{const m=f.split(",").map(P=>P.trim());return b.reduce((P,B,h)=>(P[B]=m[h],P),{})})},It=(t,a)=>{J(Number(t)),$(a?Number(a):0),Ie(!0)};l.useEffect(()=>{if(!G)return;const t=new FileReader;t.onload=()=>{var a,b;if(t.result){const x=t.result.toString(),f=St(x),m=Tt(f);M(m);const P=[];for(let B=0;B<m.length;B++){const h={Verse:(b=(a=ne[B])==null?void 0:a.verseText)==null?void 0:b[T],"Marker Name":m[B]["Marker Name"],"Marker Time":m[B]["Marker Time"],Action:s.jsx(bt,{isdisable:N&&G?"false":"true",children:s.jsx(ct,{label:"Play",disabled:!N||!G,onClick:()=>{It(m[B]["Marker Time"],B<m.length-1?m[B+1]["Marker Time"]:""),R("Time Line")}})})};P.push(h)}ae(P||[]),Ne(f)}},t.readAsText(G)},[G,L]);const Pt=()=>s.jsxs(Xt,{children:[s.jsx(Oe,{color:"#155D74",fontFamily:"'Baloo Da 2'",children:"Select EDL File:"}),s.jsx(zt,{type:".edl",onChange:t=>We(t.target.files?t.target.files[0]:null)})]}),Re=t=>{var a;(a=e.chapterInfos)!=null&&a.some(b=>b.chapterId==t.chapterId)?e.dispatch({type:ie.UPDATE_CHAPTERINFOS,payload:{chapterInfo:t}}):console.log("No Chapter Info")},wt=l.useCallback(()=>{const t=new FormData;N&&(c(!0),t.append("file",N,`${Date.now()}_${N.name}`),t.append("chapterId",L),t.append("languageCode",T),t.append("isCompleted",X?"true":"false"),t.append("isPublished",j?"true":"false"),Jt.uploadAudio(t).then(a=>{Re(a),ee(a),le.success("Success to complete the audio",{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),c(!1)}).catch(a=>{console.log(a),c(!1)}))},[N,T,q,L]),tt=l.useCallback(()=>{Jt.saveMarker({chapterId:L,languageCode:T,markerData:V}).then(t=>{console.log(t),de(V.length),le.success("Success to set time marker",{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})}).catch(t=>console.log(t))},[V,L,T]),at=()=>s.jsxs(uo,{children:[s.jsx(bt,{isdisable:G?"false":"true",children:s.jsx(ct,{label:"Download CSV",disabled:!G,onClick:Ct})}),s.jsxs(co,{children:[s.jsx(bt,{isdisable:G?"false":"true",children:s.jsx(ct,{label:"Save Markers",disabled:!G,onClick:tt})}),s.jsx(bt,{isdisable:N?"false":"true",children:s.jsx(ct,{label:"Upload Audio",disabled:!N,onClick:wt})})]})]}),At=t=>{_e.current.currentTime=t,De(t)},R=t=>{e.dispatch({type:ie.SET_CURRENT_AUDIO_HANDLER,payload:{currentAudioHandler:t}})},U=()=>N&&s.jsxs(po,{children:[s.jsx(Oe,{color:"#155D74",fontFamily:"'Baloo Da 2'",children:N?`Playing: ${(N==null?void 0:N.name)||"Audio"}`:"No audio file is selected"}),s.jsx(ho,{children:s.jsx(wo,{src:Se,startTime:oe,endTime:$e,currentTime:Te,isPlaying:nt,setCurrentTime:t=>De(t),setStartTime:t=>J(t),setEndTime:t=>$(t),setIsPlaying:t=>Ie(t),setAudioDuration:t=>Ge(t),setCurrentAudioHandler:t=>R(t),onTimeChange:t=>At(t)})})]});l.useEffect(()=>{const t=V.findIndex(b=>Number(b["Marker Time"])>=oe);let a=0;t<V.length-1&&e.currentAudioHandler=="Time Line"?a=Number(V[t+1]["Marker Time"]):a=Fe,$(a),Ie(!0)},[oe,$e]);const ot=()=>!V||V.length===0?null:s.jsx(Bo,{startTimes:V.map(t=>Number(t["Marker Time"])),duration:Fe,activeStartTime:oe,setCurrentAudioHandler:t=>R(t),setAudioStartTime:t=>J(t)}),He=()=>G&&s.jsx(mo,{children:s.jsx(Ra,{headers:["Verse","Marker Name","Marker Time","Action"],rows:_})}),he=()=>s.jsxs(lo,{children:[s.jsx(Pa,{tools:_o}),se(),st(),Ze(),et(),Pt(),at(),U(),ot(),He()]});return s.jsxs(s.Fragment,{children:[s.jsxs(oo,{flexDirection:i?"column":"row",children:[S(),he()]}),s.jsx(ka,{}),u&&s.jsx(ya,{})]})}function Oo(e){return{dispatch:e}}function Eo(e){return{currentUser:e.user.currentUser,bookInfos:e.book.bookInfos,chapterInfos:e.book.chapterInfos,currentLanguage:e.book.language,currentBook:e.book.book,currentAudioHandler:e.translator.currentAudioHandler,appTextPages:e.translator.appTextPages}}const qo=ba(Eo,Oo)(Ro);export{qo as default};
