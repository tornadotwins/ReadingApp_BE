import{j as o,a as f}from"./createTheme-Ba04gsge.js";import{s as n,z as r,h as C,D as ie,E as le,_ as se,X as y,a0 as ue,W as de,H as ce,J as ge,N as xe,A as he}from"./App-DTzzp06Q.js";import{b as fe,T as be,B as Ce,d as me}from"./book.services-Bn47ydqa.js";import{T as v,c as T,f as A,B as L,A as ke,h as Se,i as Be}from"./index-GotedZ9Y.js";import{S as Q}from"./index-DgH7SjrI.js";import{I as G,g as ye,a as je}from"./index-Ca8vopTa.js";n(r)({width:"100%",backgroundColor:"#F0F5FB",padding:"5px 20px"});const Oe=n(r)(({status:e})=>({width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #155D74",cursor:"pointer",backgroundColor:e==v?"#FFAA5D":e==T?"#155D74":"#fff",color:e==v?"#155D74":e==T?"#fff":"#155D74"})),_=e=>{var l,c,s,g;return o.jsx(Oe,{status:e.isPublished?v:e.isCompleted?T:A,onClick:()=>{var a;return e.onClick(((a=e.chapterInfo)==null?void 0:a.chapterId)||"")},children:o.jsx(C,{fontFamily:"Inter",fontSize:16,fontWeight:"500",children:e.chapterInfo?e.chapterInfo.chapterNumber==0?"Intr":(l=e.chapterInfo.chapterNumber)==null?void 0:l.toString():((c=e.subBookInfo)==null?void 0:c.subBookNumber)==0?"Intr":(g=(s=e.subBookInfo)==null?void 0:s.subBookNumber)==null?void 0:g.toString()})})},pe=n(r)({margin:"2px 0px",display:"flex"}),ve=n(r)({width:"100px",minWidth:"100px",maxWidth:"200px",marginRight:"10px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",padding:"9px 0px"}}),Te=n(r)({display:"flex",flexGrow:1}),Ie=n(r)({display:"flex",justifyContent:"center",marginRight:"3px",minWidth:"45px","& >*":{flexGrow:1}}),Z=n(r)({display:"flex",flexWrap:"wrap",gap:"2px"});function W(e){var l,c,s,g,a,b,d,I;return o.jsxs(pe,{children:[!e.isQuranOrZabur&&e.subBook&&o.jsx(ve,{children:o.jsx(C,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"400",children:(l=e.subBook.subBookTitle)==null?void 0:l[e.languageCode]})}),o.jsxs(Te,{children:[o.jsx(Ie,{children:e.subBook&&!!e.subBook.noChapter&&((s=(c=e.subBook)==null?void 0:c.chapterInfos[0])==null?void 0:s.chapterNumber)==0&&o.jsx(_,{chapterInfo:e.subBook.chapterInfos[0],isCompleted:(a=(g=e.subBook.chapterInfos[0])==null?void 0:g.chapterIsCompleted)==null?void 0:a[e.languageCode],isPublished:(d=(b=e.subBook.chapterInfos[0])==null?void 0:b.chapterIsPublished)==null?void 0:d[e.languageCode],onClick:e.onChapterClick})}),!e.isQuranOrZabur&&o.jsx(Z,{children:e.subBook&&((I=e.subBook.chapterInfos)==null?void 0:I.map((t,k)=>{var h,m;return o.jsx(_,{subBookInfo:e.subBook,chapterInfo:t,isCompleted:((h=t==null?void 0:t.chapterIsCompleted)==null?void 0:h[e.languageCode])||!1,isPublished:((m=t==null?void 0:t.chapterIsPublished)==null?void 0:m[e.languageCode])||!1,onClick:e.onChapterClick},k)}))}),e.isQuranOrZabur&&o.jsx(Z,{children:e.book&&e.book.subBooks&&e.book.subBooks.map((t,k)=>{var h,m,j,w;return o.jsx(_,{subBookInfo:t,isCompleted:t.chapterInfos&&((m=(h=t.chapterInfos[0])==null?void 0:h.chapterIsCompleted)==null?void 0:m[e.languageCode])||!1,isPublished:t.chapterInfos&&((w=(j=t.chapterInfos[0])==null?void 0:j.chapterIsPublished)==null?void 0:w[e.languageCode])||!1,onClick:()=>e.onChapterClick(t.chapterInfos&&(t==null?void 0:t.chapterInfos[0].chapterId))},k)})})]})]})}const we=n(r)(({isquranorzabur:e})=>({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",paddingRight:e=="true"?"120px":"0px",boxSizing:"border-box",maxWidth:"650px","@media screen and (max-width: 670px)":{paddingRight:"0px"}})),Fe=n(r)({display:"flex",marginBottom:"15px"}),Ae=n("img")({width:"24px",height:"24px",marginRight:"10px"}),U=e=>o.jsxs(we,{isquranorzabur:e.isQuranOrZabur?"true":"false",children:[o.jsxs(Fe,{children:[o.jsx(Ae,{src:G.icon_book}),o.jsx(C,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"700",children:`${e.bookTitle} text - ${e.language} - chapters:`})]}),!e.isQuranOrZabur&&e.bookInfo.subBooks.map((l,c)=>o.jsx(W,{subBook:l,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur,onChapterClick:e.onClickSquare},c)),e.isQuranOrZabur&&o.jsx(W,{book:e.bookInfo,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur,onChapterClick:e.onClickSquare})]});n(r)({width:"100%",backgroundColor:"#F0F5FB",padding:"5px 20px"});const De=n(r)(({status:e})=>({width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #155D74",cursor:"pointer",backgroundColor:e==v?"#FFAA5D":e==T?"#155D74":"#fff",color:e==v?"#155D74":e==T?"#fff":"#155D74"})),R=e=>{var l;return o.jsx(De,{status:e.audioStatus,onClick:e.onClick,children:o.jsx(C,{fontFamily:"Inter",fontSize:16,fontWeight:"500",children:e.chapterNumber==0?"Intr":(l=e.chapterNumber)==null?void 0:l.toString()})})},Ne=n(r)({margin:"10px 0px",display:"flex"}),_e=n(r)({width:"100px",minWidth:"100px",maxWidth:"200px",marginRight:"10px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",padding:"9px 0px"}}),Re=n(r)({display:"flex",flexGrow:1}),Ee=n(r)({display:"flex",justifyContent:"center",marginRight:"3px",minWidth:"45px","& >*":{flexGrow:1}}),$=n(r)({display:"flex",flexWrap:"wrap",gap:"2px"});function P(e){var l,c;return o.jsxs(Ne,{children:[!e.isQuranOrZabur&&e.subBook&&o.jsx(_e,{children:o.jsx(C,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"400",children:(l=e.subBook.subBookTitle)==null?void 0:l[e.languageCode]})}),o.jsxs(Re,{children:[o.jsx(Ee,{children:e.subBook&&!!e.subBook.noChapter&&e.subBook.chapterInfos[0].chapterNumber==0&&o.jsx(R,{chapterNumber:0,onClick:()=>{},audioStatus:A})}),!e.isQuranOrZabur&&o.jsx($,{children:e.subBook&&((c=e.subBook.chapterInfos)==null?void 0:c.map((s,g)=>{var a;return o.jsx(R,{chapterNumber:s.chapterNumber,audioStatus:((a=s==null?void 0:s.chapterAudio)==null?void 0:a[e.languageCode])||A,onClick:()=>{}},g)}))}),e.isQuranOrZabur&&o.jsx($,{children:e.book&&e.book.subBooks&&e.book.subBooks.map((s,g)=>{var a,b;return o.jsx(R,{chapterNumber:s==null?void 0:s.subBookNumber,audioStatus:s.chapterInfos&&((b=(a=s.chapterInfos[0])==null?void 0:a.chapterAudio)==null?void 0:b[e.languageCode])||A,onClick:()=>{}},g)})})]})]})}const Le=n(r)(({isquranorzabur:e})=>({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",paddingRight:e=="true"?"120px":"0px",boxSizing:"border-box",maxWidth:"650px","@media screen and (max-width: 670px)":{paddingRight:"0px"}})),Qe=n(r)({display:"flex",marginBottom:"15px"}),Ze=n("img")({width:"24px",height:"24px",marginRight:"10px"}),q=e=>o.jsxs(Le,{isquranorzabur:e.isQuranOrZabur?"true":"false",children:[o.jsxs(Qe,{children:[o.jsx(Ze,{src:G.icon_audio}),o.jsx(C,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"700",children:`${e.bookTitle} Audio - ${e.language} - chapters:`})]}),!e.isQuranOrZabur&&e.bookInfo.subBooks.map((l,c)=>o.jsx(P,{subBook:l,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur},c)),e.isQuranOrZabur&&o.jsx(P,{book:e.bookInfo,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur})]}),We=n(r)({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",maxWidth:"650px"}),Ue=n(r)({display:"flex"});n("img")({width:"24px",height:"24px",marginRight:"10px"});const $e=e=>o.jsx(We,{children:o.jsx(Ue,{children:o.jsx(C,{color:"red",fontFamily:"'Baloo Da 2'",fontWeight:"700",fontSize:30,children:"Coming Soon"})})}),Pe=n(r)({position:"relative",minHeight:"100vh",width:"100%","& >.MuiBox-root:first-of-type":{backgroundColor:"#1B7695","& >.MuiBox-root":{color:"#F6FCFC"}}}),qe=n(r)({width:"100%",height:"calc(100% - 73px)",margin:"auto",marginTop:"73px"}),ze=n(r)({width:"650px",display:"flex",justifyContent:"center",alignItems:"center",margin:"20px 40px 0px 40px","& .MuiFormControl-root":{width:"unset",marginLeft:"15px"},"& .MuiBox-root":{fontFamily:'"Baloo Da 2" !important'},"@media screen and (max-width: 670px)":{width:"unset"}}),Ge=n(r)({margin:"20px 40px"}),Ke=n(r)({margin:"5px 40px",padding:"15px",maxWidth:"650px",boxSizing:"border-box",display:"flex",justifyContent:"center","& .MuiButtonBase-root":{boxSizing:"border-box",textTransform:"none",backgroundColor:"#FFAA5D",padding:"8px 15px",borderRadius:"0px",border:"1px solid #474747","&:hover":{backgroundColor:"#EECC5D"}}}),z=[{value:"Text",label:"Text"},{value:"Audio",label:"Audio"},{value:"Reference",label:"Reference"}],Me=[{toolName:"Western",onClick:()=>{}},{toolName:"Arabic",onClick:()=>{}}],He=e=>{const[l,c]=f.useState([]),[s,g]=f.useState(!1),[a,b]=f.useState(null),[d,I]=f.useState(e.currentBook||L),[t,k]=f.useState(""),[h,m]=f.useState(z[0].value),j=le(),w=se(),E=f.useCallback(()=>{var u;if(!((u=e.currentUser)!=null&&u.roles))return[];const i=e.currentUser.roles.reduce((x,p)=>{if(p.role!=="none"){const N=ye(p.language);x.some(F=>F.value===N)||x.push({value:N,label:p.language})}return x},[]);return e.currentLanguage||e.dispatch({type:y.SET_CURRENT_LANGUAGE,payload:{language:i[0].value}}),i},[e.currentUser]);f.useEffect(()=>{const i=E();c(i),i.length>0&&!i.some(u=>u.value===t)&&k(i[0].value)},[e.currentUser,t,E]),f.useEffect(()=>{(async()=>{g(!0);try{const u=e.bookInfos.find(x=>x.bookTitle.en===d);if(u)b(u);else{const x=await fe.getBookInfoByTitle(d);b(x),e.dispatch({type:y.ADD_BOOKINFO,payload:{bookInfo:x}})}g(!1)}catch(u){ce.error(u instanceof Error?u.message:String(u),{position:"top-right",draggable:!0,theme:"colored",transition:ge,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),g(!1)}})()},[d,e.bookInfos]);const K=i=>{const u=i.target.value;k(u),e.dispatch({type:y.SET_CURRENT_LANGUAGE,payload:{language:u}})},M=i=>{const u=i.target.value;m(u)},H=i=>{I(i),e.dispatch({type:y.SET_BOOK,payload:{bookTitle:i}})},D=(i,u=!1)=>{const x=a==null?void 0:a.subBooks.find(B=>{var F;return(F=B==null?void 0:B.chapterInfos)==null?void 0:F.find(re=>re.chapterId==i)}),p=x==null?void 0:x.chapterInfos.find(B=>B.chapterId==i);j("/admin/chapteroverview",{state:{chapterId:i,isImport:u,subBookInfo:x,chapterInfo:p,languages:l}})},V=()=>{localStorage.removeItem(ke),e.dispatch({type:y.RESET_USER}),e.dispatch({type:y.RESET_BOOK}),j("/admin")},O=d===L||d===Se,S=je(t),J=()=>o.jsx(xe,{isLoggedIn:!0,username:e.currentUser.username,isAdmin:e.currentUser.isAdmin,onLogOut:V}),X=()=>o.jsx(Ge,{children:o.jsx(Ce,{books:Be.map(i=>({bookTitle:i.bookTitle,onClick:()=>H(i.value)})),selectedBook:d})}),Y=()=>o.jsxs(ze,{children:[o.jsx(C,{color:"#155D74",fontWeight:"700",fontFamily:"'Baloo Da 2'",children:`${d} ${O?"overview":""}`}),o.jsx(Q,{label:"",options:l,value:t,backgroundColor:"#fff",textColor:"#155D74",onChange:K}),!O&&o.jsx(Q,{label:"",options:z,value:h,backgroundColor:"#fff",textColor:"#155D74",onChange:M})]}),ee=()=>o.jsx(Ke,{children:o.jsx(he,{icon:o.jsx(me,{}),label:`Import ${h} into ${S} ${d}`,onClick:()=>D((a==null?void 0:a.subBooks[0].chapterInfos[0].chapterId)||"",!0)})}),oe=()=>o.jsx(o.Fragment,{children:a&&!O&&o.jsxs(o.Fragment,{children:[h==="Text"&&o.jsx(U,{bookTitle:d,language:S,languageCode:t,bookInfo:a,isQuranOrZabur:!1,onClickSquare:D}),h==="Audio"&&o.jsx(q,{bookTitle:d,language:S,languageCode:t,bookInfo:a,isQuranOrZabur:!1}),h==="Reference"&&o.jsx($e,{bookTitle:d,language:S,languageCode:t,bookInfo:a})]})}),ne=()=>o.jsx(o.Fragment,{children:a&&O&&o.jsxs(o.Fragment,{children:[o.jsx(U,{bookTitle:d,language:S,languageCode:t,bookInfo:a,isQuranOrZabur:!0,onClickSquare:D}),o.jsx(q,{bookTitle:d,language:S,languageCode:t,bookInfo:a,isQuranOrZabur:!0})]})}),te=()=>o.jsxs(o.Fragment,{children:[oe(),ne()]}),ae=()=>o.jsxs(qe,{children:[o.jsx(be,{tools:Me}),X(),Y(),!O&&ee(),te()]});return o.jsxs(o.Fragment,{children:[o.jsxs(Pe,{flexDirection:w?"column":"row",children:[J(),ae()]}),o.jsx(ue,{}),s&&o.jsx(de,{})]})};function Ve(e){return{dispatch:e}}function Je(e){return{currentUser:e.user.currentUser,bookInfos:e.book.bookInfos,currentLanguage:e.book.language,currentBook:e.book.book}}const ao=ie(Je,Ve)(He);export{ao as default};
