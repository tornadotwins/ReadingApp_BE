var no=Object.defineProperty;var so=(e,r,a)=>r in e?no(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a;var Lt=(e,r,a)=>so(e,typeof r!="symbol"?r+"":r,a);import{a as i,Y as rt,_ as w,j as s,v as Ie,V as $t,W as Nt,Q as Dt,U as lo,c as io,O as Zt}from"./createTheme-CtNaaKhY.js";import{ab as co,ac as uo,ad as Ft,ae as po,af as Bt,ag as gt,ah as _t,ai as xt,_ as ho,$ as mo,a6 as ze,s as C,aj as eo,a3 as fo,ak as Te,a7 as bo,B as _,aa as zt,r as to,T as je,t as go,O as xo,u as vo,K as ko,F as pe,A as ne,H as se,q as ut,Q as So,E as yo,w as Co,Z as To}from"./App-T0yIuxoY.js";import{d as Io,S as wo}from"./index-clTNfbtL.js";import{T as Po,B as Ao}from"./index-DhFqGpdn.js";import{b as Ht,A as Lo,i as Bo,k as Vt,n as Ut,B as _o,h as Ro}from"./index-DAIxFl22.js";import{F as Wt,T as jo}from"./index-BPeGfDBC.js";import{S as Rt}from"./index-DmvMrXdk.js";import{b as dt}from"./book.services-Dt0BPvDP.js";import"./index-B1BZaSG-.js";import"./images-BMTohMNK.js";import"./TableContainer-CTCdsOM-.js";const Oo={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Eo(e,r,a=(c,u)=>c===u){return e.length===r.length&&e.every((c,u)=>a(c,r[u]))}const Mo=2;function oo(e,r){return e-r}function Kt(e,r){var a;const{index:c}=(a=e.reduce((u,k,R)=>{const p=Math.abs(r-k);return u===null||p<u.distance||p===u.distance?{distance:p,index:R}:u},null))!=null?a:{};return c}function pt(e,r){if(r.current!==void 0&&e.changedTouches){const a=e;for(let c=0;c<a.changedTouches.length;c+=1){const u=a.changedTouches[c];if(u.identifier===r.current)return{x:u.clientX,y:u.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function vt(e,r,a){return(e-r)*100/(a-r)}function $o(e,r,a){return(a-r)*e+r}function No(e){if(Math.abs(e)<1){const a=e.toExponential().split("e-"),c=a[0].split(".")[1];return(c?c.length:0)+parseInt(a[1],10)}const r=e.toString().split(".")[1];return r?r.length:0}function Do(e,r,a){const c=Math.round((e-a)/r)*r+a;return Number(c.toFixed(No(r)))}function Gt({values:e,newValue:r,index:a}){const c=e.slice();return c[a]=r,c.sort(oo)}function ht({sliderRef:e,activeIndex:r,setActive:a}){var c,u;const k=gt(e.current);if(!((c=e.current)!=null&&c.contains(k.activeElement))||Number(k==null||(u=k.activeElement)==null?void 0:u.getAttribute("data-index"))!==r){var R;(R=e.current)==null||R.querySelector(`[type="range"][data-index="${r}"]`).focus()}a&&a(r)}function mt(e,r){return typeof e=="number"&&typeof r=="number"?e===r:typeof e=="object"&&typeof r=="object"?Eo(e,r):!1}const Fo={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},zo=e=>e;let ft;function qt(){return ft===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?ft=CSS.supports("touch-action","none"):ft=!0),ft}function Ho(e){const{"aria-labelledby":r,defaultValue:a,disabled:c=!1,disableSwap:u=!1,isRtl:k=!1,marks:R=!1,max:p=100,min:A=0,name:V,onChange:P,onChangeCommitted:M,orientation:G="horizontal",rootRef:we,scale:Pe=zo,step:Z=1,shiftStep:ve=10,tabIndex:X,value:Oe}=e,K=i.useRef(void 0),[he,L]=i.useState(-1),[be,T]=i.useState(-1),[Ae,Le]=i.useState(!1),me=i.useRef(0),[ee,ie]=co({controlled:Oe,default:a??A,name:"Slider"}),Y=P&&((n,l,d)=>{const S=n.nativeEvent||n,y=new S.constructor(S.type,S);Object.defineProperty(y,"target",{writable:!0,value:{value:l,name:V}}),P(y,l,d)}),ce=Array.isArray(ee);let j=ce?ee.slice().sort(oo):[ee];j=j.map(n=>n==null?A:rt(n,A,p));const fe=R===!0&&Z!==null?[...Array(Math.floor((p-A)/Z)+1)].map((n,l)=>({value:A+Z*l})):R||[],N=fe.map(n=>n.value),{isFocusVisibleRef:q,onBlur:He,onFocus:Ee,ref:Ve}=uo(),[ge,xe]=i.useState(-1),D=i.useRef(null),$=Ft(Ve,D),Me=Ft(we,$),ke=n=>l=>{var d;const S=Number(l.currentTarget.getAttribute("data-index"));Ee(l),q.current===!0&&xe(S),T(S),n==null||(d=n.onFocus)==null||d.call(n,l)},Se=n=>l=>{var d;He(l),q.current===!1&&xe(-1),T(-1),n==null||(d=n.onBlur)==null||d.call(n,l)},W=(n,l)=>{const d=Number(n.currentTarget.getAttribute("data-index")),S=j[d],y=N.indexOf(S);let x=l;if(fe&&Z==null){const ae=N[N.length-1];x>ae?x=ae:x<N[0]?x=N[0]:x=x<S?N[y-1]:N[y+1]}if(x=rt(x,A,p),ce){u&&(x=rt(x,j[d-1]||-1/0,j[d+1]||1/0));const ae=x;x=Gt({values:j,newValue:x,index:d});let re=d;u||(re=x.indexOf(ae)),ht({sliderRef:D,activeIndex:re})}ie(x),xe(d),Y&&!mt(x,ee)&&Y(n,x,d),M&&M(n,x)},Ue=n=>l=>{var d;if(Z!==null){const S=Number(l.currentTarget.getAttribute("data-index")),y=j[S];let x=null;(l.key==="ArrowLeft"||l.key==="ArrowDown")&&l.shiftKey||l.key==="PageDown"?x=Math.max(y-ve,A):((l.key==="ArrowRight"||l.key==="ArrowUp")&&l.shiftKey||l.key==="PageUp")&&(x=Math.min(y+ve,p)),x!==null&&(W(l,x),l.preventDefault())}n==null||(d=n.onKeyDown)==null||d.call(n,l)};po(()=>{if(c&&D.current.contains(document.activeElement)){var n;(n=document.activeElement)==null||n.blur()}},[c]),c&&he!==-1&&L(-1),c&&ge!==-1&&xe(-1);const We=n=>l=>{var d;(d=n.onChange)==null||d.call(n,l),W(l,l.target.valueAsNumber)},$e=i.useRef(void 0);let F=G;k&&G==="horizontal"&&(F+="-reverse");const O=({finger:n,move:l=!1})=>{const{current:d}=D,{width:S,height:y,bottom:x,left:ae}=d.getBoundingClientRect();let re;F.indexOf("vertical")===0?re=(x-n.y)/y:re=(n.x-ae)/S,F.indexOf("-reverse")!==-1&&(re=1-re);let I;if(I=$o(re,A,p),Z)I=Do(I,Z,A);else{const Ce=Kt(N,I);I=N[Ce]}I=rt(I,A,p);let Q=0;if(ce){l?Q=$e.current:Q=Kt(j,I),u&&(I=rt(I,j[Q-1]||-1/0,j[Q+1]||1/0));const Ce=I;I=Gt({values:j,newValue:I,index:Q}),u&&l||(Q=I.indexOf(Ce),$e.current=Q)}return{newValue:I,activeIndex:Q}},B=Bt(n=>{const l=pt(n,K);if(!l)return;if(me.current+=1,n.type==="mousemove"&&n.buttons===0){te(n);return}const{newValue:d,activeIndex:S}=O({finger:l,move:!0});ht({sliderRef:D,activeIndex:S,setActive:L}),ie(d),!Ae&&me.current>Mo&&Le(!0),Y&&!mt(d,ee)&&Y(n,d,S)}),te=Bt(n=>{const l=pt(n,K);if(Le(!1),!l)return;const{newValue:d}=O({finger:l,move:!0});L(-1),n.type==="touchend"&&T(-1),M&&M(n,d),K.current=void 0,J()}),oe=Bt(n=>{if(c)return;qt()||n.preventDefault();const l=n.changedTouches[0];l!=null&&(K.current=l.identifier);const d=pt(n,K);if(d!==!1){const{newValue:y,activeIndex:x}=O({finger:d});ht({sliderRef:D,activeIndex:x,setActive:L}),ie(y),Y&&!mt(y,ee)&&Y(n,y,x)}me.current=0;const S=gt(D.current);S.addEventListener("touchmove",B,{passive:!0}),S.addEventListener("touchend",te,{passive:!0})}),J=i.useCallback(()=>{const n=gt(D.current);n.removeEventListener("mousemove",B),n.removeEventListener("mouseup",te),n.removeEventListener("touchmove",B),n.removeEventListener("touchend",te)},[te,B]);i.useEffect(()=>{const{current:n}=D;return n.addEventListener("touchstart",oe,{passive:qt()}),()=>{n.removeEventListener("touchstart",oe),J()}},[J,oe]),i.useEffect(()=>{c&&J()},[c,J]);const Ke=n=>l=>{var d;if((d=n.onMouseDown)==null||d.call(n,l),c||l.defaultPrevented||l.button!==0)return;l.preventDefault();const S=pt(l,K);if(S!==!1){const{newValue:x,activeIndex:ae}=O({finger:S});ht({sliderRef:D,activeIndex:ae,setActive:L}),ie(x),Y&&!mt(x,ee)&&Y(l,x,ae)}me.current=0;const y=gt(D.current);y.addEventListener("mousemove",B,{passive:!0}),y.addEventListener("mouseup",te)},z=vt(ce?j[0]:A,A,p),ye=vt(j[j.length-1],A,p)-z,Ne=(n={})=>{const l=_t(n),d={onMouseDown:Ke(l||{})},S=w({},l,d);return w({},n,{ref:Me},S)},De=n=>l=>{var d;(d=n.onMouseOver)==null||d.call(n,l);const S=Number(l.currentTarget.getAttribute("data-index"));T(S)},Ge=n=>l=>{var d;(d=n.onMouseLeave)==null||d.call(n,l),T(-1)};return{active:he,axis:F,axisProps:Fo,dragging:Ae,focusedThumbIndex:ge,getHiddenInputProps:(n={})=>{var l;const d=_t(n),S={onChange:We(d||{}),onFocus:ke(d||{}),onBlur:Se(d||{}),onKeyDown:Ue(d||{})},y=w({},d,S);return w({tabIndex:X,"aria-labelledby":r,"aria-orientation":G,"aria-valuemax":Pe(p),"aria-valuemin":Pe(A),name:V,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":(l=e.step)!=null?l:void 0,disabled:c},n,y,{style:w({},Oo,{direction:k?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:Ne,getThumbProps:(n={})=>{const l=_t(n),d={onMouseOver:De(l||{}),onMouseLeave:Ge(l||{})};return w({},n,l,d)},marks:fe,open:be,range:ce,rootRef:Me,trackLeap:ye,trackOffset:z,values:j,getThumbStyle:n=>({pointerEvents:he!==-1&&he!==n?"none":void 0})}}const Vo=e=>!e||!xt(e);function Uo(e){return mo("MuiSlider",e)}const le=ho("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Wo=e=>{const{open:r}=e;return{offset:ze(r&&le.valueLabelOpen),circle:le.valueLabelCircle,label:le.valueLabelLabel}};function Ko(e){const{children:r,className:a,value:c}=e,u=Wo(e);return r?i.cloneElement(r,{className:ze(r.props.className)},s.jsxs(i.Fragment,{children:[r.props.children,s.jsx("span",{className:ze(u.offset,a),"aria-hidden":!0,children:s.jsx("span",{className:u.circle,children:s.jsx("span",{className:u.label,children:c})})})]})):null}const Go=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","shiftStep","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function Yt(e){return e}const qo=C("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:a}=e;return[r.root,r[`color${Ie(a.color)}`],a.size!=="medium"&&r[`size${Ie(a.size)}`],a.marked&&r.marked,a.orientation==="vertical"&&r.vertical,a.track==="inverted"&&r.trackInverted,a.track===!1&&r.trackFalse]}})(({theme:e})=>{var r;return{borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${le.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${le.dragging}`]:{[`& .${le.thumb}, & .${le.track}`]:{transition:"none"}},variants:[...Object.keys(((r=e.vars)!=null?r:e).palette).filter(a=>{var c;return((c=e.vars)!=null?c:e).palette[a].main}).map(a=>({props:{color:a},style:{color:(e.vars||e).palette[a].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}}),Yo=C("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,r)=>r.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Xo=C("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,r)=>r.track})(({theme:e})=>{var r;return{display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.keys(((r=e.vars)!=null?r:e).palette).filter(a=>{var c;return((c=e.vars)!=null?c:e).palette[a].main}).map(a=>({props:{color:a,track:"inverted"},style:w({},e.vars?{backgroundColor:e.vars.palette.Slider[`${a}Track`],borderColor:e.vars.palette.Slider[`${a}Track`]}:w({backgroundColor:$t(e.palette[a].main,.62),borderColor:$t(e.palette[a].main,.62)},e.applyStyles("dark",{backgroundColor:Nt(e.palette[a].main,.5)}),e.applyStyles("dark",{borderColor:Nt(e.palette[a].main,.5)})))}))]}}),Jo=C("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,r)=>{const{ownerState:a}=e;return[r.thumb,r[`thumbColor${Ie(a.color)}`],a.size!=="medium"&&r[`thumbSize${Ie(a.size)}`]]}})(({theme:e})=>{var r;return{position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${le.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.keys(((r=e.vars)!=null?r:e).palette).filter(a=>{var c;return((c=e.vars)!=null?c:e).palette[a].main}).map(a=>({props:{color:a},style:{[`&:hover, &.${le.focusVisible}`]:w({},e.vars?{boxShadow:`0px 0px 0px 8px rgba(${e.vars.palette[a].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${Dt(e.palette[a].main,.16)}`},{"@media (hover: none)":{boxShadow:"none"}}),[`&.${le.active}`]:w({},e.vars?{boxShadow:`0px 0px 0px 14px rgba(${e.vars.palette[a].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${Dt(e.palette[a].main,.16)}`})}}))]}}),Qo=C(Ko,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,r)=>r.valueLabel})(({theme:e})=>w({zIndex:1,whiteSpace:"nowrap"},e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${le.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${le.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]})),Zo=C("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>eo(e)&&e!=="markActive",overridesResolver:(e,r)=>{const{markActive:a}=e;return[r.mark,a&&r.markActive]}})(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]})),ea=C("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>eo(e)&&e!=="markLabelActive",overridesResolver:(e,r)=>r.markLabel})(({theme:e})=>w({},e.typography.body2,{color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]})),ta=e=>{const{disabled:r,dragging:a,marked:c,orientation:u,track:k,classes:R,color:p,size:A}=e,V={root:["root",r&&"disabled",a&&"dragging",c&&"marked",u==="vertical"&&"vertical",k==="inverted"&&"trackInverted",k===!1&&"trackFalse",p&&`color${Ie(p)}`,A&&`size${Ie(A)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",r&&"disabled",A&&`thumbSize${Ie(A)}`,p&&`thumbColor${Ie(p)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return bo(V,Uo,R)},oa=({children:e})=>e,aa=i.forwardRef(function(r,a){var c,u,k,R,p,A,V,P,M,G,we,Pe,Z,ve,X,Oe,K,he,L,be,T,Ae,Le,me;const ee=fo({props:r,name:"MuiSlider"}),ie=lo(),{"aria-label":Y,"aria-valuetext":ce,"aria-labelledby":j,component:fe="span",components:N={},componentsProps:q={},color:He="primary",classes:Ee,className:Ve,disableSwap:ge=!1,disabled:xe=!1,getAriaLabel:D,getAriaValueText:$,marks:Me=!1,max:ke=100,min:Se=0,orientation:W="horizontal",shiftStep:Ue=10,size:We="medium",step:$e=1,scale:F=Yt,slotProps:O,slots:B,track:te="normal",valueLabelDisplay:oe="off",valueLabelFormat:J=Yt}=ee,Ke=io(ee,Go),z=w({},ee,{isRtl:ie,max:ke,min:Se,classes:Ee,disabled:xe,disableSwap:ge,orientation:W,marks:Me,color:He,size:We,step:$e,shiftStep:Ue,scale:F,track:te,valueLabelDisplay:oe,valueLabelFormat:J}),{axisProps:ye,getRootProps:Ne,getHiddenInputProps:De,getThumbProps:Ge,open:nt,active:Be,axis:_e,focusedThumbIndex:n,range:l,dragging:d,marks:S,values:y,trackOffset:x,trackLeap:ae,getThumbStyle:re}=Ho(w({},z,{rootRef:a}));z.marked=S.length>0&&S.some(E=>E.label),z.dragging=d,z.focusedThumbIndex=n;const I=ta(z),Q=(c=(u=B==null?void 0:B.root)!=null?u:N.Root)!=null?c:qo,Ce=(k=(R=B==null?void 0:B.rail)!=null?R:N.Rail)!=null?k:Yo,st=(p=(A=B==null?void 0:B.track)!=null?A:N.Track)!=null?p:Xo,qe=(V=(P=B==null?void 0:B.thumb)!=null?P:N.Thumb)!=null?V:Jo,lt=(M=(G=B==null?void 0:B.valueLabel)!=null?G:N.ValueLabel)!=null?M:Qo,Ye=(we=(Pe=B==null?void 0:B.mark)!=null?Pe:N.Mark)!=null?we:Zo,Xe=(Z=(ve=B==null?void 0:B.markLabel)!=null?ve:N.MarkLabel)!=null?Z:ea,it=(X=(Oe=B==null?void 0:B.input)!=null?Oe:N.Input)!=null?X:"input",Je=(K=O==null?void 0:O.root)!=null?K:q.root,kt=(he=O==null?void 0:O.rail)!=null?he:q.rail,Qe=(L=O==null?void 0:O.track)!=null?L:q.track,Ze=(be=O==null?void 0:O.thumb)!=null?be:q.thumb,et=(T=O==null?void 0:O.valueLabel)!=null?T:q.valueLabel,St=(Ae=O==null?void 0:O.mark)!=null?Ae:q.mark,yt=(Le=O==null?void 0:O.markLabel)!=null?Le:q.markLabel,Ct=(me=O==null?void 0:O.input)!=null?me:q.input,Tt=Te({elementType:Q,getSlotProps:Ne,externalSlotProps:Je,externalForwardedProps:Ke,additionalProps:w({},Vo(Q)&&{as:fe}),ownerState:w({},z,Je==null?void 0:Je.ownerState),className:[I.root,Ve]}),It=Te({elementType:Ce,externalSlotProps:kt,ownerState:z,className:I.rail}),wt=Te({elementType:st,externalSlotProps:Qe,additionalProps:{style:w({},ye[_e].offset(x),ye[_e].leap(ae))},ownerState:w({},z,Qe==null?void 0:Qe.ownerState),className:I.track}),Re=Te({elementType:qe,getSlotProps:Ge,externalSlotProps:Ze,ownerState:w({},z,Ze==null?void 0:Ze.ownerState),className:I.thumb}),Pt=Te({elementType:lt,externalSlotProps:et,ownerState:w({},z,et==null?void 0:et.ownerState),className:I.valueLabel}),tt=Te({elementType:Ye,externalSlotProps:St,ownerState:z,className:I.mark}),ot=Te({elementType:Xe,externalSlotProps:yt,ownerState:z,className:I.markLabel}),At=Te({elementType:it,getSlotProps:De,externalSlotProps:Ct,ownerState:z});return s.jsxs(Q,w({},Tt,{children:[s.jsx(Ce,w({},It)),s.jsx(st,w({},wt)),S.filter(E=>E.value>=Se&&E.value<=ke).map((E,U)=>{const at=vt(E.value,Se,ke),Fe=ye[_e].offset(at);let ue;return te===!1?ue=y.indexOf(E.value)!==-1:ue=te==="normal"&&(l?E.value>=y[0]&&E.value<=y[y.length-1]:E.value<=y[0])||te==="inverted"&&(l?E.value<=y[0]||E.value>=y[y.length-1]:E.value>=y[0]),s.jsxs(i.Fragment,{children:[s.jsx(Ye,w({"data-index":U},tt,!xt(Ye)&&{markActive:ue},{style:w({},Fe,tt.style),className:ze(tt.className,ue&&I.markActive)})),E.label!=null?s.jsx(Xe,w({"aria-hidden":!0,"data-index":U},ot,!xt(Xe)&&{markLabelActive:ue},{style:w({},Fe,ot.style),className:ze(I.markLabel,ot.className,ue&&I.markLabelActive),children:E.label})):null]},U)}),y.map((E,U)=>{const at=vt(E,Se,ke),Fe=ye[_e].offset(at),ue=oe==="off"?oa:lt;return s.jsx(ue,w({},!xt(ue)&&{valueLabelFormat:J,valueLabelDisplay:oe,value:typeof J=="function"?J(F(E),U):J,index:U,open:nt===U||Be===U||oe==="on",disabled:xe},Pt,{children:s.jsx(qe,w({"data-index":U},Re,{className:ze(I.thumb,Re.className,Be===U&&I.active,n===U&&I.focusVisible),style:w({},Fe,re(U),Re.style),children:s.jsx(it,w({"data-index":U,"aria-label":D?D(U):Y,"aria-valuenow":F(E),"aria-labelledby":j,"aria-valuetext":$?$(F(E),U):ce,value:y[U]},At))}))}),U)})]}))}),ra=C(_)({position:"relative",minHeight:"100vh",width:"100%","& >.MuiBox-root:first-of-type":{backgroundColor:"#1B7695","& >.MuiBox-root":{color:"#F6FCFC"}}}),na=C(_)({margin:"20px 40px"}),sa=C(_)({margin:"20px 40px",display:"flex",alignItems:"center","@media screen and (max-width: 800px)":{display:"block"}}),la=C(_)({height:"40px",display:"flex",alignItems:"center",cursor:"pointer",marginRight:"250px",transitionDuration:".25s","&:hover":{transform:"scale(1.1)"},"& .MuiSvgIcon-root":{width:"16px",marginRight:"10px",fill:"#155D74"},"@media screen and (max-width: 1050px)":{marginRight:"100px"},"@media screen and (max-width: 900px)":{marginRight:"30px"}}),ia=C(_)({display:"flex",justifyContent:"space-between",alignItems:"center","& >.MuiBox-root":{minWidth:"100px",marginRight:"20px"},"& > .MuiFormControl-root":{marginRight:"20px"},"@media screen and (max-width: 900px)":{"& >.MuiBox-root":{minWidth:"50px",marginRight:"10px"}},"@media screen and (max-width: 650px)":{display:"block","& > .MuiFormControl-root":{alignItems:"start","& .MuiInputBase-root":{width:"100%"}}}}),ca=C(_)({width:"100%",height:"calc(100% - 73px)",margin:"auto",marginTop:"73px"}),Xt=C(_)({height:"calc(100% - 73px)",margin:"20px 40px","& :nth-of-type(2)":{border:"1px solid #A1A1A1",borderRadius:"5px","& input":{width:"100%",cursor:"pointer"}}}),ua=C(_)({display:"flex",alignItems:"center",justifyContent:"space-between",margin:"20px 40px",boxSizing:"border-box"}),bt=C(_)(({isdisable:e})=>({display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#FFAA5D",color:"#474747",border:"1px solid #474747",cursor:e=="true"?"not-allowed":"pointer",opacity:e=="true"?".8":"1","& :hover":{backgroundColor:"#DD883B"},"& button":{textTransform:"capitalize",borderRadius:"0px",width:"100%","& .MuiBox-root":{backgroundColor:"transparent"}}})),da=C(_)({display:"flex",justifyContent:"space-between",width:"20%",alignItems:"center"}),pa=C(_)({boxSizing:"border-box",margin:"20px 40px"}),ha=C(_)({marginTop:"15px","& >.MuiPaper-root":{width:"100%",marginLeft:"0px"}});C(_)({display:"flex",backgroundColor:"#007bff",borderRadius:"10px",height:"10px",boxSizing:"border-box",margin:"20px 40px",cursor:"pointer"});C(_)({position:"absolute",height:"100%",cursor:"pointer",transition:"background-color 0.3s"});C(_)({position:"absolute"});const ma=C(_)({display:"flex",boxSizing:"border-box",margin:"20px 40px"}),fa=C(_)({display:"flex",alignItems:"center",margin:"20px 40px"});class ba{constructor(){Lt(this,"uploadAudio",r=>new Promise((a,c)=>{const u=Ht+"/audio/uploadAudio";zt.post(u,r).then(k=>{a(k.data)}).catch(k=>{c(k)})}));Lt(this,"saveMarker",r=>new Promise((a,c)=>{const u=Ht+"/audio/saveMarker";zt.post(u,r).then(k=>{a(k.data)}).catch(k=>{c(k)})}))}}const Jt=new ba;var jt={},ga=Zt;Object.defineProperty(jt,"__esModule",{value:!0});var ao=jt.default=void 0,xa=ga(to()),va=s;ao=jt.default=(0,xa.default)((0,va.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");var Ot={},ka=Zt;Object.defineProperty(Ot,"__esModule",{value:!0});var ro=Ot.default=void 0,Sa=ka(to()),ya=s;ro=Ot.default=(0,Sa.default)((0,ya.jsx)("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"}),"Pause");const Ca=C(_)({width:"100%",display:"flex",alignItems:"center"}),Ta=C(_)({width:"100%",overflow:"hidden",padding:"0px 10px"}),Ia=C(aa)({color:"red",opacity:"1",height:"5px","& .MuiSlider-thumb":{width:"13.25px",height:"14px",color:"red",transition:"0.3s cubic-bezier(.47,1.64,.41,.8)","&::before":{boxShadow:"0 2px 12px 0 rgba(0,0,0,0.4)"},"&:hover, &.Mui-focusVisible":{boxShadow:"0px 0px 0px 8px rgb(0 0 0 / 16%)"},"&.Mui-active":{width:20,height:20}}}),wa=C(_)({display:"flex",alignItems:"center",justifyContent:"space-between"}),Pa=C(_)({display:"flex",marginRight:"20px"}),Qt=C(_)({cursor:"pointer"});function Aa(e){const[r,a]=i.useState(0),[c,u]=i.useState(e.currentTime),k=i.useRef(new Audio);i.useEffect(()=>{const P=k.current;e.src&&(P.src=e.src);const M=()=>{a(P.duration),e.setAudioDuration(P.duration)},G=()=>{e.setCurrentTime(Math.floor(P.currentTime)),e.endTime&&P.currentTime>=e.endTime&&(P.pause(),e.setIsPlaying(!1))};return P.addEventListener("loadedmetadata",M),P.addEventListener("timeupdate",G),()=>{P.removeEventListener("loadedmetadata",M),P.removeEventListener("timeupdate",G)}},[e.src,e.endTime]),i.useEffect(()=>{u(e.currentTime)},[e.currentTime]),i.useEffect(()=>{const P=k.current;e.isPlaying?(P.currentTime=e.startTime,P.play()):P.pause()},[e.isPlaying,e.startTime]);const R=(P,M)=>{k.current&&(k.current.currentTime=Array.isArray(M)?M[0]:M,e.setCurrentTime(k.current.currentTime),u(M),e.onTimeChange(M))},p=P=>{const M=Math.floor(P/60),G=Math.floor(P%60);return`${M}:${G<10?`0${G}`:G}`},A=()=>s.jsxs(Ta,{children:[s.jsx(Ia,{"aria-label":"time-indicator",value:c,min:0,max:Math.floor(r),step:1,onChange:R}),s.jsxs(wa,{children:[s.jsx(je,{children:p(c)}),s.jsx(je,{children:"-"+p(Math.floor(r-c))})]})]}),V=()=>s.jsx(Pa,{children:e.isPlaying?s.jsx(Qt,{onClick:()=>e.setIsPlaying(!1),children:s.jsx(ro,{})}):s.jsx(Qt,{onClick:()=>e.setIsPlaying(!0),children:s.jsx(ao,{})})});return s.jsxs(Ca,{children:[V(),A()]})}const La=C(_)({display:"flex",backgroundColor:"#007bff",borderRadius:"10px",height:"10px",boxSizing:"border-box",margin:"20px 40px",cursor:"pointer",position:"relative"}),Ba=C(_)(({isactive:e})=>({position:"absolute",width:"5px",height:"100%",backgroundColor:e=="true"?"orange":"red",boxShadow:e=="true"?"0 0 10px 2px rgba(255, 165, 0, 0.5)":"none",transition:"background-color 0.3s ease, box-shadow 0.3s ease"}));function _a(e){const r=a=>{const c=a.currentTarget,u=a.clientX-c.getBoundingClientRect().left;let k=null;for(let R=0;R<e.startTimes.length;R++){const p=e.startTimes[R]/e.duration*c.offsetWidth,A=R+1<e.startTimes.length?e.startTimes[R+1]/e.duration*c.offsetWidth:c.offsetWidth;if(u>=p&&u<A){k=e.startTimes[R];break}}e.setAudioStartTime(k||0)};return s.jsx(La,{onClick:r,children:e.startTimes.map((a,c)=>s.jsx(Ba,{isactive:a===e.activeStartTime?"true":"false",style:{left:`${a/e.duration*100}%`}},c))})}const Ra=[{toolName:"Western",onClick:()=>{}},{toolName:"Arabic",onClick:()=>{}}];function ja(e){var Et;const r=xo(),a=r.state,[c,u]=i.useState(!1),[k,R]=i.useState(null),[p,A]=i.useState(a==null?void 0:a.subBookInfo),[V,P]=i.useState(a==null?void 0:a.chapterInfo),[M,G]=i.useState([]),[we,Pe]=i.useState([]),[Z,ve]=i.useState([]),[X,Oe]=i.useState(e.currentBook),[K,he]=i.useState((Et=a==null?void 0:a.subBookInfo)==null?void 0:Et.subBookId),[L,be]=i.useState(a==null?void 0:a.chapterId),[T,Ae]=i.useState(e.currentLanguage),[Le,me]=i.useState(0),[ee,ie]=i.useState(0),[Y,ce]=i.useState(!1),[j,fe]=i.useState(!1),[N,q]=i.useState(""),[He,Ee]=i.useState(""),[Ve,ge]=i.useState(""),[xe,D]=i.useState(""),[$,Me]=i.useState(null),[ke,Se]=i.useState(""),[W,Ue]=i.useState(null),[We,$e]=i.useState(""),[F,O]=i.useState([]),[B,te]=i.useState([]),[oe,J]=i.useState(0),[Ke,z]=i.useState(0),[ye,Ne]=i.useState(0),[De,Ge]=i.useState(0),[nt,Be]=i.useState(!1),_e=i.useRef(new Audio),n=vo(),l=ko(),d=i.useMemo(()=>{var t;return(t=r==null?void 0:r.state)==null?void 0:t.languages},[e.currentUser]);i.useEffect(()=>{window.scrollTo({top:0})},[]);const S=()=>{localStorage.removeItem(Lo),e.dispatch({type:pe.RESET_USER}),e.dispatch({type:pe.RESET_BOOK}),e.dispatch({type:pe.RESET_APP_TEXT_PAGES}),n("/admin")},y=()=>s.jsx(Co,{isLoggedIn:!0,username:e.currentUser.username,isAdmin:e.currentUser.isAdmin,onLogOut:S}),x=i.useCallback(async t=>(u(!0),await dt.getChapterInfoByChapterId(t)),[L]);i.useEffect(()=>{(async()=>{var o;u(!0);try{const b=e.bookInfos.find(g=>g.bookTitle.en==X);if(b){R(b);const h=Array.from(new Set(b.subBooks.map(f=>f.subBookId))).map(f=>b.subBooks.find(v=>v.subBookId===f)).map(f=>{var v;return{label:(v=f.subBookTitle)==null?void 0:v[T],value:f.subBookId}});Pe(h),h.some(f=>f.value===K)||he(((o=h[0])==null?void 0:o.value)||"")}if(L){const g=e.chapterInfos.find(h=>h.chapterId==L);g?P(g):x(L).then(h=>{P(h),e.dispatch({type:pe.ADD_CHAPTERINFO,payload:{chapterInfo:h}}),u(!1)}).catch(()=>{u(!1)})}}catch{ne.error("Failed to load book information",{position:"top-right",draggable:!0,theme:"colored",transition:se,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})}finally{u(!1)}})()},[X]),i.useEffect(()=>{var g,h,f,v,H;const t=e.bookInfos.find(m=>(m==null?void 0:m.bookTitle.en)==e.currentBook),o=t==null?void 0:t.subBooks.find(m=>m.subBookId==K);o&&A(o),D(((g=o==null?void 0:o.subBookTitle)==null?void 0:g[T])||""),q(((h=o==null?void 0:o.subBookTitle)==null?void 0:h.ar)||""),ge(((f=o==null?void 0:o.subBookTitle)==null?void 0:f.en)||""),Ee(((v=o==null?void 0:o.subBookTitle)==null?void 0:v.transliteration)||"");const b=(H=o==null?void 0:o.chapterInfos)==null?void 0:H.map(m=>({value:m.chapterId,label:m.chapterNumber==0?"Introduction":m.chapterNumber.toString()}));b&&a.chapterId?(ve(b),be(a.chapterId)):b&&(ve(b),be(b[0].value))},[K,e.currentBook]),i.useEffect(()=>{const t=e.chapterInfos.find(o=>o.chapterId==L);t?(P(t),G((t==null?void 0:t.verses)||[])):x(L).then(o=>{P(o),G(o.verses||[]),e.dispatch({type:pe.ADD_CHAPTERINFO,payload:{chapterInfo:o}}),u(!1)}).catch(()=>{me(0),ie(0),ce(!1),fe(!1),ne.warning("Chapter is empty.",{position:"top-right",draggable:!0,theme:"colored",transition:se,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),u(!1)}),a.chapterId=""},[L]),i.useEffect(()=>{var g,h,f,v,H,m;ie(0);const t=(g=V==null?void 0:V.chapterAudio)==null?void 0:g.find(de=>de.language==T),o=(t==null?void 0:t.isCompleted)||!1,b=(t==null?void 0:t.isPublished)||!1;ce(o),fe(b),me(((h=V==null?void 0:V.verses)==null?void 0:h.length)||0),(f=V.verses)==null||f.map(de=>ie(ct=>{var Mt;return(Mt=de==null?void 0:de.verseAudioStart)!=null&&Mt[T]?ct+1:ct})),D(((v=p==null?void 0:p.subBookTitle)==null?void 0:v[T])||""),q(((H=p==null?void 0:p.subBookTitle)==null?void 0:H.ar)||""),ge(((m=p==null?void 0:p.subBookTitle)==null?void 0:m.en)||""),be(V.chapterId)},[M,k,p,V,T]);const ae=t=>{Oe(t),n("/admin/bookoverview"),e.dispatch({type:pe.SET_BOOK,payload:{bookTitle:t}})},re=()=>s.jsx(na,{children:s.jsx(Ao,{books:Bo.map(t=>({bookTitle:t.bookTitle,onClick:()=>ae(t.value)})),selectedBook:X})}),I=t=>{const o=t.target.value;he(o)},Q=t=>{const o=t.target.value;be(o)},Ce=t=>{const o=t.target.value;Ae(o),e.dispatch({type:pe.SET_CURRENT_LANGUAGE,payload:{language:o}})},st=()=>s.jsxs(sa,{children:[s.jsxs(la,{onClick:()=>n("/admin/bookoverview"),children:[s.jsx(Io,{}),s.jsx(je,{fontFamily:"Inter",color:"#155D74",fontWeight:"500",children:"overview"})]}),s.jsxs(ia,{children:[s.jsx(je,{fontFamily:"Inter",color:"#155D74",fontWeight:"500",children:X==Vt||X==Ut?"Go to: ":"Go to Surah: "}),s.jsx(Rt,{label:"",options:we,value:we.find(t=>t.value===K)?K:"",backgroundColor:"#fff",textColor:"#155D74",onChange:I}),(X==Vt||X==Ut)&&s.jsx(Rt,{label:"",options:Z,value:Z.find(t=>t.value===L)?L:"",backgroundColor:"#fff",textColor:"#155D74",onChange:Q}),s.jsx(Rt,{label:"",options:d,value:T,backgroundColor:"#fff",textColor:"#155D74",onChange:Ce})]})]}),qe=t=>{const o={chapterAudio:t.audio,chapterId:t._id,chapterNumber:t.chapterNumber,chapterTranslated:t.isTranslated,chapterIsCompleted:t.isCompleted,chapterIsPublished:t.isPublished,subBookId:t.subBook},b=e.bookInfos.map(g=>({...g,subBooks:g.subBooks.map(h=>({...h,chapterInfos:h.chapterInfos.map(f=>f.chapterId===L?{...f,...o}:f)}))}));e.dispatch({type:pe.SET_BOOKINFOS,payload:{bookInfos:b}}),e.dispatch({type:pe.UPDATE_CHAPTERINFOS,payload:{chapterInfo:o}})},lt=t=>{const o={chapterInfos:(p==null?void 0:p.chapterInfos)||[],subBookId:(p==null?void 0:p.subBookId)||"",subBookNumber:(p==null?void 0:p.subBookNumber)||1,subBookTitle:t.title,noChapter:!0},b=e.bookInfos.map(g=>({...g,subBooks:g.subBooks.map(h=>h.subBookId==K?{...h,...o}:h)}));e.dispatch({type:pe.SET_BOOKINFOS,payload:{bookInfos:b}})},Ye=async t=>{var g,h;const o=(g=e.chapterInfos)==null?void 0:g.find(f=>f.chapterId==L),b=(h=o==null?void 0:o.chapterAudio)==null?void 0:h.some(f=>f.language==T);if(o&&b){ce(t),fe(t&&j),u(!0);const v=(o==null?void 0:o.chapterAudio).map(m=>m.language==T?{...m,isCompleted:!Y,isPublished:t&&j}:m),H={chapterNumber:o.chapterNumber||1,subBook:o.subBookId||"",audio:v,isTranslated:o.chapterTranslated,isCompleted:o.chapterIsCompleted,isPublished:o.chapterIsPublished};dt.updateChapterInfo({chapterId:L,newChapterInfo:H}).then(m=>{const de={chapterId:m._id,chapterNumber:m.chapterNumber,chapterTranslated:m.isTranslated,chapterAudio:m.audio,subBookId:m.subBook,chapterIsCompleted:m.isCompleted,chapterIsPublished:m.isPublished,verses:m.verses};qe(m),Re(de),ne.success(`Success to ${t?"complete":"incomplete"} the audio`,{position:"top-right",draggable:!0,theme:"colored",transition:se,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),u(!1)}).catch(()=>{ne.error("Failed to complete the audio",{position:"top-right",draggable:!0,theme:"colored",transition:se,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),u(!1)})}else ne.error("Failed to complete the chapter because of no audio",{position:"top-right",draggable:!0,theme:"colored",transition:se,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})},Xe=async t=>{var g,h;const o=(g=e.chapterInfos)==null?void 0:g.find(f=>f.chapterId==L),b=(h=o==null?void 0:o.chapterAudio)==null?void 0:h.some(f=>f.language==T);if(o&&b&&Y){fe(t),u(!0);const v=(o==null?void 0:o.chapterAudio).map(m=>m.language==T?{...m,isPublished:!j}:m),H={chapterNumber:o.chapterNumber||1,subBook:o.subBookId||"",audio:v,isTranslated:o.chapterTranslated,isCompleted:o.chapterIsCompleted,isPublished:o.chapterIsPublished};dt.updateChapterInfo({chapterId:L,newChapterInfo:H}).then(m=>{const de={chapterId:m._id,chapterNumber:m.chapterNumber,chapterTranslated:m.isTranslated,chapterAudio:m.audio,subBookId:m.subBook,chapterIsCompleted:m.isCompleted,chapterIsPublished:m.isPublished,verses:m.verses};qe(m),Re(de),ne.success(`Success to ${t?"publish":"withhold"} the audio`,{position:"top-right",draggable:!0,theme:"colored",transition:se,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),u(!1)}).catch(()=>{ne.error("Failed to publish the audio",{position:"top-right",draggable:!0,theme:"colored",transition:se,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),u(!1)})}else ne.error("Failed to publish the chapter because of no audio",{position:"top-right",draggable:!0,theme:"colored",transition:se,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})},it=t=>{T=="en"?ge(t):T=="ar"&&q(t),D(t)},Je=t=>{T=="ar"&&D(t),q(t)},kt=t=>{T=="en"&&D(t),ge(t)},Qe=(t,o,b,g)=>{const h={[`${T}`]:t,ar:o,transliteration:b,en:g},f={...p,subBookTitle:h},v={title:f.subBookTitle,number:f.subBookNumber||1,book:(k==null?void 0:k.bookId)||"",noChapter:!0};p!=null&&p.subBookId?(u(!0),dt.updateSubBookInfo({subBookId:p==null?void 0:p.subBookId,newSubBookInfo:v}).then(H=>{lt(H),u(!1)}).catch(()=>{ne.error("Failed to update the summary of chapter",{position:"top-right",draggable:!0,theme:"colored",transition:se,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),u(!1)})):ne.error(To,{position:"top-right",draggable:!0,theme:"colored",transition:se,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})},Ze=()=>s.jsx(wo,{currentUser:e.currentUser,currentBook:e.currentBook,totalCountVerse:Le,languageCountVerse:ee,isComplete:Y,isPublish:j,isSpecialBook:X==_o||X==Ro,currentLanguage:T,arabicChapterTitle:N,englishChapterTitle:Ve,transliteration:He,currentChapterTitle:xe,translateComplete:t=>Ye(t),translatePublish:t=>Xe(t),handleCurrentChapterTitleChange:t=>it(t),handleArabicChapterTitleChange:t=>Je(t),handleTransliterationChapterTitleChange:t=>Ee(t),handleEnglishChapterTitleChange:t=>kt(t),handleUpdateChapterSummary:Qe});i.useEffect(()=>{if($){const t=URL.createObjectURL($);Se(t)}},[$]);const et=()=>s.jsxs(Xt,{children:[s.jsx(je,{color:"#155D74",fontFamily:"'Baloo Da 2'",children:"Select Audio File:"}),s.jsx(Wt,{type:".mp3, .m4a",onChange:t=>Me(t.target.files?t.target.files[0]:null)})]}),St=t=>{const o=t.split(":");if(o.length!==4)throw new Error(`Invalid timecode format: ${t}`);const b=parseInt(o[0],10)||0,g=parseInt(o[1],10)||0,h=parseInt(o[2],10)||0,f=parseInt(o[3],10)||0;return b*3600+g*60+h+f/25},yt=t=>{const o=t.split(`
`),b=[];let g=null;o.forEach(v=>{const H=v.match(/(\d{2}:\d{2}:\d{2}:\d{2})/);H&&(g=H[1]);const m=v.match(/\|M:(.*?)(\s|$)/);if(m&&g){const de=m[1].trim(),ct=St(g)-3600;b.push({name:de,time:ct.toFixed(2)})}});const h="Verse Number, Marker Name, Marker Time",f=b.map((v,H)=>`${H+1}, ${v.name},${v.time}`);return[h,...f].join(`
`)},Ct=()=>{var g;const t=new Blob([We],{type:"text/csv"}),o=document.createElement("a");o.href=URL.createObjectURL(t);const b=`${Date.now()}_${(g=W==null?void 0:W.name)==null?void 0:g.split(".edl")[0]}.csv`;o.download=b,document.body.appendChild(o),o.click(),document.body.removeChild(o)},Tt=t=>{const o=t.split(`
`).filter(h=>h.trim()!==""),b=o[0].split(",").map(h=>h.trim());return o.slice(1).map(h=>{const f=h.split(",").map(v=>v.trim());return b.reduce((v,H,m)=>(v[H]=f[m],v),{})})},It=(t,o)=>{J(Number(t)),z(o?Number(o):0),Be(!0)};i.useEffect(()=>{if(!W)return;const t=new FileReader;t.onload=()=>{var o;if(t.result){const b=t.result.toString(),g=yt(b),h=Tt(g);O(h);const f=[];for(let v=0;v<h.length;v++){const H={Verse:(o=M[v].verseText)==null?void 0:o[T],"Marker Name":h[v]["Marker Name"],"Marker Time":h[v]["Marker Time"],Action:s.jsx(bt,{isdisable:$&&W?"false":"true",children:s.jsx(ut,{label:"Play",disabled:!$||!W,onClick:()=>It(h[v]["Marker Time"],v<h.length-1?h[v+1]["Marker Time"]:"")})})};f.push(H)}te(f||[]),$e(g)}},t.readAsText(W)},[W]);const wt=()=>s.jsxs(Xt,{children:[s.jsx(je,{color:"#155D74",fontFamily:"'Baloo Da 2'",children:"Select EDL File:"}),s.jsx(Wt,{type:".edl",onChange:t=>Ue(t.target.files?t.target.files[0]:null)})]}),Re=t=>{var o;(o=e.chapterInfos)!=null&&o.some(b=>b.chapterId==t.chapterId)?e.dispatch({type:pe.UPDATE_CHAPTERINFOS,payload:{chapterInfo:t}}):console.log("No Chapter Info")},Pt=i.useCallback(()=>{const t=new FormData;$&&(u(!0),t.append("file",$,`${Date.now()}_${$.name}`),t.append("chapterId",L),t.append("languageCode",T),t.append("isCompleted",Y?"true":"false"),t.append("isPublished",j?"true":"false"),Jt.uploadAudio(t).then(o=>{Re(o),P(o),ne.success("Success to complete the audio",{position:"top-right",draggable:!0,theme:"colored",transition:se,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),u(!1)}).catch(o=>{console.log(o),u(!1)}))},[$,T,K,L]),tt=i.useCallback(()=>{Jt.saveMarker({chapterId:L,languageCode:T,markerData:F}).then(t=>{console.log(t),ie(F.length),ne.success("Success to set time marker",{position:"top-right",draggable:!0,theme:"colored",transition:se,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})}).catch(t=>console.log(t))},[F,L,T]),ot=()=>s.jsxs(ua,{children:[s.jsx(bt,{isdisable:W?"false":"true",children:s.jsx(ut,{label:"Download CSV",disabled:!W,onClick:Ct})}),s.jsxs(da,{children:[s.jsx(bt,{isdisable:W?"false":"true",children:s.jsx(ut,{label:"Save Markers",disabled:!W,onClick:tt})}),s.jsx(bt,{isdisable:$?"false":"true",children:s.jsx(ut,{label:"Upload Audio",disabled:!$,onClick:Pt})})]})]}),At=t=>{_e.current.currentTime=t,Ne(t)},E=()=>$&&s.jsxs(pa,{children:[s.jsx(je,{color:"#155D74",fontFamily:"'Baloo Da 2'",children:$?`Playing: ${($==null?void 0:$.name)||"Audio"}`:"No audio file is selected"}),s.jsx(ha,{children:s.jsx(Aa,{src:ke,startTime:oe,endTime:Ke,currentTime:ye,isPlaying:nt,setCurrentTime:t=>Ne(t),setIsPlaying:t=>Be(t),setAudioDuration:t=>Ge(t),onTimeChange:t=>At(t)})})]});i.useEffect(()=>{const t=F.findIndex(b=>Number(b["Marker Time"])==oe);let o=0;t<F.length-1?o=Number(F[t+1]["Marker Time"]):o=De,z(o),Be(!0)},[oe,F]);const U=()=>!F||F.length===0?null:s.jsx(_a,{startTimes:F.map(t=>Number(t["Marker Time"])),duration:De,activeStartTime:oe,setAudioStartTime:t=>J(t)}),at=()=>s.jsx(ma,{}),Fe=()=>W&&s.jsx(fa,{children:s.jsx(jo,{headers:["Verse","Marker Name","Marker Time","Action"],rows:B})}),ue=()=>s.jsxs(ca,{children:[s.jsx(Po,{tools:Ra}),re(),st(),Ze(),et(),wt(),ot(),E(),U(),at(),Fe()]});return s.jsxs(s.Fragment,{children:[s.jsxs(ra,{flexDirection:l?"column":"row",children:[y(),ue()]}),s.jsx(So,{}),c&&s.jsx(yo,{})]})}function Oa(e){return{dispatch:e}}function Ea(e){return{currentUser:e.user.currentUser,bookInfos:e.book.bookInfos,chapterInfos:e.book.chapterInfos,currentLanguage:e.book.language,currentBook:e.book.book,appTextPages:e.translator.appTextPages}}const qa=go(Ea,Oa)(ja);export{qa as default};
