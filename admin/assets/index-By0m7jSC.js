var na=Object.defineProperty;var sa=(e,o,r)=>o in e?na(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r;var Lt=(e,o,r)=>sa(e,typeof o!="symbol"?o+"":o,r);import{a as l,Y as ot,_ as P,j as s,v as Ae,V as Nt,W as $t,Q as Dt,U as ia,c as la,O as Zt}from"./createTheme-5WTCcQAP.js";import{ae as ua,af as ca,ag as Ft,ah as da,ai as Bt,aj as gt,ak as _t,al as xt,O as pa,a3 as ha,aa as ze,s as C,am as ea,a7 as ma,an as Pe,ab as fa,B as O,V as Ht,r as ta,T as Oe,t as ba,W as ga,u as xa,K as va,F as ie,A as le,H as ue,q as ct,Q as ka,E as ya,w as Sa,a2 as Ca}from"./App-DXqbDzgb.js";import{d as Ta,S as Ia}from"./index-BPtRRlGu.js";import{T as wa,B as Pa}from"./index-sTfyoM_b.js";import{b as zt,A as Aa,i as La,q as Vt,r as Ut,B as Ba,h as _a}from"./index-sI8Dvx2S.js";import{F as Wt}from"./index-BqNb8qiS.js";import{S as Rt}from"./index-rVfcEpoU.js";import{T as Ra}from"./index-zpmpnMR2.js";import{b as dt}from"./book.services-CY6J6opQ.js";import"./index-DI2t1KcP.js";import"./images-BNEWrLuw.js";import"./TableContainer-DSFCF4nI.js";const Oa={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Ea(e,o,r=(u,c)=>u===c){return e.length===o.length&&e.every((u,c)=>r(u,o[c]))}const ja=2;function aa(e,o){return e-o}function Kt(e,o){var r;const{index:u}=(r=e.reduce((c,v,E)=>{const p=Math.abs(o-v);return c===null||p<c.distance||p===c.distance?{distance:p,index:E}:c},null))!=null?r:{};return u}function pt(e,o){if(o.current!==void 0&&e.changedTouches){const r=e;for(let u=0;u<r.changedTouches.length;u+=1){const c=r.changedTouches[u];if(c.identifier===o.current)return{x:c.clientX,y:c.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function vt(e,o,r){return(e-o)*100/(r-o)}function Ma(e,o,r){return(r-o)*e+o}function Na(e){if(Math.abs(e)<1){const r=e.toExponential().split("e-"),u=r[0].split(".")[1];return(u?u.length:0)+parseInt(r[1],10)}const o=e.toString().split(".")[1];return o?o.length:0}function $a(e,o,r){const u=Math.round((e-r)/o)*o+r;return Number(u.toFixed(Na(o)))}function Gt({values:e,newValue:o,index:r}){const u=e.slice();return u[r]=o,u.sort(aa)}function ht({sliderRef:e,activeIndex:o,setActive:r}){var u,c;const v=gt(e.current);if(!((u=e.current)!=null&&u.contains(v.activeElement))||Number(v==null||(c=v.activeElement)==null?void 0:c.getAttribute("data-index"))!==o){var E;(E=e.current)==null||E.querySelector(`[type="range"][data-index="${o}"]`).focus()}r&&r(o)}function mt(e,o){return typeof e=="number"&&typeof o=="number"?e===o:typeof e=="object"&&typeof o=="object"?Ea(e,o):!1}const Da={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},Fa=e=>e;let ft;function qt(){return ft===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?ft=CSS.supports("touch-action","none"):ft=!0),ft}function Ha(e){const{"aria-labelledby":o,defaultValue:r,disabled:u=!1,disableSwap:c=!1,isRtl:v=!1,marks:E=!1,max:p=100,min:A=0,name:D,onChange:ee,onChangeCommitted:ne,orientation:k="horizontal",rootRef:W,scale:K=Fa,step:z=1,shiftStep:fe=10,tabIndex:Q,value:Ee}=e,q=l.useRef(void 0),[be,L]=l.useState(-1),[ve,T]=l.useState(-1),[Le,Be]=l.useState(!1),ge=l.useRef(0),[te,de]=ua({controlled:Ee,default:r??A,name:"Slider"}),X=ee&&((n,i,d)=>{const y=n.nativeEvent||n,S=new y.constructor(y.type,y);Object.defineProperty(S,"target",{writable:!0,value:{value:i,name:D}}),ee(S,i,d)}),pe=Array.isArray(te);let j=pe?te.slice().sort(aa):[te];j=j.map(n=>n==null?A:ot(n,A,p));const xe=E===!0&&z!==null?[...Array(Math.floor((p-A)/z)+1)].map((n,i)=>({value:A+z*i})):E||[],F=xe.map(n=>n.value),{isFocusVisibleRef:Y,onBlur:Ve,onFocus:je,ref:Ue}=ca(),[ke,ye]=l.useState(-1),H=l.useRef(null),N=Ft(Ue,H),Me=Ft(W,N),Se=n=>i=>{var d;const y=Number(i.currentTarget.getAttribute("data-index"));je(i),Y.current===!0&&ye(y),T(y),n==null||(d=n.onFocus)==null||d.call(n,i)},Ce=n=>i=>{var d;Ve(i),Y.current===!1&&ye(-1),T(-1),n==null||(d=n.onBlur)==null||d.call(n,i)},G=(n,i)=>{const d=Number(n.currentTarget.getAttribute("data-index")),y=j[d],S=F.indexOf(y);let g=i;if(xe&&z==null){const oe=F[F.length-1];g>oe?g=oe:g<F[0]?g=F[0]:g=g<y?F[S-1]:F[S+1]}if(g=ot(g,A,p),pe){c&&(g=ot(g,j[d-1]||-1/0,j[d+1]||1/0));const oe=g;g=Gt({values:j,newValue:g,index:d});let se=d;c||(se=g.indexOf(oe)),ht({sliderRef:H,activeIndex:se})}de(g),ye(d),X&&!mt(g,te)&&X(n,g,d),ne&&ne(n,g)},We=n=>i=>{var d;if(z!==null){const y=Number(i.currentTarget.getAttribute("data-index")),S=j[y];let g=null;(i.key==="ArrowLeft"||i.key==="ArrowDown")&&i.shiftKey||i.key==="PageDown"?g=Math.max(S-fe,A):((i.key==="ArrowRight"||i.key==="ArrowUp")&&i.shiftKey||i.key==="PageUp")&&(g=Math.min(S+fe,p)),g!==null&&(G(i,g),i.preventDefault())}n==null||(d=n.onKeyDown)==null||d.call(n,i)};da(()=>{if(u&&H.current.contains(document.activeElement)){var n;(n=document.activeElement)==null||n.blur()}},[u]),u&&be!==-1&&L(-1),u&&ke!==-1&&ye(-1);const Ke=n=>i=>{var d;(d=n.onChange)==null||d.call(n,i),G(i,i.target.valueAsNumber)},Ne=l.useRef(void 0);let V=k;v&&k==="horizontal"&&(V+="-reverse");const M=({finger:n,move:i=!1})=>{const{current:d}=H,{width:y,height:S,bottom:g,left:oe}=d.getBoundingClientRect();let se;V.indexOf("vertical")===0?se=(g-n.y)/S:se=(n.x-oe)/y,V.indexOf("-reverse")!==-1&&(se=1-se);let I;if(I=Ma(se,A,p),z)I=$a(I,z,A);else{const we=Kt(F,I);I=F[we]}I=ot(I,A,p);let Z=0;if(pe){i?Z=Ne.current:Z=Kt(j,I),c&&(I=ot(I,j[Z-1]||-1/0,j[Z+1]||1/0));const we=I;I=Gt({values:j,newValue:I,index:Z}),c&&i||(Z=I.indexOf(we),Ne.current=Z)}return{newValue:I,activeIndex:Z}},_=Bt(n=>{const i=pt(n,q);if(!i)return;if(ge.current+=1,n.type==="mousemove"&&n.buttons===0){ae(n);return}const{newValue:d,activeIndex:y}=M({finger:i,move:!0});ht({sliderRef:H,activeIndex:y,setActive:L}),de(d),!Le&&ge.current>ja&&Be(!0),X&&!mt(d,te)&&X(n,d,y)}),ae=Bt(n=>{const i=pt(n,q);if(Be(!1),!i)return;const{newValue:d}=M({finger:i,move:!0});L(-1),n.type==="touchend"&&T(-1),ne&&ne(n,d),q.current=void 0,J()}),re=Bt(n=>{if(u)return;qt()||n.preventDefault();const i=n.changedTouches[0];i!=null&&(q.current=i.identifier);const d=pt(n,q);if(d!==!1){const{newValue:S,activeIndex:g}=M({finger:d});ht({sliderRef:H,activeIndex:g,setActive:L}),de(S),X&&!mt(S,te)&&X(n,S,g)}ge.current=0;const y=gt(H.current);y.addEventListener("touchmove",_,{passive:!0}),y.addEventListener("touchend",ae,{passive:!0})}),J=l.useCallback(()=>{const n=gt(H.current);n.removeEventListener("mousemove",_),n.removeEventListener("mouseup",ae),n.removeEventListener("touchmove",_),n.removeEventListener("touchend",ae)},[ae,_]);l.useEffect(()=>{const{current:n}=H;return n.addEventListener("touchstart",re,{passive:qt()}),()=>{n.removeEventListener("touchstart",re),J()}},[J,re]),l.useEffect(()=>{u&&J()},[u,J]);const $e=n=>i=>{var d;if((d=n.onMouseDown)==null||d.call(n,i),u||i.defaultPrevented||i.button!==0)return;i.preventDefault();const y=pt(i,q);if(y!==!1){const{newValue:g,activeIndex:oe}=M({finger:y});ht({sliderRef:H,activeIndex:oe,setActive:L}),de(g),X&&!mt(g,te)&&X(i,g,oe)}ge.current=0;const S=gt(H.current);S.addEventListener("mousemove",_,{passive:!0}),S.addEventListener("mouseup",ae)},$=vt(pe?j[0]:A,A,p),Te=vt(j[j.length-1],A,p)-$,De=(n={})=>{const i=_t(n),d={onMouseDown:$e(i||{})},y=P({},i,d);return P({},n,{ref:Me},y)},Fe=n=>i=>{var d;(d=n.onMouseOver)==null||d.call(n,i);const y=Number(i.currentTarget.getAttribute("data-index"));T(y)},Ge=n=>i=>{var d;(d=n.onMouseLeave)==null||d.call(n,i),T(-1)};return{active:be,axis:V,axisProps:Da,dragging:Le,focusedThumbIndex:ke,getHiddenInputProps:(n={})=>{var i;const d=_t(n),y={onChange:Ke(d||{}),onFocus:Se(d||{}),onBlur:Ce(d||{}),onKeyDown:We(d||{})},S=P({},d,y);return P({tabIndex:Q,"aria-labelledby":o,"aria-orientation":k,"aria-valuemax":K(p),"aria-valuemin":K(A),name:D,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":(i=e.step)!=null?i:void 0,disabled:u},n,S,{style:P({},Oa,{direction:v?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:De,getThumbProps:(n={})=>{const i=_t(n),d={onMouseOver:Fe(i||{}),onMouseLeave:Ge(i||{})};return P({},n,i,d)},marks:xe,open:ve,range:pe,rootRef:Me,trackLeap:Te,trackOffset:$,values:j,getThumbStyle:n=>({pointerEvents:be!==-1&&be!==n?"none":void 0})}}const za=e=>!e||!xt(e);function Va(e){return ha("MuiSlider",e)}const ce=pa("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Ua=e=>{const{open:o}=e;return{offset:ze(o&&ce.valueLabelOpen),circle:ce.valueLabelCircle,label:ce.valueLabelLabel}};function Wa(e){const{children:o,className:r,value:u}=e,c=Ua(e);return o?l.cloneElement(o,{className:ze(o.props.className)},s.jsxs(l.Fragment,{children:[o.props.children,s.jsx("span",{className:ze(c.offset,r),"aria-hidden":!0,children:s.jsx("span",{className:c.circle,children:s.jsx("span",{className:c.label,children:u})})})]})):null}const Ka=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","shiftStep","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function Yt(e){return e}const Ga=C("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[o.root,o[`color${Ae(r.color)}`],r.size!=="medium"&&o[`size${Ae(r.size)}`],r.marked&&o.marked,r.orientation==="vertical"&&o.vertical,r.track==="inverted"&&o.trackInverted,r.track===!1&&o.trackFalse]}})(({theme:e})=>{var o;return{borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${ce.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${ce.dragging}`]:{[`& .${ce.thumb}, & .${ce.track}`]:{transition:"none"}},variants:[...Object.keys(((o=e.vars)!=null?o:e).palette).filter(r=>{var u;return((u=e.vars)!=null?u:e).palette[r].main}).map(r=>({props:{color:r},style:{color:(e.vars||e).palette[r].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}}),qa=C("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,o)=>o.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Ya=C("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,o)=>o.track})(({theme:e})=>{var o;return{display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.keys(((o=e.vars)!=null?o:e).palette).filter(r=>{var u;return((u=e.vars)!=null?u:e).palette[r].main}).map(r=>({props:{color:r,track:"inverted"},style:P({},e.vars?{backgroundColor:e.vars.palette.Slider[`${r}Track`],borderColor:e.vars.palette.Slider[`${r}Track`]}:P({backgroundColor:Nt(e.palette[r].main,.62),borderColor:Nt(e.palette[r].main,.62)},e.applyStyles("dark",{backgroundColor:$t(e.palette[r].main,.5)}),e.applyStyles("dark",{borderColor:$t(e.palette[r].main,.5)})))}))]}}),Xa=C("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[o.thumb,o[`thumbColor${Ae(r.color)}`],r.size!=="medium"&&o[`thumbSize${Ae(r.size)}`]]}})(({theme:e})=>{var o;return{position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${ce.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.keys(((o=e.vars)!=null?o:e).palette).filter(r=>{var u;return((u=e.vars)!=null?u:e).palette[r].main}).map(r=>({props:{color:r},style:{[`&:hover, &.${ce.focusVisible}`]:P({},e.vars?{boxShadow:`0px 0px 0px 8px rgba(${e.vars.palette[r].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${Dt(e.palette[r].main,.16)}`},{"@media (hover: none)":{boxShadow:"none"}}),[`&.${ce.active}`]:P({},e.vars?{boxShadow:`0px 0px 0px 14px rgba(${e.vars.palette[r].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${Dt(e.palette[r].main,.16)}`})}}))]}}),Ja=C(Wa,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,o)=>o.valueLabel})(({theme:e})=>P({zIndex:1,whiteSpace:"nowrap"},e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${ce.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${ce.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]})),Qa=C("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>ea(e)&&e!=="markActive",overridesResolver:(e,o)=>{const{markActive:r}=e;return[o.mark,r&&o.markActive]}})(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]})),Za=C("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>ea(e)&&e!=="markLabelActive",overridesResolver:(e,o)=>o.markLabel})(({theme:e})=>P({},e.typography.body2,{color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]})),er=e=>{const{disabled:o,dragging:r,marked:u,orientation:c,track:v,classes:E,color:p,size:A}=e,D={root:["root",o&&"disabled",r&&"dragging",u&&"marked",c==="vertical"&&"vertical",v==="inverted"&&"trackInverted",v===!1&&"trackFalse",p&&`color${Ae(p)}`,A&&`size${Ae(A)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",o&&"disabled",A&&`thumbSize${Ae(A)}`,p&&`thumbColor${Ae(p)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return fa(D,Va,E)},tr=({children:e})=>e,ar=l.forwardRef(function(o,r){var u,c,v,E,p,A,D,ee,ne,k,W,K,z,fe,Q,Ee,q,be,L,ve,T,Le,Be,ge;const te=ma({props:o,name:"MuiSlider"}),de=ia(),{"aria-label":X,"aria-valuetext":pe,"aria-labelledby":j,component:xe="span",components:F={},componentsProps:Y={},color:Ve="primary",classes:je,className:Ue,disableSwap:ke=!1,disabled:ye=!1,getAriaLabel:H,getAriaValueText:N,marks:Me=!1,max:Se=100,min:Ce=0,orientation:G="horizontal",shiftStep:We=10,size:Ke="medium",step:Ne=1,scale:V=Yt,slotProps:M,slots:_,track:ae="normal",valueLabelDisplay:re="off",valueLabelFormat:J=Yt}=te,$e=la(te,Ka),$=P({},te,{isRtl:de,max:Se,min:Ce,classes:je,disabled:ye,disableSwap:ke,orientation:G,marks:Me,color:Ve,size:Ke,step:Ne,shiftStep:We,scale:V,track:ae,valueLabelDisplay:re,valueLabelFormat:J}),{axisProps:Te,getRootProps:De,getHiddenInputProps:Fe,getThumbProps:Ge,open:nt,active:Ie,axis:_e,focusedThumbIndex:n,range:i,dragging:d,marks:y,values:S,trackOffset:g,trackLeap:oe,getThumbStyle:se}=Ha(P({},$,{rootRef:r}));$.marked=y.length>0&&y.some(R=>R.label),$.dragging=d,$.focusedThumbIndex=n;const I=er($),Z=(u=(c=_==null?void 0:_.root)!=null?c:F.Root)!=null?u:Ga,we=(v=(E=_==null?void 0:_.rail)!=null?E:F.Rail)!=null?v:qa,st=(p=(A=_==null?void 0:_.track)!=null?A:F.Track)!=null?p:Ya,qe=(D=(ee=_==null?void 0:_.thumb)!=null?ee:F.Thumb)!=null?D:Xa,it=(ne=(k=_==null?void 0:_.valueLabel)!=null?k:F.ValueLabel)!=null?ne:Ja,Ye=(W=(K=_==null?void 0:_.mark)!=null?K:F.Mark)!=null?W:Qa,Xe=(z=(fe=_==null?void 0:_.markLabel)!=null?fe:F.MarkLabel)!=null?z:Za,lt=(Q=(Ee=_==null?void 0:_.input)!=null?Ee:F.Input)!=null?Q:"input",Je=(q=M==null?void 0:M.root)!=null?q:Y.root,kt=(be=M==null?void 0:M.rail)!=null?be:Y.rail,Qe=(L=M==null?void 0:M.track)!=null?L:Y.track,Ze=(ve=M==null?void 0:M.thumb)!=null?ve:Y.thumb,et=(T=M==null?void 0:M.valueLabel)!=null?T:Y.valueLabel,yt=(Le=M==null?void 0:M.mark)!=null?Le:Y.mark,St=(Be=M==null?void 0:M.markLabel)!=null?Be:Y.markLabel,Ct=(ge=M==null?void 0:M.input)!=null?ge:Y.input,Tt=Pe({elementType:Z,getSlotProps:De,externalSlotProps:Je,externalForwardedProps:$e,additionalProps:P({},za(Z)&&{as:xe}),ownerState:P({},$,Je==null?void 0:Je.ownerState),className:[I.root,Ue]}),It=Pe({elementType:we,externalSlotProps:kt,ownerState:$,className:I.rail}),wt=Pe({elementType:st,externalSlotProps:Qe,additionalProps:{style:P({},Te[_e].offset(g),Te[_e].leap(oe))},ownerState:P({},$,Qe==null?void 0:Qe.ownerState),className:I.track}),Re=Pe({elementType:qe,getSlotProps:Ge,externalSlotProps:Ze,ownerState:P({},$,Ze==null?void 0:Ze.ownerState),className:I.thumb}),Pt=Pe({elementType:it,externalSlotProps:et,ownerState:P({},$,et==null?void 0:et.ownerState),className:I.valueLabel}),tt=Pe({elementType:Ye,externalSlotProps:yt,ownerState:$,className:I.mark}),at=Pe({elementType:Xe,externalSlotProps:St,ownerState:$,className:I.markLabel}),At=Pe({elementType:lt,getSlotProps:Fe,externalSlotProps:Ct,ownerState:$});return s.jsxs(Z,P({},Tt,{children:[s.jsx(we,P({},It)),s.jsx(st,P({},wt)),y.filter(R=>R.value>=Ce&&R.value<=Se).map((R,U)=>{const rt=vt(R.value,Ce,Se),He=Te[_e].offset(rt);let he;return ae===!1?he=S.indexOf(R.value)!==-1:he=ae==="normal"&&(i?R.value>=S[0]&&R.value<=S[S.length-1]:R.value<=S[0])||ae==="inverted"&&(i?R.value<=S[0]||R.value>=S[S.length-1]:R.value>=S[0]),s.jsxs(l.Fragment,{children:[s.jsx(Ye,P({"data-index":U},tt,!xt(Ye)&&{markActive:he},{style:P({},He,tt.style),className:ze(tt.className,he&&I.markActive)})),R.label!=null?s.jsx(Xe,P({"aria-hidden":!0,"data-index":U},at,!xt(Xe)&&{markLabelActive:he},{style:P({},He,at.style),className:ze(I.markLabel,at.className,he&&I.markLabelActive),children:R.label})):null]},U)}),S.map((R,U)=>{const rt=vt(R,Ce,Se),He=Te[_e].offset(rt),he=re==="off"?tr:it;return s.jsx(he,P({},!xt(he)&&{valueLabelFormat:J,valueLabelDisplay:re,value:typeof J=="function"?J(V(R),U):J,index:U,open:nt===U||Ie===U||re==="on",disabled:ye},Pt,{children:s.jsx(qe,P({"data-index":U},Re,{className:ze(I.thumb,Re.className,Ie===U&&I.active,n===U&&I.focusVisible),style:P({},He,se(U),Re.style),children:s.jsx(lt,P({"data-index":U,"aria-label":H?H(U):X,"aria-valuenow":V(R),"aria-labelledby":j,"aria-valuetext":N?N(V(R),U):pe,value:S[U]},At))}))}),U)})]}))}),rr=C(O)({position:"relative",minHeight:"100vh",width:"100%","& >.MuiBox-root:first-of-type":{backgroundColor:"#1B7695","& >.MuiBox-root":{color:"#F6FCFC"}}}),or=C(O)({margin:"20px 40px"}),nr=C(O)({margin:"20px 40px",display:"flex",alignItems:"center","@media screen and (max-width: 800px)":{display:"block"}}),sr=C(O)({height:"40px",display:"flex",alignItems:"center",cursor:"pointer",marginRight:"250px",transitionDuration:".25s","&:hover":{transform:"scale(1.1)"},"& .MuiSvgIcon-root":{width:"16px",marginRight:"10px",fill:"#155D74"},"@media screen and (max-width: 1050px)":{marginRight:"100px"},"@media screen and (max-width: 900px)":{marginRight:"30px"}}),ir=C(O)({display:"flex",justifyContent:"space-between",alignItems:"center","& >.MuiBox-root":{minWidth:"100px",marginRight:"20px"},"& > .MuiFormControl-root":{marginRight:"20px"},"@media screen and (max-width: 900px)":{"& >.MuiBox-root":{minWidth:"50px",marginRight:"10px"}},"@media screen and (max-width: 650px)":{display:"block","& > .MuiFormControl-root":{alignItems:"start","& .MuiInputBase-root":{width:"100%"}}}}),lr=C(O)({width:"100%",height:"calc(100% - 73px)",margin:"auto",marginTop:"73px"}),Xt=C(O)({height:"calc(100% - 73px)",margin:"20px 40px","& :nth-of-type(2)":{border:"1px solid #A1A1A1",borderRadius:"5px","& input":{width:"100%",cursor:"pointer"}}}),ur=C(O)({display:"flex",alignItems:"center",justifyContent:"space-between",margin:"20px 40px",boxSizing:"border-box"}),bt=C(O)(({isdisable:e})=>({display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#FFAA5D",color:"#474747",border:"1px solid #474747",cursor:e=="true"?"not-allowed":"pointer",opacity:e=="true"?".8":"1","& :hover":{backgroundColor:"#DD883B"},"& button":{textTransform:"capitalize",borderRadius:"0px",width:"100%","& .MuiBox-root":{backgroundColor:"transparent"}}})),cr=C(O)({display:"flex",justifyContent:"space-between",width:"20%",alignItems:"center"}),dr=C(O)({boxSizing:"border-box",margin:"20px 40px"}),pr=C(O)({marginTop:"15px","& >.MuiPaper-root":{width:"100%",marginLeft:"0px"}});C(O)({display:"flex",backgroundColor:"#007bff",borderRadius:"10px",height:"10px",boxSizing:"border-box",margin:"20px 40px",cursor:"pointer"});C(O)({position:"absolute",height:"100%",cursor:"pointer",transition:"background-color 0.3s"});C(O)({position:"absolute"});C(O)({display:"flex",boxSizing:"border-box",margin:"20px 40px"});const hr=C(O)({display:"flex",alignItems:"center",margin:"20px 40px"});class mr{constructor(){Lt(this,"uploadAudio",o=>new Promise((r,u)=>{const c=zt+"/audio/uploadAudio";Ht.post(c,o).then(v=>{r(v.data)}).catch(v=>{u(v)})}));Lt(this,"saveMarker",o=>new Promise((r,u)=>{const c=zt+"/audio/saveMarker";Ht.post(c,o).then(v=>{r(v.data)}).catch(v=>{u(v)})}))}}const Jt=new mr;var Ot={},fr=Zt;Object.defineProperty(Ot,"__esModule",{value:!0});var ra=Ot.default=void 0,br=fr(ta()),gr=s;ra=Ot.default=(0,br.default)((0,gr.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");var Et={},xr=Zt;Object.defineProperty(Et,"__esModule",{value:!0});var oa=Et.default=void 0,vr=xr(ta()),kr=s;oa=Et.default=(0,vr.default)((0,kr.jsx)("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"}),"Pause");const yr=C(O)({width:"100%",display:"flex",alignItems:"center"}),Sr=C(O)({width:"100%",overflow:"hidden",padding:"0px 10px"}),Cr=C(ar)({color:"red",opacity:"1",height:"5px","& .MuiSlider-thumb":{width:"13.25px",height:"14px",color:"red",transition:"0.3s cubic-bezier(.47,1.64,.41,.8)","&::before":{boxShadow:"0 2px 12px 0 rgba(0,0,0,0.4)"},"&:hover, &.Mui-focusVisible":{boxShadow:"0px 0px 0px 8px rgb(0 0 0 / 16%)"},"&.Mui-active":{width:20,height:20}}}),Tr=C(O)({display:"flex",alignItems:"center",justifyContent:"space-between"}),Ir=C(O)({display:"flex",marginRight:"20px"}),Qt=C(O)({cursor:"pointer"});function wr(e){const[o,r]=l.useState(0),[u,c]=l.useState(e.currentTime),v=l.useRef(new Audio);l.useEffect(()=>{const k=v.current;e.src&&k.src!==e.src&&(k.src=e.src,k.load(),k.oncanplaythrough=()=>{e.isPlaying&&k.play()});const W=()=>{r(k.duration),e.setAudioDuration(k.duration)},K=()=>{e.setCurrentTime(Math.floor(k.currentTime)),e.endTime&&k.currentTime>=e.endTime&&(k.pause(),e.setIsPlaying(!1))};return k.addEventListener("loadedmetadata",W),k.addEventListener("timeupdate",K),()=>{k.removeEventListener("loadedmetadata",W),k.removeEventListener("timeupdate",K)}},[e.src,e.isPlaying,e.startTime,e.endTime]),l.useEffect(()=>{c(e.currentTime)},[e.currentTime]),l.useEffect(()=>{e.setCurrentTime(u)},[u]),l.useEffect(()=>{const k=v.current;e.isPlaying?(k.currentTime=e.startTime,k.play()):k.pause()},[e.isPlaying,e.startTime,e.endTime]);const E=(k,W)=>{const K=v.current;if(K){const z=Array.isArray(W)?W[0]:W;K.currentTime=z,c(z),e.setCurrentTime(z),e.setStartTime(z),e.onTimeChange(z),e.setCurrentAudioHandler("Audio Player"),K.play().catch(fe=>{console.error("Error playing audio after selecting a point:",fe)}),e.setIsPlaying(!0)}},p=()=>{v.current.pause()},A=()=>{v.current.play().catch(W=>{console.error("Error resuming playback after dragging:",W)})},D=k=>{const W=Math.floor(k/60),K=Math.floor(k%60);return`${W}:${K<10?`0${K}`:K}`},ee=()=>s.jsxs(Sr,{children:[s.jsx(Cr,{"aria-label":"time-indicator",value:u,min:0,max:Math.floor(o),step:1,onChange:E,onMouseDown:p,onMouseUp:A}),s.jsxs(Tr,{children:[s.jsx(Oe,{children:D(u)}),s.jsx(Oe,{children:"-"+D(Math.floor(o-u))})]})]}),ne=()=>s.jsx(Ir,{children:e.isPlaying?s.jsx(Qt,{onClick:()=>e.setIsPlaying(!1),children:s.jsx(oa,{})}):s.jsx(Qt,{onClick:()=>e.setIsPlaying(!0),children:s.jsx(ra,{})})});return s.jsxs(yr,{children:[ne(),ee()]})}const Pr=C(O)({display:"flex",backgroundColor:"#007bff",borderRadius:"10px",height:"10px",boxSizing:"border-box",margin:"20px 40px",cursor:"pointer",position:"relative"}),Ar=C(O)(({isactive:e})=>({position:"absolute",width:"5px",height:e=="true"?"20px":"10px",backgroundColor:e=="true"?"orange":"red",boxShadow:e=="true"?"0 0 10px 2px rgba(255, 165, 0, 0.5)":"none",transition:"background-color 0.3s ease, box-shadow 0.3s ease",bottom:e=="true"?"-5px":"0px"}));function Lr(e){const o=r=>{const u=r.currentTarget,c=r.clientX-u.getBoundingClientRect().left;let v=null;for(let E=0;E<e.startTimes.length;E++){const p=e.startTimes[E]/e.duration*u.offsetWidth,A=E+1<e.startTimes.length?e.startTimes[E+1]/e.duration*u.offsetWidth:u.offsetWidth;if(c>=p&&c<A){v=e.startTimes[E];break}}e.setCurrentAudioHandler("Time Line"),e.setAudioStartTime(v||0)};return l.useEffect(()=>{e.setAudioStartTime(e.activeStartTime)},[e.activeStartTime]),s.jsx(Pr,{onClick:o,children:e.startTimes.map((r,u)=>s.jsx(Ar,{isactive:r===e.activeStartTime?"true":"false",style:{left:`${r/e.duration*100}%`}},u))})}const Br=[{toolName:"Western",onClick:()=>{}},{toolName:"Arabic",onClick:()=>{}}];function _r(e){var jt;const o=ga(),r=o.state,[u,c]=l.useState(!1),[v,E]=l.useState(null),[p,A]=l.useState(r==null?void 0:r.subBookInfo),[D,ee]=l.useState(r==null?void 0:r.chapterInfo),[ne,k]=l.useState([]),[W,K]=l.useState([]),[z,fe]=l.useState([]),[Q,Ee]=l.useState(e.currentBook),[q,be]=l.useState((jt=r==null?void 0:r.subBookInfo)==null?void 0:jt.subBookId),[L,ve]=l.useState(r==null?void 0:r.chapterId),[T,Le]=l.useState(e.currentLanguage),[Be,ge]=l.useState(0),[te,de]=l.useState(0),[X,pe]=l.useState(!1),[j,xe]=l.useState(!1),[F,Y]=l.useState(""),[Ve,je]=l.useState(""),[Ue,ke]=l.useState(""),[ye,H]=l.useState(""),[N,Me]=l.useState(null),[Se,Ce]=l.useState(""),[G,We]=l.useState(null),[Ke,Ne]=l.useState(""),[V,M]=l.useState([]),[_,ae]=l.useState([]),[re,J]=l.useState(0),[$e,$]=l.useState(0),[Te,De]=l.useState(0),[Fe,Ge]=l.useState(0),[nt,Ie]=l.useState(!1),_e=l.useRef(new Audio),n=xa(),i=va(),d=l.useMemo(()=>{var t;return(t=o==null?void 0:o.state)==null?void 0:t.languages},[e.currentUser]);l.useEffect(()=>{window.scrollTo({top:0})},[]);const y=()=>{localStorage.removeItem(Aa),e.dispatch({type:ie.RESET_USER}),e.dispatch({type:ie.RESET_BOOK}),e.dispatch({type:ie.RESET_APP_TEXT_PAGES}),n("/admin")},S=()=>s.jsx(Sa,{isLoggedIn:!0,username:e.currentUser.username,isAdmin:e.currentUser.isAdmin,onLogOut:y}),g=l.useCallback(async t=>(c(!0),await dt.getChapterInfoByChapterId(t)),[L]);l.useEffect(()=>{(async()=>{var a;c(!0);try{const b=e.bookInfos.find(x=>x.bookTitle.en==Q);if(b){E(b);const f=Array.from(new Set(b.subBooks.map(m=>m.subBookId))).map(m=>b.subBooks.find(w=>w.subBookId===m)).map(m=>{var w;return{label:(w=m.subBookTitle)==null?void 0:w[T],value:m.subBookId}});K(f),f.some(m=>m.value===q)||be(((a=f[0])==null?void 0:a.value)||"")}if(L){const x=e.chapterInfos.find(f=>f.chapterId==L);x?ee(x):g(L).then(f=>{ee(f),e.dispatch({type:ie.ADD_CHAPTERINFO,payload:{chapterInfo:f}}),c(!1)}).catch(()=>{c(!1)})}}catch{le.error("Failed to load book information",{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})}finally{c(!1)}})()},[Q]),l.useEffect(()=>{var x,f,m,w,B;const t=e.bookInfos.find(h=>(h==null?void 0:h.bookTitle.en)==e.currentBook),a=t==null?void 0:t.subBooks.find(h=>h.subBookId==q);a&&A(a),H(((x=a==null?void 0:a.subBookTitle)==null?void 0:x[T])||""),Y(((f=a==null?void 0:a.subBookTitle)==null?void 0:f.ar)||""),ke(((m=a==null?void 0:a.subBookTitle)==null?void 0:m.en)||""),je(((w=a==null?void 0:a.subBookTitle)==null?void 0:w.transliteration)||"");const b=(B=a==null?void 0:a.chapterInfos)==null?void 0:B.map(h=>({value:h.chapterId,label:h.chapterNumber==0?"Introduction":h.chapterNumber.toString()}));b&&r.chapterId?(fe(b),ve(r.chapterId)):b&&(fe(b),ve(b[0].value))},[q,e.currentBook]),l.useEffect(()=>{const t=e.chapterInfos.find(a=>a.chapterId==L);t?(ee(t),k((t==null?void 0:t.verses)||[])):g(L).then(a=>{ee(a),k(a.verses||[]),e.dispatch({type:ie.ADD_CHAPTERINFO,payload:{chapterInfo:a}}),c(!1)}).catch(()=>{ge(0),de(0),pe(!1),xe(!1),le.warning("Chapter is empty.",{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),c(!1)}),r.chapterId=""},[L]),l.useEffect(()=>{var x,f,m,w,B,h;de(0);const t=(x=D==null?void 0:D.chapterAudio)==null?void 0:x.find(me=>me.language==T),a=(t==null?void 0:t.isCompleted)||!1,b=(t==null?void 0:t.isPublished)||!1;pe(a),xe(b),ge(((f=D==null?void 0:D.verses)==null?void 0:f.length)||0),(m=D.verses)==null||m.map(me=>de(ut=>{var Mt;return(Mt=me==null?void 0:me.verseAudioStart)!=null&&Mt[T]?ut+1:ut})),H(((w=p==null?void 0:p.subBookTitle)==null?void 0:w[T])||""),Y(((B=p==null?void 0:p.subBookTitle)==null?void 0:B.ar)||""),ke(((h=p==null?void 0:p.subBookTitle)==null?void 0:h.en)||""),ve(D.chapterId)},[ne,v,p,D,T]);const oe=t=>{Ee(t),n("/admin/bookoverview"),e.dispatch({type:ie.SET_BOOK,payload:{bookTitle:t}})},se=()=>s.jsx(or,{children:s.jsx(Pa,{books:La.map(t=>({bookTitle:t.bookTitle,onClick:()=>oe(t.value)})),selectedBook:Q})}),I=t=>{const a=t.target.value;be(a)},Z=t=>{const a=t.target.value;ve(a)},we=t=>{const a=t.target.value;Le(a),e.dispatch({type:ie.SET_CURRENT_LANGUAGE,payload:{language:a}})},st=()=>s.jsxs(nr,{children:[s.jsxs(sr,{onClick:()=>n("/admin/bookoverview"),children:[s.jsx(Ta,{}),s.jsx(Oe,{fontFamily:"Inter",color:"#155D74",fontWeight:"500",children:"overview"})]}),s.jsxs(ir,{children:[s.jsx(Oe,{fontFamily:"Inter",color:"#155D74",fontWeight:"500",children:Q==Vt||Q==Ut?"Go to: ":"Go to Surah: "}),s.jsx(Rt,{label:"",options:W,value:W.find(t=>t.value===q)?q:"",backgroundColor:"#fff",textColor:"#155D74",onChange:I}),(Q==Vt||Q==Ut)&&s.jsx(Rt,{label:"",options:z,value:z.find(t=>t.value===L)?L:"",backgroundColor:"#fff",textColor:"#155D74",onChange:Z}),s.jsx(Rt,{label:"",options:d,value:T,backgroundColor:"#fff",textColor:"#155D74",onChange:we})]})]}),qe=t=>{const a={chapterAudio:t.audio,chapterId:t._id,chapterNumber:t.chapterNumber,chapterTranslated:t.isTranslated,chapterIsCompleted:t.isCompleted,chapterIsPublished:t.isPublished,subBookId:t.subBook},b=e.bookInfos.map(x=>({...x,subBooks:x.subBooks.map(f=>({...f,chapterInfos:f.chapterInfos.map(m=>m.chapterId===L?{...m,...a}:m)}))}));e.dispatch({type:ie.SET_BOOKINFOS,payload:{bookInfos:b}}),e.dispatch({type:ie.UPDATE_CHAPTERINFOS,payload:{chapterInfo:a}})},it=t=>{const a={chapterInfos:(p==null?void 0:p.chapterInfos)||[],subBookId:(p==null?void 0:p.subBookId)||"",subBookNumber:(p==null?void 0:p.subBookNumber)||1,subBookTitle:t.title,noChapter:!0},b=e.bookInfos.map(x=>({...x,subBooks:x.subBooks.map(f=>f.subBookId==q?{...f,...a}:f)}));e.dispatch({type:ie.SET_BOOKINFOS,payload:{bookInfos:b}})},Ye=async t=>{var x,f;const a=(x=e.chapterInfos)==null?void 0:x.find(m=>m.chapterId==L),b=(f=a==null?void 0:a.chapterAudio)==null?void 0:f.some(m=>m.language==T);if(a&&b){pe(t),xe(t&&j),c(!0);const w=(a==null?void 0:a.chapterAudio).map(h=>h.language==T?{...h,isCompleted:!X,isPublished:t&&j}:h),B={chapterNumber:a.chapterNumber||1,subBook:a.subBookId||"",audio:w,isTranslated:a.chapterTranslated,isCompleted:a.chapterIsCompleted,isPublished:a.chapterIsPublished};dt.updateChapterInfo({chapterId:L,newChapterInfo:B}).then(h=>{const me={chapterId:h._id,chapterNumber:h.chapterNumber,chapterTranslated:h.isTranslated,chapterAudio:h.audio,subBookId:h.subBook,chapterIsCompleted:h.isCompleted,chapterIsPublished:h.isPublished,verses:h.verses};qe(h),Re(me),le.success(`Success to ${t?"complete":"incomplete"} the audio`,{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),c(!1)}).catch(()=>{le.error("Failed to complete the audio",{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),c(!1)})}else le.error("Failed to complete the chapter because of no audio",{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})},Xe=async t=>{var x,f;const a=(x=e.chapterInfos)==null?void 0:x.find(m=>m.chapterId==L),b=(f=a==null?void 0:a.chapterAudio)==null?void 0:f.some(m=>m.language==T);if(a&&b&&X){xe(t),c(!0);const w=(a==null?void 0:a.chapterAudio).map(h=>h.language==T?{...h,isPublished:!j}:h),B={chapterNumber:a.chapterNumber||1,subBook:a.subBookId||"",audio:w,isTranslated:a.chapterTranslated,isCompleted:a.chapterIsCompleted,isPublished:a.chapterIsPublished};dt.updateChapterInfo({chapterId:L,newChapterInfo:B}).then(h=>{const me={chapterId:h._id,chapterNumber:h.chapterNumber,chapterTranslated:h.isTranslated,chapterAudio:h.audio,subBookId:h.subBook,chapterIsCompleted:h.isCompleted,chapterIsPublished:h.isPublished,verses:h.verses};qe(h),Re(me),le.success(`Success to ${t?"publish":"withhold"} the audio`,{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),c(!1)}).catch(()=>{le.error("Failed to publish the audio",{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),c(!1)})}else le.error("Failed to publish the chapter because of no audio",{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})},lt=t=>{T=="en"?ke(t):T=="ar"&&Y(t),H(t)},Je=t=>{T=="ar"&&H(t),Y(t)},kt=t=>{T=="en"&&H(t),ke(t)},Qe=(t,a,b,x)=>{const f={[`${T}`]:t,ar:a,transliteration:b,en:x},m={...p,subBookTitle:f},w={title:m.subBookTitle,number:m.subBookNumber||1,book:(v==null?void 0:v.bookId)||"",noChapter:!0};p!=null&&p.subBookId?(c(!0),dt.updateSubBookInfo({subBookId:p==null?void 0:p.subBookId,newSubBookInfo:w}).then(B=>{it(B),c(!1)}).catch(()=>{le.error("Failed to update the summary of chapter",{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),c(!1)})):le.error(Ca,{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})},Ze=()=>s.jsx(Ia,{currentUser:e.currentUser,currentBook:e.currentBook,totalCountVerse:Be,languageCountVerse:te,isComplete:X,isPublish:j,isSpecialBook:Q==Ba||Q==_a,currentLanguage:T,arabicChapterTitle:F,englishChapterTitle:Ue,transliteration:Ve,currentChapterTitle:ye,handleComplete:t=>Ye(t),handlePublish:t=>Xe(t),handleCurrentChapterTitleChange:t=>lt(t),handleArabicChapterTitleChange:t=>Je(t),handleTransliterationChapterTitleChange:t=>je(t),handleEnglishChapterTitleChange:t=>kt(t),handleUpdateChapterSummary:Qe});l.useEffect(()=>{if(N){const t=URL.createObjectURL(N);Ce(t),Ie(!1)}},[N]);const et=()=>s.jsxs(Xt,{children:[s.jsx(Oe,{color:"#155D74",fontFamily:"'Baloo Da 2'",children:"Select Audio File:"}),s.jsx(Wt,{type:".mp3, .m4a",onChange:t=>Me(t.target.files?t.target.files[0]:null)})]}),yt=t=>{const a=t.split(":");if(a.length!==4)throw new Error(`Invalid timecode format: ${t}`);const b=parseInt(a[0],10)||0,x=parseInt(a[1],10)||0,f=parseInt(a[2],10)||0,m=parseInt(a[3],10)||0;return b*3600+x*60+f+m/25},St=t=>{const a=t.split(`
`),b=[];let x=null;a.forEach(w=>{const B=w.match(/(\d{2}:\d{2}:\d{2}:\d{2})/);B&&(x=B[1]);const h=w.match(/\|M:(.*?)(\s|$)/);if(h&&x){const me=h[1].trim(),ut=yt(x)-3600;b.push({name:me,time:ut.toFixed(2)})}});const f="Verse Number, Marker Name, Marker Time",m=b.map((w,B)=>`${B+1}, ${w.name},${w.time}`);return[f,...m].join(`
`)},Ct=()=>{var x;const t=new Blob([Ke],{type:"text/csv"}),a=document.createElement("a");a.href=URL.createObjectURL(t);const b=`${Date.now()}_${(x=G==null?void 0:G.name)==null?void 0:x.split(".edl")[0]}.csv`;a.download=b,document.body.appendChild(a),a.click(),document.body.removeChild(a)},Tt=t=>{const a=t.split(`
`).filter(f=>f.trim()!==""),b=a[0].split(",").map(f=>f.trim());return a.slice(1).map(f=>{const m=f.split(",").map(w=>w.trim());return b.reduce((w,B,h)=>(w[B]=m[h],w),{})})},It=(t,a)=>{J(Number(t)),$(a?Number(a):0),Ie(!0)};l.useEffect(()=>{if(!G)return;const t=new FileReader;t.onload=()=>{var a,b;if(t.result){const x=t.result.toString(),f=St(x),m=Tt(f);M(m);const w=[];for(let B=0;B<m.length;B++){const h={Verse:(b=(a=ne[B])==null?void 0:a.verseText)==null?void 0:b[T],"Marker Name":m[B]["Marker Name"],"Marker Time":m[B]["Marker Time"],Action:s.jsx(bt,{isdisable:N&&G?"false":"true",children:s.jsx(ct,{label:"Play",disabled:!N||!G,onClick:()=>{It(m[B]["Marker Time"],B<m.length-1?m[B+1]["Marker Time"]:""),R("Time Line")}})})};w.push(h)}ae(w||[]),Ne(f)}},t.readAsText(G)},[G,L]);const wt=()=>s.jsxs(Xt,{children:[s.jsx(Oe,{color:"#155D74",fontFamily:"'Baloo Da 2'",children:"Select EDL File:"}),s.jsx(Wt,{type:".edl",onChange:t=>We(t.target.files?t.target.files[0]:null)})]}),Re=t=>{var a;(a=e.chapterInfos)!=null&&a.some(b=>b.chapterId==t.chapterId)?e.dispatch({type:ie.UPDATE_CHAPTERINFOS,payload:{chapterInfo:t}}):console.log("No Chapter Info")},Pt=l.useCallback(()=>{const t=new FormData;N&&(c(!0),t.append("file",N,`${Date.now()}_${N.name}`),t.append("chapterId",L),t.append("languageCode",T),t.append("isCompleted",X?"true":"false"),t.append("isPublished",j?"true":"false"),Jt.uploadAudio(t).then(a=>{Re(a),ee(a),le.success("Success to complete the audio",{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),c(!1)}).catch(a=>{console.log(a),c(!1)}))},[N,T,q,L]),tt=l.useCallback(()=>{Jt.saveMarker({chapterId:L,languageCode:T,markerData:V}).then(t=>{console.log(t),de(V.length),le.success("Success to set time marker",{position:"top-right",draggable:!0,theme:"colored",transition:ue,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})}).catch(t=>console.log(t))},[V,L,T]),at=()=>s.jsxs(ur,{children:[s.jsx(bt,{isdisable:G?"false":"true",children:s.jsx(ct,{label:"Download CSV",disabled:!G,onClick:Ct})}),s.jsxs(cr,{children:[s.jsx(bt,{isdisable:G?"false":"true",children:s.jsx(ct,{label:"Save Markers",disabled:!G,onClick:tt})}),s.jsx(bt,{isdisable:N?"false":"true",children:s.jsx(ct,{label:"Upload Audio",disabled:!N,onClick:Pt})})]})]}),At=t=>{_e.current.currentTime=t,De(t)},R=t=>{e.dispatch({type:ie.SET_CURRENT_AUDIO_HANDLER,payload:{currentAudioHandler:t}})},U=()=>N&&s.jsxs(dr,{children:[s.jsx(Oe,{color:"#155D74",fontFamily:"'Baloo Da 2'",children:N?`Playing: ${(N==null?void 0:N.name)||"Audio"}`:"No audio file is selected"}),s.jsx(pr,{children:s.jsx(wr,{src:Se,startTime:re,endTime:$e,currentTime:Te,isPlaying:nt,setCurrentTime:t=>De(t),setStartTime:t=>J(t),setEndTime:t=>$(t),setIsPlaying:t=>Ie(t),setAudioDuration:t=>Ge(t),setCurrentAudioHandler:t=>R(t),onTimeChange:t=>At(t)})})]});l.useEffect(()=>{const t=V.findIndex(b=>Number(b["Marker Time"])>=re);let a=0;t<V.length-1&&e.currentAudioHandler=="Time Line"?a=Number(V[t+1]["Marker Time"]):a=Fe,$(a),Ie(!0)},[re,$e]);const rt=()=>!V||V.length===0?null:s.jsx(Lr,{startTimes:V.map(t=>Number(t["Marker Time"])),duration:Fe,activeStartTime:re,setCurrentAudioHandler:t=>R(t),setAudioStartTime:t=>J(t)}),He=()=>G&&s.jsx(hr,{children:s.jsx(Ra,{headers:["Verse","Marker Name","Marker Time","Action"],rows:_})}),he=()=>s.jsxs(lr,{children:[s.jsx(wa,{tools:Br}),se(),st(),Ze(),et(),wt(),at(),U(),rt(),He()]});return s.jsxs(s.Fragment,{children:[s.jsxs(rr,{flexDirection:i?"column":"row",children:[S(),he()]}),s.jsx(ka,{}),u&&s.jsx(ya,{})]})}function Rr(e){return{dispatch:e}}function Or(e){return{currentUser:e.user.currentUser,bookInfos:e.book.bookInfos,chapterInfos:e.book.chapterInfos,currentLanguage:e.book.language,currentBook:e.book.book,currentAudioHandler:e.translator.currentAudioHandler,appTextPages:e.translator.appTextPages}}const Gr=ba(Or,Rr)(_r);export{Gr as default};
