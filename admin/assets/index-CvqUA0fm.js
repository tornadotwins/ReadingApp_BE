var kr=Object.defineProperty;var Sr=(e,a,r)=>a in e?kr(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r;var Nt=(e,a,r)=>Sr(e,typeof a!="symbol"?a+"":a,r);import{a as l,Y as mt,_ as L,j as s,v as Ee,V as Gt,W as qt,Q as Yt,U as yr,c as Cr,O as cr}from"./createTheme-DrRrGbl4.js";import{ab as Tr,ac as Ir,ad as Xt,ae as wr,af as $t,ag as Ct,ah as Dt,ai as Tt,_ as Ar,$ as Pr,a6 as Je,s as I,aj as ur,a3 as Lr,ak as Re,a7 as Br,B as j,aa as Jt,r as dr,T as je,t as _r,O as Rr,u as jr,K as Er,q as Ye,F as ue,A as de,H as pe,Q as Mr,E as Or,w as Nr,Z as $r}from"./App-BwJIMztZ.js";import{a as Dr,d as Fr,S as Hr}from"./index-DamM7nKE.js";import{b as xt,d as zr}from"./book.services-c1oRKW6P.js";import{T as Vr,B as Ur}from"./index-BH1edEoK.js";import{b as It,A as Wr,i as Kr,k as Qt,n as Zt,B as Gr,h as qr}from"./index-TrJ_ia1S.js";import{F as er,T as Yr}from"./index-hOaCEgrR.js";import{S as Ft}from"./index-BRqJwjJq.js";import"./index-Bu5tq7oA.js";import"./images-ZhCTvYdf.js";import"./TableContainer-D8HSW0hd.js";const Xr={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Jr(e,a,r=(c,u)=>c===u){return e.length===a.length&&e.every((c,u)=>r(c,a[u]))}const Qr=2;function pr(e,a){return e-a}function tr(e,a){var r;const{index:c}=(r=e.reduce((u,b,O)=>{const B=Math.abs(a-b);return u===null||B<u.distance||B===u.distance?{distance:B,index:O}:u},null))!=null?r:{};return c}function vt(e,a){if(a.current!==void 0&&e.changedTouches){const r=e;for(let c=0;c<r.changedTouches.length;c+=1){const u=r.changedTouches[c];if(u.identifier===a.current)return{x:u.clientX,y:u.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function wt(e,a,r){return(e-a)*100/(r-a)}function Zr(e,a,r){return(r-a)*e+a}function ea(e){if(Math.abs(e)<1){const r=e.toExponential().split("e-"),c=r[0].split(".")[1];return(c?c.length:0)+parseInt(r[1],10)}const a=e.toString().split(".")[1];return a?a.length:0}function ta(e,a,r){const c=Math.round((e-r)/a)*a+r;return Number(c.toFixed(ea(a)))}function rr({values:e,newValue:a,index:r}){const c=e.slice();return c[r]=a,c.sort(pr)}function kt({sliderRef:e,activeIndex:a,setActive:r}){var c,u;const b=Ct(e.current);if(!((c=e.current)!=null&&c.contains(b.activeElement))||Number(b==null||(u=b.activeElement)==null?void 0:u.getAttribute("data-index"))!==a){var O;(O=e.current)==null||O.querySelector(`[type="range"][data-index="${a}"]`).focus()}r&&r(a)}function St(e,a){return typeof e=="number"&&typeof a=="number"?e===a:typeof e=="object"&&typeof a=="object"?Jr(e,a):!1}const ra={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},aa=e=>e;let yt;function ar(){return yt===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?yt=CSS.supports("touch-action","none"):yt=!0),yt}function oa(e){const{"aria-labelledby":a,defaultValue:r,disabled:c=!1,disableSwap:u=!1,isRtl:b=!1,marks:O=!1,max:B=100,min:_=0,name:k,onChange:ge,onChangeCommitted:z,orientation:S="horizontal",rootRef:V,scale:U=aa,step:W=1,shiftStep:xe=10,tabIndex:Me,value:Oe}=e,K=l.useRef(void 0),[ve,J]=l.useState(-1),[Ne,R]=l.useState(-1),[fe,x]=l.useState(!1),ke=l.useRef(0),[oe,Se]=Tr({controlled:Oe,default:r??_,name:"Slider"}),ie=ge&&((n,i,d)=>{const T=n.nativeEvent||n,w=new T.constructor(T.type,T);Object.defineProperty(w,"target",{writable:!0,value:{value:i,name:k}}),ge(w,i,d)}),le=Array.isArray(oe);let $=le?oe.slice().sort(pr):[oe];$=$.map(n=>n==null?_:mt(n,_,B));const ye=O===!0&&W!==null?[...Array(Math.floor((B-_)/W)+1)].map((n,i)=>({value:_+W*i})):O||[],E=ye.map(n=>n.value),{isFocusVisibleRef:Q,onBlur:Qe,onFocus:Pe,ref:Ze}=Ir(),[$e,Ce]=l.useState(-1),G=l.useRef(null),We=Xt(Ze,G),be=Xt(V,We),N=n=>i=>{var d;const T=Number(i.currentTarget.getAttribute("data-index"));Pe(i),Q.current===!0&&Ce(T),R(T),n==null||(d=n.onFocus)==null||d.call(n,i)},Te=n=>i=>{var d;Qe(i),Q.current===!1&&Ce(-1),R(-1),n==null||(d=n.onBlur)==null||d.call(n,i)},De=(n,i)=>{const d=Number(n.currentTarget.getAttribute("data-index")),T=$[d],w=E.indexOf(T);let C=i;if(ye&&W==null){const ne=E[E.length-1];C>ne?C=ne:C<E[0]?C=E[0]:C=C<T?E[w-1]:E[w+1]}if(C=mt(C,_,B),le){u&&(C=mt(C,$[d-1]||-1/0,$[d+1]||1/0));const ne=C;C=rr({values:$,newValue:C,index:d});let se=d;u||(se=C.indexOf(ne)),kt({sliderRef:G,activeIndex:se})}Se(C),Ce(d),ie&&!St(C,oe)&&ie(n,C,d),z&&z(n,C)},Le=n=>i=>{var d;if(W!==null){const T=Number(i.currentTarget.getAttribute("data-index")),w=$[T];let C=null;(i.key==="ArrowLeft"||i.key==="ArrowDown")&&i.shiftKey||i.key==="PageDown"?C=Math.max(w-xe,_):((i.key==="ArrowRight"||i.key==="ArrowUp")&&i.shiftKey||i.key==="PageUp")&&(C=Math.min(w+xe,B)),C!==null&&(De(i,C),i.preventDefault())}n==null||(d=n.onKeyDown)==null||d.call(n,i)};wr(()=>{if(c&&G.current.contains(document.activeElement)){var n;(n=document.activeElement)==null||n.blur()}},[c]),c&&ve!==-1&&J(-1),c&&$e!==-1&&Ce(-1);const F=n=>i=>{var d;(d=n.onChange)==null||d.call(n,i),De(i,i.target.valueAsNumber)},Fe=l.useRef(void 0);let me=S;b&&S==="horizontal"&&(me+="-reverse");const M=({finger:n,move:i=!1})=>{const{current:d}=G,{width:T,height:w,bottom:C,left:ne}=d.getBoundingClientRect();let se;me.indexOf("vertical")===0?se=(C-n.y)/w:se=(n.x-ne)/T,me.indexOf("-reverse")!==-1&&(se=1-se);let P;if(P=Zr(se,_,B),W)P=ta(P,W,_);else{const Ae=tr(E,P);P=E[Ae]}P=mt(P,_,B);let re=0;if(le){i?re=Fe.current:re=tr($,P),u&&(P=mt(P,$[re-1]||-1/0,$[re+1]||1/0));const Ae=P;P=rr({values:$,newValue:P,index:re}),u&&i||(re=P.indexOf(Ae),Fe.current=re)}return{newValue:P,activeIndex:re}},A=$t(n=>{const i=vt(n,K);if(!i)return;if(ke.current+=1,n.type==="mousemove"&&n.buttons===0){Z(n);return}const{newValue:d,activeIndex:T}=M({finger:i,move:!0});kt({sliderRef:G,activeIndex:T,setActive:J}),Se(d),!fe&&ke.current>Qr&&x(!0),ie&&!St(d,oe)&&ie(n,d,T)}),Z=$t(n=>{const i=vt(n,K);if(x(!1),!i)return;const{newValue:d}=M({finger:i,move:!0});J(-1),n.type==="touchend"&&R(-1),z&&z(n,d),K.current=void 0,X()}),te=$t(n=>{if(c)return;ar()||n.preventDefault();const i=n.changedTouches[0];i!=null&&(K.current=i.identifier);const d=vt(n,K);if(d!==!1){const{newValue:w,activeIndex:C}=M({finger:d});kt({sliderRef:G,activeIndex:C,setActive:J}),Se(w),ie&&!St(w,oe)&&ie(n,w,C)}ke.current=0;const T=Ct(G.current);T.addEventListener("touchmove",A,{passive:!0}),T.addEventListener("touchend",Z,{passive:!0})}),X=l.useCallback(()=>{const n=Ct(G.current);n.removeEventListener("mousemove",A),n.removeEventListener("mouseup",Z),n.removeEventListener("touchmove",A),n.removeEventListener("touchend",Z)},[Z,A]);l.useEffect(()=>{const{current:n}=G;return n.addEventListener("touchstart",te,{passive:ar()}),()=>{n.removeEventListener("touchstart",te),X()}},[X,te]),l.useEffect(()=>{c&&X()},[c,X]);const Be=n=>i=>{var d;if((d=n.onMouseDown)==null||d.call(n,i),c||i.defaultPrevented||i.button!==0)return;i.preventDefault();const T=vt(i,K);if(T!==!1){const{newValue:C,activeIndex:ne}=M({finger:T});kt({sliderRef:G,activeIndex:ne,setActive:J}),Se(C),ie&&!St(C,oe)&&ie(i,C,ne)}ke.current=0;const w=Ct(G.current);w.addEventListener("mousemove",A,{passive:!0}),w.addEventListener("mouseup",Z)},H=wt(le?$[0]:_,_,B),Ie=wt($[$.length-1],_,B)-H,we=(n={})=>{const i=Dt(n),d={onMouseDown:Be(i||{})},T=L({},i,d);return L({},n,{ref:be},T)},et=n=>i=>{var d;(d=n.onMouseOver)==null||d.call(n,i);const T=Number(i.currentTarget.getAttribute("data-index"));R(T)},He=n=>i=>{var d;(d=n.onMouseLeave)==null||d.call(n,i),R(-1)};return{active:ve,axis:me,axisProps:ra,dragging:fe,focusedThumbIndex:$e,getHiddenInputProps:(n={})=>{var i;const d=Dt(n),T={onChange:F(d||{}),onFocus:N(d||{}),onBlur:Te(d||{}),onKeyDown:Le(d||{})},w=L({},d,T);return L({tabIndex:Me,"aria-labelledby":a,"aria-orientation":S,"aria-valuemax":U(B),"aria-valuemin":U(_),name:k,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":(i=e.step)!=null?i:void 0,disabled:c},n,w,{style:L({},Xr,{direction:b?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:we,getThumbProps:(n={})=>{const i=Dt(n),d={onMouseOver:et(i||{}),onMouseLeave:He(i||{})};return L({},n,i,d)},marks:ye,open:Ne,range:le,rootRef:be,trackLeap:Ie,trackOffset:H,values:$,getThumbStyle:n=>({pointerEvents:ve!==-1&&ve!==n?"none":void 0})}}const na=e=>!e||!Tt(e);function sa(e){return Pr("MuiSlider",e)}const he=Ar("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),ia=e=>{const{open:a}=e;return{offset:Je(a&&he.valueLabelOpen),circle:he.valueLabelCircle,label:he.valueLabelLabel}};function la(e){const{children:a,className:r,value:c}=e,u=ia(e);return a?l.cloneElement(a,{className:Je(a.props.className)},s.jsxs(l.Fragment,{children:[a.props.children,s.jsx("span",{className:Je(u.offset,r),"aria-hidden":!0,children:s.jsx("span",{className:u.circle,children:s.jsx("span",{className:u.label,children:c})})})]})):null}const ca=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","shiftStep","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function or(e){return e}const ua=I("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:r}=e;return[a.root,a[`color${Ee(r.color)}`],r.size!=="medium"&&a[`size${Ee(r.size)}`],r.marked&&a.marked,r.orientation==="vertical"&&a.vertical,r.track==="inverted"&&a.trackInverted,r.track===!1&&a.trackFalse]}})(({theme:e})=>{var a;return{borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${he.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${he.dragging}`]:{[`& .${he.thumb}, & .${he.track}`]:{transition:"none"}},variants:[...Object.keys(((a=e.vars)!=null?a:e).palette).filter(r=>{var c;return((c=e.vars)!=null?c:e).palette[r].main}).map(r=>({props:{color:r},style:{color:(e.vars||e).palette[r].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}}),da=I("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,a)=>a.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),pa=I("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,a)=>a.track})(({theme:e})=>{var a;return{display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.keys(((a=e.vars)!=null?a:e).palette).filter(r=>{var c;return((c=e.vars)!=null?c:e).palette[r].main}).map(r=>({props:{color:r,track:"inverted"},style:L({},e.vars?{backgroundColor:e.vars.palette.Slider[`${r}Track`],borderColor:e.vars.palette.Slider[`${r}Track`]}:L({backgroundColor:Gt(e.palette[r].main,.62),borderColor:Gt(e.palette[r].main,.62)},e.applyStyles("dark",{backgroundColor:qt(e.palette[r].main,.5)}),e.applyStyles("dark",{borderColor:qt(e.palette[r].main,.5)})))}))]}}),ha=I("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,a)=>{const{ownerState:r}=e;return[a.thumb,a[`thumbColor${Ee(r.color)}`],r.size!=="medium"&&a[`thumbSize${Ee(r.size)}`]]}})(({theme:e})=>{var a;return{position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${he.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.keys(((a=e.vars)!=null?a:e).palette).filter(r=>{var c;return((c=e.vars)!=null?c:e).palette[r].main}).map(r=>({props:{color:r},style:{[`&:hover, &.${he.focusVisible}`]:L({},e.vars?{boxShadow:`0px 0px 0px 8px rgba(${e.vars.palette[r].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${Yt(e.palette[r].main,.16)}`},{"@media (hover: none)":{boxShadow:"none"}}),[`&.${he.active}`]:L({},e.vars?{boxShadow:`0px 0px 0px 14px rgba(${e.vars.palette[r].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${Yt(e.palette[r].main,.16)}`})}}))]}}),ma=I(la,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,a)=>a.valueLabel})(({theme:e})=>L({zIndex:1,whiteSpace:"nowrap"},e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${he.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${he.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]})),fa=I("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>ur(e)&&e!=="markActive",overridesResolver:(e,a)=>{const{markActive:r}=e;return[a.mark,r&&a.markActive]}})(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]})),ba=I("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>ur(e)&&e!=="markLabelActive",overridesResolver:(e,a)=>a.markLabel})(({theme:e})=>L({},e.typography.body2,{color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]})),ga=e=>{const{disabled:a,dragging:r,marked:c,orientation:u,track:b,classes:O,color:B,size:_}=e,k={root:["root",a&&"disabled",r&&"dragging",c&&"marked",u==="vertical"&&"vertical",b==="inverted"&&"trackInverted",b===!1&&"trackFalse",B&&`color${Ee(B)}`,_&&`size${Ee(_)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",a&&"disabled",_&&`thumbSize${Ee(_)}`,B&&`thumbColor${Ee(B)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Br(k,sa,O)},xa=({children:e})=>e,va=l.forwardRef(function(a,r){var c,u,b,O,B,_,k,ge,z,S,V,U,W,xe,Me,Oe,K,ve,J,Ne,R,fe,x,ke;const oe=Lr({props:a,name:"MuiSlider"}),Se=yr(),{"aria-label":ie,"aria-valuetext":le,"aria-labelledby":$,component:ye="span",components:E={},componentsProps:Q={},color:Qe="primary",classes:Pe,className:Ze,disableSwap:$e=!1,disabled:Ce=!1,getAriaLabel:G,getAriaValueText:We,marks:be=!1,max:N=100,min:Te=0,orientation:De="horizontal",shiftStep:Le=10,size:F="medium",step:Fe=1,scale:me=or,slotProps:M,slots:A,track:Z="normal",valueLabelDisplay:te="off",valueLabelFormat:X=or}=oe,Be=Cr(oe,ca),H=L({},oe,{isRtl:Se,max:N,min:Te,classes:Pe,disabled:Ce,disableSwap:$e,orientation:De,marks:be,color:Qe,size:F,step:Fe,shiftStep:Le,scale:me,track:Z,valueLabelDisplay:te,valueLabelFormat:X}),{axisProps:Ie,getRootProps:we,getHiddenInputProps:et,getThumbProps:He,open:tt,active:Ke,axis:ze,focusedThumbIndex:n,range:i,dragging:d,marks:T,values:w,trackOffset:C,trackLeap:ne,getThumbStyle:se}=oa(L({},H,{rootRef:r}));H.marked=T.length>0&&T.some(D=>D.label),H.dragging=d,H.focusedThumbIndex=n;const P=ga(H),re=(c=(u=A==null?void 0:A.root)!=null?u:E.Root)!=null?c:ua,Ae=(b=(O=A==null?void 0:A.rail)!=null?O:E.Rail)!=null?b:da,ft=(B=(_=A==null?void 0:A.track)!=null?_:E.Track)!=null?B:pa,bt=(k=(ge=A==null?void 0:A.thumb)!=null?ge:E.Thumb)!=null?k:ha,gt=(z=(S=A==null?void 0:A.valueLabel)!=null?S:E.ValueLabel)!=null?z:ma,rt=(V=(U=A==null?void 0:A.mark)!=null?U:E.Mark)!=null?V:fa,at=(W=(xe=A==null?void 0:A.markLabel)!=null?xe:E.MarkLabel)!=null?W:ba,ot=(Me=(Oe=A==null?void 0:A.input)!=null?Oe:E.Input)!=null?Me:"input",nt=(K=M==null?void 0:M.root)!=null?K:Q.root,At=(ve=M==null?void 0:M.rail)!=null?ve:Q.rail,st=(J=M==null?void 0:M.track)!=null?J:Q.track,it=(Ne=M==null?void 0:M.thumb)!=null?Ne:Q.thumb,lt=(R=M==null?void 0:M.valueLabel)!=null?R:Q.valueLabel,Pt=(fe=M==null?void 0:M.mark)!=null?fe:Q.mark,Lt=(x=M==null?void 0:M.markLabel)!=null?x:Q.markLabel,Bt=(ke=M==null?void 0:M.input)!=null?ke:Q.input,_t=Re({elementType:re,getSlotProps:we,externalSlotProps:nt,externalForwardedProps:Be,additionalProps:L({},na(re)&&{as:ye}),ownerState:L({},H,nt==null?void 0:nt.ownerState),className:[P.root,Ze]}),Rt=Re({elementType:Ae,externalSlotProps:At,ownerState:H,className:P.rail}),jt=Re({elementType:ft,externalSlotProps:st,additionalProps:{style:L({},Ie[ze].offset(C),Ie[ze].leap(ne))},ownerState:L({},H,st==null?void 0:st.ownerState),className:P.track}),ct=Re({elementType:bt,getSlotProps:He,externalSlotProps:it,ownerState:L({},H,it==null?void 0:it.ownerState),className:P.thumb}),Et=Re({elementType:gt,externalSlotProps:lt,ownerState:L({},H,lt==null?void 0:lt.ownerState),className:P.valueLabel}),Ve=Re({elementType:rt,externalSlotProps:Pt,ownerState:H,className:P.mark}),ut=Re({elementType:at,externalSlotProps:Lt,ownerState:H,className:P.markLabel}),dt=Re({elementType:ot,getSlotProps:et,externalSlotProps:Bt,ownerState:H});return s.jsxs(re,L({},_t,{children:[s.jsx(Ae,L({},Rt)),s.jsx(ft,L({},jt)),T.filter(D=>D.value>=Te&&D.value<=N).map((D,q)=>{const pt=wt(D.value,Te,N),Ge=Ie[ze].offset(pt);let ee;return Z===!1?ee=w.indexOf(D.value)!==-1:ee=Z==="normal"&&(i?D.value>=w[0]&&D.value<=w[w.length-1]:D.value<=w[0])||Z==="inverted"&&(i?D.value<=w[0]||D.value>=w[w.length-1]:D.value>=w[0]),s.jsxs(l.Fragment,{children:[s.jsx(rt,L({"data-index":q},Ve,!Tt(rt)&&{markActive:ee},{style:L({},Ge,Ve.style),className:Je(Ve.className,ee&&P.markActive)})),D.label!=null?s.jsx(at,L({"aria-hidden":!0,"data-index":q},ut,!Tt(at)&&{markLabelActive:ee},{style:L({},Ge,ut.style),className:Je(P.markLabel,ut.className,ee&&P.markLabelActive),children:D.label})):null]},q)}),w.map((D,q)=>{const pt=wt(D,Te,N),Ge=Ie[ze].offset(pt),ee=te==="off"?xa:gt;return s.jsx(ee,L({},!Tt(ee)&&{valueLabelFormat:X,valueLabelDisplay:te,value:typeof X=="function"?X(me(D),q):X,index:q,open:tt===q||Ke===q||te==="on",disabled:Ce},Et,{children:s.jsx(bt,L({"data-index":q},ct,{className:Je(P.thumb,ct.className,Ke===q&&P.active,n===q&&P.focusVisible),style:L({},Ge,se(q),ct.style),children:s.jsx(ot,L({"data-index":q,"aria-label":G?G(q):ie,"aria-valuenow":me(D),"aria-labelledby":$,"aria-valuetext":We?We(me(D),q):le,value:w[q]},dt))}))}),q)})]}))}),ka=I(j)({position:"relative",minHeight:"100vh",width:"100%","& >.MuiBox-root:first-of-type":{backgroundColor:"#1B7695","& >.MuiBox-root":{color:"#F6FCFC"}}}),Sa=I(j)({margin:"20px 40px"}),ya=I(j)({display:"flex",alignItems:"center",margin:"50px 40px 20px 40px"}),nr=I(j)(({active:e})=>({display:"flex",alignItems:"center",justifyContent:"center",width:"120px",padding:"5px",boxSizing:"border-box",border:"1px solid #474747",backgroundColor:e=="true"?"#1B7695":"#F0F5FB",color:e=="true"?"#FFF":"#474747",cursor:"pointer","& .MuiSvgIcon-root":{fill:e=="true"?"#FFF":"#474747",marginRight:"10px"}})),Ca=I(j)({margin:"20px 40px",display:"flex",alignItems:"center","@media screen and (max-width: 800px)":{display:"block"}}),Ta=I(j)({height:"40px",display:"flex",alignItems:"center",cursor:"pointer",marginRight:"250px",transitionDuration:".25s","&:hover":{transform:"scale(1.1)"},"& .MuiSvgIcon-root":{width:"16px",marginRight:"10px",fill:"#155D74"},"@media screen and (max-width: 1050px)":{marginRight:"100px"},"@media screen and (max-width: 900px)":{marginRight:"30px"}}),Ia=I(j)({display:"flex",justifyContent:"space-between",alignItems:"center","& >.MuiBox-root":{minWidth:"100px",marginRight:"20px"},"& > .MuiFormControl-root":{marginRight:"20px"},"@media screen and (max-width: 900px)":{"& >.MuiBox-root":{minWidth:"50px",marginRight:"10px"}},"@media screen and (max-width: 650px)":{display:"block","& > .MuiFormControl-root":{alignItems:"start","& .MuiInputBase-root":{width:"100%"}}}}),wa=I(j)({width:"100%",height:"calc(100% - 73px)",margin:"auto",marginTop:"73px"}),sr=I(j)({height:"calc(100% - 73px)",margin:"20px 40px","& :nth-of-type(2)":{border:"1px solid #A1A1A1",borderRadius:"5px","& input":{width:"100%",cursor:"pointer"}}}),Aa=I(j)({display:"flex",alignItems:"center",justifyContent:"space-between",margin:"20px 40px",boxSizing:"border-box"}),Xe=I(j)(({isdisable:e})=>({display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#FFAA5D",color:"#474747",border:"1px solid #474747",cursor:e=="true"?"not-allowed":"pointer",opacity:e=="true"?".8":"1","& :hover":{backgroundColor:"#DD883B"},"& button":{textTransform:"capitalize",borderRadius:"0px",width:"100%","& .MuiBox-root":{backgroundColor:"transparent"}}})),Pa=I(j)({display:"flex",justifyContent:"space-between",width:"20%",alignItems:"center"}),La=I(j)({boxSizing:"border-box",margin:"20px 40px"}),Ba=I(j)({marginTop:"15px","& >.MuiPaper-root":{width:"100%",marginLeft:"0px"}});I(j)({display:"flex",backgroundColor:"#007bff",borderRadius:"10px",height:"10px",boxSizing:"border-box",margin:"20px 40px",cursor:"pointer"});I(j)({position:"absolute",height:"100%",cursor:"pointer",transition:"background-color 0.3s"});I(j)({position:"absolute"});I(j)({display:"flex",boxSizing:"border-box",margin:"20px 40px"});const _a=I(j)({display:"flex",alignItems:"center",margin:"20px 40px"});class Ra{constructor(){Nt(this,"uploadAudio",a=>new Promise((r,c)=>{const u=It+"/audio/uploadAudio";Jt.post(u,a).then(b=>{r(b.data)}).catch(b=>{c(b)})}));Nt(this,"saveMarker",a=>new Promise((r,c)=>{const u=It+"/audio/saveMarker";Jt.post(u,a).then(b=>{r(b.data)}).catch(b=>{c(b)})}))}}const ir=new Ra;var Ht={},ja=cr;Object.defineProperty(Ht,"__esModule",{value:!0});var hr=Ht.default=void 0,Ea=ja(dr()),Ma=s;hr=Ht.default=(0,Ea.default)((0,Ma.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");var zt={},Oa=cr;Object.defineProperty(zt,"__esModule",{value:!0});var mr=zt.default=void 0,Na=Oa(dr()),$a=s;mr=zt.default=(0,Na.default)((0,$a.jsx)("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"}),"Pause");const Da=I(j)({width:"100%",display:"flex",alignItems:"center"}),Fa=I(j)({width:"100%",overflow:"hidden",padding:"0px 10px"}),Ha=I(va)({color:"red",opacity:"1",height:"5px","& .MuiSlider-thumb":{width:"13.25px",height:"14px",color:"red",transition:"0.3s cubic-bezier(.47,1.64,.41,.8)","&::before":{boxShadow:"0 2px 12px 0 rgba(0,0,0,0.4)"},"&:hover, &.Mui-focusVisible":{boxShadow:"0px 0px 0px 8px rgb(0 0 0 / 16%)"},"&.Mui-active":{width:20,height:20}}}),za=I(j)({display:"flex",alignItems:"center",justifyContent:"space-between"}),Va=I(j)({display:"flex",marginRight:"20px"}),lr=I(j)({cursor:"pointer"});function Ua(e){const[a,r]=l.useState(0),[c,u]=l.useState(e.currentTime),b=l.useRef(new Audio);l.useEffect(()=>{const S=b.current;e.src&&S.src!==e.src&&(S.src=e.src,S.load(),S.oncanplaythrough=()=>{e.isPlaying&&S.play()});const V=()=>{r(S.duration),e.setAudioDuration(S.duration)},U=()=>{e.setCurrentTime(Math.floor(S.currentTime)),e.endTime&&S.currentTime>=e.endTime&&(S.pause(),e.setIsPlaying(!1))};return S.addEventListener("loadedmetadata",V),S.addEventListener("timeupdate",U),()=>{S.removeEventListener("loadedmetadata",V),S.removeEventListener("timeupdate",U)}},[e.src,e.isPlaying,e.startTime,e.endTime]),l.useEffect(()=>{u(e.currentTime)},[e.currentTime]),l.useEffect(()=>{e.setCurrentTime(c)},[c]),l.useEffect(()=>{const S=b.current;e.isPlaying?(S.currentTime=e.startTime,S.play()):S.pause()},[e.isPlaying,e.startTime,e.endTime]);const O=(S,V)=>{const U=b.current;if(U){const W=Array.isArray(V)?V[0]:V;U.currentTime=W,u(W),e.setCurrentTime(W),e.setStartTime(W),e.onTimeChange(W),e.setCurrentAudioHandler("Audio Player"),U.play().catch(xe=>{console.error("Error playing audio after selecting a point:",xe)}),e.setIsPlaying(!0)}},B=()=>{b.current.pause()},_=()=>{b.current.play().catch(V=>{console.error("Error resuming playback after dragging:",V)})},k=S=>{const V=Math.floor(S/60),U=Math.floor(S%60);return`${V}:${U<10?`0${U}`:U}`},ge=()=>s.jsxs(Fa,{children:[s.jsx(Ha,{"aria-label":"time-indicator",value:c,min:0,max:Math.floor(a),step:1,onChange:O,onMouseDown:B,onMouseUp:_}),s.jsxs(za,{children:[s.jsx(je,{children:k(c)}),s.jsx(je,{children:"-"+k(Math.floor(a-c))})]})]}),z=()=>s.jsx(Va,{children:e.isPlaying?s.jsx(lr,{onClick:()=>e.setIsPlaying(!1),children:s.jsx(mr,{})}):s.jsx(lr,{onClick:()=>e.setIsPlaying(!0),children:s.jsx(hr,{})})});return s.jsxs(Da,{children:[z(),ge()]})}const Wa=I(j)({display:"flex",backgroundColor:"#007bff",borderRadius:"10px",height:"10px",boxSizing:"border-box",margin:"20px 40px",cursor:"pointer",position:"relative"}),Ka=I(j)(({isactive:e})=>({position:"absolute",width:"5px",height:e=="true"?"20px":"10px",backgroundColor:e=="true"?"orange":"red",boxShadow:e=="true"?"0 0 10px 2px rgba(255, 165, 0, 0.5)":"none",transition:"background-color 0.3s ease, box-shadow 0.3s ease",bottom:e=="true"?"-5px":"0px"}));function Ga(e){const a=r=>{const c=r.currentTarget,u=r.clientX-c.getBoundingClientRect().left;let b=null;for(let O=0;O<e.startTimes.length;O++){const B=e.startTimes[O]/e.duration*c.offsetWidth,_=O+1<e.startTimes.length?e.startTimes[O+1]/e.duration*c.offsetWidth:c.offsetWidth;if(u>=B&&u<_){b=e.startTimes[O];break}}e.setCurrentAudioHandler("Time Line"),e.setAudioStartTime(b||0)};return l.useEffect(()=>{e.setAudioStartTime(e.activeStartTime)},[e.activeStartTime]),s.jsx(Wa,{onClick:a,children:e.startTimes.map((r,c)=>s.jsx(Ka,{isactive:r===e.activeStartTime?"true":"false",style:{left:`${r/e.duration*100}%`}},c))})}const qa=[{toolName:"Western",onClick:()=>{}},{toolName:"Arabic",onClick:()=>{}}];function Ya(e){var Vt;const a=Rr(),r=a.state,[c,u]=l.useState(!1),[b,O]=l.useState(!1),[B,_]=l.useState(null),[k,ge]=l.useState(r==null?void 0:r.subBookInfo),[z,S]=l.useState(r==null?void 0:r.chapterInfo),[V,U]=l.useState([]),[W,xe]=l.useState([]),[Me,Oe]=l.useState([]),[K,ve]=l.useState(e.currentBook),[J,Ne]=l.useState((Vt=r==null?void 0:r.subBookInfo)==null?void 0:Vt.subBookId),[R,fe]=l.useState(r==null?void 0:r.chapterId),[x,ke]=l.useState(e.currentLanguage),[oe,Se]=l.useState(0),[ie,le]=l.useState(0),[$,ye]=l.useState(!1),[E,Q]=l.useState(!1),[Qe,Pe]=l.useState(""),[Ze,$e]=l.useState(""),[Ce,G]=l.useState(""),[We,be]=l.useState(""),[N,Te]=l.useState(null),[De,Le]=l.useState(""),[F,Fe]=l.useState(null),[me,M]=l.useState(""),[A,Z]=l.useState([]),[te,X]=l.useState([]),[Be,H]=l.useState(0),[Ie,we]=l.useState(0),[et,He]=l.useState(0),[tt,Ke]=l.useState(0),[ze,n]=l.useState(!1),i=l.useRef(new Audio),d=jr(),T=Er(),w=l.useMemo(()=>{var t;return(t=a==null?void 0:a.state)==null?void 0:t.languages},[e.currentUser]);l.useEffect(()=>{window.scrollTo({top:0})},[]);const C=()=>{localStorage.removeItem(Wr),e.dispatch({type:ue.RESET_USER}),e.dispatch({type:ue.RESET_BOOK}),e.dispatch({type:ue.RESET_APP_TEXT_PAGES}),d("/admin")},ne=()=>s.jsx(Nr,{isLoggedIn:!0,username:e.currentUser.username,isAdmin:e.currentUser.isAdmin,onLogOut:C});l.useEffect(()=>{X([]),Le(""),Fe(null),Te(null),Z([]),M(""),H(0),we(0),He(0),Ke(0),n(!1)},[b]);const se=l.useCallback(async t=>(u(!0),await xt.getChapterInfoByChapterId(t)),[R]);l.useEffect(()=>{(async()=>{var o;u(!0);try{const g=e.bookInfos.find(v=>v.bookTitle.en==K);if(g){_(g);const f=Array.from(new Set(g.subBooks.map(h=>h.subBookId))).map(h=>g.subBooks.find(m=>m.subBookId===h)).map(h=>{var m;return{label:(m=h.subBookTitle)==null?void 0:m[x],value:h.subBookId}});xe(f),f.some(h=>h.value===J)||Ne(((o=f[0])==null?void 0:o.value)||"")}if(R){const v=e.chapterInfos.find(f=>f.chapterId==R);v?S(v):se(R).then(f=>{S(f),e.dispatch({type:ue.ADD_CHAPTERINFO,payload:{chapterInfo:f}}),u(!1)}).catch(()=>{u(!1)})}}catch{de.error("Failed to load book information",{position:"top-right",draggable:!0,theme:"colored",transition:pe,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})}finally{u(!1)}})()},[K]),l.useEffect(()=>{var v,f,h,m,y;const t=e.bookInfos.find(p=>(p==null?void 0:p.bookTitle.en)==e.currentBook),o=t==null?void 0:t.subBooks.find(p=>p.subBookId==J);o&&ge(o),be(((v=o==null?void 0:o.subBookTitle)==null?void 0:v[x])||""),Pe(((f=o==null?void 0:o.subBookTitle)==null?void 0:f.ar)||""),G(((h=o==null?void 0:o.subBookTitle)==null?void 0:h.en)||""),$e(((m=o==null?void 0:o.subBookTitle)==null?void 0:m.transliteration)||"");const g=(y=o==null?void 0:o.chapterInfos)==null?void 0:y.map(p=>({value:p.chapterId,label:p.chapterNumber==0?"Introduction":p.chapterNumber.toString()}));g&&r.chapterId?(Oe(g),fe(r.chapterId)):g&&(Oe(g),fe(g[0].value))},[J,e.currentBook]),l.useEffect(()=>{var o,g,v,f,h;const t=e.chapterInfos.find(m=>m.chapterId==R);if(t){if(S(t),U((t==null?void 0:t.verses)||[]),!b){const y=t.chapterAudio.find(ae=>ae.language==x),p=y==null?void 0:y.audio;p&&Le(It+"/"+p);const Y=[];if(t.verses&&t.verses.length>=1){for(let ae=0;ae<(((o=t==null?void 0:t.verses)==null?void 0:o.length)||1);ae++){const ce=t.verses[ae],Mt=t.verses[ae+1],_e={Verse:(g=ce==null?void 0:ce.verseText)==null?void 0:g[x],"Marker Name":(y==null?void 0:y.marker)||"","Marker Time":((f=(v=ce.verseAudioStart)==null?void 0:v[x])==null?void 0:f.toString())||"",Action:s.jsx(Xe,{isdisable:(N||p)&&(F||te)?"false":"true",children:s.jsx(Ye,{label:"Play",disabled:!(N||p)||!(F||te),onClick:()=>{var ht,qe;Ve((((ht=ce.verseAudioStart)==null?void 0:ht[x])||0).toString(),Mt?(qe=Mt.verseAudioStart)==null?void 0:qe[x].toString():""),ee("Time Line")}})})};(h=ce.verseAudioStart)!=null&&h[x]&&Y.push(_e)}X(Y),Z(Y)}}}else se(R).then(m=>{var y,p,Y,ae,ce;if(S(m),U(m.verses||[]),!b){const _e=m.chapterAudio.find(Ue=>Ue.language==x),ht=_e==null?void 0:_e.audio;ht&&Le(It+ht);const qe=[];if(m.verses&&m.verses.length>=1){for(let Ue=0;Ue<(((y=m==null?void 0:m.verses)==null?void 0:y.length)||1);Ue++){const Ot=m.verses[Ue],Ut=m.verses[Ue+1],vr={Verse:(Y=(p=V[Ue])==null?void 0:p.verseText)==null?void 0:Y[x],"Marker Name":(_e==null?void 0:_e.marker)||"","Marker Time":(ae=Ot.verseAudioStart)==null?void 0:ae[x].toString(),Action:s.jsx(Xe,{isdisable:N&&F?"false":"true",children:s.jsx(Ye,{label:"Play",disabled:!N||!F,onClick:()=>{var Wt,Kt;Ve((((Wt=Ot.verseAudioStart)==null?void 0:Wt[x])||0).toString(),Ut?(Kt=Ut.verseAudioStart)==null?void 0:Kt[x].toString():""),ee("Time Line")}})})};(ce=Ot.verseAudioStart)!=null&&ce[x]&&qe.push(vr)}Z(qe),X(qe)}}e.dispatch({type:ue.ADD_CHAPTERINFO,payload:{chapterInfo:m}}),u(!1)}).catch(()=>{Se(0),le(0),ye(!1),Q(!1),de.warning("Chapter is empty.",{position:"top-right",draggable:!0,theme:"colored",transition:pe,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),u(!1)});r.chapterId=""},[R,b]),l.useEffect(()=>{var v,f,h,m,y,p;le(0);const t=(v=z==null?void 0:z.chapterAudio)==null?void 0:v.find(Y=>Y.language==x),o=(t==null?void 0:t.isCompleted)||!1,g=(t==null?void 0:t.isPublished)||!1;ye(o),Q(g),Se(((f=z==null?void 0:z.verses)==null?void 0:f.length)||0),(h=z.verses)==null||h.map(Y=>le(ae=>{var ce;return(ce=Y==null?void 0:Y.verseAudioStart)!=null&&ce[x]?ae+1:ae})),be(((m=k==null?void 0:k.subBookTitle)==null?void 0:m[x])||""),Pe(((y=k==null?void 0:k.subBookTitle)==null?void 0:y.ar)||""),G(((p=k==null?void 0:k.subBookTitle)==null?void 0:p.en)||""),fe(z.chapterId)},[V,B,k,z,x]);const P=t=>{ve(t),d("/admin/bookoverview"),e.dispatch({type:ue.SET_BOOK,payload:{bookTitle:t}})},re=()=>s.jsx(Sa,{children:s.jsx(Ur,{books:Kr.map(t=>({bookTitle:t.bookTitle,onClick:()=>P(t.value)})),selectedBook:K})}),Ae=t=>{O(t),X([])},ft=()=>s.jsxs(ya,{children:[s.jsxs(nr,{active:b?"false":"true",onClick:()=>Ae(!1),children:[s.jsx(Dr,{}),s.jsx(je,{fontFamily:"'Baloo Da 2'",children:"Database"})]}),s.jsxs(nr,{active:b?"true":"false",onClick:()=>Ae(!0),children:[s.jsx(zr,{}),s.jsx(je,{fontFamily:"'Baloo Da 2'",children:"Import"})]})]}),bt=t=>{const o=t.target.value;Ne(o)},gt=t=>{const o=t.target.value;fe(o)},rt=t=>{const o=t.target.value;ke(o),e.dispatch({type:ue.SET_CURRENT_LANGUAGE,payload:{language:o}})},at=()=>s.jsxs(Ca,{children:[s.jsxs(Ta,{onClick:()=>d("/admin/bookoverview"),children:[s.jsx(Fr,{}),s.jsx(je,{fontFamily:"Inter",color:"#155D74",fontWeight:"500",children:"overview"})]}),s.jsxs(Ia,{children:[s.jsx(je,{fontFamily:"Inter",color:"#155D74",fontWeight:"500",children:K==Qt||K==Zt?"Go to: ":"Go to Surah: "}),s.jsx(Ft,{label:"",options:W,value:W.find(t=>t.value===J)?J:"",backgroundColor:"#fff",textColor:"#155D74",onChange:bt}),(K==Qt||K==Zt)&&s.jsx(Ft,{label:"",options:Me,value:Me.find(t=>t.value===R)?R:"",backgroundColor:"#fff",textColor:"#155D74",onChange:gt}),s.jsx(Ft,{label:"",options:w,value:x,backgroundColor:"#fff",textColor:"#155D74",onChange:rt})]})]}),ot=t=>{const o={chapterAudio:t.audio,chapterId:t._id,chapterNumber:t.chapterNumber,chapterTranslated:t.isTranslated,chapterIsCompleted:t.isCompleted,chapterIsPublished:t.isPublished,subBookId:t.subBook},g=e.bookInfos.map(v=>({...v,subBooks:v.subBooks.map(f=>({...f,chapterInfos:f.chapterInfos.map(h=>h.chapterId===R?{...h,...o}:h)}))}));e.dispatch({type:ue.SET_BOOKINFOS,payload:{bookInfos:g}}),e.dispatch({type:ue.UPDATE_CHAPTERINFOS,payload:{chapterInfo:o}})},nt=t=>{const o={chapterInfos:(k==null?void 0:k.chapterInfos)||[],subBookId:(k==null?void 0:k.subBookId)||"",subBookNumber:(k==null?void 0:k.subBookNumber)||1,subBookTitle:t.title,noChapter:!0},g=e.bookInfos.map(v=>({...v,subBooks:v.subBooks.map(f=>f.subBookId==J?{...f,...o}:f)}));e.dispatch({type:ue.SET_BOOKINFOS,payload:{bookInfos:g}})},At=async t=>{var v,f;const o=(v=e.chapterInfos)==null?void 0:v.find(h=>h.chapterId==R),g=(f=o==null?void 0:o.chapterAudio)==null?void 0:f.some(h=>h.language==x);if(o&&g){ye(t),Q(t&&E),u(!0);const m=(o==null?void 0:o.chapterAudio).map(p=>p.language==x?{...p,isCompleted:!$,isPublished:t&&E}:p),y={chapterNumber:o.chapterNumber||1,subBook:o.subBookId||"",audio:m,isTranslated:o.chapterTranslated,isCompleted:o.chapterIsCompleted,isPublished:o.chapterIsPublished};xt.updateChapterInfo({chapterId:R,newChapterInfo:y}).then(p=>{const Y={chapterId:p._id,chapterNumber:p.chapterNumber,chapterTranslated:p.isTranslated,chapterAudio:p.audio,subBookId:p.subBook,chapterIsCompleted:p.isCompleted,chapterIsPublished:p.isPublished,verses:p.verses};ot(p),dt(Y),de.success(`Success to ${t?"complete":"incomplete"} the audio`,{position:"top-right",draggable:!0,theme:"colored",transition:pe,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),u(!1)}).catch(()=>{de.error("Failed to complete the audio",{position:"top-right",draggable:!0,theme:"colored",transition:pe,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),u(!1)})}else de.error("Failed to complete the chapter because of no audio",{position:"top-right",draggable:!0,theme:"colored",transition:pe,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})},st=async t=>{var v,f;const o=(v=e.chapterInfos)==null?void 0:v.find(h=>h.chapterId==R),g=(f=o==null?void 0:o.chapterAudio)==null?void 0:f.some(h=>h.language==x);if(o&&g&&$){Q(t),u(!0);const m=(o==null?void 0:o.chapterAudio).map(p=>p.language==x?{...p,isPublished:!E}:p),y={chapterNumber:o.chapterNumber||1,subBook:o.subBookId||"",audio:m,isTranslated:o.chapterTranslated,isCompleted:o.chapterIsCompleted,isPublished:o.chapterIsPublished};xt.updateChapterInfo({chapterId:R,newChapterInfo:y}).then(p=>{const Y={chapterId:p._id,chapterNumber:p.chapterNumber,chapterTranslated:p.isTranslated,chapterAudio:p.audio,subBookId:p.subBook,chapterIsCompleted:p.isCompleted,chapterIsPublished:p.isPublished,verses:p.verses};ot(p),dt(Y),de.success(`Success to ${t?"publish":"withhold"} the audio`,{position:"top-right",draggable:!0,theme:"colored",transition:pe,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),u(!1)}).catch(()=>{de.error("Failed to publish the audio",{position:"top-right",draggable:!0,theme:"colored",transition:pe,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),u(!1)})}else de.error("Failed to publish the chapter because of no audio",{position:"top-right",draggable:!0,theme:"colored",transition:pe,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})},it=t=>{x=="en"?G(t):x=="ar"&&Pe(t),be(t)},lt=t=>{x=="ar"&&be(t),Pe(t)},Pt=t=>{x=="en"&&be(t),G(t)},Lt=(t,o,g,v)=>{const f={[`${x}`]:t,ar:o,transliteration:g,en:v},h={...k,subBookTitle:f},m={title:h.subBookTitle,number:h.subBookNumber||1,book:(B==null?void 0:B.bookId)||"",noChapter:!0};k!=null&&k.subBookId?(u(!0),xt.updateSubBookInfo({subBookId:k==null?void 0:k.subBookId,newSubBookInfo:m}).then(y=>{nt(y),u(!1)}).catch(()=>{de.error("Failed to update the summary of chapter",{position:"top-right",draggable:!0,theme:"colored",transition:pe,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),u(!1)})):de.error($r,{position:"top-right",draggable:!0,theme:"colored",transition:pe,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})},Bt=()=>!b&&s.jsx(Hr,{currentUser:e.currentUser,currentBook:e.currentBook,totalCountVerse:oe,languageCountVerse:ie,isComplete:$,isPublish:E,isSpecialBook:K==Gr||K==qr,currentLanguage:x,arabicChapterTitle:Qe,englishChapterTitle:Ce,transliteration:Ze,currentChapterTitle:We,translateComplete:t=>At(t),translatePublish:t=>st(t),handleCurrentChapterTitleChange:t=>it(t),handleArabicChapterTitleChange:t=>lt(t),handleTransliterationChapterTitleChange:t=>$e(t),handleEnglishChapterTitleChange:t=>Pt(t),handleUpdateChapterSummary:Lt});l.useEffect(()=>{if(N){const t=URL.createObjectURL(N);Le(t),n(!1)}},[N]);const _t=()=>b&&s.jsxs(sr,{children:[s.jsx(je,{color:"#155D74",fontFamily:"'Baloo Da 2'",children:"Select Audio File:"}),s.jsx(er,{type:".mp3, .m4a",onChange:t=>Te(t.target.files?t.target.files[0]:null)})]}),Rt=t=>{const o=t.split(":");if(o.length!==4)throw new Error(`Invalid timecode format: ${t}`);const g=parseInt(o[0],10)||0,v=parseInt(o[1],10)||0,f=parseInt(o[2],10)||0,h=parseInt(o[3],10)||0;return g*3600+v*60+f+h/25},jt=t=>{const o=t.split(`
`),g=[];let v=null;o.forEach(m=>{const y=m.match(/(\d{2}:\d{2}:\d{2}:\d{2})/);y&&(v=y[1]);const p=m.match(/\|M:(.*?)(\s|$)/);if(p&&v){const Y=p[1].trim(),ae=Rt(v)-3600;g.push({name:Y,time:ae.toFixed(2)})}});const f="Verse Number, Marker Name, Marker Time",h=g.map((m,y)=>`${y+1}, ${m.name},${m.time}`);return[f,...h].join(`
`)},ct=()=>{var v;const t=new Blob([me],{type:"text/csv"}),o=document.createElement("a");o.href=URL.createObjectURL(t);const g=`${Date.now()}_${(v=F==null?void 0:F.name)==null?void 0:v.split(".edl")[0]}.csv`;o.download=g,document.body.appendChild(o),o.click(),document.body.removeChild(o)},Et=t=>{const o=t.split(`
`).filter(f=>f.trim()!==""),g=o[0].split(",").map(f=>f.trim());return o.slice(1).map(f=>{const h=f.split(",").map(m=>m.trim());return g.reduce((m,y,p)=>(m[y]=h[p],m),{})})},Ve=(t,o)=>{H(Number(t)),we(o?Number(o):0),n(!0)};l.useEffect(()=>{if(!F)return;const t=new FileReader;t.onload=()=>{var o,g;if(t.result){const v=t.result.toString(),f=jt(v),h=Et(f);Z(h);const m=[];for(let y=0;y<h.length;y++){const p={Verse:(g=(o=V[y])==null?void 0:o.verseText)==null?void 0:g[x],"Marker Name":h[y]["Marker Name"],"Marker Time":h[y]["Marker Time"],Action:s.jsx(Xe,{isdisable:N&&F?"false":"true",children:s.jsx(Ye,{label:"Play",disabled:!N||!F,onClick:()=>{Ve(h[y]["Marker Time"],y<h.length-1?h[y+1]["Marker Time"]:""),ee("Time Line")}})})};m.push(p)}X(m||[]),M(f)}},t.readAsText(F)},[F,R]);const ut=()=>b&&s.jsxs(sr,{children:[s.jsx(je,{color:"#155D74",fontFamily:"'Baloo Da 2'",children:"Select EDL File:"}),s.jsx(er,{type:".edl",onChange:t=>Fe(t.target.files?t.target.files[0]:null)})]}),dt=t=>{var o;(o=e.chapterInfos)!=null&&o.some(g=>g.chapterId==t.chapterId)?e.dispatch({type:ue.UPDATE_CHAPTERINFOS,payload:{chapterInfo:t}}):console.log("No Chapter Info")},D=l.useCallback(()=>{const t=new FormData;N&&(u(!0),t.append("file",N,`${Date.now()}_${N.name}`),t.append("chapterId",R),t.append("languageCode",x),t.append("isCompleted",$?"true":"false"),t.append("isPublished",E?"true":"false"),ir.uploadAudio(t).then(o=>{dt(o),S(o),de.success("Success to complete the audio",{position:"top-right",draggable:!0,theme:"colored",transition:pe,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),u(!1)}).catch(o=>{console.log(o),u(!1)}))},[N,x,J,R]),q=l.useCallback(()=>{ir.saveMarker({chapterId:R,languageCode:x,markerData:A}).then(t=>{console.log(t),le(A.length),de.success("Success to set time marker",{position:"top-right",draggable:!0,theme:"colored",transition:pe,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3})}).catch(t=>console.log(t))},[A,R,x]),pt=()=>b&&s.jsxs(Aa,{children:[s.jsx(Xe,{isdisable:F?"false":"true",children:s.jsx(Ye,{label:"Download CSV",disabled:!F,onClick:ct})}),s.jsxs(Pa,{children:[s.jsx(Xe,{isdisable:F?"false":"true",children:s.jsx(Ye,{label:"Save Markers",disabled:!F,onClick:q})}),s.jsx(Xe,{isdisable:N?"false":"true",children:s.jsx(Ye,{label:"Upload Audio",disabled:!N,onClick:D})})]})]}),Ge=t=>{i.current.currentTime=t,He(t)},ee=t=>{e.dispatch({type:ue.SET_CURRENT_AUDIO_HANDLER,payload:{currentAudioHandler:t}})},fr=()=>(N||De)&&s.jsx(La,{children:s.jsx(Ba,{children:s.jsx(Ua,{src:De,startTime:Be,endTime:Ie,currentTime:et,isPlaying:ze,setCurrentTime:t=>He(t),setStartTime:t=>H(t),setEndTime:t=>we(t),setIsPlaying:t=>n(t),setAudioDuration:t=>Ke(t),setCurrentAudioHandler:t=>ee(t),onTimeChange:t=>Ge(t)})})});l.useEffect(()=>{const t=A.findIndex(g=>Number(g["Marker Time"])>=Be);let o=0;t<A.length-1&&e.currentAudioHandler=="Time Line"?o=Number(A[t+1]["Marker Time"]):o=tt,we(o),n(!0)},[Be,Ie]);const br=()=>!A||A.length===0?null:s.jsx(Ga,{startTimes:A.map(t=>Number(t["Marker Time"])),duration:tt,activeStartTime:Be,setCurrentAudioHandler:t=>ee(t),setAudioStartTime:t=>H(t)}),gr=()=>(F||te&&te.length>0)&&s.jsx(_a,{children:s.jsx(Yr,{headers:["Verse","Marker Name","Marker Time","Action"],rows:te})}),xr=()=>s.jsxs(wa,{children:[s.jsx(Vr,{tools:qa}),re(),ft(),at(),Bt(),_t(),ut(),pt(),fr(),br(),gr()]});return s.jsxs(s.Fragment,{children:[s.jsxs(ka,{flexDirection:T?"column":"row",children:[ne(),xr()]}),s.jsx(Mr,{}),c&&s.jsx(Or,{})]})}function Xa(e){return{dispatch:e}}function Ja(e){return{currentUser:e.user.currentUser,bookInfos:e.book.bookInfos,chapterInfos:e.book.chapterInfos,currentLanguage:e.book.language,currentBook:e.book.book,currentAudioHandler:e.translator.currentAudioHandler,appTextPages:e.translator.appTextPages}}const uo=_r(Ja,Xa)(Ya);export{uo as default};
