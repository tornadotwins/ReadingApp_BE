import{j as o,a as f}from"./createTheme-CWcl4duz.js";import{s as n,z as a,h as m,D as re,E as ie,_ as le,X as y,a0 as se,W as ue,H as de,J as ce,N as ge,A as xe}from"./App-BOS4sEt3.js";import{b as he,T as fe,B as be,d as Ce}from"./book.services-nIN5w6xD.js";import{T as p,c as v,f as F,B as L,A as me,h as ke,i as Se}from"./index-CjmStFgH.js";import{S as Q}from"./index-DXOXPIlh.js";import{I as G,g as Be,a as ye}from"./index-V0i_RDXB.js";n(a)({width:"100%",backgroundColor:"#F0F5FB",padding:"5px 20px"});const je=n(a)(({status:e})=>({width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #155D74",cursor:"pointer",backgroundColor:e==p?"#FFAA5D":e==v?"#155D74":"#fff",color:e==p?"#155D74":e==v?"#fff":"#155D74"})),_=e=>{var s,c,u,g;return o.jsx(je,{status:e.isPublished?p:e.isCompleted?v:F,onClick:()=>{var r;return e.onClick(((r=e.chapterInfo)==null?void 0:r.chapterId)||"")},children:o.jsx(m,{fontFamily:"Inter",fontSize:16,fontWeight:"500",children:e.chapterInfo?e.chapterInfo.chapterNumber==0?"Intr":(s=e.chapterInfo.chapterNumber)==null?void 0:s.toString():((c=e.subBookInfo)==null?void 0:c.subBookNumber)==0?"Intr":(g=(u=e.subBookInfo)==null?void 0:u.subBookNumber)==null?void 0:g.toString()})})},Oe=n(a)({margin:"2px 0px",display:"flex"}),pe=n(a)({width:"100px",minWidth:"100px",maxWidth:"200px",marginRight:"10px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",padding:"9px 0px"}}),ve=n(a)({display:"flex",flexGrow:1}),Te=n(a)({display:"flex",justifyContent:"center",marginRight:"3px",minWidth:"45px","& >*":{flexGrow:1}}),Z=n(a)({display:"flex",flexWrap:"wrap",gap:"2px"});function W(e){var s,c,u,g,r,b,d,T;return o.jsxs(Oe,{children:[!e.isQuranOrZabur&&e.subBook&&o.jsx(pe,{children:o.jsx(m,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"400",children:(s=e.subBook.subBookTitle)==null?void 0:s[e.languageCode]})}),o.jsxs(ve,{children:[o.jsx(Te,{children:e.subBook&&!!e.subBook.noChapter&&((u=(c=e.subBook)==null?void 0:c.chapterInfos[0])==null?void 0:u.chapterNumber)==0&&o.jsx(_,{chapterInfo:e.subBook.chapterInfos[0],isCompleted:(r=(g=e.subBook.chapterInfos[0])==null?void 0:g.chapterIsCompleted)==null?void 0:r[e.languageCode],isPublished:(d=(b=e.subBook.chapterInfos[0])==null?void 0:b.chapterIsPublished)==null?void 0:d[e.languageCode],onClick:e.onChapterClick})}),!e.isQuranOrZabur&&o.jsx(Z,{children:e.subBook&&((T=e.subBook.chapterInfos)==null?void 0:T.map((t,S)=>{var x,k;return o.jsx(_,{subBookInfo:e.subBook,chapterInfo:t,isCompleted:((x=t==null?void 0:t.chapterIsCompleted)==null?void 0:x[e.languageCode])||!1,isPublished:((k=t==null?void 0:t.chapterIsPublished)==null?void 0:k[e.languageCode])||!1,onClick:e.onChapterClick},S)}))}),e.isQuranOrZabur&&o.jsx(Z,{children:e.book&&e.book.subBooks&&e.book.subBooks.map((t,S)=>{var x,k,j,I;return o.jsx(_,{subBookInfo:t,isCompleted:t.chapterInfos&&((k=(x=t.chapterInfos[0])==null?void 0:x.chapterIsCompleted)==null?void 0:k[e.languageCode])||!1,isPublished:t.chapterInfos&&((I=(j=t.chapterInfos[0])==null?void 0:j.chapterIsPublished)==null?void 0:I[e.languageCode])||!1,onClick:()=>e.onChapterClick(t.chapterInfos&&(t==null?void 0:t.chapterInfos[0].chapterId))},S)})})]})]})}const Ie=n(a)(({isquranorzabur:e})=>({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",paddingRight:e=="true"?"120px":"0px",boxSizing:"border-box",maxWidth:"650px","@media screen and (max-width: 670px)":{paddingRight:"0px"}})),we=n(a)({display:"flex",marginBottom:"15px"}),Fe=n("img")({width:"24px",height:"24px",marginRight:"10px"}),U=e=>o.jsxs(Ie,{isquranorzabur:e.isQuranOrZabur?"true":"false",children:[o.jsxs(we,{children:[o.jsx(Fe,{src:G.icon_book}),o.jsx(m,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"700",children:`${e.bookTitle} text - ${e.language} - chapters:`})]}),!e.isQuranOrZabur&&e.bookInfo.subBooks.map((s,c)=>o.jsx(W,{subBook:s,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur,onChapterClick:e.onClickSquare},c)),e.isQuranOrZabur&&o.jsx(W,{book:e.bookInfo,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur,onChapterClick:e.onClickSquare})]});n(a)({width:"100%",backgroundColor:"#F0F5FB",padding:"5px 20px"});const Ae=n(a)(({status:e})=>({width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #155D74",cursor:"pointer",backgroundColor:e==p?"#FFAA5D":e==v?"#155D74":"#fff",color:e==p?"#155D74":e==v?"#fff":"#155D74"})),R=e=>{var s;return o.jsx(Ae,{status:e.audioStatus,onClick:e.onClick,children:o.jsx(m,{fontFamily:"Inter",fontSize:16,fontWeight:"500",children:e.chapterNumber==0?"Intr":(s=e.chapterNumber)==null?void 0:s.toString()})})},De=n(a)({margin:"10px 0px",display:"flex"}),Ne=n(a)({width:"100px",minWidth:"100px",maxWidth:"200px",marginRight:"10px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",padding:"9px 0px"}}),_e=n(a)({display:"flex",flexGrow:1}),Re=n(a)({display:"flex",justifyContent:"center",marginRight:"3px",minWidth:"45px","& >*":{flexGrow:1}}),$=n(a)({display:"flex",flexWrap:"wrap",gap:"2px"});function P(e){var s,c;return o.jsxs(De,{children:[!e.isQuranOrZabur&&e.subBook&&o.jsx(Ne,{children:o.jsx(m,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"400",children:(s=e.subBook.subBookTitle)==null?void 0:s[e.languageCode]})}),o.jsxs(_e,{children:[o.jsx(Re,{children:e.subBook&&!!e.subBook.noChapter&&e.subBook.chapterInfos[0].chapterNumber==0&&o.jsx(R,{chapterNumber:0,onClick:()=>{},audioStatus:F})}),!e.isQuranOrZabur&&o.jsx($,{children:e.subBook&&((c=e.subBook.chapterInfos)==null?void 0:c.map((u,g)=>{var r;return o.jsx(R,{chapterNumber:u.chapterNumber,audioStatus:((r=u==null?void 0:u.chapterAudio)==null?void 0:r[e.languageCode])||F,onClick:()=>{}},g)}))}),e.isQuranOrZabur&&o.jsx($,{children:e.book&&e.book.subBooks&&e.book.subBooks.map((u,g)=>{var r,b;return o.jsx(R,{chapterNumber:u==null?void 0:u.subBookNumber,audioStatus:u.chapterInfos&&((b=(r=u.chapterInfos[0])==null?void 0:r.chapterAudio)==null?void 0:b[e.languageCode])||F,onClick:()=>{}},g)})})]})]})}const Ee=n(a)(({isquranorzabur:e})=>({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",paddingRight:e=="true"?"120px":"0px",boxSizing:"border-box",maxWidth:"650px","@media screen and (max-width: 670px)":{paddingRight:"0px"}})),Le=n(a)({display:"flex",marginBottom:"15px"}),Qe=n("img")({width:"24px",height:"24px",marginRight:"10px"}),q=e=>o.jsxs(Ee,{isquranorzabur:e.isQuranOrZabur?"true":"false",children:[o.jsxs(Le,{children:[o.jsx(Qe,{src:G.icon_audio}),o.jsx(m,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"700",children:`${e.bookTitle} Audio - ${e.language} - chapters:`})]}),!e.isQuranOrZabur&&e.bookInfo.subBooks.map((s,c)=>o.jsx(P,{subBook:s,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur},c)),e.isQuranOrZabur&&o.jsx(P,{book:e.bookInfo,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur})]}),Ze=n(a)({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",maxWidth:"650px"}),We=n(a)({display:"flex"});n("img")({width:"24px",height:"24px",marginRight:"10px"});const Ue=e=>o.jsx(Ze,{children:o.jsx(We,{children:o.jsx(m,{color:"red",fontFamily:"'Baloo Da 2'",fontWeight:"700",fontSize:30,children:"Coming Soon"})})}),$e=n(a)({position:"relative",minHeight:"100vh",width:"100%","& >.MuiBox-root:first-of-type":{backgroundColor:"#1B7695","& >.MuiBox-root":{color:"#F6FCFC"}}}),Pe=n(a)({width:"100%",height:"calc(100% - 73px)",margin:"auto",marginTop:"73px"}),qe=n(a)({width:"650px",display:"flex",justifyContent:"center",alignItems:"center",margin:"20px 40px 0px 40px","& .MuiFormControl-root":{width:"unset",marginLeft:"15px"},"& .MuiBox-root":{fontFamily:'"Baloo Da 2" !important'},"@media screen and (max-width: 670px)":{width:"unset"}}),ze=n(a)({margin:"20px 40px"}),Ge=n(a)({margin:"5px 40px",padding:"15px",maxWidth:"650px",boxSizing:"border-box",display:"flex",justifyContent:"center","& .MuiButtonBase-root":{boxSizing:"border-box",textTransform:"none",backgroundColor:"#FFAA5D",padding:"8px 15px",borderRadius:"0px",border:"1px solid #474747","&:hover":{backgroundColor:"#EECC5D"}}}),z=[{value:"Text",label:"Text"},{value:"Audio",label:"Audio"},{value:"Reference",label:"Reference"}],Ke=[{toolName:"Western",onClick:()=>{}},{toolName:"Arabic",onClick:()=>{}}],Me=e=>{const[s,c]=f.useState([]),[u,g]=f.useState(!1),[r,b]=f.useState(null),[d,T]=f.useState(e.currentBook||L),[t,S]=f.useState(""),[x,k]=f.useState(z[0].value),j=ie(),I=le(),E=f.useCallback(()=>{var l;if(!((l=e.currentUser)!=null&&l.roles))return[];const i=e.currentUser.roles.reduce((h,w)=>{if(w.role!=="none"){const C=Be(w.language);h.some(N=>N.value===C)||h.push({value:C,label:w.language})}return h},[]);return e.currentLanguage||e.dispatch({type:y.SET_CURRENT_LANGUAGE,payload:{language:i[0].value}}),i},[e.currentUser]);f.useEffect(()=>{const i=E();c(i),i.length>0&&!i.some(l=>l.value===t)&&S(i[0].value)},[e.currentUser,t,E]),f.useEffect(()=>{(async()=>{g(!0);try{const l=e.bookInfos.find(h=>h.bookTitle.en===d);if(l)b(l);else{const h=await he.getBookInfoByTitle(d);b(h),e.dispatch({type:y.ADD_BOOKINFO,payload:{bookInfo:h}})}g(!1)}catch(l){de.error(l instanceof Error?l.message:String(l),{position:"top-right",draggable:!0,theme:"colored",transition:ce,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),g(!1)}})()},[d,e.bookInfos]);const K=i=>{const l=i.target.value;S(l),e.dispatch({type:y.SET_CURRENT_LANGUAGE,payload:{language:l}})},M=i=>{const l=i.target.value;k(l)},H=i=>{T(i),e.dispatch({type:y.SET_BOOK,payload:{bookTitle:i}})},A=i=>{const l=r==null?void 0:r.subBooks.find(C=>{var D;return(D=C==null?void 0:C.chapterInfos)==null?void 0:D.find(N=>N.chapterId==i)}),h=l==null?void 0:l.chapterInfos.find(C=>C.chapterId==i);j("/admin/chapteroverview",{state:{chapterId:i,subBookInfo:l,chapterInfo:h,languages:s}})},V=()=>{localStorage.removeItem(me),e.dispatch({type:y.RESET_USER}),e.dispatch({type:y.RESET_BOOK}),j("/admin")},O=d===L||d===ke,B=ye(t),J=()=>o.jsx(ge,{isLoggedIn:!0,username:e.currentUser.username,isAdmin:e.currentUser.isAdmin,onLogOut:V}),X=()=>o.jsx(ze,{children:o.jsx(be,{books:Se.map(i=>({bookTitle:i.bookTitle,onClick:()=>H(i.value)})),selectedBook:d})}),Y=()=>o.jsxs(qe,{children:[o.jsx(m,{color:"#155D74",fontWeight:"700",fontFamily:"'Baloo Da 2'",children:`${d} ${O?"overview":""}`}),o.jsx(Q,{label:"",options:s,value:t,backgroundColor:"#fff",textColor:"#155D74",onChange:K}),!O&&o.jsx(Q,{label:"",options:z,value:x,backgroundColor:"#fff",textColor:"#155D74",onChange:M})]}),ee=()=>o.jsx(Ge,{children:o.jsx(xe,{icon:o.jsx(Ce,{}),label:`Import ${x} into ${B} ${d}`,onClick:()=>A})}),oe=()=>o.jsx(o.Fragment,{children:r&&!O&&o.jsxs(o.Fragment,{children:[x==="Text"&&o.jsx(U,{bookTitle:d,language:B,languageCode:t,bookInfo:r,isQuranOrZabur:!1,onClickSquare:A}),x==="Audio"&&o.jsx(q,{bookTitle:d,language:B,languageCode:t,bookInfo:r,isQuranOrZabur:!1}),x==="Reference"&&o.jsx(Ue,{bookTitle:d,language:B,languageCode:t,bookInfo:r})]})}),ne=()=>o.jsx(o.Fragment,{children:r&&O&&o.jsxs(o.Fragment,{children:[o.jsx(U,{bookTitle:d,language:B,languageCode:t,bookInfo:r,isQuranOrZabur:!0,onClickSquare:A}),o.jsx(q,{bookTitle:d,language:B,languageCode:t,bookInfo:r,isQuranOrZabur:!0})]})}),te=()=>o.jsxs(o.Fragment,{children:[oe(),ne()]}),ae=()=>o.jsxs(Pe,{children:[o.jsx(fe,{tools:Ke}),X(),Y(),!O&&ee(),te()]});return o.jsxs(o.Fragment,{children:[o.jsxs($e,{flexDirection:I?"column":"row",children:[J(),ae()]}),o.jsx(se,{}),u&&o.jsx(ue,{})]})};function He(e){return{dispatch:e}}function Ve(e){return{currentUser:e.user.currentUser,bookInfos:e.book.bookInfos,currentLanguage:e.book.language,currentBook:e.book.book}}const to=re(Ve,He)(Me);export{to as default};
