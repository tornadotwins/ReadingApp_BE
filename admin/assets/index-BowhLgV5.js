import{j as t,a as v}from"./createTheme-FH0MfVUS.js";import{s as n,B as i,T as O,t as de,u as ce,K as ge,F as j,Q as xe,E as he,A as fe,H as me,w as Ce,q as be}from"./App-DYAuZEFd.js";import{d as ke}from"./CloudUpload-C0ciWRE8.js";import{I as X,g as Se,a as ve}from"./images-B-3euPqr.js";import{T as A,f as I,C as ee,h as P,B as $,b as ye,i as Te,j as Oe,J as Be,k as pe,n as je,o as Ae}from"./index-CKbdYxc8.js";import{S as q}from"./index-DiVcHBI8.js";import{T as Ie,B as we}from"./index-B6NdhHkB.js";import{b as Fe}from"./book.services-DxkXfKmt.js";n(i)({width:"100%",backgroundColor:"#F0F5FB",padding:"5px 20px"});const Ne=n(i)(({status:e})=>({width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #155D74",cursor:"pointer",backgroundColor:e==A?"#FFAA5D":e==I?"#155D74":e==ee?"#F0F5FB":"#fff",color:e==A?"#155D74":e==I?"#fff":"#155D74"})),Z=e=>{var c,x,o,f,l,u;return t.jsx(Ne,{status:e.isPublished?A:e.isCompleted?I:e.chapterInfo&&!((x=(c=e.chapterInfo)==null?void 0:c.verses)!=null&&x.length)?ee:P,onClick:()=>{var a;return e.onClick(((a=e.chapterInfo)==null?void 0:a.chapterId)||"")},children:t.jsx(O,{fontFamily:"Inter",fontSize:16,fontWeight:"500",children:e.isSpecialBook?((o=e.subBookInfo)==null?void 0:o.subBookNumber)==0?"Intr":(l=(f=e.subBookInfo)==null?void 0:f.subBookNumber)==null?void 0:l.toString():e.chapterInfo&&(e.chapterInfo.chapterNumber==0?"Intr":(u=e.chapterInfo.chapterNumber)==null?void 0:u.toString())})})},_e=n(i)({margin:"2px 0px",display:"flex"}),Re=n(i)({width:"100px",minWidth:"100px",maxWidth:"200px",marginRight:"10px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",padding:"9px 0px"}}),Ee=n(i)({display:"flex",flexGrow:1}),De=n(i)({display:"flex",justifyContent:"center",marginRight:"3px",minWidth:"45px","& >*":{flexGrow:1}}),G=n(i)({display:"flex",flexWrap:"wrap",gap:"2px"});function z(e){var c,x,o,f,l,u,a,B,h,N,b,D,y,L,_,Q;return t.jsxs(_e,{children:[!e.isQuranOrZabur&&e.subBook&&t.jsx(Re,{children:t.jsx(O,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"400",children:(c=e.subBook.subBookTitle)==null?void 0:c[e.languageCode]})}),t.jsxs(Ee,{children:[t.jsxs(De,{children:[e.subBook&&!e.subBook.noChapter&&((o=(x=e.subBook)==null?void 0:x.chapterInfos[0])==null?void 0:o.chapterNumber)==0&&t.jsx(Z,{chapterInfo:e.subBook.chapterInfos[0],isCompleted:(l=(f=e.subBook.chapterInfos[0])==null?void 0:f.chapterIsCompleted)==null?void 0:l[e.languageCode],isPublished:(a=(u=e.subBook.chapterInfos[0])==null?void 0:u.chapterIsPublished)==null?void 0:a[e.languageCode],onClick:e.onChapterClick}),e.isQuranOrZabur&&e.book&&t.jsx(Z,{chapterInfo:(h=(B=e.book)==null?void 0:B.subBooks[0])==null?void 0:h.chapterInfos[0],isCompleted:((D=(b=(N=e.book)==null?void 0:N.subBooks[0].chapterInfos[0])==null?void 0:b.chapterIsCompleted)==null?void 0:D[e.languageCode])||!1,isPublished:((_=(L=(y=e.book)==null?void 0:y.subBooks[0].chapterInfos[0])==null?void 0:L.chapterIsPublished)==null?void 0:_[e.languageCode])||!1,onClick:e.onChapterClick})]}),!e.isQuranOrZabur&&t.jsx(G,{children:e.subBook&&((Q=e.subBook.chapterInfos)==null?void 0:Q.map((s,R)=>{var k,p;return(s==null?void 0:s.chapterNumber)!==0&&t.jsx(Z,{subBookInfo:e.subBook,chapterInfo:s,isCompleted:((k=s==null?void 0:s.chapterIsCompleted)==null?void 0:k[e.languageCode])||!1,isPublished:((p=s==null?void 0:s.chapterIsPublished)==null?void 0:p[e.languageCode])||!1,onClick:e.onChapterClick},R)}))}),e.isQuranOrZabur&&t.jsx(G,{children:e.book&&e.book.subBooks&&e.book.subBooks.map((s,R)=>{var k,p,E,U,T;return((k=s.chapterInfos[0])==null?void 0:k.chapterNumber)!==0&&t.jsx(Z,{subBookInfo:s,chapterInfo:s.chapterInfos[0],isCompleted:s.chapterInfos&&((E=(p=s.chapterInfos[0])==null?void 0:p.chapterIsCompleted)==null?void 0:E[e.languageCode])||!1,isPublished:s.chapterInfos&&((T=(U=s.chapterInfos[0])==null?void 0:U.chapterIsPublished)==null?void 0:T[e.languageCode])||!1,isSpecialBook:!0,onClick:()=>e.onChapterClick(s.chapterInfos&&(s==null?void 0:s.chapterInfos[0].chapterId))},R)})})]})]})}const Le=n(i)(({isquranorzabur:e})=>({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",paddingRight:e=="true"?"120px":"0px",boxSizing:"border-box",maxWidth:"650px","@media screen and (max-width: 670px)":{paddingRight:"0px"}})),Qe=n(i)({display:"flex",marginBottom:"15px"}),Ue=n("img")({width:"24px",height:"24px",marginRight:"10px"}),K=e=>t.jsxs(Le,{isquranorzabur:e.isQuranOrZabur?"true":"false",children:[t.jsxs(Qe,{children:[t.jsx(Ue,{src:X.icon_book}),t.jsx(O,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"700",children:`${e.bookTitle} text - ${e.language} - chapters:`})]}),!e.isQuranOrZabur&&e.bookInfo.subBooks.map((c,x)=>t.jsx(z,{subBook:c,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur,onChapterClick:e.onClickSquare},x)),e.isQuranOrZabur&&t.jsx(z,{book:e.bookInfo,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur,onChapterClick:e.onClickSquare})]});n(i)({width:"100%",backgroundColor:"#F0F5FB",padding:"5px 20px"});const Ze=n(i)(({status:e})=>({width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #155D74",cursor:"pointer",backgroundColor:e==A?"#FFAA5D":e==I?"#155D74":"#fff",color:e==A?"#155D74":e==I?"#fff":"#155D74"})),H=e=>{var c;return t.jsx(Ze,{status:e.audioStatus,onClick:()=>e.onClick(e.chapterId),children:t.jsx(O,{fontFamily:"Inter",fontSize:16,fontWeight:"500",children:e.chapterNumber==0?"Intr":(c=e.chapterNumber)==null?void 0:c.toString()})})},Pe=n(i)({margin:"10px 0px",display:"flex"}),We=n(i)({width:"100px",minWidth:"100px",maxWidth:"200px",marginRight:"10px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",padding:"9px 0px"}}),$e=n(i)({display:"flex",flexGrow:1}),qe=n(i)({display:"flex",justifyContent:"center",marginRight:"3px",minWidth:"45px","& >*":{flexGrow:1}}),M=n(i)({display:"flex",flexWrap:"wrap",gap:"2px"});function J(e){var c,x;return t.jsxs(Pe,{children:[!e.isQuranOrZabur&&e.subBook&&t.jsx(We,{children:t.jsx(O,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"400",children:(c=e.subBook.subBookTitle)==null?void 0:c[e.languageCode]})}),t.jsxs($e,{children:[t.jsx(qe,{}),!e.isQuranOrZabur&&t.jsx(M,{children:e.subBook&&((x=e.subBook.chapterInfos)==null?void 0:x.map((o,f)=>{const u=(Array.isArray(o.chapterAudio)?o.chapterAudio:[]).find(a=>a.language===e.languageCode);return o.chapterNumber!==0&&t.jsx(H,{chapterNumber:o.chapterNumber,chapterId:o.chapterId,audioStatus:u!=null&&u.isPublished?A:u!=null&&u.isCompleted?I:P,onClick:e.moveToAudioOverview},f)}))}),e.isQuranOrZabur&&t.jsx(M,{children:e.book&&e.book.subBooks&&e.book.subBooks.map((o,f)=>{var a,B;const u=(Array.isArray((a=o==null?void 0:o.chapterInfos[0])==null?void 0:a.chapterAudio)?o==null?void 0:o.chapterInfos[0].chapterAudio:[]).find(h=>h.language==e.languageCode);return o.chapterInfos[0].chapterNumber!=0&&t.jsx(H,{chapterNumber:o==null?void 0:o.subBookNumber,chapterId:(B=o==null?void 0:o.chapterInfos[0])==null?void 0:B.chapterId,audioStatus:u!=null&&u.isPublished?A:u!=null&&u.isCompleted?I:P,onClick:e.moveToAudioOverview},f)})})]})]})}const Ge=n(i)(({isquranorzabur:e})=>({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",paddingRight:e=="true"?"120px":"0px",boxSizing:"border-box",maxWidth:"650px","@media screen and (max-width: 670px)":{paddingRight:"0px"}})),ze=n(i)({display:"flex",marginBottom:"15px"}),Ke=n("img")({width:"24px",height:"24px",marginRight:"10px"}),Y=e=>t.jsxs(Ge,{isquranorzabur:e.isQuranOrZabur?"true":"false",children:[t.jsxs(ze,{children:[t.jsx(Ke,{src:X.icon_audio}),t.jsx(O,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"700",children:`${e.bookTitle} Audio - ${e.language} - chapters:`})]}),!e.isQuranOrZabur&&e.bookInfo.subBooks.map((c,x)=>t.jsx(J,{subBook:c,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur,moveToAudioOverview:e.moveToAudioOverview},x)),e.isQuranOrZabur&&t.jsx(J,{book:e.bookInfo,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur,moveToAudioOverview:e.moveToAudioOverview})]}),He=n(i)({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",maxWidth:"650px"}),Me=n(i)({display:"flex"});n("img")({width:"24px",height:"24px",marginRight:"10px"});const Je=e=>t.jsx(He,{children:t.jsx(Me,{children:t.jsx(O,{color:"red",fontFamily:"'Baloo Da 2'",fontWeight:"700",fontSize:30,children:"Coming Soon"})})}),Ye=n(i)({position:"relative",minHeight:"100vh",width:"100%","& >.MuiBox-root:first-of-type":{backgroundColor:"#1B7695","& >.MuiBox-root":{color:"#F6FCFC"}}}),Ve=n(i)({width:"100%",height:"calc(100% - 73px)",margin:"auto",marginTop:"73px"}),Xe=n(i)({width:"650px",display:"flex",justifyContent:"center",alignItems:"center",margin:"20px 40px 0px 40px","& .MuiFormControl-root":{width:"unset",marginLeft:"15px"},"& .MuiBox-root":{fontFamily:'"Baloo Da 2" !important'},"@media screen and (max-width: 670px)":{width:"unset"}}),et=n(i)({margin:"20px 40px"}),tt=n(i)({margin:"5px 40px",padding:"15px",maxWidth:"650px",boxSizing:"border-box",display:"flex",justifyContent:"center","& .MuiButtonBase-root":{boxSizing:"border-box",textTransform:"none",backgroundColor:"#FFAA5D",padding:"8px 15px",borderRadius:"0px",border:"1px solid #474747","&:hover":{backgroundColor:"#EECC5D"}}}),V=[{value:"Text",label:"Text"},{value:"Audio",label:"Audio"},{value:"Reference",label:"Reference"}],at=[{toolName:"Western",onClick:()=>{}},{toolName:"Arabic",onClick:()=>{}}],nt=e=>{const[c,x]=v.useState([]),[o,f]=v.useState(!1),[l,u]=v.useState(null),[a,B]=v.useState(e.currentBook||$),[h,N]=v.useState(e.currentLanguage||"en"),[b,D]=v.useState(V[0].value),y=ce(),L=ge(),_=v.useCallback(()=>{var d;if(!((d=e.currentUser)!=null&&d.roles))return[];const r=e.currentUser.roles.reduce((g,m)=>{if(m.role!=="none"||e.currentUser.isAdmin){const C=Se(m.language);g.some(S=>S.value===C)||g.push({value:C,label:m.language})}return g},[]);return e.currentLanguage||e.dispatch({type:j.SET_CURRENT_LANGUAGE,payload:{language:r[0].value}}),r},[e.currentUser]);v.useEffect(()=>{const r=_();x(r),r.length>0&&!r.some(d=>d.value===h)&&N(r[0].value)},[e.currentUser,h,_]),v.useEffect(()=>{a=="App Text"?p():(async()=>{f(!0);try{const d=e.bookInfos.find(g=>g.bookTitle.en===a);if(d)u(d);else{const g=await Fe.getBookInfoByTitle(a),m={bookId:g.bookId,bookImage:g.bookImage,bookTitle:g.bookTitle,subBooks:g.subBooks};u(g),e.dispatch({type:j.ADD_BOOKINFO,payload:{bookInfo:m}})}f(!1)}catch{fe.error("Failed to fetch book information",{position:"top-right",draggable:!0,theme:"colored",transition:me,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),f(!1)}})()},[a,e.bookInfos]);const Q=r=>{const d=r.target.value;N(d),e.dispatch({type:j.SET_CURRENT_LANGUAGE,payload:{language:d}})},s=r=>{const d=r.target.value;D(d)},R=r=>{B(r),e.dispatch({type:j.SET_BOOK,payload:{bookTitle:r}})},k=(r,d=!1)=>{const g=l==null?void 0:l.subBooks.find(S=>{var W;return(W=S==null?void 0:S.chapterInfos)==null?void 0:W.find(ue=>ue.chapterId==r)}),m=g==null?void 0:g.chapterInfos.find(S=>S.chapterId==r),C=(m==null?void 0:m.chapterNumber)||0,F={chapterId:r,isImport:d,subBookInfo:g,chapterInfo:m,languages:c};C?y("/admin/chapteroverview",{state:F}):y("/admin/introoverview",{state:F})},p=()=>{y("/admin/apptext")},E=r=>{const d=l==null?void 0:l.subBooks.find(C=>{var F;return(F=C==null?void 0:C.chapterInfos)==null?void 0:F.find(S=>S.chapterId==r)}),g=d==null?void 0:d.chapterInfos.find(C=>C.chapterId==r);y("/admin/audiooverview",{state:{chapterId:r,subBookInfo:d,chapterInfo:g,languages:c}})},U=()=>{localStorage.removeItem(ye),e.dispatch({type:j.RESET_USER}),e.dispatch({type:j.RESET_BOOK}),e.dispatch({type:j.RESET_APP_TEXT_PAGES}),y("/admin")},T=a===$||a===Te,w=ve(h),te=()=>t.jsx(Ce,{isLoggedIn:!0,username:e.currentUser.username,isAdmin:e.currentUser.isAdmin,isTranslationPage:!0,onLogOut:U}),ae=()=>t.jsx(et,{children:t.jsx(we,{books:Oe.map(r=>({bookTitle:r.bookTitle,onClick:()=>R(r.value)})),selectedBook:a})}),ne=()=>t.jsxs(Xe,{children:[t.jsx(O,{color:"#155D74",fontWeight:"700",fontFamily:"'Baloo Da 2'",children:`${a} ${T?"overview":""}`}),t.jsx(q,{label:"",options:c,value:h,backgroundColor:"#fff",textColor:"#155D74",onChange:Q}),!T&&a!==Be&&a!==pe&&a!==je&&a!==Ae&&t.jsx(q,{label:"",options:V,value:b,backgroundColor:"#fff",textColor:"#155D74",onChange:s})]}),oe=()=>b=="Text"&&t.jsx(tt,{children:t.jsx(be,{icon:t.jsx(ke,{}),label:`Import ${b} into ${w} ${a}`,onClick:()=>k((l==null?void 0:l.subBooks[0].chapterInfos[0].chapterId)||"",!0)})}),re=()=>t.jsx(t.Fragment,{children:l&&!T&&t.jsxs(t.Fragment,{children:[b==="Text"&&t.jsx(K,{bookTitle:a,language:w,languageCode:h,bookInfo:l,isQuranOrZabur:!1,onClickSquare:k}),b==="Audio"&&t.jsx(Y,{bookTitle:a,language:w,languageCode:h,bookInfo:l,isQuranOrZabur:!1,moveToAudioOverview:E}),b==="Reference"&&t.jsx(Je,{bookTitle:a,language:w,languageCode:h,bookInfo:l})]})}),ie=()=>t.jsx(t.Fragment,{children:l&&T&&t.jsxs(t.Fragment,{children:[t.jsx(K,{bookTitle:a,language:w,languageCode:h,bookInfo:l,isQuranOrZabur:!0,onClickSquare:k}),t.jsx(Y,{bookTitle:a,language:w,languageCode:h,bookInfo:l,isQuranOrZabur:!0,moveToAudioOverview:E})]})}),le=()=>t.jsxs(t.Fragment,{children:[re(),ie()]}),se=()=>t.jsxs(Ve,{children:[t.jsx(Ie,{tools:at}),ae(),ne(),!T&&oe(),le()]});return t.jsxs(t.Fragment,{children:[t.jsxs(Ye,{flexDirection:L?"column":"row",children:[te(),se()]}),t.jsx(xe,{}),o&&t.jsx(he,{})]})};function ot(e){return{dispatch:e}}function rt(e){return{currentUser:e.user.currentUser,bookInfos:e.book.bookInfos,currentLanguage:e.book.language,currentBook:e.book.book}}const ht=de(rt,ot)(nt);export{ht as default};
