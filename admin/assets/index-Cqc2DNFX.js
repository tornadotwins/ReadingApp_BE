import{a as g,j as t,O as Se}from"./createTheme-BuP8AzxQ.js";import{aE as Ue,T as w,aF as We,r as je,s as x,B as p,I as ee,q as _,t as Pe,O as Ne,K as $e,u as Ke,A as le,H as re,E as Ve,Q as qe,w as Ge,F as K}from"./App-D_6gwKuw.js";import{S as me}from"./index-x9b0btQ5.js";import{g as Je,a as ie}from"./images-kVc5XVRO.js";import{A as Qe,i as Xe,k as Ze,n as Ye}from"./index-C6lco80w.js";import{S as be}from"./index-Bb08Fcbp.js";import{T as et,B as tt}from"./index-Bs985iIy.js";import{F as nt}from"./index-DyotRKoS.js";import{b as Ce}from"./book.services-av6Oq-Am.js";function ot(e,s=166){let f;function m(...v){const I=()=>{e.apply(this,v)};clearTimeout(f),f=setTimeout(I,s)}return m.clear=()=>{clearTimeout(f)},m}function at(e){return e&&e.ownerDocument||document}function ve(e){return at(e).defaultView||window}function lt(e,s){typeof e=="function"?e(s):e&&(e.current=s)}const ye=typeof window<"u"?g.useLayoutEffect:g.useEffect;function rt(...e){return g.useMemo(()=>e.every(s=>s==null)?null:s=>{e.forEach(f=>{lt(f,s)})},e)}function Z(e){return parseInt(e,10)||0}const it={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function st(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflowing}const ct=g.forwardRef(function(s,f){const{onChange:m,maxRows:v,minRows:I=1,style:j,value:k,...y}=s,{current:E}=g.useRef(k!=null),h=g.useRef(null),N=rt(f,h),O=g.useRef(null),R=g.useRef(null),B=g.useCallback(()=>{const b=h.current,l=ve(b).getComputedStyle(b);if(l.width==="0px")return{outerHeightStyle:0,overflowing:!1};const u=R.current;u.style.width=l.width,u.value=b.value||s.placeholder||"x",u.value.slice(-1)===`
`&&(u.value+=" ");const d=l.boxSizing,D=Z(l.paddingBottom)+Z(l.paddingTop),z=Z(l.borderBottomWidth)+Z(l.borderTopWidth),q=u.scrollHeight;u.value="x";const $=u.scrollHeight;let M=q;I&&(M=Math.max(Number(I)*$,M)),v&&(M=Math.min(Number(v)*$,M)),M=Math.max(M,$);const oe=M+(d==="border-box"?D+z:0),ae=Math.abs(M-q)<=1;return{outerHeightStyle:oe,overflowing:ae}},[v,I,s.placeholder]),A=g.useCallback(()=>{const b=B();if(st(b))return;const o=b.outerHeightStyle,l=h.current;O.current!==o&&(O.current=o,l.style.height=`${o}px`),l.style.overflow=b.overflowing?"hidden":""},[B]);ye(()=>{const b=()=>{A()};let o;const l=ot(b),u=h.current,d=ve(u);d.addEventListener("resize",l);let D;return typeof ResizeObserver<"u"&&(D=new ResizeObserver(b),D.observe(u)),()=>{l.clear(),cancelAnimationFrame(o),d.removeEventListener("resize",l),D&&D.disconnect()}},[B,A]),ye(()=>{A()});const T=b=>{E||A(),m&&m(b)};return t.jsxs(g.Fragment,{children:[t.jsx("textarea",{value:k,onChange:T,ref:N,rows:I,style:j,...y}),t.jsx("textarea",{"aria-hidden":!0,className:s.className,readOnly:!0,ref:R,tabIndex:-1,style:{...it.shadow,...j,paddingTop:0,paddingBottom:0}})]})});function ut(e){const s=f=>{e.onKeyDown&&e.onKeyDown(f)};return t.jsxs(t.Fragment,{children:[t.jsxs(Ue,{children:[e.label&&t.jsx(w,{fontFamily:'"Baloo Da 2"',fontWeight:"400",fontSize:16,lineHeight:24,textAlign:"center",children:e.label}),t.jsx(ct,{required:e.required,type:e.type,value:e.value,minRows:e.minLength,inputref:e.reference,placeholder:e.placeholder,onKeyDown:s,onChange:e.onChange})]}),e.error&&t.jsx(We,{children:e.error})]})}var ce={},dt=Se;Object.defineProperty(ce,"__esModule",{value:!0});var we=ce.default=void 0,gt=dt(je()),ht=t;we=ce.default=(0,gt.default)((0,ht.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward");var ue={},xt=Se;Object.defineProperty(ue,"__esModule",{value:!0});var Be=ue.default=void 0,pt=xt(je()),ft=t;Be=ue.default=(0,pt.default)((0,ft.jsx)("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward");const te=x(p)({backgroundColor:"#F0F5FB",border:"1px solid #1B7695",borderRadius:"4px",padding:"10px",boxSizing:"border-box",fontFamily:"Inter",width:"100%",marginBottom:"10px"}),mt=x(p)({width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"10px"}),bt=x(p)({display:"flex",alignItems:"center"}),se=x(p)({display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",padding:"5px",border:"1px solid #155D74",borderRadius:"4px",marginLeft:"5px","&:hover":{cursor:"pointer",backgroundColor:"#155D74","& svg":{fill:"white"},"& .MuiBox-root":{color:"white"}}}),W=x(p)({display:"flex",alignItems:"start",marginTop:"10px"}),P=x(p)({display:"flex",alignItems:"center",marginRight:"15px",minWidth:"100px","& .MuiBox-root":{clear:"both",display:"inline-block",overflow:"hidden",whiteSpace:"nowrap"},"& > .MuiBox-root: first-of-type":{marginRight:"5px"}}),V=x(p)(({hastextarea:e,isdisabled:s})=>({display:"flex",width:"100%",boxSizing:"border-box",border:e=="true"?"none":"1px solid #155D74",borderRadius:"4px",backgroundColor:e=="true"?"transparent":"#FFF",fontFamily:"Inter",fontSize:"16px",lineHeight:"24px",fontWeight:"500",color:"#000",outline:"none","& .MuiBox-root":{padding:"0",width:"100%","& textarea":{width:"100%",fontFamily:"Inter",fontSize:"16px",padding:"7px 10px",border:"1px solid #155D74",borderRadius:"4px"}},"& .MuiFormControl-root":{width:"100% !important",borderRadius:"4px","& .MuiInputBase-input":{fontFamily:"Inter",'&[type="text"]':{all:s=="true"&&"unset",paddingLeft:"10px",paddingRight:"10px"}},"& .MuiInputBase-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.6)"}},'& input[type="file"]':{cursor:"pointer"}})),Ct=x(p)({margin:"20px 0px 10px 0px"}),vt=x(p)({marginTop:"16px","& img":{maxWidth:"100%",maxHeight:"200px",objectFit:"contain",border:"1px solid #ccc",borderRadius:"4px"}}),yt=x(p)({display:"flex",alignItems:"center",justifyContent:"space-between",boxSizing:"border-box"}),It=x(p)({display:"flex",alignItems:"center"}),Ie=x(p)({display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",border:"1px solid #155D74",borderRadius:"4px",marginRight:"5px","& .MuiBox-root":{textTransform:"capitalize"},"&:hover":{cursor:"pointer",backgroundColor:"#155D74","& .MuiBox-root":{color:"#FFF !important"}}}),St=x(p)({display:"flex",flexDirection:"column",boxSizing:"border-box",marginTop:"10px"});function ne(e){return t.jsxs(mt,{children:[t.jsx(w,{color:"#155D74",fontFamily:"Inter",fontSize:16,lineHeight:24,fontWeight:"500",children:e.title}),t.jsxs(bt,{children:[t.jsx(se,{onClick:()=>e.onMoveUp(e.blockIndex),children:t.jsx(we,{})}),t.jsx(se,{onClick:()=>e.onMoveDown(e.blockIndex),children:t.jsx(Be,{})}),t.jsx(se,{onClick:e.onDelete,children:t.jsx(w,{children:"Delete"})})]})]})}function jt(e){return t.jsxs(te,{children:[t.jsx(ne,{title:"Title Block",blockIndex:e.blockIndex,onDelete:e.onDelete,onMoveUp:e.onMoveUp,onMoveDown:e.onMoveDown}),t.jsxs(W,{children:[t.jsxs(P,{children:[t.jsx(w,{color:"#155D74",fontFamily:"Inter",fontSize:16,lineHeight:24,fontWeight:"500",children:e.language}),t.jsx(w,{color:"#155D74",fontFamily:"Inter",fontSize:16,lineHeight:24,fontWeight:"500",children:"Title:"})]}),t.jsx(V,{children:t.jsx(ee,{type:"text",placeholder:"Enter Title",value:e.inputVal,onChange:s=>e.onInputChange(s.target.value)})})]})]})}function ke(e){return t.jsxs(te,{children:[t.jsx(ne,{title:"Text Block",blockIndex:e.blockIndex,onDelete:e.onDelete,onMoveUp:e.onMoveUp,onMoveDown:e.onMoveDown}),t.jsxs(W,{children:[t.jsxs(P,{children:[t.jsx(w,{color:"#155D74",fontFamily:"Inter",fontSize:16,lineHeight:24,fontWeight:"500",children:e.language}),t.jsx(w,{color:"#155D74",fontFamily:"Inter",fontSize:16,lineHeight:24,fontWeight:"500",children:"Text:"})]}),t.jsx(V,{hastextarea:"true",children:t.jsx(ut,{placeholder:"Enter Text",value:e.inputVal,minLength:3,onChange:s=>e.onInputChange(s.target.value)})})]})]})}function De(e){const[s,f]=g.useState(e.image||""),m=v=>{var j;const I=(j=v.target.files)==null?void 0:j[0];if(I){const k=new FileReader;k.onload=y=>{var h;const E=(h=y.target)==null?void 0:h.result;f(URL.createObjectURL(I)),e.onImageInputChange(E)},k.readAsDataURL(I)}};return t.jsxs(te,{children:[t.jsx(ne,{title:"Image Block",blockIndex:e.blockIndex,onDelete:e.onDelete,onMoveUp:e.onMoveUp,onMoveDown:e.onMoveDown}),t.jsxs(W,{children:[t.jsx(P,{children:t.jsx(w,{color:"#155D74",fontFamily:"Inter",fontSize:16,lineHeight:24,fontWeight:"500",children:"Image URL:"})}),t.jsxs(V,{isdisabled:"true",children:[t.jsx(ee,{value:s,placeholder:"Image URL",disable:!0,onChange:()=>{}}),t.jsx(nt,{type:".png, .jpg, .jpeg",onChange:m})]})]}),t.jsxs(W,{children:[t.jsx(P,{children:t.jsx(w,{color:"#155D74",fontFamily:"Inter",fontSize:16,lineHeight:24,fontWeight:"500",children:"Alt Text:"})}),t.jsx(V,{children:t.jsx(ee,{type:"text",placeholder:"Enter Alt Text",value:e.alt,onChange:v=>e.onAltInputChange(v.target.value)})})]}),s&&t.jsxs(W,{children:[t.jsx(P,{children:t.jsx(w,{color:"#155D74",fontFamily:"Inter",fontSize:16,lineHeight:24,fontWeight:"500",children:"Preview:"})}),t.jsx(vt,{children:t.jsx("img",{src:s,alt:e.alt||"Selected image"})})]})]})}function wt(e){var T,b;const s=Je(e.language),[f,m]=g.useState([{id:`title-${Date.now()}`,blockIndex:1,type:"title",value:""}]),[v,I]=g.useState(((b=(T=e.value)==null?void 0:T.title)==null?void 0:b[s])||"");g.useEffect(()=>{var u;const o=[],l=(u=e.value)==null?void 0:u.content;l==null||l.map((d,D)=>{if(d.image){const z={id:`image-${Date.now()}`,blockIndex:D,type:"image",value:{url:d.image,alt:d.alt}};o.push(z)}else{const z={id:`text-${Date.now()}`,blockIndex:D,type:"text",value:d==null?void 0:d[s]};o.push(z)}}),m(o)},[]),g.useEffect(()=>{e.onChange(f)},[f]);const j=()=>t.jsx(ne,{title:"Collapsible Block",blockIndex:e.blockIndex,onDelete:e.onDelete,onMoveUp:e.onMoveUp,onMoveDown:e.onMoveDown}),k=o=>t.jsx(Ct,{children:t.jsx(w,{color:"#155D74",fontFamily:"Inter",fontSize:16,lineHeight:24,fontWeight:"bold",children:o})}),y=o=>{const u={id:`${o}-${Date.now()}`,blockIndex:f.length+1,type:o,value:o=="image"?{url:"",alt:""}:""};m([...f,u])},E=o=>{const l=f.filter(u=>u.id!==o);m(l)},h=()=>t.jsx(yt,{children:t.jsxs(It,{children:[t.jsx(Ie,{children:t.jsx(_,{label:"Add Text",onClick:()=>y("text")})}),t.jsx(Ie,{children:t.jsx(_,{label:"Add Image",onClick:()=>y("image")})})]})}),N=(o,l)=>{m(f.map(u=>u.id==o?{...u,value:l}:u))},O=(o,l)=>{m(u=>u.map(d=>d.id===o?{...d,value:{...d.value,...l}}:d))},R=(o,l)=>{m(u=>{const d=[...u];return l==="up"&&o>0&&([d[o],d[o-1]]=[d[o-1],d[o]]),l==="down"&&o<d.length-1&&([d[o],d[o+1]]=[d[o+1],d[o]]),d})},B=()=>t.jsx(St,{children:f.map((o,l)=>o.type==="text"?t.jsx(ke,{language:e.language,inputVal:o.value,blockIndex:l,onInputChange:u=>N(o.id,u),onDelete:()=>E(o.id),onMoveUp:()=>R(l,"up"),onMoveDown:()=>R(l,"down")},o.id):o.type==="image"?t.jsx(De,{image:o.value.url,alt:o.value.alt,blockIndex:l,onImageInputChange:u=>O(o.id,{image:u}),onAltInputChange:u=>O(o.id,{alt:u}),onDelete:()=>E(o.id),onMoveUp:()=>R(l,"up"),onMoveDown:()=>R(l,"down")},o.id):null)}),A=o=>{I(o),m(f.map(l=>l.type=="title"?{...l,value:o}:l))};return t.jsxs(te,{children:[j(),k("Title: "),t.jsxs(W,{children:[t.jsxs(P,{children:[t.jsx(w,{color:"#155D74",fontFamily:"Inter",fontSize:16,lineHeight:24,fontWeight:"500",children:e.language}),t.jsx(w,{color:"#155D74",fontFamily:"Inter",fontSize:16,lineHeight:24,fontWeight:"500",children:"Title:"})]}),t.jsx(V,{children:t.jsx(ee,{type:"text",placeholder:"Enter Title",value:v,onChange:o=>A(o.target.value)})})]}),k("Content Items: "),h(),B()]})}const Bt=x(p)({position:"relative",minHeight:"calc(100vh - 37px)",width:"100%","& >.MuiBox-root:first-of-type":{backgroundColor:"#1B7695","& >.MuiBox-root":{color:"#F6FCFC"}}}),kt=x(p)({width:"100%",height:"calc(100% - 73px)",margin:"auto",marginTop:"73px"}),Dt=x(p)({margin:"20px 40px"}),Tt=x(p)({margin:"20px 40px",display:"flex",alignItems:"center","@media screen and (max-width: 800px)":{display:"block"}}),Mt=x(p)({display:"flex",justifyContent:"space-between",alignItems:"center","& > .MuiFormControl-root":{marginRight:"20px"},"@media screen and (max-width: 650px)":{display:"block","& > .MuiFormControl-root":{alignItems:"start","& .MuiInputBase-root":{width:"100%"}}}}),Rt=x(p)({margin:"20px 40px",display:"flex",alignItems:"center","& > .MuiBox-root":{width:"120px",marginRight:"50px"},"@media screen and (max-width: 800px)":{display:"block"}}),At=x(p)(({isdisable:e})=>({display:"flex",justifyContent:"center",alignItems:"center",width:"160px !important",marginRight:"0px !important",padding:"5px 10px",boxSizing:"border-box",border:"1px solid #474747",backgroundColor:e=="true"?"#A1A1A1":"#FFAA5D",cursor:e=="true"?"not-allowed":"pointer",button:{width:"100%"},"&:hover":{backgroundColor:e=="true"?"#A1A1A1":"#EE994C"},"& .MuiBox-root":{color:"#474747 !important",fontWeight:"600 !important",textTransform:"none","&:hover":{backgroundColor:e=="true"?"#A1A1A1":"#EE994C"}}})),Ft=x(p)({width:"100%",padding:"20px 40px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"space-between"}),Et=x(p)({display:"flex",alignItems:"center"}),Y=x(p)({display:"flex",justifyContent:"center",alignItems:"center",marginRight:"20px !important",padding:"5px 10px",boxSizing:"border-box",border:"1px solid #474747",backgroundColor:"#FFAA5D",cursor:"pointer",button:{width:"100%"},"&:hover":{backgroundColor:"#EE994C"},"& .MuiBox-root":{color:"#474747 !important",textTransform:"none","&:hover":{backgroundColor:"#EE994C"}}});x(p)({display:"flex",justifyContent:"center",alignItems:"center",padding:"5px 10px",width:"150px",boxSizing:"border-box",border:"1px solid #474747",backgroundColor:"#FFAA5D",cursor:"pointer",button:{width:"100%"},"&:hover":{backgroundColor:"#EE994C"},"& .MuiBox-root":{color:"#474747 !important",textTransform:"none","&:hover":{backgroundColor:"#EE994C"}}});const Ot=x(p)({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:"20px 40px",boxSizing:"border-box"}),zt=[{toolName:"Western",onClick:()=>{}},{toolName:"Arabic",onClick:()=>{}}];function Ht(e){var xe,pe,fe;const s=Ne(),[f,m]=g.useState(!1),[v,I]=g.useState(e.currentBook),[j,k]=g.useState((xe=s.state.subBookInfo)==null?void 0:xe.subBookId),[y,E]=g.useState(s.state.chapterId),[h,N]=g.useState(e.currentLanguage),[O,R]=g.useState([]),[B,A]=g.useState(((pe=s.state.subBookInfo.chapterInfos[0].chapterIsCompleted)==null?void 0:pe[h])||!1),[T,b]=g.useState(((fe=s.state.subBookInfo.chapterInfos[0].chapterIsPublished)==null?void 0:fe[h])||!1),[o,l]=g.useState([]),[u,d]=g.useState(!1),D=$e(),z=Ke(),q=g.useMemo(()=>s.state.languages,[s]);g.useEffect(()=>{var c,C;const n=e.bookInfos.find(i=>i.bookTitle.en==e.currentBook),a=(c=n==null?void 0:n.subBooks)==null?void 0:c.find(i=>i.subBookId==j),r=(a==null?void 0:a.chapterInfos)&&(a==null?void 0:a.chapterInfos[0].chapterNumber)==0&&((C=a==null?void 0:a.chapterInfos[0])==null?void 0:C.chapterId)||"";E(r)},[j]),g.useEffect(()=>{m(!0),l([]),Ce.getIntroVerses(y).then(n=>{var r,c,C;A(((r=n.isCompleted)==null?void 0:r[h])||!1),b(((c=n.isPublished)==null?void 0:c[h])||!1);const a=[];n.verses&&n.verses.length>0&&((C=n.verses)==null||C.map(i=>{var L,U;const S=i.number;if(!i.isCollapse&&i.title){const F={id:i.id||Date.now().toString(),type:"title",blockIndex:S,value:(L=i.title)==null?void 0:L[h]};a.push(F)}else if(!i.isCollapse&&i.text){const F={id:i.id||Date.now().toString(),type:"text",blockIndex:S,value:(U=i.text)==null?void 0:U[h]};a.push(F)}else if(!i.isCollapse&&i.image){const F={id:i.id||Date.now().toString(),type:"image",blockIndex:S,value:i.image};a.push(F)}else if(i.isCollapse){const F={id:i.id||Date.now().toString(),type:"collapsible",blockIndex:S,value:i};a.push(F)}})),l(a),m(!1)}).catch(n=>{console.log(`warning/error while getting intro information: 
`,n),le.warning("No introduction information for the chapter.",{position:"top-right",draggable:!0,theme:"colored",transition:re,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),m(!1)})},[y,h]);const $=()=>{localStorage.removeItem(Qe),e.dispatch({type:K.RESET_USER}),e.dispatch({type:K.RESET_BOOK}),e.dispatch({type:K.RESET_APP_TEXT_PAGES}),z("/admin")},M=()=>t.jsx(Ge,{isLoggedIn:!0,username:e.currentUser.username,isAdmin:e.currentUser.isAdmin,onLogOut:$}),oe=n=>{I(n),z("/admin/bookoverview"),e.dispatch({type:K.SET_BOOK,payload:{bookTitle:n}})},ae=()=>t.jsx(Dt,{children:t.jsx(tt,{books:Xe.map(n=>({bookTitle:n.bookTitle,onClick:()=>{oe(n.value)}})),selectedBook:v})});g.useEffect(()=>{var a;const n=e.bookInfos.find(r=>r.bookTitle.en==e.currentBook);if(n){const c=Array.from(new Set(n.subBooks.map(C=>C.subBookId))).map(C=>n.subBooks.find(i=>i.subBookId===C)).map(C=>{var i;return{label:(i=C.subBookTitle)==null?void 0:i[h],value:C.subBookId}});R(c),k(((a=s.state.subBookInfo)==null?void 0:a.subBookId)||c[0].value)}},[e.currentBook]);const Te=n=>{const a=n.target.value;k(a)},Me=n=>{const a=n.target.value;N(a)},Re=()=>t.jsx(Tt,{children:t.jsxs(Mt,{children:[(v==Ze||v==Ye)&&t.jsx(be,{label:"",options:O,value:O.find(n=>n.value===j)?j:"",backgroundColor:"#fff",textColor:"#155D74",onChange:Te}),t.jsx(be,{label:"",options:q,value:h,backgroundColor:"#fff",textColor:"#155D74",onChange:Me})]})}),de=(n,a)=>{A(n),n&&b(a),!n&&b(!1)},Ae=n=>{const a={chapterAudio:n.audio,chapterId:n._id,chapterNumber:n.chapterNumber,chapterTranslated:n.isTranslated,chapterIsCompleted:n.isCompleted,chapterIsPublished:n.isPublished,subBookId:n.subBook},r=e.bookInfos.map(c=>({...c,subBooks:c.subBooks.map(C=>({...C,chapterInfos:C.chapterInfos.map(i=>i.chapterId===y?{...i,...a}:i)}))}));e.dispatch({type:K.SET_BOOKINFOS,payload:{bookInfos:r}})},Fe=g.useCallback(()=>{const n=[];o.map((r,c)=>{var C;switch(r.type){case"title":{const i=r.value,S={chapter:y,title:{[h]:i},text:{},image:{},number:c+1,isCollapse:!1,content:[]};n.push(S);break}case"text":{const i=r.value,S={chapter:y,title:{},text:{[h]:i},image:{},number:c+1,isCollapse:!1,content:[]};n.push(S);break}case"image":{const i=r.value,S=i.url,L=i.alt,U={chapter:y,title:{},text:{},image:{url:S,alt:L},number:c+1,isCollapse:!1,content:[]};n.push(U);break}case"collapsible":{let i={chapter:y,title:{},text:{},image:{},number:c+1,isCollapse:!0,content:[]};const S=[],L=r.value,U=(C=L[0])==null?void 0:C.value;i={...i,title:{[h]:U}};for(const F in L){const Q=L[F];if(Q.type=="text"){const X={[h]:Q.value};S.push(X)}else if(Q.type=="image"){const X=Q.value,_e={image:X.url,alt:X.alt};S.push(_e)}}i={...i,content:S},n.push(i);break}}});const a={languageCode:h,subBookId:j,chapterId:y,isCompleted:{[h]:B},isPublished:{[h]:T},verses:n};Ce.updateIntroData(a).then(r=>{Ae(r),le.success("Successfully updated.",{position:"top-right",draggable:!0,theme:"colored",transition:re,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),m(!1)}).catch(r=>{le.error(r.message,{position:"top-right",draggable:!0,theme:"colored",transition:re,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),m(!1)})},[o,B,T]),Ee=()=>t.jsxs(Rt,{children:[t.jsx(me,{label:"Complete",value:B,disable:o.length==0,onChange:()=>de(!B,T)}),t.jsx(me,{label:"Publish",value:T,disable:!B,onChange:()=>de(B,!T)}),t.jsx(At,{isdisable:u?"false":"true",children:t.jsx(_,{label:"Save Changes",disabled:!u,onClick:Fe})})]}),G=n=>{const r={id:`${n}-${Date.now()}`,blockIndex:o.length,type:n,value:n=="image"?{url:"",alt:""}:""};d(!0),l([...o,r])},J=n=>{const a=o.filter(r=>r.id!==n);d(!0),l(a)},Oe=()=>t.jsx(Ft,{children:t.jsxs(Et,{children:[t.jsx(Y,{children:t.jsx(_,{label:"Add Title",onClick:()=>G("title")})}),t.jsx(Y,{children:t.jsx(_,{label:"Add Text",onClick:()=>G("text")})}),t.jsx(Y,{children:t.jsx(_,{label:"Add Image",onClick:()=>G("image")})}),t.jsx(Y,{children:t.jsx(_,{label:"Add Collapsible",onClick:()=>G("collapsible")})})]})}),ge=(n,a)=>{d(!0),l(o.map(r=>r.id==n?{...r,value:a}:r))},he=(n,a)=>{d(!0),l(r=>r.map(c=>c.id===n?{...c,value:{...c.value,...a}}:c))},ze=(n,a)=>{d(!0),l(r=>r.map(c=>c.id==n?{...c,value:{...c.value,...a}}:c))},H=(n,a)=>{d(!0),l(r=>{const c=[...r];return a==="up"&&n>0&&([c[n],c[n-1]]=[c[n-1],c[n]]),a==="down"&&n<c.length-1&&([c[n],c[n+1]]=[c[n+1],c[n]]),c})},He=()=>t.jsx(Ot,{children:o.map((n,a)=>{switch(n.type){case"title":return t.jsx(jt,{language:ie(h),inputVal:n.value,blockIndex:a,onInputChange:r=>ge(n.id,r),onDelete:()=>J(n.id),onMoveUp:()=>H(a,"up"),onMoveDown:()=>H(a,"down")},n.id);case"text":return t.jsx(ke,{language:ie(h),inputVal:n.value,blockIndex:a,onInputChange:r=>ge(n.id,r),onDelete:()=>J(n.id),onMoveUp:()=>H(a,"up"),onMoveDown:()=>H(a,"down")},n.id);case"image":return t.jsx(De,{image:n.value.url,alt:n.value.alt,blockIndex:a,onImageInputChange:r=>he(n.id,{image:r}),onAltInputChange:r=>he(n.id,{alt:r}),onDelete:()=>J(n.id),onMoveUp:()=>H(a,"up"),onMoveDown:()=>H(a,"down")},n.id);case"collapsible":return t.jsx(wt,{language:ie(h),blockIndex:a,value:n.value,onChange:r=>ze(n.id,r),onDelete:()=>J(n.id),onMoveUp:()=>H(a,"up"),onMoveDown:()=>H(a,"down")},n.id);default:return null}})}),Le=()=>t.jsxs(kt,{children:[t.jsx(et,{tools:zt}),ae(),Re(),Ee(),Oe(),He()]});return t.jsxs(t.Fragment,{children:[t.jsxs(Bt,{flexDirection:D?"column":"row",children:[M(),Le()]}),f&&t.jsx(Ve,{}),t.jsx(qe,{})]})}function Lt(e){return{dispatch:e}}function _t(e){return{currentUser:e.user.currentUser,bookInfos:e.book.bookInfos,chapterInfos:e.book.chapterInfos,currentBook:e.book.book,currentLanguage:e.book.language}}const Jt=Pe(_t,Lt)(Ht);export{Jt as default};
