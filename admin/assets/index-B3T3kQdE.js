import{j as o,a as b}from"./createTheme-C7nUuxX_.js";import{s as n,z as r,h as C,D as le,E as se,_ as ue,X as j,a0 as de,W as ce,H as ge,J as xe,N as he,A as be}from"./App-B9rHvszB.js";import{b as fe,d as Ce}from"./book.services-Bu9GId0-.js";import{I as G,g as me,a as ke}from"./images-DzPc_l-t.js";import{T as v,c as T,f as A,B as L,A as Se,h as Be,i as ye}from"./index-DV8uR7_z.js";import{S as Q}from"./index-HJ1AIixL.js";import{T as pe,B as je}from"./index-CpFKnreP.js";n(r)({width:"100%",backgroundColor:"#F0F5FB",padding:"5px 20px"});const Oe=n(r)(({status:e})=>({width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #155D74",cursor:"pointer",backgroundColor:e==v?"#FFAA5D":e==T?"#155D74":"#fff",color:e==v?"#155D74":e==T?"#fff":"#155D74"})),_=e=>{var l,g,s,x;return o.jsx(Oe,{status:e.isPublished?v:e.isCompleted?T:A,onClick:()=>{var a;return e.onClick(((a=e.chapterInfo)==null?void 0:a.chapterId)||"")},children:o.jsx(C,{fontFamily:"Inter",fontSize:16,fontWeight:"500",children:e.chapterInfo?e.chapterInfo.chapterNumber==0?"Intr":(l=e.chapterInfo.chapterNumber)==null?void 0:l.toString():((g=e.subBookInfo)==null?void 0:g.subBookNumber)==0?"Intr":(x=(s=e.subBookInfo)==null?void 0:s.subBookNumber)==null?void 0:x.toString()})})},ve=n(r)({margin:"2px 0px",display:"flex"}),Te=n(r)({width:"100px",minWidth:"100px",maxWidth:"200px",marginRight:"10px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",padding:"9px 0px"}}),Ie=n(r)({display:"flex",flexGrow:1}),we=n(r)({display:"flex",justifyContent:"center",marginRight:"3px",minWidth:"45px","& >*":{flexGrow:1}}),Z=n(r)({display:"flex",flexWrap:"wrap",gap:"2px"});function W(e){var l,g,s,x,a,f,d,I;return o.jsxs(ve,{children:[!e.isQuranOrZabur&&e.subBook&&o.jsx(Te,{children:o.jsx(C,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"400",children:(l=e.subBook.subBookTitle)==null?void 0:l[e.languageCode]})}),o.jsxs(Ie,{children:[o.jsx(we,{children:e.subBook&&!!e.subBook.noChapter&&((s=(g=e.subBook)==null?void 0:g.chapterInfos[0])==null?void 0:s.chapterNumber)==0&&o.jsx(_,{chapterInfo:e.subBook.chapterInfos[0],isCompleted:(a=(x=e.subBook.chapterInfos[0])==null?void 0:x.chapterIsCompleted)==null?void 0:a[e.languageCode],isPublished:(d=(f=e.subBook.chapterInfos[0])==null?void 0:f.chapterIsPublished)==null?void 0:d[e.languageCode],onClick:e.onChapterClick})}),!e.isQuranOrZabur&&o.jsx(Z,{children:e.subBook&&((I=e.subBook.chapterInfos)==null?void 0:I.map((t,S)=>{var h,m;return o.jsx(_,{subBookInfo:e.subBook,chapterInfo:t,isCompleted:((h=t==null?void 0:t.chapterIsCompleted)==null?void 0:h[e.languageCode])||!1,isPublished:((m=t==null?void 0:t.chapterIsPublished)==null?void 0:m[e.languageCode])||!1,onClick:e.onChapterClick},S)}))}),e.isQuranOrZabur&&o.jsx(Z,{children:e.book&&e.book.subBooks&&e.book.subBooks.map((t,S)=>{var h,m,B,w;return o.jsx(_,{subBookInfo:t,isCompleted:t.chapterInfos&&((m=(h=t.chapterInfos[0])==null?void 0:h.chapterIsCompleted)==null?void 0:m[e.languageCode])||!1,isPublished:t.chapterInfos&&((w=(B=t.chapterInfos[0])==null?void 0:B.chapterIsPublished)==null?void 0:w[e.languageCode])||!1,onClick:()=>e.onChapterClick(t.chapterInfos&&(t==null?void 0:t.chapterInfos[0].chapterId))},S)})})]})]})}const Fe=n(r)(({isquranorzabur:e})=>({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",paddingRight:e=="true"?"120px":"0px",boxSizing:"border-box",maxWidth:"650px","@media screen and (max-width: 670px)":{paddingRight:"0px"}})),Ae=n(r)({display:"flex",marginBottom:"15px"}),De=n("img")({width:"24px",height:"24px",marginRight:"10px"}),U=e=>o.jsxs(Fe,{isquranorzabur:e.isQuranOrZabur?"true":"false",children:[o.jsxs(Ae,{children:[o.jsx(De,{src:G.icon_book}),o.jsx(C,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"700",children:`${e.bookTitle} text - ${e.language} - chapters:`})]}),!e.isQuranOrZabur&&e.bookInfo.subBooks.map((l,g)=>o.jsx(W,{subBook:l,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur,onChapterClick:e.onClickSquare},g)),e.isQuranOrZabur&&o.jsx(W,{book:e.bookInfo,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur,onChapterClick:e.onClickSquare})]});n(r)({width:"100%",backgroundColor:"#F0F5FB",padding:"5px 20px"});const Ne=n(r)(({status:e})=>({width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #155D74",cursor:"pointer",backgroundColor:e==v?"#FFAA5D":e==T?"#155D74":"#fff",color:e==v?"#155D74":e==T?"#fff":"#155D74"})),R=e=>{var l;return o.jsx(Ne,{status:e.audioStatus,onClick:e.onClick,children:o.jsx(C,{fontFamily:"Inter",fontSize:16,fontWeight:"500",children:e.chapterNumber==0?"Intr":(l=e.chapterNumber)==null?void 0:l.toString()})})},_e=n(r)({margin:"10px 0px",display:"flex"}),Re=n(r)({width:"100px",minWidth:"100px",maxWidth:"200px",marginRight:"10px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",padding:"9px 0px"}}),Ee=n(r)({display:"flex",flexGrow:1}),Le=n(r)({display:"flex",justifyContent:"center",marginRight:"3px",minWidth:"45px","& >*":{flexGrow:1}}),$=n(r)({display:"flex",flexWrap:"wrap",gap:"2px"});function P(e){var l,g;return o.jsxs(_e,{children:[!e.isQuranOrZabur&&e.subBook&&o.jsx(Re,{children:o.jsx(C,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"400",children:(l=e.subBook.subBookTitle)==null?void 0:l[e.languageCode]})}),o.jsxs(Ee,{children:[o.jsx(Le,{children:e.subBook&&!!e.subBook.noChapter&&e.subBook.chapterInfos[0].chapterNumber==0&&o.jsx(R,{chapterNumber:0,onClick:()=>{},audioStatus:A})}),!e.isQuranOrZabur&&o.jsx($,{children:e.subBook&&((g=e.subBook.chapterInfos)==null?void 0:g.map((s,x)=>{var a;return o.jsx(R,{chapterNumber:s.chapterNumber,audioStatus:((a=s==null?void 0:s.chapterAudio)==null?void 0:a[e.languageCode])||A,onClick:()=>{}},x)}))}),e.isQuranOrZabur&&o.jsx($,{children:e.book&&e.book.subBooks&&e.book.subBooks.map((s,x)=>{var a,f;return o.jsx(R,{chapterNumber:s==null?void 0:s.subBookNumber,audioStatus:s.chapterInfos&&((f=(a=s.chapterInfos[0])==null?void 0:a.chapterAudio)==null?void 0:f[e.languageCode])||A,onClick:()=>{}},x)})})]})]})}const Qe=n(r)(({isquranorzabur:e})=>({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",paddingRight:e=="true"?"120px":"0px",boxSizing:"border-box",maxWidth:"650px","@media screen and (max-width: 670px)":{paddingRight:"0px"}})),Ze=n(r)({display:"flex",marginBottom:"15px"}),We=n("img")({width:"24px",height:"24px",marginRight:"10px"}),q=e=>o.jsxs(Qe,{isquranorzabur:e.isQuranOrZabur?"true":"false",children:[o.jsxs(Ze,{children:[o.jsx(We,{src:G.icon_audio}),o.jsx(C,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"700",children:`${e.bookTitle} Audio - ${e.language} - chapters:`})]}),!e.isQuranOrZabur&&e.bookInfo.subBooks.map((l,g)=>o.jsx(P,{subBook:l,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur},g)),e.isQuranOrZabur&&o.jsx(P,{book:e.bookInfo,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur})]}),Ue=n(r)({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",maxWidth:"650px"}),$e=n(r)({display:"flex"});n("img")({width:"24px",height:"24px",marginRight:"10px"});const Pe=e=>o.jsx(Ue,{children:o.jsx($e,{children:o.jsx(C,{color:"red",fontFamily:"'Baloo Da 2'",fontWeight:"700",fontSize:30,children:"Coming Soon"})})}),qe=n(r)({position:"relative",minHeight:"100vh",width:"100%","& >.MuiBox-root:first-of-type":{backgroundColor:"#1B7695","& >.MuiBox-root":{color:"#F6FCFC"}}}),ze=n(r)({width:"100%",height:"calc(100% - 73px)",margin:"auto",marginTop:"73px"}),Ge=n(r)({width:"650px",display:"flex",justifyContent:"center",alignItems:"center",margin:"20px 40px 0px 40px","& .MuiFormControl-root":{width:"unset",marginLeft:"15px"},"& .MuiBox-root":{fontFamily:'"Baloo Da 2" !important'},"@media screen and (max-width: 670px)":{width:"unset"}}),Ke=n(r)({margin:"20px 40px"}),Me=n(r)({margin:"5px 40px",padding:"15px",maxWidth:"650px",boxSizing:"border-box",display:"flex",justifyContent:"center","& .MuiButtonBase-root":{boxSizing:"border-box",textTransform:"none",backgroundColor:"#FFAA5D",padding:"8px 15px",borderRadius:"0px",border:"1px solid #474747","&:hover":{backgroundColor:"#EECC5D"}}}),z=[{value:"Text",label:"Text"},{value:"Audio",label:"Audio"},{value:"Reference",label:"Reference"}],He=[{toolName:"Western",onClick:()=>{}},{toolName:"Arabic",onClick:()=>{}}],Ve=e=>{const[l,g]=b.useState([]),[s,x]=b.useState(!1),[a,f]=b.useState(null),[d,I]=b.useState(e.currentBook||L),[t,S]=b.useState(""),[h,m]=b.useState(z[0].value),B=se(),w=ue(),E=b.useCallback(()=>{var u;if(!((u=e.currentUser)!=null&&u.roles))return[];const i=e.currentUser.roles.reduce((c,k)=>{if(k.role!=="none"){const N=me(k.language);c.some(F=>F.value===N)||c.push({value:N,label:k.language})}return c},[]);return e.currentLanguage||e.dispatch({type:j.SET_CURRENT_LANGUAGE,payload:{language:i[0].value}}),i},[e.currentUser]);b.useEffect(()=>{const i=E();g(i),i.length>0&&!i.some(u=>u.value===t)&&S(i[0].value)},[e.currentUser,t,E]),b.useEffect(()=>{d=="App Text"?V():(async()=>{x(!0);try{const u=e.bookInfos.find(c=>c.bookTitle.en===d);if(u)f(u);else{const c=await fe.getBookInfoByTitle(d),k={bookId:c.bookId,bookImage:c.bookImage,bookTitle:c.bookTitle,subBooks:c.subBooks};f(c),e.dispatch({type:j.ADD_BOOKINFO,payload:{bookInfo:k}})}x(!1)}catch(u){ge.error(u instanceof Error?u.message:String(u),{position:"top-right",draggable:!0,theme:"colored",transition:xe,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),x(!1)}})()},[d,e.bookInfos]);const K=i=>{const u=i.target.value;S(u),e.dispatch({type:j.SET_CURRENT_LANGUAGE,payload:{language:u}})},M=i=>{const u=i.target.value;m(u)},H=i=>{I(i),e.dispatch({type:j.SET_BOOK,payload:{bookTitle:i}})},D=(i,u=!1)=>{const c=a==null?void 0:a.subBooks.find(p=>{var F;return(F=p==null?void 0:p.chapterInfos)==null?void 0:F.find(ie=>ie.chapterId==i)}),k=c==null?void 0:c.chapterInfos.find(p=>p.chapterId==i);B("/admin/chapteroverview",{state:{chapterId:i,isImport:u,subBookInfo:c,chapterInfo:k,languages:l}})},V=()=>{B("/admin/apptext")},J=()=>{localStorage.removeItem(Se),e.dispatch({type:j.RESET_USER}),e.dispatch({type:j.RESET_BOOK}),B("/admin")},O=d===L||d===Be,y=ke(t),X=()=>o.jsx(he,{isLoggedIn:!0,username:e.currentUser.username,isAdmin:e.currentUser.isAdmin,onLogOut:J}),Y=()=>o.jsx(Ke,{children:o.jsx(je,{books:ye.map(i=>({bookTitle:i.bookTitle,onClick:()=>H(i.value)})),selectedBook:d})}),ee=()=>o.jsxs(Ge,{children:[o.jsx(C,{color:"#155D74",fontWeight:"700",fontFamily:"'Baloo Da 2'",children:`${d} ${O?"overview":""}`}),o.jsx(Q,{label:"",options:l,value:t,backgroundColor:"#fff",textColor:"#155D74",onChange:K}),!O&&o.jsx(Q,{label:"",options:z,value:h,backgroundColor:"#fff",textColor:"#155D74",onChange:M})]}),oe=()=>o.jsx(Me,{children:o.jsx(be,{icon:o.jsx(Ce,{}),label:`Import ${h} into ${y} ${d}`,onClick:()=>D((a==null?void 0:a.subBooks[0].chapterInfos[0].chapterId)||"",!0)})}),ne=()=>o.jsx(o.Fragment,{children:a&&!O&&o.jsxs(o.Fragment,{children:[h==="Text"&&o.jsx(U,{bookTitle:d,language:y,languageCode:t,bookInfo:a,isQuranOrZabur:!1,onClickSquare:D}),h==="Audio"&&o.jsx(q,{bookTitle:d,language:y,languageCode:t,bookInfo:a,isQuranOrZabur:!1}),h==="Reference"&&o.jsx(Pe,{bookTitle:d,language:y,languageCode:t,bookInfo:a})]})}),te=()=>o.jsx(o.Fragment,{children:a&&O&&o.jsxs(o.Fragment,{children:[o.jsx(U,{bookTitle:d,language:y,languageCode:t,bookInfo:a,isQuranOrZabur:!0,onClickSquare:D}),o.jsx(q,{bookTitle:d,language:y,languageCode:t,bookInfo:a,isQuranOrZabur:!0})]})}),ae=()=>o.jsxs(o.Fragment,{children:[ne(),te()]}),re=()=>o.jsxs(ze,{children:[o.jsx(pe,{tools:He}),Y(),ee(),!O&&oe(),ae()]});return o.jsxs(o.Fragment,{children:[o.jsxs(qe,{flexDirection:w?"column":"row",children:[X(),re()]}),o.jsx(de,{}),s&&o.jsx(ce,{})]})};function Je(e){return{dispatch:e}}function Xe(e){return{currentUser:e.user.currentUser,bookInfos:e.book.bookInfos,currentLanguage:e.book.language,currentBook:e.book.book}}const io=le(Xe,Je)(Ve);export{io as default};
