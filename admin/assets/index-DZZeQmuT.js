import{j as o,a as b}from"./createTheme-DJPBJvZP.js";import{s as t,z as r,h as C,D as se,E as ue,_ as de,X as j,a0 as ce,W as ge,H as xe,J as he,N as fe,A as be}from"./App-C2Yz7aTm.js";import{b as Ce,d as me}from"./book.services-DDDNIr8D.js";import{I as G,g as ke,a as Se}from"./images-DqZ-r52n.js";import{T,c as v,C as H,f as A,B as L,A as Be,h as ye,i as pe}from"./index-B2VUIFA_.js";import{S as Q}from"./index-D6kjuuaA.js";import{T as je,B as Oe}from"./index-DH5tDzVY.js";t(r)({width:"100%",backgroundColor:"#F0F5FB",padding:"5px 20px"});const Te=t(r)(({status:e})=>({width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #155D74",cursor:"pointer",backgroundColor:e==T?"#FFAA5D":e==v?"#155D74":e==H?"#F0F5FB":"#fff",color:e==T?"#155D74":e==v?"#fff":"#155D74"})),D=e=>{var s,g,u,x,a,h;return o.jsx(Te,{status:e.isPublished?T:e.isCompleted?v:e.chapterInfo&&((g=(s=e.chapterInfo)==null?void 0:s.verses)==null?void 0:g.length)>0?H:A,onClick:()=>{var l;return e.onClick(((l=e.chapterInfo)==null?void 0:l.chapterId)||"")},children:o.jsx(C,{fontFamily:"Inter",fontSize:16,fontWeight:"500",children:e.isSpecialBook?((u=e.subBookInfo)==null?void 0:u.subBookNumber)==0?"Intr":(a=(x=e.subBookInfo)==null?void 0:x.subBookNumber)==null?void 0:a.toString():e.chapterInfo&&(e.chapterInfo.chapterNumber==0?"Intr":(h=e.chapterInfo.chapterNumber)==null?void 0:h.toString())})})},ve=t(r)({margin:"2px 0px",display:"flex"}),Ie=t(r)({width:"100px",minWidth:"100px",maxWidth:"200px",marginRight:"10px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",padding:"9px 0px"}}),we=t(r)({display:"flex",flexGrow:1}),Fe=t(r)({display:"flex",justifyContent:"center",marginRight:"3px",minWidth:"45px","& >*":{flexGrow:1}}),Z=t(r)({display:"flex",flexWrap:"wrap",gap:"2px"});function W(e){var s,g,u,x,a,h,l,I;return o.jsxs(ve,{children:[!e.isQuranOrZabur&&e.subBook&&o.jsx(Ie,{children:o.jsx(C,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"400",children:(s=e.subBook.subBookTitle)==null?void 0:s[e.languageCode]})}),o.jsxs(we,{children:[o.jsx(Fe,{children:e.subBook&&!!e.subBook.noChapter&&((u=(g=e.subBook)==null?void 0:g.chapterInfos[0])==null?void 0:u.chapterNumber)==0&&o.jsx(D,{chapterInfo:e.subBook.chapterInfos[0],isCompleted:(a=(x=e.subBook.chapterInfos[0])==null?void 0:x.chapterIsCompleted)==null?void 0:a[e.languageCode],isPublished:(l=(h=e.subBook.chapterInfos[0])==null?void 0:h.chapterIsPublished)==null?void 0:l[e.languageCode],onClick:e.onChapterClick})}),!e.isQuranOrZabur&&o.jsx(Z,{children:e.subBook&&((I=e.subBook.chapterInfos)==null?void 0:I.map((n,S)=>{var f,m;return o.jsx(D,{subBookInfo:e.subBook,chapterInfo:n,isCompleted:((f=n==null?void 0:n.chapterIsCompleted)==null?void 0:f[e.languageCode])||!1,isPublished:((m=n==null?void 0:n.chapterIsPublished)==null?void 0:m[e.languageCode])||!1,onClick:e.onChapterClick},S)}))}),e.isQuranOrZabur&&o.jsx(Z,{children:e.book&&e.book.subBooks&&e.book.subBooks.map((n,S)=>{var f,m,B,w;return o.jsx(D,{subBookInfo:n,chapterInfo:n.chapterInfos[0],isCompleted:n.chapterInfos&&((m=(f=n.chapterInfos[0])==null?void 0:f.chapterIsCompleted)==null?void 0:m[e.languageCode])||!1,isPublished:n.chapterInfos&&((w=(B=n.chapterInfos[0])==null?void 0:B.chapterIsPublished)==null?void 0:w[e.languageCode])||!1,isSpecialBook:!0,onClick:()=>e.onChapterClick(n.chapterInfos&&(n==null?void 0:n.chapterInfos[0].chapterId))},S)})})]})]})}const Ae=t(r)(({isquranorzabur:e})=>({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",paddingRight:e=="true"?"120px":"0px",boxSizing:"border-box",maxWidth:"650px","@media screen and (max-width: 670px)":{paddingRight:"0px"}})),Ne=t(r)({display:"flex",marginBottom:"15px"}),_e=t("img")({width:"24px",height:"24px",marginRight:"10px"}),U=e=>o.jsxs(Ae,{isquranorzabur:e.isQuranOrZabur?"true":"false",children:[o.jsxs(Ne,{children:[o.jsx(_e,{src:G.icon_book}),o.jsx(C,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"700",children:`${e.bookTitle} text - ${e.language} - chapters:`})]}),!e.isQuranOrZabur&&e.bookInfo.subBooks.map((s,g)=>o.jsx(W,{subBook:s,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur,onChapterClick:e.onClickSquare},g)),e.isQuranOrZabur&&o.jsx(W,{book:e.bookInfo,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur,onChapterClick:e.onClickSquare})]});t(r)({width:"100%",backgroundColor:"#F0F5FB",padding:"5px 20px"});const De=t(r)(({status:e})=>({width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #155D74",cursor:"pointer",backgroundColor:e==T?"#FFAA5D":e==v?"#155D74":"#fff",color:e==T?"#155D74":e==v?"#fff":"#155D74"})),E=e=>{var s;return o.jsx(De,{status:e.audioStatus,onClick:e.onClick,children:o.jsx(C,{fontFamily:"Inter",fontSize:16,fontWeight:"500",children:e.chapterNumber==0?"Intr":(s=e.chapterNumber)==null?void 0:s.toString()})})},Ee=t(r)({margin:"10px 0px",display:"flex"}),Re=t(r)({width:"100px",minWidth:"100px",maxWidth:"200px",marginRight:"10px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",padding:"9px 0px"}}),Le=t(r)({display:"flex",flexGrow:1}),Qe=t(r)({display:"flex",justifyContent:"center",marginRight:"3px",minWidth:"45px","& >*":{flexGrow:1}}),$=t(r)({display:"flex",flexWrap:"wrap",gap:"2px"});function P(e){var s,g;return o.jsxs(Ee,{children:[!e.isQuranOrZabur&&e.subBook&&o.jsx(Re,{children:o.jsx(C,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"400",children:(s=e.subBook.subBookTitle)==null?void 0:s[e.languageCode]})}),o.jsxs(Le,{children:[o.jsx(Qe,{children:e.subBook&&!!e.subBook.noChapter&&e.subBook.chapterInfos[0].chapterNumber==0&&o.jsx(E,{chapterNumber:0,onClick:()=>{},audioStatus:A})}),!e.isQuranOrZabur&&o.jsx($,{children:e.subBook&&((g=e.subBook.chapterInfos)==null?void 0:g.map((u,x)=>{var a;return o.jsx(E,{chapterNumber:u.chapterNumber,audioStatus:((a=u==null?void 0:u.chapterAudio)==null?void 0:a[e.languageCode])||A,onClick:()=>{}},x)}))}),e.isQuranOrZabur&&o.jsx($,{children:e.book&&e.book.subBooks&&e.book.subBooks.map((u,x)=>{var a,h;return o.jsx(E,{chapterNumber:u==null?void 0:u.subBookNumber,audioStatus:u.chapterInfos&&((h=(a=u.chapterInfos[0])==null?void 0:a.chapterAudio)==null?void 0:h[e.languageCode])||A,onClick:()=>{}},x)})})]})]})}const Ze=t(r)(({isquranorzabur:e})=>({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",paddingRight:e=="true"?"120px":"0px",boxSizing:"border-box",maxWidth:"650px","@media screen and (max-width: 670px)":{paddingRight:"0px"}})),We=t(r)({display:"flex",marginBottom:"15px"}),Ue=t("img")({width:"24px",height:"24px",marginRight:"10px"}),q=e=>o.jsxs(Ze,{isquranorzabur:e.isQuranOrZabur?"true":"false",children:[o.jsxs(We,{children:[o.jsx(Ue,{src:G.icon_audio}),o.jsx(C,{color:"#155D74",fontFamily:"'Baloo Da 2'",fontWeight:"700",children:`${e.bookTitle} Audio - ${e.language} - chapters:`})]}),!e.isQuranOrZabur&&e.bookInfo.subBooks.map((s,g)=>o.jsx(P,{subBook:s,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur},g)),e.isQuranOrZabur&&o.jsx(P,{book:e.bookInfo,languageCode:e.languageCode,isQuranOrZabur:e.isQuranOrZabur})]}),$e=t(r)({backgroundColor:"#F0F5FB",margin:"5px 40px",padding:"15px",maxWidth:"650px"}),Pe=t(r)({display:"flex"});t("img")({width:"24px",height:"24px",marginRight:"10px"});const qe=e=>o.jsx($e,{children:o.jsx(Pe,{children:o.jsx(C,{color:"red",fontFamily:"'Baloo Da 2'",fontWeight:"700",fontSize:30,children:"Coming Soon"})})}),ze=t(r)({position:"relative",minHeight:"100vh",width:"100%","& >.MuiBox-root:first-of-type":{backgroundColor:"#1B7695","& >.MuiBox-root":{color:"#F6FCFC"}}}),Ge=t(r)({width:"100%",height:"calc(100% - 73px)",margin:"auto",marginTop:"73px"}),He=t(r)({width:"650px",display:"flex",justifyContent:"center",alignItems:"center",margin:"20px 40px 0px 40px","& .MuiFormControl-root":{width:"unset",marginLeft:"15px"},"& .MuiBox-root":{fontFamily:'"Baloo Da 2" !important'},"@media screen and (max-width: 670px)":{width:"unset"}}),Ke=t(r)({margin:"20px 40px"}),Me=t(r)({margin:"5px 40px",padding:"15px",maxWidth:"650px",boxSizing:"border-box",display:"flex",justifyContent:"center","& .MuiButtonBase-root":{boxSizing:"border-box",textTransform:"none",backgroundColor:"#FFAA5D",padding:"8px 15px",borderRadius:"0px",border:"1px solid #474747","&:hover":{backgroundColor:"#EECC5D"}}}),z=[{value:"Text",label:"Text"},{value:"Audio",label:"Audio"},{value:"Reference",label:"Reference"}],Ve=[{toolName:"Western",onClick:()=>{}},{toolName:"Arabic",onClick:()=>{}}],Je=e=>{const[s,g]=b.useState([]),[u,x]=b.useState(!1),[a,h]=b.useState(null),[l,I]=b.useState(e.currentBook||L),[n,S]=b.useState(""),[f,m]=b.useState(z[0].value),B=ue(),w=de(),R=b.useCallback(()=>{var d;if(!((d=e.currentUser)!=null&&d.roles))return[];const i=e.currentUser.roles.reduce((c,k)=>{if(k.role!=="none"){const _=ke(k.language);c.some(F=>F.value===_)||c.push({value:_,label:k.language})}return c},[]);return e.currentLanguage||e.dispatch({type:j.SET_CURRENT_LANGUAGE,payload:{language:i[0].value}}),i},[e.currentUser]);b.useEffect(()=>{const i=R();g(i),i.length>0&&!i.some(d=>d.value===n)&&S(i[0].value)},[e.currentUser,n,R]),b.useEffect(()=>{l=="App Text"?J():(async()=>{x(!0);try{const d=e.bookInfos.find(c=>c.bookTitle.en===l);if(d)h(d);else{const c=await Ce.getBookInfoByTitle(l),k={bookId:c.bookId,bookImage:c.bookImage,bookTitle:c.bookTitle,subBooks:c.subBooks};h(c),e.dispatch({type:j.ADD_BOOKINFO,payload:{bookInfo:k}})}x(!1)}catch(d){xe.error(d instanceof Error?d.message:String(d),{position:"top-right",draggable:!0,theme:"colored",transition:he,closeOnClick:!0,pauseOnHover:!0,hideProgressBar:!1,autoClose:3e3}),x(!1)}})()},[l,e.bookInfos]);const K=i=>{const d=i.target.value;S(d),e.dispatch({type:j.SET_CURRENT_LANGUAGE,payload:{language:d}})},M=i=>{const d=i.target.value;m(d)},V=i=>{I(i),e.dispatch({type:j.SET_BOOK,payload:{bookTitle:i}})},N=(i,d=!1)=>{const c=a==null?void 0:a.subBooks.find(p=>{var F;return(F=p==null?void 0:p.chapterInfos)==null?void 0:F.find(le=>le.chapterId==i)}),k=c==null?void 0:c.chapterInfos.find(p=>p.chapterId==i);B("/admin/chapteroverview",{state:{chapterId:i,isImport:d,subBookInfo:c,chapterInfo:k,languages:s}})},J=()=>{B("/admin/apptext")},X=()=>{localStorage.removeItem(Be),e.dispatch({type:j.RESET_USER}),e.dispatch({type:j.RESET_BOOK}),B("/admin")},O=l===L||l===ye,y=Se(n),Y=()=>o.jsx(fe,{isLoggedIn:!0,username:e.currentUser.username,isAdmin:e.currentUser.isAdmin,onLogOut:X}),ee=()=>o.jsx(Ke,{children:o.jsx(Oe,{books:pe.map(i=>({bookTitle:i.bookTitle,onClick:()=>V(i.value)})),selectedBook:l})}),oe=()=>o.jsxs(He,{children:[o.jsx(C,{color:"#155D74",fontWeight:"700",fontFamily:"'Baloo Da 2'",children:`${l} ${O?"overview":""}`}),o.jsx(Q,{label:"",options:s,value:n,backgroundColor:"#fff",textColor:"#155D74",onChange:K}),!O&&o.jsx(Q,{label:"",options:z,value:f,backgroundColor:"#fff",textColor:"#155D74",onChange:M})]}),ne=()=>o.jsx(Me,{children:o.jsx(be,{icon:o.jsx(me,{}),label:`Import ${f} into ${y} ${l}`,onClick:()=>N((a==null?void 0:a.subBooks[0].chapterInfos[0].chapterId)||"",!0)})}),te=()=>o.jsx(o.Fragment,{children:a&&!O&&o.jsxs(o.Fragment,{children:[f==="Text"&&o.jsx(U,{bookTitle:l,language:y,languageCode:n,bookInfo:a,isQuranOrZabur:!1,onClickSquare:N}),f==="Audio"&&o.jsx(q,{bookTitle:l,language:y,languageCode:n,bookInfo:a,isQuranOrZabur:!1}),f==="Reference"&&o.jsx(qe,{bookTitle:l,language:y,languageCode:n,bookInfo:a})]})}),ae=()=>o.jsx(o.Fragment,{children:a&&O&&o.jsxs(o.Fragment,{children:[o.jsx(U,{bookTitle:l,language:y,languageCode:n,bookInfo:a,isQuranOrZabur:!0,onClickSquare:N}),o.jsx(q,{bookTitle:l,language:y,languageCode:n,bookInfo:a,isQuranOrZabur:!0})]})}),re=()=>o.jsxs(o.Fragment,{children:[te(),ae()]}),ie=()=>o.jsxs(Ge,{children:[o.jsx(je,{tools:Ve}),ee(),oe(),!O&&ne(),re()]});return o.jsxs(o.Fragment,{children:[o.jsxs(ze,{flexDirection:w?"column":"row",children:[Y(),ie()]}),o.jsx(ce,{}),u&&o.jsx(ge,{})]})};function Xe(e){return{dispatch:e}}function Ye(e){return{currentUser:e.user.currentUser,bookInfos:e.book.bookInfos,currentLanguage:e.book.language,currentBook:e.book.book}}const lo=se(Ye,Xe)(Je);export{lo as default};
