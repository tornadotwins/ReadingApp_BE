import{b as l,j as o,Q as R,af as Vt,U as z,at as Ie,au as Ue,av as Te,aw as kt,X as qt,ac as Xt,$ as Re,aa as Fe,Y as Ze,ax as et,ay as Ye,az as tt,aA as Ut,aB as Ft,aC as rt,aD as J,al as Le,ak as Se}from"./index-CDMXNg3a.js";import{S as re,g as ne,aH as Yt,aI as Kt,aJ as zt,aK as $t,s as B,B as D,U as ke,aL as Gt,u as At,_ as G,c as Qt,d as Jt,e as ue}from"./App-DiZxKHZm.js";import{I as E,T as ee}from"./images-CCTzJt5v.js";import{C as Q,L as Zt}from"./index-B6zE6qlU.js";import{a as Pe}from"./auth.service-Bknov-0C.js";import{b as nt}from"./book.service-BN6ptQUU.js";import{b as it}from"./bookmark.service-CssgXO9h.js";import"./index-DrMeNDU2.js";import"./axios-BimPEqV4.js";var Rt={exports:{}},er="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",tr=er,rr=tr;function Lt(){}function Pt(){}Pt.resetWarningCache=Lt;var nr=function(){function e(s,a,h,I,p,k){if(k!==rr){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}e.isRequired=e;function n(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:Pt,resetWarningCache:Lt};return i.PropTypes=i,i};Rt.exports=nr();var ir=Rt.exports;function or(e){const{theme:n}=l.useContext(re),{buttonColor:i,buttonTextColor:s}=ne(n);return o.jsx(Yt,{ref:e.refer,"data-id":e.dataId,backgroundColor:i,children:o.jsxs(Kt,{progresscolor:s,children:[o.jsx(zt,{variant:"determinate",value:e.progress,thickness:2}),o.jsx($t,{src:n==R.EASY_OCEAN?E.bookmark2_white:E.bookmark2_default})]})})}var Bt={};function ar(e){if(e&&e.__esModule)return e;var n={};if(e!=null){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};s.get||s.set?Object.defineProperty(n,i,s):n[i]=e[i]}}return n.default=e,n}var Ot=ar,Z={},Be,ot;function sr(){if(ot)return Be;ot=1;function e(n){return n&&n.__esModule?n:{default:n}}return Be=e,Be}var ye,at;function lr(){if(at)return ye;at=1;function e(){return ye=e=Object.assign||function(n){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a])}return n},e.apply(this,arguments)}return ye=e,ye}var Oe,st;function cr(){if(st)return Oe;st=1;function e(n,i){if(n==null)return{};var s={},a=Object.keys(n),h,I;for(I=0;I<a.length;I++)h=a[I],!(i.indexOf(h)>=0)&&(s[h]=n[h]);return s}return Oe=e,Oe}var Me,lt;function ur(){if(lt)return Me;lt=1;var e=cr();function n(i,s){if(i==null)return{};var a=e(i,s),h,I;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(i);for(I=0;I<p.length;I++)h=p[I],!(s.indexOf(h)>=0)&&Object.prototype.propertyIsEnumerable.call(i,h)&&(a[h]=i[h])}return a}return Me=n,Me}var Ne,ct;function dr(){if(ct)return Ne;ct=1;function e(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}return Ne=e,Ne}var De,ut;function fr(){if(ut)return De;ut=1;function e(i,s){for(var a=0;a<s.length;a++){var h=s[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}function n(i,s,a){return s&&e(i.prototype,s),a&&e(i,a),i}return De=n,De}var de,dt;function hr(){if(dt)return de;dt=1;function e(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(a){return typeof a}:e=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e(i)}function n(i){return typeof Symbol=="function"&&e(Symbol.iterator)==="symbol"?de=n=function(a){return e(a)}:de=n=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":e(a)},n(i)}return de=n,de}var je,ft;function gr(){if(ft)return je;ft=1;function e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}return je=e,je}var He,ht;function pr(){if(ht)return He;ht=1;var e=hr(),n=gr();function i(s,a){return a&&(e(a)==="object"||typeof a=="function")?a:n(s)}return He=i,He}var be,gt;function vr(){if(gt)return be;gt=1;function e(n){return be=e=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},e(n)}return be=e,be}var _e,pt;function xr(){if(pt)return _e;pt=1;function e(n,i){return _e=e=Object.setPrototypeOf||function(a,h){return a.__proto__=h,a},e(n,i)}return _e=e,_e}var We,vt;function mr(){if(vt)return We;vt=1;var e=xr();function n(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(s&&s.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),s&&e(i,s)}return We=n,We}var Ve,xt;function Mt(){if(xt)return Ve;xt=1;var e=function(){};return Ve=e,Ve}var qe={},Xe,mt;function Ae(){if(mt)return Xe;mt=1;function e(n){return n&&n.__esModule?n:{default:n}}return Xe=e,Xe}var fe={},St;function Sr(){if(St)return fe;St=1;var e=Ae();Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var n=e(l);e(Mt());var i=function(h){h.index;var I=h.children;n.default.Children.count(I)},s=i;return fe.default=s,fe}var we={},he={},yt;function Nt(){if(yt)return he;yt=1,Object.defineProperty(he,"__esModule",{value:!0}),he.default=void 0;var e={RESISTANCE_COEF:.6,UNCERTAINTY_THRESHOLD:3};return he.default=e,he}var bt;function yr(){if(bt)return we;bt=1;var e=Ae();Object.defineProperty(we,"__esModule",{value:!0}),we.default=s;var n=e(l),i=e(Nt());function s(a){var h=a.children,I=a.startIndex,p=a.startX,k=a.pageX,T=a.viewLength,A=a.resistance,w=n.default.Children.count(h)-1,O=I+(p-k)/T,P;return A?O<0?O=Math.exp(O*i.default.RESISTANCE_COEF)-1:O>w&&(O=w+1-Math.exp((w-O)*i.default.RESISTANCE_COEF)):O<0?(O=0,P=(O-I)*T+k):O>w&&(O=w,P=(O-I)*T+k),{index:O,startX:P}}return we}var ge={},_t;function br(){if(_t)return ge;_t=1;var e=Ae();Object.defineProperty(ge,"__esModule",{value:!0}),ge.default=void 0;var n=e(l),i=function(h,I){var p=!1,k=function(j){return j?j.key:"empty"};if(h.children.length&&I.children.length){var T=n.default.Children.map(h.children,k),A=T[h.index];if(A!=null){var w=n.default.Children.map(I.children,k),O=w[I.index];A===O&&(p=!0)}}return p},s=i;return ge.default=s,ge}var pe={},wt;function _r(){if(wt)return pe;wt=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=void 0;function e(i,s){var a=i%s;return a<0?a+s:a}var n=e;return pe.default=n,pe}var It;function wr(){return It||(It=1,function(e){var n=Ae();Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"checkIndexBounds",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"computeIndex",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"constant",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"getDisplaySameSlide",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"mod",{enumerable:!0,get:function(){return I.default}});var i=n(Sr()),s=n(yr()),a=n(Nt()),h=n(br()),I=n(_r())}(qe)),qe}var Tt;function Ir(){if(Tt)return Z;Tt=1;var e=Ot,n=sr();Object.defineProperty(Z,"__esModule",{value:!0}),Z.getDomTreeShapes=d,Z.findNativeHandler=F,Z.default=Z.SwipeableViewsContext=void 0;var i=n(lr()),s=n(ur()),a=n(dr()),h=n(fr()),I=n(pr()),p=n(vr()),k=n(mr()),T=e(l);n(ir),n(Mt());var A=wr();function w(f,b,x,t){return f.addEventListener(b,x,t),{remove:function(){f.removeEventListener(b,x,t)}}}var O={container:{direction:"ltr",display:"flex",willChange:"transform"},slide:{width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"}},P={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(b){return"translate(".concat(-b,"%, 0)")},"x-reverse":function(b){return"translate(".concat(b,"%, 0)")},y:function(b){return"translate(0, ".concat(-b,"%)")},"y-reverse":function(b){return"translate(0, ".concat(b,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function j(f,b){var x=b.duration,t=b.easeFunction,r=b.delay;return"".concat(f," ").concat(x," ").concat(t," ").concat(r)}function q(f,b){var x=P.rotationMatrix[b];return{pageX:x.x[0]*f.pageX+x.x[1]*f.pageY,pageY:x.y[0]*f.pageX+x.y[1]*f.pageY}}function N(f){return f.touches=[{pageX:f.pageX,pageY:f.pageY}],f}function d(f,b){for(var x=[];f&&f!==b&&f!==document.body&&!f.hasAttribute("data-swipeable");){var t=window.getComputedStyle(f);t.getPropertyValue("position")==="absolute"||t.getPropertyValue("overflow-x")==="hidden"?x=[]:(f.clientWidth>0&&f.scrollWidth>f.clientWidth||f.clientHeight>0&&f.scrollHeight>f.clientHeight)&&x.push({element:f,scrollWidth:f.scrollWidth,scrollHeight:f.scrollHeight,clientWidth:f.clientWidth,clientHeight:f.clientHeight,scrollLeft:f.scrollLeft,scrollTop:f.scrollTop}),f=f.parentNode}return x}var M=null;function F(f){var b=f.domTreeShapes,x=f.pageX,t=f.startX,r=f.axis;return b.some(function(c){var u=x>=t;(r==="x"||r==="y")&&(u=!u);var y=Math.round(c[P.scrollPosition[r]]),W=y>0,Y=y+c[P.clientLength[r]]<c[P.scrollLength[r]];return u&&Y||!u&&W?(M=c.element,!0):!1})}var S=T.createContext();Z.SwipeableViewsContext=S;var g=function(f){(0,k.default)(b,f);function b(x){var t;return(0,a.default)(this,b),t=(0,I.default)(this,(0,p.default)(b).call(this,x)),t.rootNode=null,t.containerNode=null,t.ignoreNextScrollEvents=!1,t.viewLength=0,t.startX=0,t.lastX=0,t.vx=0,t.startY=0,t.isSwiping=void 0,t.started=!1,t.startIndex=0,t.transitionListener=null,t.touchMoveListener=null,t.activeSlide=null,t.indexCurrent=null,t.firstRenderTimeout=null,t.setRootNode=function(r){t.rootNode=r},t.setContainerNode=function(r){t.containerNode=r},t.setActiveSlide=function(r){t.activeSlide=r,t.updateHeight()},t.handleSwipeStart=function(r){var c=t.props.axis,u=q(r.touches[0],c);t.viewLength=t.rootNode.getBoundingClientRect()[P.length[c]],t.startX=u.pageX,t.lastX=u.pageX,t.vx=0,t.startY=u.pageY,t.isSwiping=void 0,t.started=!0;var y=window.getComputedStyle(t.containerNode),W=y.getPropertyValue("-webkit-transform")||y.getPropertyValue("transform");if(W&&W!=="none"){var Y=W.split("(")[1].split(")")[0].split(","),K=window.getComputedStyle(t.rootNode),X=q({pageX:parseInt(Y[4],10),pageY:parseInt(Y[5],10)},c);t.startIndex=-X.pageX/(t.viewLength-parseInt(K.paddingLeft,10)-parseInt(K.paddingRight,10))||0}},t.handleSwipeMove=function(r){if(!t.started){t.handleTouchStart(r);return}if(!(M!==null&&M!==t.rootNode)){var c=t.props,u=c.axis,y=c.children,W=c.ignoreNativeScroll,Y=c.onSwitching,K=c.resistance,X=q(r.touches[0],u);if(t.isSwiping===void 0){var V=Math.abs(X.pageX-t.startX),v=Math.abs(X.pageY-t.startY),m=V>v&&V>A.constant.UNCERTAINTY_THRESHOLD;if(!K&&(u==="y"||u==="y-reverse")&&(t.indexCurrent===0&&t.startX<X.pageX||t.indexCurrent===T.Children.count(t.props.children)-1&&t.startX>X.pageX)){t.isSwiping=!1;return}if(V>v&&r.preventDefault(),m===!0||v>A.constant.UNCERTAINTY_THRESHOLD){t.isSwiping=m,t.startX=X.pageX;return}}if(t.isSwiping===!0){r.preventDefault(),t.vx=t.vx*.5+(X.pageX-t.lastX)*.5,t.lastX=X.pageX;var H=(0,A.computeIndex)({children:y,resistance:K,pageX:X.pageX,startIndex:t.startIndex,startX:t.startX,viewLength:t.viewLength}),L=H.index,_=H.startX;if(M===null&&!W){var C=d(r.target,t.rootNode),$=F({domTreeShapes:C,startX:t.startX,pageX:X.pageX,axis:u});if($)return}_?t.startX=_:M===null&&(M=t.rootNode),t.setIndexCurrent(L);var te=function(){Y&&Y(L,"move")};(t.state.displaySameSlide||!t.state.isDragging)&&t.setState({displaySameSlide:!1,isDragging:!0},te),te()}}},t.handleSwipeEnd=function(){if(M=null,!!t.started&&(t.started=!1,t.isSwiping===!0)){var r=t.state.indexLatest,c=t.indexCurrent,u=r-c,y;Math.abs(t.vx)>t.props.threshold?t.vx>0?y=Math.floor(c):y=Math.ceil(c):Math.abs(u)>t.props.hysteresis?y=u>0?Math.floor(c):Math.ceil(c):y=r;var W=T.Children.count(t.props.children)-1;y<0?y=0:y>W&&(y=W),t.setIndexCurrent(y),t.setState({indexLatest:y,isDragging:!1},function(){t.props.onSwitching&&t.props.onSwitching(y,"end"),t.props.onChangeIndex&&y!==r&&t.props.onChangeIndex(y,r,{reason:"swipe"}),c===r&&t.handleTransitionEnd()})}},t.handleTouchStart=function(r){t.props.onTouchStart&&t.props.onTouchStart(r),t.handleSwipeStart(r)},t.handleTouchEnd=function(r){t.props.onTouchEnd&&t.props.onTouchEnd(r),t.handleSwipeEnd(r)},t.handleMouseDown=function(r){t.props.onMouseDown&&t.props.onMouseDown(r),r.persist(),t.handleSwipeStart(N(r))},t.handleMouseUp=function(r){t.props.onMouseUp&&t.props.onMouseUp(r),t.handleSwipeEnd(N(r))},t.handleMouseLeave=function(r){t.props.onMouseLeave&&t.props.onMouseLeave(r),t.started&&t.handleSwipeEnd(N(r))},t.handleMouseMove=function(r){t.props.onMouseMove&&t.props.onMouseMove(r),t.started&&t.handleSwipeMove(N(r))},t.handleScroll=function(r){if(t.props.onScroll&&t.props.onScroll(r),r.target===t.rootNode){if(t.ignoreNextScrollEvents){t.ignoreNextScrollEvents=!1;return}var c=t.state.indexLatest,u=Math.ceil(r.target.scrollLeft/r.target.clientWidth)+c;t.ignoreNextScrollEvents=!0,r.target.scrollLeft=0,t.props.onChangeIndex&&u!==c&&t.props.onChangeIndex(u,c,{reason:"focus"})}},t.updateHeight=function(){if(t.activeSlide!==null){var r=t.activeSlide.children[0];r!==void 0&&r.offsetHeight!==void 0&&t.state.heightLatest!==r.offsetHeight&&t.setState({heightLatest:r.offsetHeight})}},t.state={indexLatest:x.index,isDragging:!1,renderOnlyActive:!x.disableLazyLoading,heightLatest:0,displaySameSlide:!0},t.setIndexCurrent(x.index),t}return(0,h.default)(b,[{key:"componentDidMount",value:function(){var t=this;this.transitionListener=w(this.containerNode,"transitionend",function(r){r.target===t.containerNode&&t.handleTransitionEnd()}),this.touchMoveListener=w(this.rootNode,"touchmove",function(r){t.props.disabled||t.handleSwipeMove(r)},{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout(function(){t.setState({renderOnlyActive:!1})},0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var r=t.index;typeof r=="number"&&r!==this.props.index&&(this.setIndexCurrent(r),this.setState({displaySameSlide:(0,A.getDisplaySameSlide)(this.props,t),indexLatest:r}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"getSwipeableViewsContext",value:function(){var t=this;return{slideUpdateHeight:function(){t.updateHeight()}}}},{key:"setIndexCurrent",value:function(t){if(!this.props.animateTransitions&&this.indexCurrent!==t&&this.handleTransitionEnd(),this.indexCurrent=t,this.containerNode){var r=this.props.axis,c=P.transform[r](t*100);this.containerNode.style.WebkitTransform=c,this.containerNode.style.transform=c}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var t=this,r=this.props;r.action;var c=r.animateHeight,u=r.animateTransitions,y=r.axis,W=r.children,Y=r.containerStyle,K=r.disabled;r.disableLazyLoading;var X=r.enableMouseEvents;r.hysteresis,r.ignoreNativeScroll,r.index,r.onChangeIndex,r.onSwitching,r.onTransitionEnd,r.resistance;var V=r.slideStyle,v=r.slideClassName,m=r.springConfig,H=r.style;r.threshold;var L=(0,s.default)(r,["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"]),_=this.state,C=_.displaySameSlide,$=_.heightLatest,te=_.indexLatest,le=_.isDragging,ie=_.renderOnlyActive,oe=K?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},ae=!K&&X?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{},ce=(0,i.default)({},O.slide,V),ve,xe;if(le||!u||C)ve="all 0s ease 0s",xe="all 0s ease 0s";else if(ve=j("transform",m),xe=j("-webkit-transform",m),$!==0){var ze=", ".concat(j("height",m));ve+=ze,xe+=ze}var me={height:null,WebkitFlexDirection:P.flexDirection[y],flexDirection:P.flexDirection[y],WebkitTransition:xe,transition:ve};if(!ie){var $e=P.transform[y](this.indexCurrent*100);me.WebkitTransform=$e,me.transform=$e}return c&&(me.height=$),T.createElement(S.Provider,{value:this.getSwipeableViewsContext()},T.createElement("div",(0,i.default)({ref:this.setRootNode,style:(0,i.default)({},P.root[y],H)},L,oe,ae,{onScroll:this.handleScroll}),T.createElement("div",{ref:this.setContainerNode,style:(0,i.default)({},me,O.container,Y),className:"react-swipeable-view-container"},T.Children.map(W,function(Wt,Ge){if(ie&&Ge!==te)return null;var Qe,Je=!0;return Ge===te&&(Je=!1,c&&(Qe=t.setActiveSlide,ce.overflowY="hidden")),T.createElement("div",{ref:Qe,style:ce,className:v,"aria-hidden":Je,"data-swipeable":"true"},Wt)}))))}}]),b}(T.Component);g.displayName="ReactSwipableView",g.propTypes={},g.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1};var U=g;return Z.default=U,Z}(function(e){var n=Ot;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"SwipeableViewsContext",{enumerable:!0,get:function(){return i.SwipeableViewsContext}});var i=n(Ir())})(Bt);const Tr=Vt(Bt),Cr=B(D)({width:"100%",margin:"0px"}),Er=B(D)({margin:"0px",padding:"0px",position:"relative"}),kr=B(D)({width:"100%",height:"100%",margin:"0px",padding:"0px",position:"relative"}),Dt=B(Tr)(({scrollcolor:e})=>({width:"100%",height:"100%",marginBottom:"8px",padding:"14px 0px 20px 0px","::-webkit-scrollbar-thumb":{background:"red"},"::-webkit-scrollbar-thumb: hover":{backgroundColor:e,opacity:"1"},"& .react-swipeable-view-container":{height:"100%"}})),Ce=B(D)({width:"100%",padding:"0px 14px","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}}),jt=B(D)({height:"10px",width:"100%",position:"absolute",bottom:"0",display:"flex",justifyContent:"center","& :last-child":{marginRight:"0px"}}),Ee=B(D)(({active:e,linecolor:n})=>({borderTop:`1px solid ${n}`,width:e=="true"?"20px":e=="false"?"10px":"0px",color:"black",marginRight:"5px",marginTop:"5px"})),Ar=B(D)(({scrollbarcolor:e})=>({width:"100%",height:"100%","::-webkit-scrollbar-thumb":{backgroundColor:"red"},"::-webkit-scrollbar-track":{backgroundColor:"transparent"},scrollbarWidth:"auto",scrollbarColor:`${e} transparent`})),Ct=B(D)({width:"100%",padding:"0px",margin:"0px"}),Rr=B(D)({width:"100%",margin:"auto",padding:"20px 0px","& .MuiBox-root":{textWrap:"wrap"}}),Lr=B(D)({width:"100%",height:"100%",position:"relative",overflowX:"hidden",padding:"0px 15px"}),Pr=B(D)({width:"100%",overflow:"hidden",position:"relative",display:"flex",flexDirection:"column"}),Br=B(D)({width:"100%",padding:"20px 0px",position:"relative",display:"flex",zIndex:"2","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}}),Or=B(D)({width:"100%",margin:"0px",position:"relative",display:"flex",flexDirection:"column",zIndex:"2","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}});B(D)({width:"40px",height:"100%",backgroundColor:"#FFAA5D",justifyContent:"center",alignItems:"center"});B(D)({width:"20px",height:"50%",position:"relative"});function Ke(e){var w,O;const[n,i]=l.useState(0),{theme:s,textSize:a,referenceLanguage:h,showQuranReferences:I,displayType:p}=l.useContext(re),{topTextColor:k,backgroundColor:T}=ne(s),A=e.verse.verseReference.ref;return p==z.VERSE_BY_VERSE?o.jsxs(Er,{children:[o.jsxs(Dt,{style:{backgroundColor:T},scrollcolor:k,enableMouseEvents:!0,disabled:!I,onSwitching:P=>i(P),children:[o.jsx(Ce,{children:o.jsx(Ct,{"data-id":e.verse.verseId,"data-index":e.index,ref:e.refer,children:o.jsx(ee,{fontFamily:"Inter",fontSize:a-4,lineHeight:a+6,fontWeight:"700",color:k,dataIndex:e.index.toString(),language:h,direction:h==Ie?"rtl":"ltr",children:(w=e.verse.verseText)==null?void 0:w[h]})})}),o.jsx(Ce,{children:A.map((P,j)=>o.jsx(ee,{fontFamily:"Inter",fontWeight:"700",fontSize:a-4,lineHeight:a+6,color:k,children:P},j))})]}),A.length>0&&I&&o.jsxs(jt,{children:[o.jsx(Ee,{active:n==0?"true":"false",linecolor:k}),o.jsx(Ee,{active:n==1?"true":"false",linecolor:k})]})]}):o.jsx(Ct,{"data-id":e.verse.verseId,"data-index":e.index,ref:e.refer,style:{backgroundColor:T},children:o.jsx(ee,{fontFamily:"Inter",fontSize:a-4,lineHeight:a+6,fontWeight:"700",color:k,dataIndex:e.index.toString(),language:h,direction:h==Ie?"rtl":"ltr",onTouchStart:()=>e.onTouchStart&&e.onTouchStart(e.verse.verseReference.ref),onMouseDown:()=>e.onMouseDown&&e.onMouseDown(e.verse.verseReference.ref),children:(O=e.verse.verseText)==null?void 0:O[h]})})}function Mr(e){var M,F;const[n,i]=l.useState([]),[s,a]=l.useState(0),{scrollTopVerseIndex:h,setScrollTopVerseIndex:I,setHiddenTopVersePercentage:p,activeScroll:k,setActiveScroll:T}=l.useContext(ke),A=l.useRef([]);A.current=(M=e.verses)==null?void 0:M.map((S,g)=>A.current[g]??l.createRef());const{theme:w,textSize:O,showQuranReferences:P,displayType:j}=l.useContext(re),{backgroundColor:q,topTextColor:N}=ne(w);l.useEffect(()=>{var S;if(j==z.SPLIT_PANEL&&h>=0&&(k==Ue||k==Te)){const g=A.current[Number(h)];(S=g==null?void 0:g.current)==null||S.scrollIntoView()}},[h,j]);const d=S=>{if(j==z.SPLIT_PANEL){T(kt);const g=S.currentTarget.getBoundingClientRect().top,U=S.currentTarget.clientHeight;let f=-1,b=1/0;if(A.current.forEach((x,t)=>{if(x.current){const r=x.current.getBoundingClientRect().top,c=x.current.getBoundingClientRect().bottom,u=r-g;c>g&&r<g+U&&Math.abs(u)<b&&(b=Math.abs(u),f=t)}}),f!==-1){I(f);const x=A.current[f];if(x.current){const t=x.current.getBoundingClientRect().top,r=x.current.clientHeight,c=Math.max(0,Math.min(100,(g-t)/r*100));p(c)}}}};return o.jsx(Cr,{style:{height:e.height},children:j===z.SPLIT_PANEL?o.jsxs(kr,{children:[o.jsxs(Dt,{style:{backgroundColor:q},scrollcolor:N,enableMouseEvents:!0,disabled:!P,onScrollCapture:k!=Ue?S=>d(S):()=>{},onSwitching:S=>a(S),children:[o.jsx(Ce,{children:(F=e.verses)==null?void 0:F.map((S,g)=>o.jsx(Ke,{refer:A.current[g],verse:S,index:g,onMouseDown:i,onTouchStart:i},g))}),o.jsx(Ce,{children:n&&n.map((S,g)=>o.jsx(ee,{fontFamily:"Inter",fontWeight:"700",fontSize:O-2,color:N,children:S},g))})]}),P&&o.jsxs(jt,{style:{background:q,bottom:"5px"},children:[o.jsx(Ee,{active:s===0?"true":"false",linecolor:N}),o.jsx(Ee,{active:s===1?"true":"false",linecolor:N})]})]}):o.jsx(Ar,{style:{backgroundColor:q},scrollbarcolor:N,children:e.verses.map((S,g)=>o.jsx(Ke,{refer:A.current[g],verse:S,index:g},g))})})}const Nr=B(D)({position:"fixed",zIndex:"3",bottom:"0px",width:"100%",height:"150px",overflow:"hidden"}),Dr=B(D)({position:"relative",display:"flex",justifyContent:"center","& .MuiBox-root":{alignContent:"center"}}),jr=B("img")({width:"100%",position:"absolute",top:"20px"}),Hr=B(D)({width:"100%",maxWidth:"700px",padding:"0px 20px",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",zIndex:"1",paddingTop:"20px",alignContent:"center","@media (min-width: 600px)":{paddingTop:"25px"}}),Wr=B(D)({position:"relative",bottom:"-75px",height:"100px",alignItems:"center",justifyContent:"space-between"}),Vr=B("img")({width:"100%",position:"absolute"}),qr=B(D)(({readingcontrol:e})=>({height:"100px",width:"100%",maxWidth:"700px",margin:"auto",display:"flex",flexDirection:e==qt.LEFT_HANDED?"row":"row-reverse",justifyContent:"space-between",alignItems:"center",padding:"0px 15px","@media (min-width: 1075px)":{width:"80%",margin:"auto"}})),Xr=B(D)({width:"90px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px","@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}}),Ur=B(D)({width:"90px",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"20px","@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}}),se=B("img")({width:"60px",height:"40px",borderRadius:"50%",cursor:"pointer",zIndex:"1"}),Fr=B(D)(({underlinecolor:e})=>({width:"90px",textDecoration:"underline",textDecorationColor:e,textUnderlineOffset:"3px",zIndex:"1",cursor:"pointer",marginBottom:"20px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}})),Yr=B(D)({width:"100%",height:"60px",overflow:"hidden",padding:"0 10px"}),Kr=B(Gt)(({barcolor:e})=>({color:e,opacity:"1",height:"5px","& .MuiSlider-thumb":{width:"13.25px",height:"14px",color:e,transition:"0.3s cubic-bezier(.47,1.64,.41,.8)","&::before":{boxShadow:"0 2px 12px 0 rgba(0,0,0,0.4)"},"&:hover, &.Mui-focusVisible":{boxShadow:"0px 0px 0px 8px rgb(0 0 0 / 16%)"},"&.Mui-active":{width:20,height:20}}})),zr=B(D)({display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"-20px"});function $r(e){const{duration:n,currentTime:i,onTimeChange:s}=e,[a,h]=l.useState(i),{theme:I}=l.useContext(re),{buttonTextColor:p}=ne(I);l.useEffect(()=>{h(i)},[i]);const k=(T,A)=>{h(A),s(A)};return o.jsxs(Yr,{children:[o.jsx(Kr,{"aria-label":"time-indicator",value:a,min:0,max:Math.floor(n),step:1,barcolor:p,onChange:k}),o.jsxs(zr,{children:[o.jsx(ee,{color:p,children:Et(a)}),o.jsx(ee,{color:p,children:"-"+Et(Math.floor(n-a))})]})]})}function Et(e){const n=Math.floor(e/60),i=Math.floor(e%60);return`${n}:${i<10?`0${i}`:i}`}function Gr(e){const[n,i]=l.useState(!1),[s,a]=l.useState(0),[h,I]=l.useState(0),[p,k]=l.useState(0),T=l.useRef(new Audio),{setScrollTopVerseIndex:A,setActiveScroll:w}=l.useContext(ke),{autoScrollText:O,volume:P,audioLanguage:j,readingControls:q,pageControl:N,theme:d}=l.useContext(re),{logoTextColor:M}=ne(d),{t:F}=At();l.useEffect(()=>{const u=T.current;e.src&&(u.src=Xt+e.src[j||Re.TRANSLATION]);const y=()=>{I(u.duration)},W=()=>{a(Math.floor(u.currentTime))};return u.addEventListener("loadedmetadata",y),u.addEventListener("timeupdate",W),()=>{u.removeEventListener("loadedmetadata",y),u.removeEventListener("timeupdate",W)}},[e.src]),l.useEffect(()=>{if(T.current.ended)t();else if(O){const u=e.verses.findIndex((y,W)=>{var X,V,v;const Y=(X=y.verseAudioStart)==null?void 0:X[j||Re.TRANSLATION],K=(v=(V=e.verses[W+1])==null?void 0:V.verseAudioStart)==null?void 0:v[j||Re.TRANSLATION];return s>=Y&&s<K});u!==-1&&(u!==p||u==0)&&(A(u),k(u),w(Te))}},[s,e.verses,j,O,n]),l.useEffect(()=>{T.current.volume=P/100},[P]);const S=()=>{const u=T.current;w(Te),u.readyState>=2?(i(!0),u.play().catch(y=>G.custom(W=>o.jsx(Q,{text:F("Audio Play Error"+y),offset:125,visible:W.visible})))):G.custom(y=>o.jsx(Q,{text:F("Audio Not Ready"),offset:125,visible:y.visible}))},g=()=>{i(!1),T.current.pause(),w(Fe)},U=()=>{g(),e.moveToSoundSettingPage()},f=()=>{g(),e.setAudioSeekBarStatus(!1)},b=()=>{g(),e.moveToPrevPage()},x=u=>{T.current.currentTime=u,a(u)},t=()=>{a(0),i(!1),A(0),w(Fe)},r=()=>o.jsxs(Dr,{children:[o.jsx(jr,{src:d==R.DEFAULT||d==R.DARK?E.bar_reading_audio_subtract:d==R.BLACK_AND_WHITE?E.bar_reading_audio_subtract_BAW:d==R.SAPPHIRE?E.bar_reading_audio_subtract_sapphire:E.bar_reading_audio_subtract_easyocean}),o.jsxs(Hr,{children:[o.jsx(se,{src:d==R.DEFAULT||d==R.DARK?E.btn_sound_setting:d==R.BLACK_AND_WHITE?E.btn_sound_setting_BAW:d==R.SAPPHIRE?E.btn_sound_setting_sapphire:E.btn_sound_setting_easyocean,onClick:U}),o.jsx($r,{duration:h,currentTime:s,onTimeChange:x}),o.jsx(se,{src:d==R.DEFAULT||d==R.DARK?E.btn_close:d==R.BLACK_AND_WHITE?E.btn_close_BAW:d==R.SAPPHIRE?E.btn_close_sapphire:E.btn_close_easyocean,onClick:f})]})]}),c=()=>o.jsxs(Wr,{children:[o.jsx(Vr,{src:d==R.DEFAULT||d==R.DARK?E.bar_reading_subtract:d==R.BLACK_AND_WHITE?E.bar_reading_subtract_BAW:d==R.SAPPHIRE?E.bar_reading_subtract_sapphire:E.bar_reading_subtract_easyocean}),o.jsxs(qr,{readingcontrol:q,children:[o.jsxs(Xr,{children:[o.jsx(se,{src:d==R.DEFAULT||d==R.DARK?E.btn_arrow_left:d==R.BLACK_AND_WHITE?E.btn_arrow_left_BAW:d==R.SAPPHIRE?E.btn_arrow_left_sapphire:E.btn_arrow_left_easyocean,onClick:()=>e.handleNavigateBtn(N==Ze.LEFT_TO_RIGHT?et:Ye)}),o.jsx(se,{src:d==R.DEFAULT||d==R.DARK?E.btn_arrow_right:d==R.BLACK_AND_WHITE?E.btn_arrow_right_BAW:d==R.SAPPHIRE?E.btn_arrow_right_sapphire:E.btn_arrow_right_easyocean,onClick:()=>e.handleNavigateBtn(N==Ze.LEFT_TO_RIGHT?Ye:et)})]}),o.jsx(Ur,{children:e.showAudioSeekBar?n?o.jsx(se,{src:d==R.DEFAULT||d==R.DARK?E.btn_pause:d==R.BLACK_AND_WHITE?E.btn_pause_BAW:d==R.SAPPHIRE?E.btn_pause_sapphire:E.btn_pause_easyocean,onClick:g}):o.jsx(se,{src:d==R.DEFAULT||d==R.DARK?E.btn_play:d==R.BLACK_AND_WHITE?E.btn_play_BAW:d==R.SAPPHIRE?E.btn_play_sapphire:E.btn_play_easyocean,onClick:S}):o.jsx(se,{src:d==R.DEFAULT||d==R.DARK?E.btn_sound:d==R.BLACK_AND_WHITE?E.btn_sound_BAW:d==R.SAPPHIRE?E.btn_sound_sapphire:E.btn_sound_easyocean,onClick:()=>e.setAudioSeekBarStatus(!0)})}),o.jsx(Fr,{underlinecolor:M,onClick:b,children:o.jsx(ee,{color:M,textAlign:"right",children:e.bookTitle+": "+e.subBookTitle})})]})]});return o.jsxs(Nr,{children:[e.showAudioSeekBar&&r(),c()]})}function Ht(e){var t,r;const[n,i]=l.useState(e.isExistingInBookmark?100:0),[s,a]=l.useState(null),[h,I]=l.useState(!1),[p,k]=l.useState(0),[T,A]=l.useState(0),{textSize:w,theme:O,readingLanguage:P}=l.useContext(re),{mainBGColor:j}=ne(O),q=l.useRef(null),N=l.useRef(n),d=e.refer,M=l.useRef(),F=window.matchMedia("(orientation: portrait)").matches;l.useEffect(()=>{N.current=n},[n]),l.useEffect(()=>{if(e.verse.verseHeader&&q.current&&d.current&&(q.current.style.height=`${d.current.getBoundingClientRect().height-4}px`,q.current.style.bottom="2px",q.current.style.alignSelf="self-end"),q.current&&d.current&&d.current.offsetHeight>0&&d.current.offsetHeight<=24){const c=q.current.children[0];c.style.width="20px",c.style.height="20px",c.children[1].style.width="10px",c.children[1].style.height="10px"}},[e.verse.verseHeader,e.translatePanelHeight,F]);const S=l.useCallback(c=>{if(c>0&&c<tt){const u=c/tt*100,y=e.isExistingInBookmark?100-u:u;i(y),N.current=y}else if(c>0){const u=e.isExistingInBookmark?0:100;i(u),N.current=u}else{const u=e.isExistingInBookmark?100:0;i(u),N.current=u}},[e.isExistingInBookmark]),g=l.useCallback(()=>{if(d.current){const c=Math.max(0,Math.min(T,Ft));d.current.style.transform=`translateX(${c}px)`,S(c-Ut)}h&&(M.current=requestAnimationFrame(g))},[h,T,S]);l.useEffect(()=>(h?M.current=requestAnimationFrame(g):cancelAnimationFrame(M.current),()=>cancelAnimationFrame(M.current)),[h,g]);const U=c=>{var y;I(!0),k(c);const u=(y=d.current)==null?void 0:y.getAttribute("data-id");u&&a(u)},f=c=>{if(!h)return;const u=Math.max(0,c-p);e.isLoggedIn&&u>rt&&A(u-rt)},b=()=>{I(!1),d.current&&(!e.isExistingInBookmark&&N.current==100||e.isExistingInBookmark&&N.current==0?s&&e.handleBookmark(s):e.isExistingInBookmark?(i(100),N.current=100):(i(0),N.current=0),d.current.style.transition="transform 0.3s ease-out",d.current.style.transform="translateX(0)",setTimeout(()=>{d.current&&(d.current.style.transition="")},300)),A(0)};l.useEffect(()=>{const c=d.current;if(c){const u=V=>{V.preventDefault(),U(V.clientX)},y=V=>{V.preventDefault(),f(V.clientX)},W=V=>{V.preventDefault(),b()},Y=V=>{U(V.touches[0].clientX)},K=V=>{f(V.touches[0].clientX)},X=V=>{b()};return c.addEventListener("mousedown",u),document.addEventListener("mousemove",y),document.addEventListener("mouseup",W),c.addEventListener("touchstart",Y),c.addEventListener("touchmove",K),c.addEventListener("touchend",X),()=>{c.removeEventListener("mousedown",u),document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",W),c.removeEventListener("touchstart",Y),c.removeEventListener("touchmove",K),c.removeEventListener("touchend",X)}}},[d,S,e.handleBookmark,p]);const x=c=>{for(var u in c)if(c[u]!==null&&c[u]!=="")return!0;return!1};return o.jsxs(Pr,{children:[e.verse.verseHeader&&x(e.verse.verseHeader)&&o.jsx(Br,{"data-id":e.verse.verseId,"data-index":e.index,style:{backgroundColor:j},children:o.jsx(ee,{fontFamily:"Inter",fontWeight:"700",backgroundColor:j,fontSize:w,lineHeight:w+15,direction:P==Ie?"rtl":"ltr",children:(t=e.verse.verseHeader)==null?void 0:t[P]})}),o.jsx(or,{progress:n,refer:q,backgroundColor:j}),o.jsx(Or,{"data-id":e.verse.verseId,"data-index":e.index,ref:e.refer,children:o.jsx(ee,{fontFamily:"Inter",fontSize:w,backgroundColor:j,dataIndex:e.index.toString(),lineHeight:w+20,direction:P==Ie?"rtl":"ltr",children:(r=e.verse.verseText)==null?void 0:r[P]})})]})}function Qr(e){var M,F;const[n,i]=l.useState([]),[s,a]=l.useState([]),{scrollTopVerseIndex:h,setScrollTopVerseIndex:I,setHiddenTopVersePercentage:p,activeScroll:k,setActiveScroll:T}=l.useContext(ke),A=l.useRef(null),w=l.useRef([]);w.current=(M=e.verses)==null?void 0:M.map((S,g)=>w.current[g]??l.createRef());const{theme:O,displayType:P}=l.useContext(re),{mainBGColor:j,textColor:q}=ne(O),N=l.useCallback(()=>{let S=[];return w.current.forEach(g=>{g.current&&g.current.children[0]&&S.push(g.current.children[0].offsetHeight)}),S},[w]);l.useEffect(()=>{const S=N();i(S);const g=S.reduce((U,f,b)=>(U[b]=(U[b-1]||0)+f,U),[]);a(g)},[e.verses,N]);const d=l.useCallback(()=>{if(!A.current)return;const S=A.current.scrollTop;T(Ue);let g=0,U=s.length-1;for(;g<=U;){const u=Math.floor((g+U)/2);s[u]>S?U=u-1:g=u+1}const f=g-1;I(f);const b=f>0?s[f-1]:0,x=n[f],r=(S-b)/x*100,c=Math.min(Math.max(r,0),100);p(c)},[s,n,I]);return l.useEffect(()=>{const S=A.current;if(S)return S.addEventListener("scroll",d),S.addEventListener("scrollend",()=>T(Fe)),()=>{S.removeEventListener("scroll",d)}}),l.useEffect(()=>{var S;if((P===z.SPLIT_PANEL||P===z.ONLY_TRNSLATION)&&h>=0&&(k==kt||k==Te)){const g=w.current[Number(h)];(S=g==null?void 0:g.current)==null||S.scrollIntoView()}},[h]),o.jsx(Rr,{style:{backgroundColor:j,color:q,height:e.height},children:o.jsx(Lr,{ref:A,children:(F=e.verses)==null?void 0:F.map((S,g)=>o.jsx(Ht,{refer:w.current[g],verse:S,index:g,isExistingInBookmark:e.bookmarks.some(U=>U.verseId===S.verseId),isLoggedIn:e.isLoggedIn,translatePanelHeight:e.height,handleBookmark:e.handleBookmark},g))})})}const Jr=B(D)({margin:"0px",height:"100dvh"}),Zr=B(D)(({showaudioseekbar:e})=>({width:"100%",padding:"20px",height:e=="true"?"calc(100dvh - 150px)":"calc(100dvh - 100px)"})),en=B(D)({width:"45px",height:"8px",margin:"auto",marginTop:"-4px",position:"relative",zIndex:"2",cursor:"grab","&:active":{cursor:"grabbing"}}),tn=B(D)({width:"100%",height:"100%",overflowX:"hidden",overflowY:"auto",margin:"0px",paddingBottom:"0px"}),rn=B(D)({width:"100%",padding:"15px"});function nn(e){const n=window.matchMedia("(orientation: portrait)").matches,[i,s]=l.useState([]),[a,h]=l.useState(null),[I,p]=l.useState(!1),[k,T]=l.useState(n?200:120),{theme:A,displayType:w}=l.useContext(re),{mainBGColor:O,topTextColor:P}=ne(A),{scrollTopVerseIndex:j,setScrollTopVerseIndex:q}=l.useContext(ke),N=l.useRef([]),d=l.useRef([]);N.current=i==null?void 0:i.map((v,m)=>N.current[m]??l.createRef()),d.current=i==null?void 0:i.map((v,m)=>d.current[m]??l.createRef());const M=new URLSearchParams(window.location.search),F=100,S=100;window.matchMedia("(orientation: portrait)").addEventListener("change",v=>{const m=v.matches;T(m?200:120)});const[g,U]=l.useState(typeof window<"u"?window.innerHeight:1e3),f=e.showAudioSeekBar?g-150-k:g-100-k,b=Jt(),{t:x}=At(),t=l.useCallback(v=>{nt.fetchVerses(v).then(m=>{s(m.verses),m&&m.length>0&&h(m.chapterAudio),e.dispatch({type:ue.ADD_CHAPTERINFO,payload:{chapterInfo:m}}),p(!1)}).catch(m=>{p(!1),G.custom(H=>o.jsx(Q,{text:x(m),offset:70,visible:H.visible}))})},[]),r=l.useCallback(v=>{if(e.chapterInfos&&e.chapterInfos.length>0){const m=e.chapterInfos.filter(H=>H.chapterId===v);m.length>0?(s(m[0].verses),h(m[0].chapterAudio)):t(v),p(!1)}else t(v),p(!1)},[e.chapterInfos]);l.useEffect(()=>{var L;p(!0);let v="";localStorage.getItem(J)?v=localStorage.getItem(J)||"":(v=M.get("chapterId")||"",localStorage.setItem(J,v));const m=M.get("subBookId"),H=M.get("verseId");if(H){const _=i.filter(C=>C.verseId==H);_&&_.length>0&&(q(_[0].verseNumber-1),w==z.VERSE_BY_VERSE&&((L=d.current[_[0].verseNumber-1].current)==null||L.scrollIntoView()))}if(v)if(e.subBookInfos&&e.subBookInfos.length>0){const _=e.subBookInfos.filter(C=>C.subBookId===m);if(_.length>0){const C=_[0].chapterInfos.filter($=>$.chapterId===v);C.length>0&&(s(C[0].verses),h(C[0].chapterAudio),p(!1)),p(!1)}else r(v),p(!1)}else r(v),p(!1);else p(!1)},[i]),l.useEffect(()=>{const v=()=>U(window.innerHeight);return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]),l.useEffect(()=>{p(!0);const v=localStorage.getItem(J)||M.get("chapterId");let m=!1;if(e.userHistory&&e.userHistory.length>0&&e.userHistory.forEach(H=>{if(H.readChapterIds.includes(v)){m=!0,p(!1);return}}),!m){const H={chapterId:v};nt.saveHistory(H).then(L=>{e.dispatch({type:ue.SET_USER_HISTORY,payload:{userHistories:L}}),p(!1)}).catch(L=>{L.status==401&&L.response.data.message==Le&&(G.custom(_=>o.jsx(Q,{text:x(L.response.data.message),visible:_.visible})),Pe.logout(),b("/login")),p(!1)})}},[]),l.useEffect(()=>{w==z.ONLY_TRNSLATION&&T(0)},[w]),l.useEffect(()=>{var v,m;w==z.VERSE_BY_VERSE&&j>=0&&((m=(v=d.current[j])==null?void 0:v.current)==null||m.scrollIntoView())},[j,w,d,i]);const c=l.useCallback(v=>{var L;p(!0);const m=(L=e.bookmark)==null?void 0:L.find(_=>_.verseId===v),H={verseId:v};try{if(!m)it.saveBookmark(H).then(_=>{e.dispatch({type:ue.ADD_BOOKMARK,payload:{bookmark:_.bookmark}}),p(!1),G.custom(C=>o.jsx(Q,{text:x("Bookmark Saved"),type:Se.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:C.visible}))}).catch(_=>{p(!1),_.status==401&&_.response.data.message==Le&&(G.custom(C=>o.jsx(Q,{text:x(_.response.data.message),offset:e.showAudioSeekBar?125:70,visible:C.visible})),Pe.logout(),b("/login"))});else{const _=e.bookmark.filter(C=>C.verseId==v);_&&_.length>0&&it.deleteBookmark(_[0]._id).then(()=>{e.dispatch({type:ue.REMOVE_BOOKMARK,payload:{bookmarkId:m._id}}),p(!1),G.custom(C=>o.jsx(Q,{text:x("Bookmark Deleted"),type:Se.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:C.visible}))}).catch(C=>{p(!1),C.status==401&&C.response.data.message==Le&&(G.custom($=>o.jsx(Q,{text:x(C.response.data.message),type:Se.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:$.visible})),Pe.logout(),b("/login"))})}}catch(_){p(!1),G.custom(C=>o.jsx(Q,{text:x(_),type:Se.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:C.visible}))}},[e,x]),u=l.useCallback((v,m,H)=>{let L=m+(H-v),_=g-150-L;L<F?(L=F,_=g-150-F):_<S&&(L=g-150-S),T(L)},[g]),y=v=>{const m=v.clientY,H=k,L=C=>u(m,H,C.clientY),_=()=>{document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",_)};document.addEventListener("mousemove",L),document.addEventListener("mouseup",_)},W=v=>{const m=v.touches[0].clientY,H=k,L=C=>u(m,H,C.touches[0].clientY),_=()=>{document.removeEventListener("touchmove",L),document.removeEventListener("touchend",_)};document.addEventListener("touchmove",L),document.addEventListener("touchend",_)},Y=v=>{e.dispatch({type:ue.SET_AUDIO_SEEK_BAR_STATUS,payload:{showAudioSeekBar:v}})},K=()=>{b("/sound-settings")},X=()=>{localStorage.removeItem(J),b(-1)},V=l.useCallback(v=>{var _;const m=M.get("bookId"),H=localStorage.getItem(J);if(p(!0),!H&&M.get("chapterId")){const C=M.get("chapterId");C&&localStorage.setItem(J,C)}const L=e.bookInfos.filter(C=>C.bookId==m);L&&(L==null?void 0:L.length)>0&&((_=L[0])==null||_.subBooks.forEach(C=>{var te;const $=(te=C.chapterInfos)==null?void 0:te.filter(le=>le.chapterId==H);if($&&$.length>0){const le=C.chapterInfos.length,ie=$[0].chapterNumber;if(v==Ye)if(ie==le-1)G.custom(oe=>o.jsx(Q,{text:x("Last Chapter"),offset:125,visible:oe.visible})),p(!1);else{const ae=C.chapterInfos.filter(ce=>ce.chapterNumber==ie+1)[0].chapterId;localStorage.setItem(J,ae),r(ae)}else if(ie==1)G.custom(oe=>o.jsx(Q,{text:x("First Chapter"),offset:e.showAudioSeekBar?125:70,visible:oe.visible})),p(!1);else{const ae=C.chapterInfos.filter(ce=>ce.chapterNumber==ie-1)[0].chapterId;localStorage.setItem(J,ae),r(ae)}}}))},[]);return o.jsxs(Jr,{style:{backgroundColor:O},children:[o.jsxs(Zr,{showaudioseekbar:e.showAudioSeekBar?"true":"false",children:[w==z.SPLIT_PANEL&&o.jsxs(o.Fragment,{children:[o.jsx(Mr,{verses:i,height:k}),o.jsx(en,{style:{backgroundColor:P},onMouseDown:y,onTouchStart:W})]}),(w==z.ONLY_TRNSLATION||w==z.SPLIT_PANEL)&&o.jsx(Qr,{verses:i,height:f,originPanelHeight:k,bookmarks:e.bookmark,isLoggedIn:!!e.currentUser,handleBookmark:c}),w==z.VERSE_BY_VERSE&&o.jsx(tn,{children:i.map((v,m)=>{var H;return o.jsxs(rn,{ref:d.current[m],children:[o.jsx(Ke,{verse:v,refer:N.current[m],index:m}),o.jsx(Ht,{refer:N.current[m],verse:v,index:m,isLoggedIn:!!e.currentUser,handleBookmark:c,isExistingInBookmark:((H=e.bookmark.filter(L=>L.verseId==v.verseId))==null?void 0:H.length)>0})]},m)})})]}),o.jsx(Gr,{src:a,bookTitle:M.get("book")||"",subBookTitle:M.get("subBook")||"",showAudioSeekBar:e.showAudioSeekBar,verses:i,setAudioSeekBarStatus:Y,moveToSoundSettingPage:K,moveToPrevPage:X,handleNavigateBtn:V}),I&&o.jsx(Zt,{})]})}const on=e=>({bookmark:e.books.bookmark,bookInfos:e.books.bookInfos,subBookInfos:e.books.subBookInfos,chapterInfos:e.books.chapterInfos,userHistory:e.books.userHistory,currentUser:e.user.currentUser,showAudioSeekBar:e.pageStatus.showAudioSeekBar}),pn=Qt(on)(nn);export{pn as default};
