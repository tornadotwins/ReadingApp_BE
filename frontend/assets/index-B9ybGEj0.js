import{b as m,j as t,Q as r,ao as F,ap as L}from"./index-CDMXNg3a.js";import{s as a,B as d,u as y,S as k,g as A,$ as _,d as M,_ as C}from"./App-CCHOtcAG.js";import{V as D,B as N,h as P,a as O}from"./VerifyRecaptchaProvider-B7UkGIA_.js";import{u as Y}from"./useOrientation-BjwuokjX.js";import{a as v}from"./auth.service-Bknov-0C.js";import{C as S,L as z}from"./index-C8rIq1WU.js";import{d as U}from"./styled-DMe7MggM.js";import{T as I,I as h}from"./images-CjevRs9d.js";import{F as G,c as H,a as B,I as b}from"./index.esm-DUCpKYG5.js";import{B as V}from"./Button-DsVywtYw.js";import"./index-B0rNSSQo.js";import"./axios-BimPEqV4.js";const W=a(d)({display:"flex"}),$=a(W)({justifyContent:"center",alignItems:"center"}),q=a($)({width:"100vw",height:"100%"}),K=a(d)({backgroundColor:"#1B7695",width:"100%",height:"50dvh",display:"flex",flexDirection:"column","@media screen and (orientation: landscape)":{height:"100dvh",width:"50vw",justifyContent:"center"}}),Q=a(d)({marginTop:"69px","@media screen and (orientation: landscape)":{margin:"0px"}}),J=a(d)({width:"100%",minHeight:"50dvh",height:"calc(100% - 50dvh)",flex:"1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"100dvh",width:"50%"}}),X=a(d)({fontSize:"16px",fontFamily:"Baloo Da 2",textAlign:"center",fontWeight:"400",width:"57.78%",alignSelf:"center",color:"#000",margin:"0",marginTop:"30px","@media (max-height: 639px)":{fontSize:"14px",lineHeight:"20px"}}),Z=a(d)({width:"100%",display:"flex",flexDirection:"column",alignItems:"center","& button":{position:"relative",bottom:"0"}});a(d)({marginTop:"16px"});const T=a(d)(({haserror:n})=>({height:"39px",width:"77.09%",marginTop:"16px",marginBottom:n=="true"?"15px":"0px","& .MuiInputBase-input":{padding:"7px",borderRadius:"0px"},"& .MuiInputBase-input: -webkit-autofill, .MuiInputBase-input: -webkit-autofill:hover, .MuiInputBase-input: -webkit-autofill:focus, .MuiInputBase-input: -webkit-autofill:active":{WebkitBoxShadow:"0 0 0 100px #FEFEFE inset",WebkitTextFillColor:"#000"},"@media screen and (orientation: landscape)":{width:"200px !important","@media (min-width: 550px) and (max-width: 750px)":{width:"250px"},"& .MuiFormControl-root":{width:"100px !important"},"@media (min-width: 750px)":{width:"300px !important","& .MuiFormControl-root":{width:"133px !important"}}},"@media (min-width: 380px)":{width:"320px"},"@media (max-height: 639px)":{height:"30px","& .MuiInputBase-input":{fontSize:"14px",padding:"0px 7px"},"& .css-tjr34z":{fontSize:"14px"},"& .css-d8svfr":{width:"14px"}}})),tt=a(d)({width:"77.09%",height:"39px",marginTop:"16px",paddingRight:"95px","& .MuiBox-root:nth-of-type(2)":{width:"39px"},"@media (min-width: 380px)":{width:"320px"},"@media (max-height: 639px)":{height:"30px",paddingRight:"102.5px","& .MuiBox-root:nth-of-type(2)":{width:"30px"},"& .css-d8svfr":{width:"14px"},"& .MuiBox-root":{fontSize:"14px"}},"@media screen and (orientation: landscape)":{width:"200px !important","@media (min-width: 550px)":{width:"250px"},"@media (max-height: 639px)":{paddingRight:"104px"},"@media (min-width: 750px)":{width:"300px !important",paddingRight:"104px"},"@media (min-width: 750px) and (min-height: 639px)":{paddingRight:"94px"},"@media (max-width: 749px)":{paddingRight:"70px"}}}),et=a(d)({height:"40px",marginTop:"16px",marginBottom:"30px"});function it(n){const{t:i}=y(),{theme:g}=m.useContext(k),{headerBGColor:l,logoTextColor:x}=A(g);return t.jsxs(t.Fragment,{children:[t.jsx(U,{style:{color:x},onClick:n.onLoginClicked,children:i("Log In")}),t.jsx(K,{style:{backgroundColor:l},children:t.jsx(Q,{children:t.jsx(I,{color:x,fontFamily:'"Buenard"',fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",children:i("Set New Password")})})})]})}function nt(n){const{isLoading:i,verifiedBot:g,error:l,verifyToken:x}=m.useContext(D),{t:s}=y(),{theme:e}=m.useContext(k),{mainBGColor:w,altTextColor:o}=A(e),p=()=>{x(F.LOGIN_PAGE)};return m.useEffect(()=>{n.onChangeLoadingStatus&&n.onChangeLoadingStatus(i)},[i]),m.useEffect(()=>{n.onDisplayError&&l&&l.length>0&&n.onDisplayError(l)},[l]),t.jsxs(J,{style:{backgroundColor:w},children:[t.jsx(X,{children:t.jsx(I,{color:o,children:s("Enter New Password")})}),t.jsx(Z,{children:t.jsx(G,{initialValues:{password:"",confirm:""},onSubmit:c=>{n.onSubmit(c)},validationSchema:H().shape({password:B().required(s("InvalidPassword")),confirm:B().required(s("InvalidConfirmPassword"))}),children:({handleChange:c,handleBlur:E,handleSubmit:R,values:j,errors:u,touched:f})=>t.jsxs(t.Fragment,{children:[t.jsx(T,{haserror:f.password&&u.password?"true":"false",children:t.jsx(b,{type:"password",imgSrc:e==r.DEFAULT||e==r.EASY_OCEAN||e==r.EASY_SUNRISE?h.pass:h.pass_white,label:s("New Pass")+":",value:j.password,error:f.password?u.password:"",onChange:c("password"),onBlur:E("password")})}),t.jsx(T,{haserror:f.confirm&&u.confirm?"true":"false",children:t.jsx(b,{type:"password",imgSrc:e==r.DEFAULT||e==r.EASY_OCEAN||e==r.EASY_SUNRISE?h.pass:h.pass_white,label:s("Confirm")+":",value:j.confirm,error:f.confirm?u.confirm:"",onChange:c("confirm"),onBlur:E("confirm")})}),t.jsx(tt,{children:t.jsx(N,{imgSrc:e==r.DEFAULT||e==r.EASY_OCEAN||e==r.EASY_SUNRISE?h.bot:h.bot_white,checkImgSrc:g?e==r.DEFAULT||e==r.EASY_OCEAN?h.tick:h.tick_white:"",label:s("No Bot")+":",onClick:p})}),t.jsx(et,{children:t.jsx(V,{disabled:!g||Array.isArray(u)||Object.values(u).toString()!="",label:s("Submit"),size:"medium",onClick:R})})]})})})]})}function ut(){const[n,i]=m.useState(!1),g=Y(),[l]=_(),x=M(),{t:s}=y();m.useEffect(()=>{const o=l.get("token");!n&&o&&o.length>0&&(i(!0),v.verifyEmail({token:o}).then(()=>{i(!1)}).catch(p=>{i(!1),C.custom(c=>t.jsx(S,{text:s(p),visible:c.visible}))}))},[]);const e=o=>{i(!0),o.token=l.get("token"),v.resetPassword(o).then(p=>{i(!1),p&&x("/login?type=reset")}).catch(p=>{i(!1),C.custom(c=>t.jsx(S,{text:s(p),visible:c.visible}))})},w=()=>{x("/login")};return t.jsx(P,{reCaptchaKey:L,children:t.jsxs(O,{children:[t.jsxs(q,{flexDirection:g?"column":"row",children:[t.jsx(it,{onLoginClicked:w}),t.jsx(nt,{onSubmit:e,onChangeLoadingStatus:o=>i(o),onDisplayError:o=>C.custom(p=>t.jsx(S,{text:s(o),visible:p.visible}))})]}),n&&t.jsx(z,{})]})})}export{ut as default};
