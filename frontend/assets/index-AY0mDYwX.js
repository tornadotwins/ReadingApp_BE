import{b as l,j as o,Q as E,af as Ht,U as Y,as as Ie,at as Xe,au as Te,av as Ct,X as Vt,ac as Wt,$ as Re,aa as Ue,Y as Je,aw as Ze,ax as Fe,ay as et,az as Le,aA as qt,aB as Xt,aC as J,ak as Se}from"./index-BE3uQJXX.js";import{S as ae,g as se,aG as Ut,aH as Ft,aI as Yt,aJ as Kt,s as P,B as j,aK as ke,aL as zt,u as Et,_ as Z,c as $t,d as Gt,e as he}from"./App-C54qGOPD.js";import{I as C,T as re}from"./images-BU8WrZ8M.js";import{C as ee,L as Qt}from"./index-B30yO50J.js";import{b as tt}from"./book.service-W6YhLd3O.js";import{b as rt}from"./bookmark.service-BUBrwai5.js";import"./index-DL4NZW23.js";import"./axios-BimPEqV4.js";var kt={exports:{}},Jt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Zt=Jt,er=Zt;function At(){}function Rt(){}Rt.resetWarningCache=At;var tr=function(){function e(s,a,f,w,B,M){if(M!==er){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function n(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:Rt,resetWarningCache:At};return i.PropTypes=i,i};kt.exports=tr();var rr=kt.exports;function nr(e){const{theme:n}=l.useContext(ae),{buttonColor:i,buttonTextColor:s}=se(n);return o.jsx(Ut,{ref:e.refer,"data-id":e.dataId,backgroundColor:i,children:o.jsxs(Ft,{progresscolor:s,children:[o.jsx(Yt,{variant:"determinate",value:e.progress,thickness:2}),o.jsx(Kt,{src:n==E.EASY_OCEAN?C.bookmark2_white:C.bookmark2_default})]})})}var Lt={};function ir(e){if(e&&e.__esModule)return e;var n={};if(e!=null){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};s.get||s.set?Object.defineProperty(n,i,s):n[i]=e[i]}}return n.default=e,n}var Pt=ir,te={},Pe,nt;function or(){if(nt)return Pe;nt=1;function e(n){return n&&n.__esModule?n:{default:n}}return Pe=e,Pe}var ye,it;function ar(){if(it)return ye;it=1;function e(){return ye=e=Object.assign||function(n){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a])}return n},e.apply(this,arguments)}return ye=e,ye}var Be,ot;function sr(){if(ot)return Be;ot=1;function e(n,i){if(n==null)return{};var s={},a=Object.keys(n),f,w;for(w=0;w<a.length;w++)f=a[w],!(i.indexOf(f)>=0)&&(s[f]=n[f]);return s}return Be=e,Be}var Oe,at;function lr(){if(at)return Oe;at=1;var e=sr();function n(i,s){if(i==null)return{};var a=e(i,s),f,w;if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(i);for(w=0;w<B.length;w++)f=B[w],!(s.indexOf(f)>=0)&&Object.prototype.propertyIsEnumerable.call(i,f)&&(a[f]=i[f])}return a}return Oe=n,Oe}var Me,st;function cr(){if(st)return Me;st=1;function e(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}return Me=e,Me}var Ne,lt;function ur(){if(lt)return Ne;lt=1;function e(i,s){for(var a=0;a<s.length;a++){var f=s[a];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(i,f.key,f)}}function n(i,s,a){return s&&e(i.prototype,s),a&&e(i,a),i}return Ne=n,Ne}var fe,ct;function dr(){if(ct)return fe;ct=1;function e(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(a){return typeof a}:e=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e(i)}function n(i){return typeof Symbol=="function"&&e(Symbol.iterator)==="symbol"?fe=n=function(a){return e(a)}:fe=n=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":e(a)},n(i)}return fe=n,fe}var De,ut;function hr(){if(ut)return De;ut=1;function e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}return De=e,De}var je,dt;function fr(){if(dt)return je;dt=1;var e=dr(),n=hr();function i(s,a){return a&&(e(a)==="object"||typeof a=="function")?a:n(s)}return je=i,je}var be,ht;function gr(){if(ht)return be;ht=1;function e(n){return be=e=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},e(n)}return be=e,be}var _e,ft;function pr(){if(ft)return _e;ft=1;function e(n,i){return _e=e=Object.setPrototypeOf||function(a,f){return a.__proto__=f,a},e(n,i)}return _e=e,_e}var He,gt;function vr(){if(gt)return He;gt=1;var e=pr();function n(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(s&&s.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),s&&e(i,s)}return He=n,He}var Ve,pt;function Bt(){if(pt)return Ve;pt=1;var e=function(){};return Ve=e,Ve}var We={},qe,vt;function Ae(){if(vt)return qe;vt=1;function e(n){return n&&n.__esModule?n:{default:n}}return qe=e,qe}var ge={},xt;function xr(){if(xt)return ge;xt=1;var e=Ae();Object.defineProperty(ge,"__esModule",{value:!0}),ge.default=void 0;var n=e(l);e(Bt());var i=function(f){f.index;var w=f.children;n.default.Children.count(w)},s=i;return ge.default=s,ge}var we={},pe={},mt;function Ot(){if(mt)return pe;mt=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=void 0;var e={RESISTANCE_COEF:.6,UNCERTAINTY_THRESHOLD:3};return pe.default=e,pe}var St;function mr(){if(St)return we;St=1;var e=Ae();Object.defineProperty(we,"__esModule",{value:!0}),we.default=s;var n=e(l),i=e(Ot());function s(a){var f=a.children,w=a.startIndex,B=a.startX,M=a.pageX,h=a.viewLength,_=a.resistance,k=n.default.Children.count(f)-1,R=w+(B-M)/h,b;return _?R<0?R=Math.exp(R*i.default.RESISTANCE_COEF)-1:R>k&&(R=k+1-Math.exp((k-R)*i.default.RESISTANCE_COEF)):R<0?(R=0,b=(R-w)*h+M):R>k&&(R=k,b=(R-w)*h+M),{index:R,startX:b}}return we}var ve={},yt;function Sr(){if(yt)return ve;yt=1;var e=Ae();Object.defineProperty(ve,"__esModule",{value:!0}),ve.default=void 0;var n=e(l),i=function(f,w){var B=!1,M=function(N){return N?N.key:"empty"};if(f.children.length&&w.children.length){var h=n.default.Children.map(f.children,M),_=h[f.index];if(_!=null){var k=n.default.Children.map(w.children,M),R=k[w.index];_===R&&(B=!0)}}return B},s=i;return ve.default=s,ve}var xe={},bt;function yr(){if(bt)return xe;bt=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.default=void 0;function e(i,s){var a=i%s;return a<0?a+s:a}var n=e;return xe.default=n,xe}var _t;function br(){return _t||(_t=1,function(e){var n=Ae();Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"checkIndexBounds",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"computeIndex",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"constant",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"getDisplaySameSlide",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"mod",{enumerable:!0,get:function(){return w.default}});var i=n(xr()),s=n(mr()),a=n(Ot()),f=n(Sr()),w=n(yr())}(We)),We}var wt;function _r(){if(wt)return te;wt=1;var e=Pt,n=or();Object.defineProperty(te,"__esModule",{value:!0}),te.getDomTreeShapes=v,te.findNativeHandler=q,te.default=te.SwipeableViewsContext=void 0;var i=n(ar()),s=n(lr()),a=n(cr()),f=n(ur()),w=n(fr()),B=n(gr()),M=n(vr()),h=e(l);n(rr),n(Bt());var _=br();function k(d,c,u,t){return d.addEventListener(c,u,t),{remove:function(){d.removeEventListener(c,u,t)}}}var R={container:{direction:"ltr",display:"flex",willChange:"transform"},slide:{width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"}},b={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(c){return"translate(".concat(-c,"%, 0)")},"x-reverse":function(c){return"translate(".concat(c,"%, 0)")},y:function(c){return"translate(0, ".concat(-c,"%)")},"y-reverse":function(c){return"translate(0, ".concat(c,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function N(d,c){var u=c.duration,t=c.easeFunction,r=c.delay;return"".concat(d," ").concat(u," ").concat(t," ").concat(r)}function H(d,c){var u=b.rotationMatrix[c];return{pageX:u.x[0]*d.pageX+u.x[1]*d.pageY,pageY:u.y[0]*d.pageX+u.y[1]*d.pageY}}function X(d){return d.touches=[{pageX:d.pageX,pageY:d.pageY}],d}function v(d,c){for(var u=[];d&&d!==c&&d!==document.body&&!d.hasAttribute("data-swipeable");){var t=window.getComputedStyle(d);t.getPropertyValue("position")==="absolute"||t.getPropertyValue("overflow-x")==="hidden"?u=[]:(d.clientWidth>0&&d.scrollWidth>d.clientWidth||d.clientHeight>0&&d.scrollHeight>d.clientHeight)&&u.push({element:d,scrollWidth:d.scrollWidth,scrollHeight:d.scrollHeight,clientWidth:d.clientWidth,clientHeight:d.clientHeight,scrollLeft:d.scrollLeft,scrollTop:d.scrollTop}),d=d.parentNode}return u}var V=null;function q(d){var c=d.domTreeShapes,u=d.pageX,t=d.startX,r=d.axis;return c.some(function(y){var p=u>=t;(r==="x"||r==="y")&&(p=!p);var I=Math.round(y[b.scrollPosition[r]]),L=I>0,F=I+y[b.clientLength[r]]<y[b.scrollLength[r]];return p&&F||!p&&L?(V=y.element,!0):!1})}var x=h.createContext();te.SwipeableViewsContext=x;var g=function(d){(0,M.default)(c,d);function c(u){var t;return(0,a.default)(this,c),t=(0,w.default)(this,(0,B.default)(c).call(this,u)),t.rootNode=null,t.containerNode=null,t.ignoreNextScrollEvents=!1,t.viewLength=0,t.startX=0,t.lastX=0,t.vx=0,t.startY=0,t.isSwiping=void 0,t.started=!1,t.startIndex=0,t.transitionListener=null,t.touchMoveListener=null,t.activeSlide=null,t.indexCurrent=null,t.firstRenderTimeout=null,t.setRootNode=function(r){t.rootNode=r},t.setContainerNode=function(r){t.containerNode=r},t.setActiveSlide=function(r){t.activeSlide=r,t.updateHeight()},t.handleSwipeStart=function(r){var y=t.props.axis,p=H(r.touches[0],y);t.viewLength=t.rootNode.getBoundingClientRect()[b.length[y]],t.startX=p.pageX,t.lastX=p.pageX,t.vx=0,t.startY=p.pageY,t.isSwiping=void 0,t.started=!0;var I=window.getComputedStyle(t.containerNode),L=I.getPropertyValue("-webkit-transform")||I.getPropertyValue("transform");if(L&&L!=="none"){var F=L.split("(")[1].split(")")[0].split(","),K=window.getComputedStyle(t.rootNode),U=H({pageX:parseInt(F[4],10),pageY:parseInt(F[5],10)},y);t.startIndex=-U.pageX/(t.viewLength-parseInt(K.paddingLeft,10)-parseInt(K.paddingRight,10))||0}},t.handleSwipeMove=function(r){if(!t.started){t.handleTouchStart(r);return}if(!(V!==null&&V!==t.rootNode)){var y=t.props,p=y.axis,I=y.children,L=y.ignoreNativeScroll,F=y.onSwitching,K=y.resistance,U=H(r.touches[0],p);if(t.isSwiping===void 0){var z=Math.abs(U.pageX-t.startX),$=Math.abs(U.pageY-t.startY),ne=z>$&&z>_.constant.UNCERTAINTY_THRESHOLD;if(!K&&(p==="y"||p==="y-reverse")&&(t.indexCurrent===0&&t.startX<U.pageX||t.indexCurrent===h.Children.count(t.props.children)-1&&t.startX>U.pageX)){t.isSwiping=!1;return}if(z>$&&r.preventDefault(),ne===!0||$>_.constant.UNCERTAINTY_THRESHOLD){t.isSwiping=ne,t.startX=U.pageX;return}}if(t.isSwiping===!0){r.preventDefault(),t.vx=t.vx*.5+(U.pageX-t.lastX)*.5,t.lastX=U.pageX;var m=(0,_.computeIndex)({children:I,resistance:K,pageX:U.pageX,startIndex:t.startIndex,startX:t.startX,viewLength:t.viewLength}),S=m.index,O=m.startX;if(V===null&&!L){var D=v(r.target,t.rootNode),A=q({domTreeShapes:D,startX:t.startX,pageX:U.pageX,axis:p});if(A)return}O?t.startX=O:V===null&&(V=t.rootNode),t.setIndexCurrent(S);var T=function(){F&&F(S,"move")};(t.state.displaySameSlide||!t.state.isDragging)&&t.setState({displaySameSlide:!1,isDragging:!0},T),T()}}},t.handleSwipeEnd=function(){if(V=null,!!t.started&&(t.started=!1,t.isSwiping===!0)){var r=t.state.indexLatest,y=t.indexCurrent,p=r-y,I;Math.abs(t.vx)>t.props.threshold?t.vx>0?I=Math.floor(y):I=Math.ceil(y):Math.abs(p)>t.props.hysteresis?I=p>0?Math.floor(y):Math.ceil(y):I=r;var L=h.Children.count(t.props.children)-1;I<0?I=0:I>L&&(I=L),t.setIndexCurrent(I),t.setState({indexLatest:I,isDragging:!1},function(){t.props.onSwitching&&t.props.onSwitching(I,"end"),t.props.onChangeIndex&&I!==r&&t.props.onChangeIndex(I,r,{reason:"swipe"}),y===r&&t.handleTransitionEnd()})}},t.handleTouchStart=function(r){t.props.onTouchStart&&t.props.onTouchStart(r),t.handleSwipeStart(r)},t.handleTouchEnd=function(r){t.props.onTouchEnd&&t.props.onTouchEnd(r),t.handleSwipeEnd(r)},t.handleMouseDown=function(r){t.props.onMouseDown&&t.props.onMouseDown(r),r.persist(),t.handleSwipeStart(X(r))},t.handleMouseUp=function(r){t.props.onMouseUp&&t.props.onMouseUp(r),t.handleSwipeEnd(X(r))},t.handleMouseLeave=function(r){t.props.onMouseLeave&&t.props.onMouseLeave(r),t.started&&t.handleSwipeEnd(X(r))},t.handleMouseMove=function(r){t.props.onMouseMove&&t.props.onMouseMove(r),t.started&&t.handleSwipeMove(X(r))},t.handleScroll=function(r){if(t.props.onScroll&&t.props.onScroll(r),r.target===t.rootNode){if(t.ignoreNextScrollEvents){t.ignoreNextScrollEvents=!1;return}var y=t.state.indexLatest,p=Math.ceil(r.target.scrollLeft/r.target.clientWidth)+y;t.ignoreNextScrollEvents=!0,r.target.scrollLeft=0,t.props.onChangeIndex&&p!==y&&t.props.onChangeIndex(p,y,{reason:"focus"})}},t.updateHeight=function(){if(t.activeSlide!==null){var r=t.activeSlide.children[0];r!==void 0&&r.offsetHeight!==void 0&&t.state.heightLatest!==r.offsetHeight&&t.setState({heightLatest:r.offsetHeight})}},t.state={indexLatest:u.index,isDragging:!1,renderOnlyActive:!u.disableLazyLoading,heightLatest:0,displaySameSlide:!0},t.setIndexCurrent(u.index),t}return(0,f.default)(c,[{key:"componentDidMount",value:function(){var t=this;this.transitionListener=k(this.containerNode,"transitionend",function(r){r.target===t.containerNode&&t.handleTransitionEnd()}),this.touchMoveListener=k(this.rootNode,"touchmove",function(r){t.props.disabled||t.handleSwipeMove(r)},{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout(function(){t.setState({renderOnlyActive:!1})},0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var r=t.index;typeof r=="number"&&r!==this.props.index&&(this.setIndexCurrent(r),this.setState({displaySameSlide:(0,_.getDisplaySameSlide)(this.props,t),indexLatest:r}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"getSwipeableViewsContext",value:function(){var t=this;return{slideUpdateHeight:function(){t.updateHeight()}}}},{key:"setIndexCurrent",value:function(t){if(!this.props.animateTransitions&&this.indexCurrent!==t&&this.handleTransitionEnd(),this.indexCurrent=t,this.containerNode){var r=this.props.axis,y=b.transform[r](t*100);this.containerNode.style.WebkitTransform=y,this.containerNode.style.transform=y}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var t=this,r=this.props;r.action;var y=r.animateHeight,p=r.animateTransitions,I=r.axis,L=r.children,F=r.containerStyle,K=r.disabled;r.disableLazyLoading;var U=r.enableMouseEvents;r.hysteresis,r.ignoreNativeScroll,r.index,r.onChangeIndex,r.onSwitching,r.onTransitionEnd,r.resistance;var z=r.slideStyle,$=r.slideClassName,ne=r.springConfig,m=r.style;r.threshold;var S=(0,s.default)(r,["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"]),O=this.state,D=O.displaySameSlide,A=O.heightLatest,T=O.indexLatest,G=O.isDragging,ue=O.renderOnlyActive,de=K?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},ce=!K&&U?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{},ie=(0,i.default)({},R.slide,z),Q,oe;if(G||!p||D)Q="all 0s ease 0s",oe="all 0s ease 0s";else if(Q=N("transform",ne),oe=N("-webkit-transform",ne),A!==0){var Ke=", ".concat(N("height",ne));Q+=Ke,oe+=Ke}var me={height:null,WebkitFlexDirection:b.flexDirection[I],flexDirection:b.flexDirection[I],WebkitTransition:oe,transition:Q};if(!ue){var ze=b.transform[I](this.indexCurrent*100);me.WebkitTransform=ze,me.transform=ze}return y&&(me.height=A),h.createElement(x.Provider,{value:this.getSwipeableViewsContext()},h.createElement("div",(0,i.default)({ref:this.setRootNode,style:(0,i.default)({},b.root[I],m)},S,de,ce,{onScroll:this.handleScroll}),h.createElement("div",{ref:this.setContainerNode,style:(0,i.default)({},me,R.container,F),className:"react-swipeable-view-container"},h.Children.map(L,function(jt,$e){if(ue&&$e!==T)return null;var Ge,Qe=!0;return $e===T&&(Qe=!1,y&&(Ge=t.setActiveSlide,ie.overflowY="hidden")),h.createElement("div",{ref:Ge,style:ie,className:$,"aria-hidden":Qe,"data-swipeable":"true"},jt)}))))}}]),c}(h.Component);g.displayName="ReactSwipableView",g.propTypes={},g.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1};var W=g;return te.default=W,te}(function(e){var n=Pt;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"SwipeableViewsContext",{enumerable:!0,get:function(){return i.SwipeableViewsContext}});var i=n(_r())})(Lt);const wr=Ht(Lt),Ir=P(j)({width:"100%",margin:"0px"}),Tr=P(j)({margin:"0px",padding:"0px",position:"relative"}),Cr=P(j)({width:"100%",height:"100%",margin:"0px",padding:"0px",position:"relative"}),Mt=P(wr)(({scrollcolor:e})=>({width:"100%",height:"100%",marginBottom:"8px",padding:"14px 0px 20px 0px","::-webkit-scrollbar-thumb":{background:"red"},"::-webkit-scrollbar-thumb: hover":{backgroundColor:e,opacity:"1"},"& .react-swipeable-view-container":{height:"100%"}})),Ce=P(j)({width:"100%",padding:"0px 14px","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}}),Nt=P(j)({height:"10px",width:"100%",position:"absolute",bottom:"0",display:"flex",justifyContent:"center","& :last-child":{marginRight:"0px"}}),Ee=P(j)(({active:e,linecolor:n})=>({borderTop:`1px solid ${n}`,width:e=="true"?"20px":e=="false"?"10px":"0px",color:"black",marginRight:"5px",marginTop:"5px"})),Er=P(j)(({scrollbarcolor:e})=>({width:"100%",height:"100%","::-webkit-scrollbar-thumb":{backgroundColor:"red"},"::-webkit-scrollbar-track":{backgroundColor:"transparent"},scrollbarWidth:"auto",scrollbarColor:`${e} transparent`})),It=P(j)({width:"100%",padding:"0px",margin:"0px"}),kr=P(j)({width:"100%",margin:"auto",padding:"20px 0px","& .MuiBox-root":{textWrap:"wrap"}}),Ar=P(j)({width:"100%",height:"100%",position:"relative",overflowX:"hidden",padding:"0px 15px"}),Rr=P(j)({width:"100%",overflow:"hidden",position:"relative",display:"flex",flexDirection:"column"}),Lr=P(j)({width:"100%",padding:"20px 0px",position:"relative",display:"flex",zIndex:"2","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}}),Pr=P(j)({width:"100%",margin:"0px",position:"relative",display:"flex",flexDirection:"column",zIndex:"2","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}});P(j)({width:"40px",height:"100%",backgroundColor:"#FFAA5D",justifyContent:"center",alignItems:"center"});P(j)({width:"20px",height:"50%",position:"relative"});function Ye(e){var k,R;const[n,i]=l.useState(0),{theme:s,textSize:a,referenceLanguage:f,showQuranReferences:w,displayType:B}=l.useContext(ae),{topTextColor:M,backgroundColor:h}=se(s),_=e.verse.verseReference.ref;return B==Y.VERSE_BY_VERSE?o.jsxs(Tr,{children:[o.jsxs(Mt,{style:{backgroundColor:h},scrollcolor:M,enableMouseEvents:!0,disabled:!w,onSwitching:b=>i(b),children:[o.jsx(Ce,{children:o.jsx(It,{"data-id":e.verse.verseId,"data-index":e.index,ref:e.refer,children:o.jsx(re,{fontFamily:"Inter",fontSize:a-4,lineHeight:a+6,fontWeight:"700",color:M,dataIndex:e.index.toString(),language:f,direction:f==Ie?"rtl":"ltr",children:(k=e.verse.verseText)==null?void 0:k[f]})})}),o.jsx(Ce,{children:_.map((b,N)=>o.jsx(re,{fontFamily:"Inter",fontWeight:"700",fontSize:a-4,lineHeight:a+6,color:M,children:b},N))})]}),_.length>0&&w&&o.jsxs(Nt,{children:[o.jsx(Ee,{active:n==0?"true":"false",linecolor:M}),o.jsx(Ee,{active:n==1?"true":"false",linecolor:M})]})]}):o.jsx(It,{"data-id":e.verse.verseId,"data-index":e.index,ref:e.refer,style:{backgroundColor:h},children:o.jsx(re,{fontFamily:"Inter",fontSize:a-4,lineHeight:a+6,fontWeight:"700",color:M,dataIndex:e.index.toString(),language:f,direction:f==Ie?"rtl":"ltr",onTouchStart:()=>e.onTouchStart&&e.onTouchStart(e.verse.verseReference.ref),onMouseDown:()=>e.onMouseDown&&e.onMouseDown(e.verse.verseReference.ref),children:(R=e.verse.verseText)==null?void 0:R[f]})})}function Br(e){var V,q;const[n,i]=l.useState([]),[s,a]=l.useState(0),{scrollTopVerseIndex:f,setScrollTopVerseIndex:w,setHiddenTopVersePercentage:B,activeScroll:M,setActiveScroll:h}=l.useContext(ke),_=l.useRef([]);_.current=(V=e.verses)==null?void 0:V.map((x,g)=>_.current[g]??l.createRef());const{theme:k,textSize:R,showQuranReferences:b,displayType:N}=l.useContext(ae),{backgroundColor:H,topTextColor:X}=se(k);l.useEffect(()=>{var g;const x=_.current[e.topVerseIndex];(g=x==null?void 0:x.current)==null||g.scrollIntoView()},[e.topVerseIndex]),l.useEffect(()=>{var x;if(N==Y.SPLIT_PANEL&&f>=0&&(M==Xe||M==Te)){const g=_.current[Number(f)];(x=g==null?void 0:g.current)==null||x.scrollIntoView()}},[f,N,e.topVerseIndex]);const v=x=>{if(N==Y.SPLIT_PANEL){h(Ct);const g=x.currentTarget.getBoundingClientRect().top,W=x.currentTarget.clientHeight;let d=-1,c=1/0;if(_.current.forEach((u,t)=>{if(u.current){const r=u.current.getBoundingClientRect().top,y=u.current.getBoundingClientRect().bottom,p=r-g;y>g&&r<g+W&&Math.abs(p)<c&&(c=Math.abs(p),d=t)}}),d!==-1){w(d);const u=_.current[d];if(u.current){const t=u.current.getBoundingClientRect().top,r=u.current.clientHeight,y=Math.max(0,Math.min(100,(g-t)/r*100));B(y)}}}};return o.jsx(Ir,{style:{height:e.height},children:N===Y.SPLIT_PANEL?o.jsxs(Cr,{children:[o.jsxs(Mt,{style:{backgroundColor:H},scrollcolor:X,enableMouseEvents:!0,disabled:!b,onScrollCapture:M!=Xe?x=>v(x):()=>{},onSwitching:x=>a(x),children:[o.jsx(Ce,{children:(q=e.verses)==null?void 0:q.map((x,g)=>o.jsx(Ye,{refer:_.current[g],verse:x,index:g,onMouseDown:i,onTouchStart:i},g))}),o.jsx(Ce,{children:n&&n.map((x,g)=>o.jsx(re,{fontFamily:"Inter",fontWeight:"700",fontSize:R-2,color:X,children:x},g))})]}),b&&o.jsxs(Nt,{style:{background:H,bottom:"5px"},children:[o.jsx(Ee,{active:s===0?"true":"false",linecolor:X}),o.jsx(Ee,{active:s===1?"true":"false",linecolor:X})]})]}):o.jsx(Er,{style:{backgroundColor:H},scrollbarcolor:X,children:e.verses.map((x,g)=>o.jsx(Ye,{refer:_.current[g],verse:x,index:g},g))})})}const Or=P(j)({position:"fixed",zIndex:"3",bottom:"0px",width:"100%",height:"150px",overflow:"hidden"}),Mr=P(j)({position:"relative",display:"flex",justifyContent:"center","& .MuiBox-root":{alignContent:"center"}}),Nr=P("img")({width:"100%",position:"absolute",top:"20px"}),Dr=P(j)({width:"100%",maxWidth:"700px",padding:"0px 20px",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",zIndex:"1",paddingTop:"20px",alignContent:"center","@media (min-width: 600px)":{paddingTop:"25px"}}),jr=P(j)({position:"relative",bottom:"-75px",height:"100px",alignItems:"center",justifyContent:"space-between"}),Hr=P("img")({width:"100%",position:"absolute"}),Vr=P(j)(({readingcontrol:e})=>({height:"100px",width:"100%",maxWidth:"700px",margin:"auto",display:"flex",flexDirection:e==Vt.LEFT_HANDED?"row":"row-reverse",justifyContent:"space-between",alignItems:"center",padding:"0px 15px","@media (min-width: 1075px)":{width:"80%",margin:"auto"}})),Wr=P(j)({width:"90px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px","@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}}),qr=P(j)({width:"90px",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"20px","@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}}),le=P("img")({width:"60px",height:"40px",borderRadius:"50%",cursor:"pointer",zIndex:"1"}),Xr=P(j)(({underlinecolor:e})=>({width:"90px",textDecoration:"underline",textDecorationColor:e,textUnderlineOffset:"3px",zIndex:"1",cursor:"pointer",marginBottom:"20px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}})),Ur=P(j)({width:"100%",height:"60px",overflow:"hidden",padding:"0 10px"}),Fr=P(zt)(({barcolor:e})=>({color:e,opacity:"1",height:"5px","& .MuiSlider-thumb":{width:"13.25px",height:"14px",color:e,transition:"0.3s cubic-bezier(.47,1.64,.41,.8)","&::before":{boxShadow:"0 2px 12px 0 rgba(0,0,0,0.4)"},"&:hover, &.Mui-focusVisible":{boxShadow:"0px 0px 0px 8px rgb(0 0 0 / 16%)"},"&.Mui-active":{width:20,height:20}}})),Yr=P(j)({display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"-20px"});function Kr(e){const{duration:n,currentTime:i,onTimeChange:s}=e,[a,f]=l.useState(i),{theme:w}=l.useContext(ae),{buttonTextColor:B}=se(w);l.useEffect(()=>{f(i)},[i]);const M=(h,_)=>{f(_),s(_)};return o.jsxs(Ur,{children:[o.jsx(Fr,{"aria-label":"time-indicator",value:a,min:0,max:Math.floor(n),step:1,barcolor:B,onChange:M}),o.jsxs(Yr,{children:[o.jsx(re,{color:B,children:Tt(a)}),o.jsx(re,{color:B,children:"-"+Tt(Math.floor(n-a))})]})]})}function Tt(e){const n=Math.floor(e/60),i=Math.floor(e%60);return`${n}:${i<10?`0${i}`:i}`}function zr(e){const[n,i]=l.useState(!1),[s,a]=l.useState(0),[f,w]=l.useState(0),[B,M]=l.useState(0),h=l.useRef(new Audio),{setScrollTopVerseIndex:_,setActiveScroll:k}=l.useContext(ke),{autoScrollText:R,volume:b,audioLanguage:N,readingControls:H,pageControl:X,theme:v}=l.useContext(ae),{logoTextColor:V}=se(v),{t:q}=Et();l.useEffect(()=>{const p=h.current;e.src&&(p.src=Wt+e.src[N||Re.TRANSLATION]);const I=()=>{w(p.duration)},L=()=>{a(Math.floor(p.currentTime))};return p.addEventListener("loadedmetadata",I),p.addEventListener("timeupdate",L),()=>{p.removeEventListener("loadedmetadata",I),p.removeEventListener("timeupdate",L)}},[e.src]),l.useEffect(()=>{if(h.current.ended)t();else if(R){const p=e.verses.findIndex((I,L)=>{var U,z,$;const F=(U=I.verseAudioStart)==null?void 0:U[N||Re.TRANSLATION],K=($=(z=e.verses[L+1])==null?void 0:z.verseAudioStart)==null?void 0:$[N||Re.TRANSLATION];return s>=F&&s<K});p!==-1&&(p!==B||p==0)&&(_(p),M(p),k(Te))}},[s,e.verses,N,R,n]),l.useEffect(()=>{h.current.volume=b/100},[b]);const x=()=>{const p=h.current;k(Te),p.readyState>=2?(i(!0),p.play().catch(I=>Z.custom(L=>o.jsx(ee,{text:q("Audio Play Error"+I),offset:125,visible:L.visible})))):Z.custom(I=>o.jsx(ee,{text:q("Audio Not Ready"),offset:125,visible:I.visible}))},g=()=>{i(!1),h.current.pause(),k(Ue)},W=()=>{g(),e.moveToSoundSettingPage()},d=()=>{g(),e.setAudioSeekBarStatus(!1)},c=()=>{g(),e.moveToPrevPage()},u=p=>{h.current.currentTime=p,a(p)},t=()=>{a(0),i(!1),_(0),k(Ue)},r=()=>o.jsxs(Mr,{children:[o.jsx(Nr,{src:v==E.DEFAULT||v==E.DARK?C.bar_reading_audio_subtract:v==E.BLACK_AND_WHITE?C.bar_reading_audio_subtract_BAW:v==E.SAPPHIRE?C.bar_reading_audio_subtract_sapphire:C.bar_reading_audio_subtract_easyocean}),o.jsxs(Dr,{children:[o.jsx(le,{src:v==E.DEFAULT||v==E.DARK?C.btn_sound_setting:v==E.BLACK_AND_WHITE?C.btn_sound_setting_BAW:v==E.SAPPHIRE?C.btn_sound_setting_sapphire:C.btn_sound_setting_easyocean,onClick:W}),o.jsx(Kr,{duration:f,currentTime:s,onTimeChange:u}),o.jsx(le,{src:v==E.DEFAULT||v==E.DARK?C.btn_close:v==E.BLACK_AND_WHITE?C.btn_close_BAW:v==E.SAPPHIRE?C.btn_close_sapphire:C.btn_close_easyocean,onClick:d})]})]}),y=()=>o.jsxs(jr,{children:[o.jsx(Hr,{src:v==E.DEFAULT||v==E.DARK?C.bar_reading_subtract:v==E.BLACK_AND_WHITE?C.bar_reading_subtract_BAW:v==E.SAPPHIRE?C.bar_reading_subtract_sapphire:C.bar_reading_subtract_easyocean}),o.jsxs(Vr,{readingcontrol:H,children:[o.jsxs(Wr,{children:[o.jsx(le,{src:v==E.DEFAULT||v==E.DARK?C.btn_arrow_left:v==E.BLACK_AND_WHITE?C.btn_arrow_left_BAW:v==E.SAPPHIRE?C.btn_arrow_left_sapphire:C.btn_arrow_left_easyocean,onClick:()=>e.handleNavigateBtn(X==Je.LEFT_TO_RIGHT?Ze:Fe)}),o.jsx(le,{src:v==E.DEFAULT||v==E.DARK?C.btn_arrow_right:v==E.BLACK_AND_WHITE?C.btn_arrow_right_BAW:v==E.SAPPHIRE?C.btn_arrow_right_sapphire:C.btn_arrow_right_easyocean,onClick:()=>e.handleNavigateBtn(X==Je.LEFT_TO_RIGHT?Fe:Ze)})]}),o.jsx(qr,{children:e.showAudioSeekBar?n?o.jsx(le,{src:v==E.DEFAULT||v==E.DARK?C.btn_pause:v==E.BLACK_AND_WHITE?C.btn_pause_BAW:v==E.SAPPHIRE?C.btn_pause_sapphire:C.btn_pause_easyocean,onClick:g}):o.jsx(le,{src:v==E.DEFAULT||v==E.DARK?C.btn_play:v==E.BLACK_AND_WHITE?C.btn_play_BAW:v==E.SAPPHIRE?C.btn_play_sapphire:C.btn_play_easyocean,onClick:x}):o.jsx(le,{src:v==E.DEFAULT||v==E.DARK?C.btn_sound:v==E.BLACK_AND_WHITE?C.btn_sound_BAW:v==E.SAPPHIRE?C.btn_sound_sapphire:C.btn_sound_easyocean,onClick:()=>e.setAudioSeekBarStatus(!0)})}),o.jsx(Xr,{underlinecolor:V,onClick:c,children:o.jsx(re,{color:V,textAlign:"right",children:e.bookTitle+": "+e.subBookTitle})})]})]});return o.jsxs(Or,{children:[e.showAudioSeekBar&&r(),y()]})}function Dt(e){var W,d;const[n,i]=l.useState(e.isExistingInBookmark?100:0),[s,a]=l.useState(null),[f,w]=l.useState(!1),[B,M]=l.useState(0),{textSize:h,theme:_,readingLanguage:k}=l.useContext(ae),{mainBGColor:R}=se(_),b=l.useRef(null),N=l.useRef(n),H=e.refer,X=window.matchMedia("(orientation: portrait)").matches;l.useEffect(()=>{N.current=n},[n]),l.useEffect(()=>{if(e.verse.verseHeader&&b.current&&H.current&&(b.current.style.height=`${H.current.getBoundingClientRect().height-4}px`,b.current.style.bottom="2px",b.current.style.alignSelf="self-end"),b.current&&H.current&&H.current.offsetHeight>0&&H.current.offsetHeight<=24){const c=b.current.children[0];c.style.width="20px",c.style.height="20px",c.children[1].style.width="10px",c.children[1].style.height="10px"}},[e.verse.verseHeader,e.translatePanelHeight,X]);const v=l.useCallback(c=>{if(c>0&&c<et){const u=c/et*100,t=e.isExistingInBookmark?100-u:u;i(t),N.current=t}else if(c>0){const u=e.isExistingInBookmark?0:100;i(u),N.current=u}else{const u=e.isExistingInBookmark?100:0;i(u),N.current=u}},[e.isExistingInBookmark]),V=c=>{var t;w(!0),M(c);const u=(t=H.current)==null?void 0:t.getAttribute("data-id");u&&a(u)},q=c=>{if(!f)return;const u=Math.max(0,c-B);H.current&&u>Le&&e.isLoggedIn&&u<qt&&(H.current.style.left=`${u-Le}px`,v(u-Le-Xt))},x=()=>{w(!1),H.current&&(!e.isExistingInBookmark&&N.current==100||e.isExistingInBookmark&&N.current==0?s&&e.handleBookmark(s):e.isExistingInBookmark?(i(100),N.current=100):(i(0),N.current=0),H.current.style.transitionDuration=".5s",H.current.style.left="0px")};l.useEffect(()=>{const c=H.current;if(c){const u=L=>{L.preventDefault(),V(L.clientX)},t=L=>{L.preventDefault(),q(L.clientX)},r=L=>{L.preventDefault(),x()},y=L=>{V(L.touches[0].clientX)},p=L=>{q(L.touches[0].clientX)},I=L=>{x()};return c.addEventListener("mousedown",u),document.addEventListener("mousemove",t),document.addEventListener("mouseup",r),c.addEventListener("touchstart",y),c.addEventListener("touchmove",p),c.addEventListener("touchend",I),()=>{c.removeEventListener("mousedown",u),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",r),c.removeEventListener("touchstart",y),c.removeEventListener("touchmove",p),c.removeEventListener("touchend",I)}}},[H,v,e.handleBookmark,B,f]);const g=c=>{for(var u in c)if(c[u]!==null&&c[u]!=="")return!0;return!1};return o.jsxs(Rr,{children:[e.verse.verseHeader&&g(e.verse.verseHeader)&&o.jsx(Lr,{"data-id":e.verse.verseId,"data-index":e.index,style:{backgroundColor:R},children:o.jsx(re,{fontFamily:"Inter",fontWeight:"700",backgroundColor:R,fontSize:h,lineHeight:h+15,direction:k==Ie?"rtl":"ltr",children:(W=e.verse.verseHeader)==null?void 0:W[k]})}),o.jsx(nr,{progress:n,refer:b,backgroundColor:R}),o.jsx(Pr,{"data-id":e.verse.verseId,"data-index":e.index,ref:e.refer,children:o.jsx(re,{fontFamily:"Inter",fontSize:h,backgroundColor:R,dataIndex:e.index.toString(),lineHeight:h+20,direction:k==Ie?"rtl":"ltr",children:(d=e.verse.verseText)==null?void 0:d[k]})})]})}function $r(e){var V,q;const[n,i]=l.useState([]),[s,a]=l.useState([]),{scrollTopVerseIndex:f,setScrollTopVerseIndex:w,setHiddenTopVersePercentage:B,activeScroll:M,setActiveScroll:h}=l.useContext(ke),_=l.useRef(null),k=l.useRef([]);k.current=(V=e.verses)==null?void 0:V.map((x,g)=>k.current[g]??l.createRef());const{theme:R,displayType:b}=l.useContext(ae),{mainBGColor:N,textColor:H}=se(R),X=l.useCallback(()=>{let x=[];return k.current.forEach(g=>{g.current&&g.current.children[0]&&x.push(g.current.children[0].offsetHeight)}),x},[k]);l.useEffect(()=>{const x=X();i(x);const g=x.reduce((W,d,c)=>(W[c]=(W[c-1]||0)+d,W),[]);a(g)},[e.verses,X]);const v=l.useCallback(()=>{if(!_.current)return;const x=_.current.scrollTop;h(Xe);let g=0,W=s.length-1;for(;g<=W;){const p=Math.floor((g+W)/2);s[p]>x?W=p-1:g=p+1}const d=g-1;w(d);const c=d>0?s[d-1]:0,u=n[d],r=(x-c)/u*100,y=Math.min(Math.max(r,0),100);B(y)},[s,n,w]);return l.useEffect(()=>{const x=_.current;if(x)return x.addEventListener("scroll",v),x.addEventListener("scrollend",()=>h(Ue)),()=>{x.removeEventListener("scroll",v)}}),l.useEffect(()=>{var x;if((b===Y.SPLIT_PANEL||b===Y.ONLY_TRNSLATION)&&f>=0&&(M==Ct||M==Te)){const g=k.current[Number(f)];(x=g==null?void 0:g.current)==null||x.scrollIntoView()}},[f]),o.jsx(kr,{style:{backgroundColor:N,color:H,height:e.height},children:o.jsx(Ar,{ref:_,children:(q=e.verses)==null?void 0:q.map((x,g)=>o.jsx(Dt,{refer:k.current[g],verse:x,index:g,isExistingInBookmark:e.bookmarks.some(W=>W.verseId===x.verseId),isLoggedIn:e.isLoggedIn,translatePanelHeight:e.height,handleBookmark:e.handleBookmark},g))})})}const Gr=P(j)({margin:"0px",height:"100vh"}),Qr=P(j)(({showaudioseekbar:e})=>({width:"100%",padding:"20px",height:e=="true"?"calc(100vh - 150px)":"calc(100vh - 100px)"})),Jr=P(j)({width:"45px",height:"8px",margin:"auto",marginTop:"-4px",position:"relative",zIndex:"2",cursor:"grab","&:active":{cursor:"grabbing"}}),Zr=P(j)({width:"100%",height:"100%",overflowX:"hidden",overflowY:"auto",margin:"0px",paddingBottom:"0px"}),en=P(j)({width:"100%",padding:"15px"});function tn(e){const n=window.matchMedia("(orientation: portrait)").matches,[i,s]=l.useState([]),[a,f]=l.useState(0),[w,B]=l.useState(null),[M,h]=l.useState(!1),[_,k]=l.useState(n?200:120),{theme:R,displayType:b}=l.useContext(ae),{mainBGColor:N,topTextColor:H}=se(R),{scrollTopVerseIndex:X}=l.useContext(ke),v=l.useRef([]),V=l.useRef([]);v.current=i==null?void 0:i.map((m,S)=>v.current[S]??l.createRef()),V.current=i==null?void 0:i.map((m,S)=>V.current[S]??l.createRef());const q=new URLSearchParams(window.location.search),x=100,g=100;window.matchMedia("(orientation: portrait)").addEventListener("change",m=>{const S=m.matches;k(S?200:120)});const[W,d]=l.useState(typeof window<"u"?window.innerHeight:1e3),c=e.showAudioSeekBar?W-150-_:W-100-_,u=Gt(),{t}=Et(),r=l.useCallback(m=>{tt.fetchVerses(m).then(S=>{s(S.verses),S&&S.length>0&&B(S.chapterAudio),e.dispatch({type:he.ADD_CHAPTERINFO,payload:{chapterInfo:S}}),h(!1)}).catch(S=>{h(!1),Z.custom(O=>o.jsx(ee,{text:t(S),offset:70,visible:O.visible}))})},[]),y=l.useCallback(m=>{if(e.chapterInfos&&e.chapterInfos.length>0){const S=e.chapterInfos.filter(O=>O.chapterId===m);S.length>0?(s(S[0].verses),B(S[0].chapterAudio)):r(m),h(!1)}else r(m),h(!1)},[e.chapterInfos]);l.useEffect(()=>{var D;h(!0);let m="";localStorage.getItem(J)?m=localStorage.getItem(J)||"":(m=q.get("chapterId")||"",localStorage.setItem(J,m));const S=q.get("subBookId"),O=q.get("verseId");if(O){const A=i.filter(T=>T.verseId==O);A&&A.length>0&&(f(A[0].verseNumber),b==Y.VERSE_BY_VERSE&&((D=V.current[A[0].verseNumber-1].current)==null||D.scrollIntoView()))}if(m)if(e.subBookInfos&&e.subBookInfos.length>0){const A=e.subBookInfos.filter(T=>T.subBookId===S);if(A.length>0){const T=A[0].chapterInfos.filter(G=>G.chapterId===m);T.length>0&&(s(T[0].verses),B(T[0].chapterAudio),h(!1)),h(!1)}else y(m),h(!1)}else y(m),h(!1);else h(!1)},[i]),l.useEffect(()=>{const m=()=>d(window.innerHeight);return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),l.useEffect(()=>{h(!0);const m=localStorage.getItem(J)||q.get("chapterId");let S=!1;if(e.userHistory&&e.userHistory.length>0&&e.userHistory.forEach(O=>{if(O.readChapterIds.includes(m)){S=!0,h(!1);return}}),!S){const O={chapterId:m};tt.saveHistory(O).then(D=>{e.dispatch({type:he.SET_USER_HISTORY,payload:{userHistories:D}}),h(!1)})}},[]),l.useEffect(()=>{b==Y.ONLY_TRNSLATION&&k(0)},[]),l.useEffect(()=>{var m,S;b==Y.VERSE_BY_VERSE&&X>=0&&((S=(m=V.current[X])==null?void 0:m.current)==null||S.scrollIntoView())},[X,b,V,i]);const p=l.useCallback(m=>{var D;h(!0);const S=(D=e.bookmark)==null?void 0:D.find(A=>A.verseId===m),O={verseId:m};try{if(!S)rt.saveBookmark(O).then(A=>{e.dispatch({type:he.ADD_BOOKMARK,payload:{bookmark:A.bookmark}}),h(!1),Z.custom(T=>o.jsx(ee,{text:t("Bookmark Saved"),type:Se.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:T.visible}))}).catch(A=>{h(!1),Z.custom(T=>o.jsx(ee,{text:t(A),offset:e.showAudioSeekBar?125:70,visible:T.visible}))});else{const A=e.bookmark.filter(T=>T.verseId==m);A&&A.length>0&&rt.deleteBookmark(A[0]._id).then(()=>{e.dispatch({type:he.REMOVE_BOOKMARK,payload:{bookmarkId:S._id}}),h(!1),Z.custom(T=>o.jsx(ee,{text:t("Bookmark Deleted"),type:Se.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:T.visible}))}).catch(T=>{h(!1),Z.custom(G=>o.jsx(ee,{text:t(T),type:Se.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:G.visible}))})}}catch(A){h(!1),Z.custom(T=>o.jsx(ee,{text:t(A),type:Se.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:T.visible}))}},[e,t]),I=()=>{localStorage.removeItem(J),u("/auth/login")},L=l.useCallback((m,S,O)=>{let D=S+(O-m),A=W-150-D;D<x?(D=x,A=W-150-x):A<g&&(D=W-150-g),k(D)},[W]),F=m=>{const S=m.clientY,O=_,D=T=>L(S,O,T.clientY),A=()=>{document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",A)};document.addEventListener("mousemove",D),document.addEventListener("mouseup",A)},K=m=>{const S=m.touches[0].clientY,O=_,D=T=>L(S,O,T.touches[0].clientY),A=()=>{document.removeEventListener("touchmove",D),document.removeEventListener("touchend",A)};document.addEventListener("touchmove",D),document.addEventListener("touchend",A)},U=m=>{e.dispatch({type:he.SET_AUDIO_SEEK_BAR_STATUS,payload:{showAudioSeekBar:m}})},z=()=>{u("/sound-settings")},$=()=>{localStorage.removeItem(J),u(-1)},ne=l.useCallback(m=>{var A;const S=q.get("bookId"),O=localStorage.getItem(J);if(h(!0),!O&&q.get("chapterId")){const T=q.get("chapterId");T&&localStorage.setItem(J,T)}const D=e.bookInfos.filter(T=>T.bookId==S);D&&(D==null?void 0:D.length)>0&&((A=D[0])==null||A.subBooks.forEach(T=>{var ue;const G=(ue=T.chapterInfos)==null?void 0:ue.filter(de=>de.chapterId==O);if(G&&G.length>0){const de=T.chapterInfos.length,ce=G[0].chapterNumber;if(m==Fe)if(ce==de-1)Z.custom(ie=>o.jsx(ee,{text:t("Last Chapter"),offset:125,visible:ie.visible})),h(!1);else{const Q=T.chapterInfos.filter(oe=>oe.chapterNumber==ce+1)[0].chapterId;localStorage.setItem(J,Q),y(Q)}else if(ce==1)Z.custom(ie=>o.jsx(ee,{text:t("First Chapter"),offset:e.showAudioSeekBar?125:70,visible:ie.visible})),h(!1);else{const Q=T.chapterInfos.filter(oe=>oe.chapterNumber==ce-1)[0].chapterId;localStorage.setItem(J,Q),y(Q)}}}))},[]);return o.jsxs(Gr,{style:{backgroundColor:N},children:[o.jsxs(Qr,{showaudioseekbar:e.showAudioSeekBar?"true":"false",children:[b==Y.SPLIT_PANEL&&o.jsxs(o.Fragment,{children:[o.jsx(Br,{verses:i,height:_,topVerseIndex:a}),o.jsx(Jr,{style:{backgroundColor:H},onMouseDown:F,onTouchStart:K})]}),(b==Y.ONLY_TRNSLATION||b==Y.SPLIT_PANEL)&&o.jsx($r,{verses:i,height:c,originPanelHeight:_,bookmarks:e.bookmark,isLoggedIn:!!e.currentUser,topVerseIndex:a,handleBookmark:p,moveToLogin:I}),b==Y.VERSE_BY_VERSE&&o.jsx(Zr,{children:i.map((m,S)=>{var O;return o.jsxs(en,{ref:V.current[S],children:[o.jsx(Ye,{verse:m,refer:v.current[S],index:S}),o.jsx(Dt,{refer:v.current[S],verse:m,index:S,isLoggedIn:!!e.currentUser,handleBookmark:p,isExistingInBookmark:((O=e.bookmark.filter(D=>D.verseId==m.verseId))==null?void 0:O.length)>0})]},S)})})]}),o.jsx(zr,{src:w,bookTitle:q.get("book")||"",subBookTitle:q.get("subBook")||"",showAudioSeekBar:e.showAudioSeekBar,verses:i,setAudioSeekBarStatus:U,moveToSoundSettingPage:z,moveToPrevPage:$,handleNavigateBtn:ne}),M&&o.jsx(Qt,{})]})}const rn=e=>({bookmark:e.books.bookmark,bookInfos:e.books.bookInfos,subBookInfos:e.books.subBookInfos,chapterInfos:e.books.chapterInfos,userHistory:e.books.userHistory,currentUser:e.user.currentUser,showAudioSeekBar:e.pageStatus.showAudioSeekBar}),hn=$t(rn)(tn);export{hn as default};
