var H=Object.defineProperty;var U=(e,t,g)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:g}):e[t]=g;var b=(e,t,g)=>U(e,typeof t!="symbol"?t+"":t,g);import{b as o,a3 as v,j as s,au as N}from"./index-DxDh7wOW.js";import{s as C,B as P,S as p,g as k,c as I,u as R,a as r,k as y}from"./App-Cx9agqBq.js";import{u as M}from"./useOrientation-lH-PWYj5.js";import{B as w,S as F,L as K,T as O,H as W,a as A,b as z,c as D}from"./styled-B0LBPenz.js";import{I as T,T as B}from"./index-BN9BPm6P.js";import{H as Y}from"./index-Bqbr5fKM.js";import{C as q}from"./index-Da7Cv1xW.js";import{B as J}from"./Button-COq_sq7J.js";import{L as Q}from"./index-DVmpFdwY.js";import{S as V}from"./index-BnxFECC5.js";import{C as _}from"./index-DtOeouuV.js";import{a as j}from"./auth.service-Bm0lVtX_.js";import{a as X}from"./axios-upsvKRUO.js";import"./index-CprAwUME.js";const Z=C(P)({display:"flex"}),$=C(Z)({justifyContent:"center",alignItems:"center"}),ee=C($)({width:"100dvw",height:"100dvh"});function ae(e){const{theme:t}=o.useContext(p),{headerBGColor:g,logoTextColor:c}=k(t),[i,m]=o.useState(""),[h,E]=o.useState("");return o.useEffect(()=>{var u,x,L,f,S,n;if(e.isHeaven){const a=(u=e.pageTerms)==null?void 0:u.texts.find(l=>l.variable=="Welcome Heavenly");m(((x=a==null?void 0:a.text)==null?void 0:x[e.appLanguage])||((L=a==null?void 0:a.text)==null?void 0:L.en)||"")}else{const a=(f=e.pageTerms)==null?void 0:f.texts.find(l=>l.variable=="Welcome");m(((S=a==null?void 0:a.text)==null?void 0:S[e.appLanguage])||((n=a==null?void 0:a.text)==null?void 0:n.en)||"")}},[e.isHeaven,e.pageTerms,e.appLanguage]),o.useEffect(()=>{const u=e.isHeaven?t==v.EASY_OCEAN?T.main_logo_heaven_easyocean:T.main_logo_heaven:t==v.EASY_OCEAN?T.main_logo_easyocean:T.main_logo;E(u)},[e.isHeaven,t]),s.jsxs(w,{style:{backgroundColor:g},children:[s.jsx(F,{children:s.jsx(Y,{isLogin:e.isLoggedIn,textColor:c,itemBgColor:g,terms:e.pageTerms,onLogin:e.onLogin,onSettings:e.onSettings})}),s.jsx(K,{src:h}),s.jsx(O,{children:s.jsx(B,{color:c,fontFamily:"Buenard",fontWeight:"700",textAlign:"center",fontSize:36,lineHeight:47,children:i})})]})}function te(e){var h,E,u,x,L,f,S,n;const{theme:t}=o.useContext(p),{mainBGColor:g,altTextColor:c}=k(t),i=a=>{const l=a.target.value;e.handleLanguageChange(l)},m=a=>{e.handleKeepLanguageChange(a.target.checked)};return s.jsxs(W,{style:{backgroundColor:g},children:[s.jsx(B,{color:c,children:((E=(h=e.pageTerms.texts.find(a=>a.variable=="Reading Language"))==null?void 0:h.text)==null?void 0:E[e.appLanguage])||"Reading Language"}),s.jsx(A,{children:s.jsx(V,{label:"",options:e.languages,value:e.appLanguage,textColor:c,backgroundColor:g,onChange:i})}),s.jsx(A,{children:s.jsx(q,{label:((x=(u=e.pageTerms.texts.find(a=>a.variable=="Keep App"))==null?void 0:u.text)==null?void 0:x[e.appLanguage])||"Keep App in English",checked:e.keepLanguage,onChange:m})}),s.jsx(z,{children:s.jsx(J,{label:((f=(L=e.pageTerms.texts.find(a=>a.variable=="Start"))==null?void 0:L.text)==null?void 0:f[e.appLanguage])||"Start",onClick:e.onStartClicked,size:"medium"})}),s.jsx(D,{children:s.jsx(Q,{label:((n=(S=e.pageTerms.texts.find(a=>a.variable=="Save App"))==null?void 0:S.text)==null?void 0:n[e.appLanguage])||"Save this as an app"})})]})}class ne{constructor(){b(this,"getAllTerms",()=>new Promise((t,g)=>{const c=N+"/translator/appTexts";X.get(c).then(i=>{t(i.data)}).catch(i=>{g(this.getErrorMessage(i))})}))}getErrorMessage(t){let g=t.message;return t.response&&t.response.data&&t.response.data.message&&(g=t.response.data.message),g}}const se=new ne;function ge(e){const t=M(),g=R(),[c,i]=o.useState(!1),[m,h]=o.useState(),{readingLanguage:E}=o.useContext(p);o.useEffect(()=>{se.getAllTerms().then(n=>{var l,d;e.dispatch({type:r.SET_TERMS,payload:{terms:n}});const a=n.find(G=>G.pageTitle="Welcome Page");((l=a==null?void 0:a.isPublished)!=null&&l[E]||(d=a==null?void 0:a.isPublished)!=null&&d.en)&&h(a)}).catch(n=>{y.custom(a=>s.jsx(_,{text:n,visible:a.visible}))})},[]),o.useEffect(()=>{window.location.href.includes("holy")?i(!1):i(!0)},[]),o.useEffect(()=>{const n=e.terms.find(a=>a.pageTitle="Welcome Page");h(n)},[e.terms]),o.useEffect(()=>{j.getAllLanguages().then(n=>{const l=n.languages.map(d=>({value:d==="English"?"en":d==="Arabic"?"ar":d==="Tagalog"?"tlg":d,label:d}));e.dispatch({type:r.SET_LANGUAGES,payload:{languages:l}})}).catch(n=>{y.custom(a=>s.jsx(_,{text:n,visible:a.visible}))})},[]);const u=()=>{g("/login")},x=()=>{e.dispatch({type:r.RESET_USER}),e.dispatch({type:r.RESET_BOOK}),e.dispatch({type:r.RESET_PAGE_STATUS}),j.logout()},L=()=>{g("/library")},f=n=>{e.dispatch({type:r.SET_APP_LANGUAGE,payload:{language:n}}),e.dispatch({type:r.SET_READING_LANGUAGE,payload:{language:n}})},S=n=>{e.dispatch({type:r.SET_APP_LANGUAGE,payload:{language:"en"}}),e.dispatch({type:r.SET_READING_LANGUAGE,payload:{language:"en"}}),e.dispatch({type:r.SET_KEEP_EN_LANGUAGE,payload:{keepLanguage:n}})};return s.jsxs(ee,{flexDirection:t?"column":"row",children:[s.jsx(ae,{isLoggedIn:e.currentUser!=null,isHeaven:c,pageTerms:m||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},appLanguage:e.appLanguage,onLogin:e.currentUser?x:u,onSettings:()=>g("/settings")}),s.jsx(te,{pageTerms:m||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},appLanguage:e.appLanguage,readingLanguage:e.readingLanguage,keepLanguage:e.keepLanguage,languages:e.languages,onStartClicked:L,handleLanguageChange:f,handleKeepLanguageChange:S})]})}function oe(e){return{currentUser:e.user.currentUser,appLanguage:e.user.appLanguage,readingLanguage:e.user.readingLanguage,keepLanguage:e.user.keepEnLanguage,languages:e.user.languages,terms:e.terms.terms}}const pe=I(oe)(ge);export{pe as default};
