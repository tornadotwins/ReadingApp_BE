import{b as l,j as o,Q as k,af as Ht,U as G,ai as Ee,av as ze,aw as ke,ax as At,X as Vt,ac as Wt,$ as Me,aa as $e,Y as et,ay as tt,az as Ae,aA as J,aB as Se,aC as rt,aD as qt,aE as Xt,aF as nt,an as Oe,am as _e}from"./index-Dibo9daf.js";import{S as ae,g as se,aH as Ut,aI as Ft,aJ as Yt,aK as Kt,s as P,B as j,aL as Pe,aM as zt,u as Lt,_ as Z,c as $t,d as Gt,e as he}from"./App-DcjgFMkt.js";import{I as T,T as ne}from"./images-CNt9VUNy.js";import{p as Qt}from"./index-RsN9iFDU.js";import{C as ee,L as Jt}from"./index-40x-UAt7.js";import{a as Ne}from"./auth.service-DyFIPSgW.js";import{b as it}from"./book.service-DMAE4z4a.js";import{b as ot}from"./bookmark.service-DVfdhCbO.js";import"./index-DJ40jJBP.js";import"./axios-BimPEqV4.js";function Zt(e){const{theme:n}=l.useContext(ae),{buttonColor:i,buttonTextColor:s}=se(n);return o.jsx(Ut,{ref:e.refer,"data-id":e.dataId,backgroundColor:i,children:o.jsxs(Ft,{progresscolor:s,children:[o.jsx(Yt,{variant:"determinate",value:e.progress,thickness:2}),o.jsx(Kt,{src:n==k.EASY_OCEAN?T.bookmark2_white:T.bookmark2_default})]})})}var Rt={};function er(e){if(e&&e.__esModule)return e;var n={};if(e!=null){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};s.get||s.set?Object.defineProperty(n,i,s):n[i]=e[i]}}return n.default=e,n}var Pt=er,re={},De,at;function tr(){if(at)return De;at=1;function e(n){return n&&n.__esModule?n:{default:n}}return De=e,De}var we,st;function rr(){if(st)return we;st=1;function e(){return we=e=Object.assign||function(n){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a])}return n},e.apply(this,arguments)}return we=e,we}var je,lt;function nr(){if(lt)return je;lt=1;function e(n,i){if(n==null)return{};var s={},a=Object.keys(n),h,I;for(I=0;I<a.length;I++)h=a[I],!(i.indexOf(h)>=0)&&(s[h]=n[h]);return s}return je=e,je}var He,ct;function ir(){if(ct)return He;ct=1;var e=nr();function n(i,s){if(i==null)return{};var a=e(i,s),h,I;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(i);for(I=0;I<p.length;I++)h=p[I],!(s.indexOf(h)>=0)&&Object.prototype.propertyIsEnumerable.call(i,h)&&(a[h]=i[h])}return a}return He=n,He}var Ve,ut;function or(){if(ut)return Ve;ut=1;function e(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}return Ve=e,Ve}var We,dt;function ar(){if(dt)return We;dt=1;function e(i,s){for(var a=0;a<s.length;a++){var h=s[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}function n(i,s,a){return s&&e(i.prototype,s),a&&e(i,a),i}return We=n,We}var ge,ft;function sr(){if(ft)return ge;ft=1;function e(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(a){return typeof a}:e=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e(i)}function n(i){return typeof Symbol=="function"&&e(Symbol.iterator)==="symbol"?ge=n=function(a){return e(a)}:ge=n=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":e(a)},n(i)}return ge=n,ge}var qe,ht;function lr(){if(ht)return qe;ht=1;function e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}return qe=e,qe}var Xe,gt;function cr(){if(gt)return Xe;gt=1;var e=sr(),n=lr();function i(s,a){return a&&(e(a)==="object"||typeof a=="function")?a:n(s)}return Xe=i,Xe}var Ie,pt;function ur(){if(pt)return Ie;pt=1;function e(n){return Ie=e=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},e(n)}return Ie=e,Ie}var Ce,vt;function dr(){if(vt)return Ce;vt=1;function e(n,i){return Ce=e=Object.setPrototypeOf||function(a,h){return a.__proto__=h,a},e(n,i)}return Ce=e,Ce}var Ue,xt;function fr(){if(xt)return Ue;xt=1;var e=dr();function n(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(s&&s.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),s&&e(i,s)}return Ue=n,Ue}var Fe,mt;function Bt(){if(mt)return Fe;mt=1;var e=function(){};return Fe=e,Fe}var Ye={},Ke,St;function Be(){if(St)return Ke;St=1;function e(n){return n&&n.__esModule?n:{default:n}}return Ke=e,Ke}var pe={},bt;function hr(){if(bt)return pe;bt=1;var e=Be();Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=void 0;var n=e(l);e(Bt());var i=function(h){h.index;var I=h.children;n.default.Children.count(I)},s=i;return pe.default=s,pe}var Te={},ve={},yt;function Mt(){if(yt)return ve;yt=1,Object.defineProperty(ve,"__esModule",{value:!0}),ve.default=void 0;var e={RESISTANCE_COEF:.6,UNCERTAINTY_THRESHOLD:3};return ve.default=e,ve}var _t;function gr(){if(_t)return Te;_t=1;var e=Be();Object.defineProperty(Te,"__esModule",{value:!0}),Te.default=s;var n=e(l),i=e(Mt());function s(a){var h=a.children,I=a.startIndex,p=a.startX,L=a.pageX,C=a.viewLength,E=a.resistance,w=n.default.Children.count(h)-1,M=I+(p-L)/C,R;return E?M<0?M=Math.exp(M*i.default.RESISTANCE_COEF)-1:M>w&&(M=w+1-Math.exp((w-M)*i.default.RESISTANCE_COEF)):M<0?(M=0,R=(M-I)*C+L):M>w&&(M=w,R=(M-I)*C+L),{index:M,startX:R}}return Te}var xe={},wt;function pr(){if(wt)return xe;wt=1;var e=Be();Object.defineProperty(xe,"__esModule",{value:!0}),xe.default=void 0;var n=e(l),i=function(h,I){var p=!1,L=function(H){return H?H.key:"empty"};if(h.children.length&&I.children.length){var C=n.default.Children.map(h.children,L),E=C[h.index];if(E!=null){var w=n.default.Children.map(I.children,L),M=w[I.index];E===M&&(p=!0)}}return p},s=i;return xe.default=s,xe}var me={},It;function vr(){if(It)return me;It=1,Object.defineProperty(me,"__esModule",{value:!0}),me.default=void 0;function e(i,s){var a=i%s;return a<0?a+s:a}var n=e;return me.default=n,me}var Ct;function xr(){return Ct||(Ct=1,function(e){var n=Be();Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"checkIndexBounds",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"computeIndex",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"constant",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"getDisplaySameSlide",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"mod",{enumerable:!0,get:function(){return I.default}});var i=n(hr()),s=n(gr()),a=n(Mt()),h=n(pr()),I=n(vr())}(Ye)),Ye}var Tt;function mr(){if(Tt)return re;Tt=1;var e=Pt,n=tr();Object.defineProperty(re,"__esModule",{value:!0}),re.getDomTreeShapes=d,re.findNativeHandler=Y,re.default=re.SwipeableViewsContext=void 0;var i=n(rr()),s=n(ir()),a=n(or()),h=n(ar()),I=n(cr()),p=n(ur()),L=n(fr()),C=e(l);n(Qt),n(Bt());var E=xr();function w(f,_,x,t){return f.addEventListener(_,x,t),{remove:function(){f.removeEventListener(_,x,t)}}}var M={container:{direction:"ltr",display:"flex",willChange:"transform"},slide:{width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"}},R={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(_){return"translate(".concat(-_,"%, 0)")},"x-reverse":function(_){return"translate(".concat(_,"%, 0)")},y:function(_){return"translate(0, ".concat(-_,"%)")},"y-reverse":function(_){return"translate(0, ".concat(_,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function H(f,_){var x=_.duration,t=_.easeFunction,r=_.delay;return"".concat(f," ").concat(x," ").concat(t," ").concat(r)}function X(f,_){var x=R.rotationMatrix[_];return{pageX:x.x[0]*f.pageX+x.x[1]*f.pageY,pageY:x.y[0]*f.pageX+x.y[1]*f.pageY}}function N(f){return f.touches=[{pageX:f.pageX,pageY:f.pageY}],f}function d(f,_){for(var x=[];f&&f!==_&&f!==document.body&&!f.hasAttribute("data-swipeable");){var t=window.getComputedStyle(f);t.getPropertyValue("position")==="absolute"||t.getPropertyValue("overflow-x")==="hidden"?x=[]:(f.clientWidth>0&&f.scrollWidth>f.clientWidth||f.clientHeight>0&&f.scrollHeight>f.clientHeight)&&x.push({element:f,scrollWidth:f.scrollWidth,scrollHeight:f.scrollHeight,clientWidth:f.clientWidth,clientHeight:f.clientHeight,scrollLeft:f.scrollLeft,scrollTop:f.scrollTop}),f=f.parentNode}return x}var B=null;function Y(f){var _=f.domTreeShapes,x=f.pageX,t=f.startX,r=f.axis;return _.some(function(c){var u=x>=t;(r==="x"||r==="y")&&(u=!u);var b=Math.round(c[R.scrollPosition[r]]),V=b>0,K=b+c[R.clientLength[r]]<c[R.scrollLength[r]];return u&&K||!u&&V?(B=c.element,!0):!1})}var S=C.createContext();re.SwipeableViewsContext=S;var g=function(f){(0,L.default)(_,f);function _(x){var t;return(0,a.default)(this,_),t=(0,I.default)(this,(0,p.default)(_).call(this,x)),t.rootNode=null,t.containerNode=null,t.ignoreNextScrollEvents=!1,t.viewLength=0,t.startX=0,t.lastX=0,t.vx=0,t.startY=0,t.isSwiping=void 0,t.started=!1,t.startIndex=0,t.transitionListener=null,t.touchMoveListener=null,t.activeSlide=null,t.indexCurrent=null,t.firstRenderTimeout=null,t.setRootNode=function(r){t.rootNode=r},t.setContainerNode=function(r){t.containerNode=r},t.setActiveSlide=function(r){t.activeSlide=r,t.updateHeight()},t.handleSwipeStart=function(r){var c=t.props.axis,u=X(r.touches[0],c);t.viewLength=t.rootNode.getBoundingClientRect()[R.length[c]],t.startX=u.pageX,t.lastX=u.pageX,t.vx=0,t.startY=u.pageY,t.isSwiping=void 0,t.started=!0;var b=window.getComputedStyle(t.containerNode),V=b.getPropertyValue("-webkit-transform")||b.getPropertyValue("transform");if(V&&V!=="none"){var K=V.split("(")[1].split(")")[0].split(","),$=window.getComputedStyle(t.rootNode),U=X({pageX:parseInt(K[4],10),pageY:parseInt(K[5],10)},c);t.startIndex=-U.pageX/(t.viewLength-parseInt($.paddingLeft,10)-parseInt($.paddingRight,10))||0}},t.handleSwipeMove=function(r){if(!t.started){t.handleTouchStart(r);return}if(!(B!==null&&B!==t.rootNode)){var c=t.props,u=c.axis,b=c.children,V=c.ignoreNativeScroll,K=c.onSwitching,$=c.resistance,U=X(r.touches[0],u);if(t.isSwiping===void 0){var q=Math.abs(U.pageX-t.startX),v=Math.abs(U.pageY-t.startY),m=q>v&&q>E.constant.UNCERTAINTY_THRESHOLD;if(!$&&(u==="y"||u==="y-reverse")&&(t.indexCurrent===0&&t.startX<U.pageX||t.indexCurrent===C.Children.count(t.props.children)-1&&t.startX>U.pageX)){t.isSwiping=!1;return}if(q>v&&r.preventDefault(),m===!0||v>E.constant.UNCERTAINTY_THRESHOLD){t.isSwiping=m,t.startX=U.pageX;return}}if(t.isSwiping===!0){r.preventDefault(),t.vx=t.vx*.5+(U.pageX-t.lastX)*.5,t.lastX=U.pageX;var D=(0,E.computeIndex)({children:b,resistance:$,pageX:U.pageX,startIndex:t.startIndex,startX:t.startX,viewLength:t.viewLength}),O=D.index,y=D.startX;if(B===null&&!V){var A=d(r.target,t.rootNode),Q=Y({domTreeShapes:A,startX:t.startX,pageX:U.pageX,axis:u});if(Q)return}y?t.startX=y:B===null&&(B=t.rootNode),t.setIndexCurrent(O);var ie=function(){K&&K(O,"move")};(t.state.displaySameSlide||!t.state.isDragging)&&t.setState({displaySameSlide:!1,isDragging:!0},ie),ie()}}},t.handleSwipeEnd=function(){if(B=null,!!t.started&&(t.started=!1,t.isSwiping===!0)){var r=t.state.indexLatest,c=t.indexCurrent,u=r-c,b;Math.abs(t.vx)>t.props.threshold?t.vx>0?b=Math.floor(c):b=Math.ceil(c):Math.abs(u)>t.props.hysteresis?b=u>0?Math.floor(c):Math.ceil(c):b=r;var V=C.Children.count(t.props.children)-1;b<0?b=0:b>V&&(b=V),t.setIndexCurrent(b),t.setState({indexLatest:b,isDragging:!1},function(){t.props.onSwitching&&t.props.onSwitching(b,"end"),t.props.onChangeIndex&&b!==r&&t.props.onChangeIndex(b,r,{reason:"swipe"}),c===r&&t.handleTransitionEnd()})}},t.handleTouchStart=function(r){t.props.onTouchStart&&t.props.onTouchStart(r),t.handleSwipeStart(r)},t.handleTouchEnd=function(r){t.props.onTouchEnd&&t.props.onTouchEnd(r),t.handleSwipeEnd(r)},t.handleMouseDown=function(r){t.props.onMouseDown&&t.props.onMouseDown(r),r.persist(),t.handleSwipeStart(N(r))},t.handleMouseUp=function(r){t.props.onMouseUp&&t.props.onMouseUp(r),t.handleSwipeEnd(N(r))},t.handleMouseLeave=function(r){t.props.onMouseLeave&&t.props.onMouseLeave(r),t.started&&t.handleSwipeEnd(N(r))},t.handleMouseMove=function(r){t.props.onMouseMove&&t.props.onMouseMove(r),t.started&&t.handleSwipeMove(N(r))},t.handleScroll=function(r){if(t.props.onScroll&&t.props.onScroll(r),r.target===t.rootNode){if(t.ignoreNextScrollEvents){t.ignoreNextScrollEvents=!1;return}var c=t.state.indexLatest,u=Math.ceil(r.target.scrollLeft/r.target.clientWidth)+c;t.ignoreNextScrollEvents=!0,r.target.scrollLeft=0,t.props.onChangeIndex&&u!==c&&t.props.onChangeIndex(u,c,{reason:"focus"})}},t.updateHeight=function(){if(t.activeSlide!==null){var r=t.activeSlide.children[0];r!==void 0&&r.offsetHeight!==void 0&&t.state.heightLatest!==r.offsetHeight&&t.setState({heightLatest:r.offsetHeight})}},t.state={indexLatest:x.index,isDragging:!1,renderOnlyActive:!x.disableLazyLoading,heightLatest:0,displaySameSlide:!0},t.setIndexCurrent(x.index),t}return(0,h.default)(_,[{key:"componentDidMount",value:function(){var t=this;this.transitionListener=w(this.containerNode,"transitionend",function(r){r.target===t.containerNode&&t.handleTransitionEnd()}),this.touchMoveListener=w(this.rootNode,"touchmove",function(r){t.props.disabled||t.handleSwipeMove(r)},{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout(function(){t.setState({renderOnlyActive:!1})},0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var r=t.index;typeof r=="number"&&r!==this.props.index&&(this.setIndexCurrent(r),this.setState({displaySameSlide:(0,E.getDisplaySameSlide)(this.props,t),indexLatest:r}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"getSwipeableViewsContext",value:function(){var t=this;return{slideUpdateHeight:function(){t.updateHeight()}}}},{key:"setIndexCurrent",value:function(t){if(!this.props.animateTransitions&&this.indexCurrent!==t&&this.handleTransitionEnd(),this.indexCurrent=t,this.containerNode){var r=this.props.axis,c=R.transform[r](t*100);this.containerNode.style.WebkitTransform=c,this.containerNode.style.transform=c}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var t=this,r=this.props;r.action;var c=r.animateHeight,u=r.animateTransitions,b=r.axis,V=r.children,K=r.containerStyle,$=r.disabled;r.disableLazyLoading;var U=r.enableMouseEvents;r.hysteresis,r.ignoreNativeScroll,r.index,r.onChangeIndex,r.onSwitching,r.onTransitionEnd,r.resistance;var q=r.slideStyle,v=r.slideClassName,m=r.springConfig,D=r.style;r.threshold;var O=(0,s.default)(r,["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"]),y=this.state,A=y.displaySameSlide,Q=y.heightLatest,ie=y.indexLatest,fe=y.isDragging,le=y.renderOnlyActive,be=$?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},W=!$&&U?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{},te=(0,i.default)({},M.slide,q),z,ce;if(fe||!u||A)z="all 0s ease 0s",ce="all 0s ease 0s";else if(z=H("transform",m),ce=H("-webkit-transform",m),Q!==0){var de=", ".concat(H("height",m));z+=de,ce+=de}var oe={height:null,WebkitFlexDirection:R.flexDirection[b],flexDirection:R.flexDirection[b],WebkitTransition:ce,transition:z};if(!le){var ye=R.transform[b](this.indexCurrent*100);oe.WebkitTransform=ye,oe.transform=ye}return c&&(oe.height=Q),C.createElement(S.Provider,{value:this.getSwipeableViewsContext()},C.createElement("div",(0,i.default)({ref:this.setRootNode,style:(0,i.default)({},R.root[b],D)},O,be,W,{onScroll:this.handleScroll}),C.createElement("div",{ref:this.setContainerNode,style:(0,i.default)({},oe,M.container,K),className:"react-swipeable-view-container"},C.Children.map(V,function(jt,Qe){if(le&&Qe!==ie)return null;var Je,Ze=!0;return Qe===ie&&(Ze=!1,c&&(Je=t.setActiveSlide,te.overflowY="hidden")),C.createElement("div",{ref:Je,style:te,className:v,"aria-hidden":Ze,"data-swipeable":"true"},jt)}))))}}]),_}(C.Component);g.displayName="ReactSwipableView",g.propTypes={},g.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1};var F=g;return re.default=F,re}(function(e){var n=Pt;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"SwipeableViewsContext",{enumerable:!0,get:function(){return i.SwipeableViewsContext}});var i=n(mr())})(Rt);const Sr=Ht(Rt),br=P(j)({width:"100%",margin:"0px"}),yr=P(j)({margin:"0px",padding:"0px",position:"relative"}),_r=P(j)({width:"100%",height:"100%",margin:"0px",padding:"0px",position:"relative"}),Ot=P(Sr)(({scrollcolor:e})=>({width:"100%",height:"100%",marginBottom:"8px",padding:"14px 0px 20px 0px","::-webkit-scrollbar-thumb":{background:"red"},"::-webkit-scrollbar-thumb: hover":{backgroundColor:e,opacity:"1"},"& .react-swipeable-view-container":{height:"100%"}})),Le=P(j)({width:"100%",padding:"0px 14px","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}}),Nt=P(j)({height:"10px",width:"100%",position:"absolute",bottom:"0",display:"flex",justifyContent:"center","& :last-child":{marginRight:"0px"}}),Re=P(j)(({active:e,linecolor:n})=>({borderTop:`1px solid ${n}`,width:e=="true"?"20px":e=="false"?"10px":"0px",color:"black",marginRight:"5px",marginTop:"5px"})),wr=P(j)(({scrollbarcolor:e})=>({width:"100%",height:"100%","::-webkit-scrollbar-thumb":{backgroundColor:"red"},"::-webkit-scrollbar-track":{backgroundColor:"transparent"},scrollbarWidth:"auto",scrollbarColor:`${e} transparent`})),Et=P(j)({width:"100%",padding:"0px",margin:"0px"}),Ir=P(j)({width:"100%",margin:"auto",padding:"20px 0px","& .MuiBox-root":{textWrap:"wrap"}}),Cr=P(j)({width:"100%",height:"100%",position:"relative",overflowX:"hidden",padding:"0px 15px"}),Tr=P(j)({width:"100%",overflow:"hidden",position:"relative",display:"flex",flexDirection:"column"}),Er=P(j)({width:"100%",padding:"20px 0px",position:"relative",display:"flex",zIndex:"2","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}}),kr=P(j)({width:"100%",margin:"0px",position:"relative",display:"flex",flexDirection:"column",zIndex:"2","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}});P(j)({width:"40px",height:"100%",backgroundColor:"#FFAA5D",justifyContent:"center",alignItems:"center"});P(j)({width:"20px",height:"50%",position:"relative"});function Ge(e){var w,M;const[n,i]=l.useState(0),{theme:s,textSize:a,referenceLanguage:h,showQuranReferences:I,displayType:p}=l.useContext(ae),{topTextColor:L,backgroundColor:C}=se(s),E=e.verse.verseReference.ref;return p==G.VERSE_BY_VERSE?o.jsxs(yr,{children:[o.jsxs(Ot,{style:{backgroundColor:C},scrollcolor:L,enableMouseEvents:!0,disabled:!I,onSwitching:R=>i(R),children:[o.jsx(Le,{children:o.jsx(Et,{"data-id":e.verse.verseId,"data-index":e.index,ref:e.refer,children:o.jsx(ne,{fontFamily:"Inter",fontSize:a-4,lineHeight:a+6,fontWeight:"700",color:L,dataIndex:e.index.toString(),language:h,direction:h==Ee?"rtl":"ltr",children:(w=e.verse.verseText)==null?void 0:w[h]})})}),o.jsx(Le,{children:E.map((R,H)=>o.jsx(ne,{fontFamily:"Inter",fontWeight:"700",fontSize:a-4,lineHeight:a+6,color:L,children:R},H))})]}),E.length>0&&I&&o.jsxs(Nt,{children:[o.jsx(Re,{active:n==0?"true":"false",linecolor:L}),o.jsx(Re,{active:n==1?"true":"false",linecolor:L})]})]}):o.jsx(Et,{"data-id":e.verse.verseId,"data-index":e.index,ref:e.refer,style:{backgroundColor:C},children:o.jsx(ne,{fontFamily:"Inter",fontSize:a-4,lineHeight:a+6,fontWeight:"700",color:L,dataIndex:e.index.toString(),language:h,direction:h==Ee?"rtl":"ltr",onTouchStart:()=>e.onTouchStart&&e.onTouchStart(e.verse.verseReference.ref),onMouseDown:()=>e.onMouseDown&&e.onMouseDown(e.verse.verseReference.ref),children:(M=e.verse.verseText)==null?void 0:M[h]})})}function Ar(e){var B,Y;const[n,i]=l.useState([]),[s,a]=l.useState(0),{scrollTopVerseIndex:h,setScrollTopVerseIndex:I,setHiddenTopVersePercentage:p,activeScroll:L,setActiveScroll:C}=l.useContext(Pe),E=l.useRef([]);E.current=(B=e.verses)==null?void 0:B.map((S,g)=>E.current[g]??l.createRef());const{theme:w,textSize:M,showQuranReferences:R,displayType:H}=l.useContext(ae),{backgroundColor:X,topTextColor:N}=se(w);l.useEffect(()=>{var S;if(H==G.SPLIT_PANEL&&h>=0&&(L==ze||L==ke)){const g=E.current[Number(h)];(S=g==null?void 0:g.current)==null||S.scrollIntoView()}},[h,H]);const d=S=>{if(H==G.SPLIT_PANEL){C(At);const g=S.currentTarget.getBoundingClientRect().top,F=S.currentTarget.clientHeight;let f=-1,_=1/0;if(E.current.forEach((x,t)=>{if(x.current){const r=x.current.getBoundingClientRect().top,c=x.current.getBoundingClientRect().bottom,u=r-g;c>g&&r<g+F&&Math.abs(u)<_&&(_=Math.abs(u),f=t)}}),f!==-1){I(f);const x=E.current[f];if(x.current){const t=x.current.getBoundingClientRect().top,r=x.current.clientHeight,c=Math.max(0,Math.min(100,(g-t)/r*100));p(c)}}}};return o.jsx(br,{style:{height:e.height},children:H===G.SPLIT_PANEL?o.jsxs(_r,{children:[o.jsxs(Ot,{style:{backgroundColor:X},scrollcolor:N,enableMouseEvents:!0,disabled:!R,onScrollCapture:L!=ze?S=>d(S):()=>{},onSwitching:S=>a(S),children:[o.jsx(Le,{children:(Y=e.verses)==null?void 0:Y.map((S,g)=>o.jsx(Ge,{refer:E.current[g],verse:S,index:g,onMouseDown:i,onTouchStart:i},g))}),o.jsx(Le,{children:n&&n.map((S,g)=>o.jsx(ne,{fontFamily:"Inter",fontWeight:"700",fontSize:M-2,color:N,children:S},g))})]}),R&&o.jsxs(Nt,{style:{background:X,bottom:"5px"},children:[o.jsx(Re,{active:s===0?"true":"false",linecolor:N}),o.jsx(Re,{active:s===1?"true":"false",linecolor:N})]})]}):o.jsx(wr,{style:{backgroundColor:X},scrollbarcolor:N,children:e.verses.map((S,g)=>o.jsx(Ge,{refer:E.current[g],verse:S,index:g},g))})})}const Lr=P(j)({position:"fixed",zIndex:"3",bottom:"0px",width:"100%",height:"150px",overflow:"hidden"}),Rr=P(j)({position:"relative",display:"flex",justifyContent:"center","& .MuiBox-root":{alignContent:"center"}}),Pr=P("img")({width:"100%",position:"absolute",top:"20px"}),Br=P(j)({width:"100%",maxWidth:"700px",padding:"0px 20px",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",zIndex:"1",paddingTop:"20px",alignContent:"center","@media (min-width: 600px)":{paddingTop:"25px"}}),Mr=P(j)({position:"relative",bottom:"-75px",height:"100px",alignItems:"center",justifyContent:"space-between"}),Or=P("img")({width:"100%",position:"absolute"}),Nr=P(j)(({readingcontrol:e})=>({height:"100px",width:"100%",maxWidth:"700px",margin:"auto",display:"flex",flexDirection:e==Vt.LEFT_HANDED?"row":"row-reverse",justifyContent:"space-between",alignItems:"center",padding:"0px 15px","@media (min-width: 1075px)":{width:"80%",margin:"auto"}})),Dr=P(j)({width:"90px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px","@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}}),jr=P(j)({width:"90px",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"20px","@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}}),ue=P("img")({width:"60px",height:"40px",borderRadius:"50%",cursor:"pointer",zIndex:"1"}),Hr=P(j)(({underlinecolor:e})=>({width:"90px",textDecoration:"underline",textDecorationColor:e,textUnderlineOffset:"3px",zIndex:"1",cursor:"pointer",marginBottom:"20px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}})),Vr=P(j)({width:"100%",height:"60px",overflow:"hidden",padding:"0 10px"}),Wr=P(zt)(({barcolor:e})=>({color:e,opacity:"1",height:"5px","& .MuiSlider-thumb":{width:"13.25px",height:"14px",color:e,transition:"0.3s cubic-bezier(.47,1.64,.41,.8)","&::before":{boxShadow:"0 2px 12px 0 rgba(0,0,0,0.4)"},"&:hover, &.Mui-focusVisible":{boxShadow:"0px 0px 0px 8px rgb(0 0 0 / 16%)"},"&.Mui-active":{width:20,height:20}}})),qr=P(j)({display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"-20px"});function Xr(e){const{duration:n,currentTime:i,onTimeChange:s}=e,[a,h]=l.useState(i),{theme:I}=l.useContext(ae),{buttonTextColor:p}=se(I);l.useEffect(()=>{h(i)},[i]);const L=(C,E)=>{h(E),s(E)};return o.jsxs(Vr,{children:[o.jsx(Wr,{"aria-label":"time-indicator",value:a,min:0,max:Math.floor(n),step:1,barcolor:p,onChange:L}),o.jsxs(qr,{children:[o.jsx(ne,{color:p,children:kt(a)}),o.jsx(ne,{color:p,children:"-"+kt(Math.floor(n-a))})]})]})}function kt(e){const n=Math.floor(e/60),i=Math.floor(e%60);return`${n}:${i<10?`0${i}`:i}`}function Ur(e){const[n,i]=l.useState(!1),[s,a]=l.useState(0),[h,I]=l.useState(0),[p,L]=l.useState(0),C=l.useRef(new Audio),{setScrollTopVerseIndex:E,setActiveScroll:w}=l.useContext(Pe),{autoScrollText:M,volume:R,audioLanguage:H,readingControls:X,pageControl:N,theme:d}=l.useContext(ae),{logoTextColor:B}=se(d),{t:Y}=Lt();l.useEffect(()=>{const u=C.current;e.src&&(u.src=Wt+e.src[H||Me.TRANSLATION]);const b=()=>{I(u.duration)},V=()=>{a(Math.floor(u.currentTime))};return u.addEventListener("loadedmetadata",b),u.addEventListener("timeupdate",V),()=>{u.removeEventListener("loadedmetadata",b),u.removeEventListener("timeupdate",V)}},[e.src]),l.useEffect(()=>{if(C.current.ended)t();else if(M){const u=e.verses.findIndex((b,V)=>{var U,q,v;const K=(U=b.verseAudioStart)==null?void 0:U[H||Me.TRANSLATION],$=(v=(q=e.verses[V+1])==null?void 0:q.verseAudioStart)==null?void 0:v[H||Me.TRANSLATION];return s>=K&&s<$});u!==-1&&(u!==p||u==0)&&(E(u),L(u),w(ke))}},[s,e.verses,H,M,n]),l.useEffect(()=>{C.current.volume=R/100},[R]);const S=()=>{const u=C.current;w(ke),u.readyState>=2?(i(!0),u.play().catch(b=>Z.custom(V=>o.jsx(ee,{text:Y("Audio Play Error"+b),offset:125,visible:V.visible})))):Z.custom(b=>o.jsx(ee,{text:Y("Audio Not Ready"),offset:125,visible:b.visible}))},g=()=>{i(!1),C.current.pause(),w($e)},F=()=>{g(),e.moveToSoundSettingPage()},f=()=>{g(),e.setAudioSeekBarStatus(!1)},_=()=>{g(),localStorage.getItem(J)&&localStorage.removeItem(J),localStorage.getItem(Se)&&localStorage.removeItem(Se),e.moveToPrevPage()},x=u=>{C.current.currentTime=u,a(u)},t=()=>{a(0),i(!1),E(0),w($e)},r=()=>o.jsxs(Rr,{children:[o.jsx(Pr,{src:d==k.DEFAULT||d==k.DARK?T.bar_reading_audio_subtract:d==k.BLACK_AND_WHITE?T.bar_reading_audio_subtract_BAW:d==k.SAPPHIRE?T.bar_reading_audio_subtract_sapphire:T.bar_reading_audio_subtract_easyocean}),o.jsxs(Br,{children:[o.jsx(ue,{src:d==k.DEFAULT||d==k.DARK?T.btn_sound_setting:d==k.BLACK_AND_WHITE?T.btn_sound_setting_BAW:d==k.SAPPHIRE?T.btn_sound_setting_sapphire:T.btn_sound_setting_easyocean,onClick:F}),o.jsx(Xr,{duration:h,currentTime:s,onTimeChange:x}),o.jsx(ue,{src:d==k.DEFAULT||d==k.DARK?T.btn_close:d==k.BLACK_AND_WHITE?T.btn_close_BAW:d==k.SAPPHIRE?T.btn_close_sapphire:T.btn_close_easyocean,onClick:f})]})]}),c=()=>o.jsxs(Mr,{children:[o.jsx(Or,{src:d==k.DEFAULT||d==k.DARK?T.bar_reading_subtract:d==k.BLACK_AND_WHITE?T.bar_reading_subtract_BAW:d==k.SAPPHIRE?T.bar_reading_subtract_sapphire:T.bar_reading_subtract_easyocean}),o.jsxs(Nr,{readingcontrol:X,children:[o.jsxs(Dr,{children:[o.jsx(ue,{src:d==k.DEFAULT||d==k.DARK?T.btn_arrow_left:d==k.BLACK_AND_WHITE?T.btn_arrow_left_BAW:d==k.SAPPHIRE?T.btn_arrow_left_sapphire:T.btn_arrow_left_easyocean,onClick:()=>e.handleNavigateBtn(N==et.LEFT_TO_RIGHT?tt:Ae)}),o.jsx(ue,{src:d==k.DEFAULT||d==k.DARK?T.btn_arrow_right:d==k.BLACK_AND_WHITE?T.btn_arrow_right_BAW:d==k.SAPPHIRE?T.btn_arrow_right_sapphire:T.btn_arrow_right_easyocean,onClick:()=>e.handleNavigateBtn(N==et.LEFT_TO_RIGHT?Ae:tt)})]}),o.jsx(jr,{children:e.showAudioSeekBar?n?o.jsx(ue,{src:d==k.DEFAULT||d==k.DARK?T.btn_pause:d==k.BLACK_AND_WHITE?T.btn_pause_BAW:d==k.SAPPHIRE?T.btn_pause_sapphire:T.btn_pause_easyocean,onClick:g}):o.jsx(ue,{src:d==k.DEFAULT||d==k.DARK?T.btn_play:d==k.BLACK_AND_WHITE?T.btn_play_BAW:d==k.SAPPHIRE?T.btn_play_sapphire:T.btn_play_easyocean,onClick:S}):o.jsx(ue,{src:d==k.DEFAULT||d==k.DARK?T.btn_sound:d==k.BLACK_AND_WHITE?T.btn_sound_BAW:d==k.SAPPHIRE?T.btn_sound_sapphire:T.btn_sound_easyocean,onClick:()=>e.setAudioSeekBarStatus(!0)})}),o.jsx(Hr,{underlinecolor:B,onClick:_,children:o.jsx(ne,{color:B,textAlign:"right",children:e.bookTitle+": "+e.subBookTitle})})]})]});return o.jsxs(Lr,{children:[e.showAudioSeekBar&&r(),c()]})}function Dt(e){var t,r;const[n,i]=l.useState(e.isExistingInBookmark?100:0),[s,a]=l.useState(null),[h,I]=l.useState(!1),[p,L]=l.useState(0),[C,E]=l.useState(0),{textSize:w,theme:M,readingLanguage:R}=l.useContext(ae),{mainBGColor:H}=se(M),X=l.useRef(null),N=l.useRef(n),d=e.refer,B=l.useRef(),Y=window.matchMedia("(orientation: portrait)").matches;l.useEffect(()=>{N.current=n},[n]),l.useEffect(()=>{if(e.verse.verseHeader&&X.current&&d.current&&(X.current.style.height=`${d.current.getBoundingClientRect().height-4}px`,X.current.style.bottom="2px",X.current.style.alignSelf="self-end"),X.current&&d.current&&d.current.offsetHeight>0&&d.current.offsetHeight<=24){const c=X.current.children[0];c.style.width="20px",c.style.height="20px",c.children[1].style.width="10px",c.children[1].style.height="10px"}},[e.verse.verseHeader,e.translatePanelHeight,Y]);const S=l.useCallback(c=>{if(c>0&&c<rt){const u=c/rt*100,b=e.isExistingInBookmark?100-u:u;i(b),N.current=b}else if(c>0){const u=e.isExistingInBookmark?0:100;i(u),N.current=u}else{const u=e.isExistingInBookmark?100:0;i(u),N.current=u}},[e.isExistingInBookmark]),g=l.useCallback(()=>{if(d.current){const c=Math.max(0,Math.min(C,Xt));d.current.style.transform=`translateX(${c}px)`,S(c-qt)}h&&(B.current=requestAnimationFrame(g))},[h,C,S]);l.useEffect(()=>(h?B.current=requestAnimationFrame(g):cancelAnimationFrame(B.current),()=>cancelAnimationFrame(B.current)),[h,g]);const F=c=>{var b;I(!0),L(c);const u=(b=d.current)==null?void 0:b.getAttribute("data-id");u&&a(u)},f=c=>{if(!h)return;const u=Math.max(0,c-p);e.isLoggedIn&&u>nt&&E(u-nt)},_=()=>{I(!1),d.current&&(!e.isExistingInBookmark&&N.current==100||e.isExistingInBookmark&&N.current==0?s&&e.handleBookmark(s):e.isExistingInBookmark?(i(100),N.current=100):(i(0),N.current=0),d.current.style.transition="transform 0.3s ease-out",d.current.style.transform="translateX(0)",setTimeout(()=>{d.current&&(d.current.style.transition="")},300)),E(0)};l.useEffect(()=>{const c=d.current;if(c){const u=q=>{q.preventDefault(),F(q.clientX)},b=q=>{q.preventDefault(),f(q.clientX)},V=q=>{q.preventDefault(),_()},K=q=>{F(q.touches[0].clientX)},$=q=>{f(q.touches[0].clientX)},U=q=>{_()};return c.addEventListener("mousedown",u),document.addEventListener("mousemove",b),document.addEventListener("mouseup",V),c.addEventListener("touchstart",K),c.addEventListener("touchmove",$),c.addEventListener("touchend",U),()=>{c.removeEventListener("mousedown",u),document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",V),c.removeEventListener("touchstart",K),c.removeEventListener("touchmove",$),c.removeEventListener("touchend",U)}}},[d,S,e.handleBookmark,p]);const x=c=>{for(var u in c)if(c[u]!==null&&c[u]!=="")return!0;return!1};return o.jsxs(Tr,{children:[e.verse.verseHeader&&x(e.verse.verseHeader)&&o.jsx(Er,{"data-id":e.verse.verseId,"data-index":e.index,style:{backgroundColor:H},children:o.jsx(ne,{fontFamily:"Inter",fontWeight:"700",backgroundColor:H,fontSize:w,lineHeight:w+15,direction:R==Ee?"rtl":"ltr",children:(t=e.verse.verseHeader)==null?void 0:t[R]})}),o.jsx(Zt,{progress:n,refer:X,backgroundColor:H}),o.jsx(kr,{"data-id":e.verse.verseId,"data-index":e.index,ref:e.refer,children:o.jsx(ne,{fontFamily:"Inter",fontSize:w,backgroundColor:H,dataIndex:e.index.toString(),lineHeight:w+20,direction:R==Ee?"rtl":"ltr",children:(r=e.verse.verseText)==null?void 0:r[R]})})]})}function Fr(e){var B,Y;const[n,i]=l.useState([]),[s,a]=l.useState([]),{scrollTopVerseIndex:h,setScrollTopVerseIndex:I,setHiddenTopVersePercentage:p,activeScroll:L,setActiveScroll:C}=l.useContext(Pe),E=l.useRef(null),w=l.useRef([]);w.current=(B=e.verses)==null?void 0:B.map((S,g)=>w.current[g]??l.createRef());const{theme:M,displayType:R}=l.useContext(ae),{mainBGColor:H,textColor:X}=se(M),N=l.useCallback(()=>{let S=[];return w.current.forEach(g=>{g.current&&g.current.children[0]&&S.push(g.current.children[0].offsetHeight)}),S},[w]);l.useEffect(()=>{const S=N();i(S);const g=S.reduce((F,f,_)=>(F[_]=(F[_-1]||0)+f,F),[]);a(g)},[e.verses,N]);const d=l.useCallback(()=>{if(!E.current)return;const S=E.current.scrollTop;C(ze);let g=0,F=s.length-1;for(;g<=F;){const u=Math.floor((g+F)/2);s[u]>S?F=u-1:g=u+1}const f=g-1;I(f);const _=f>0?s[f-1]:0,x=n[f],r=(S-_)/x*100,c=Math.min(Math.max(r,0),100);p(c)},[s,n,I]);return l.useEffect(()=>{const S=E.current;if(S)return S.addEventListener("scroll",d),S.addEventListener("scrollend",()=>C($e)),()=>{S.removeEventListener("scroll",d)}}),l.useEffect(()=>{var S;if((R===G.SPLIT_PANEL||R===G.ONLY_TRNSLATION)&&h>=0&&(L==At||L==ke)){const g=w.current[Number(h)];(S=g==null?void 0:g.current)==null||S.scrollIntoView()}},[h]),o.jsx(Ir,{style:{backgroundColor:H,color:X,height:e.height},children:o.jsx(Cr,{ref:E,children:(Y=e.verses)==null?void 0:Y.map((S,g)=>o.jsx(Dt,{refer:w.current[g],verse:S,index:g,isExistingInBookmark:e.bookmarks.some(F=>F.verseId===S.verseId),isLoggedIn:e.isLoggedIn,translatePanelHeight:e.height,handleBookmark:e.handleBookmark},g))})})}const Yr=P(j)({margin:"0px",height:"100dvh"}),Kr=P(j)(({showaudioseekbar:e})=>({width:"100%",padding:"20px",height:e=="true"?"calc(100dvh - 150px)":"calc(100dvh - 100px)"})),zr=P(j)({width:"45px",height:"8px",margin:"auto",marginTop:"-4px",position:"relative",zIndex:"2",cursor:"grab","&:active":{cursor:"grabbing"}}),$r=P(j)({width:"100%",height:"100%",overflowX:"hidden",overflowY:"auto",margin:"0px",paddingBottom:"0px"}),Gr=P(j)({width:"100%",padding:"15px"});function Qr(e){const n=window.matchMedia("(orientation: portrait)").matches,[i,s]=l.useState([]),[a,h]=l.useState(null),[I,p]=l.useState(!1),[L,C]=l.useState(n?200:120),{theme:E,displayType:w}=l.useContext(ae),{mainBGColor:M,topTextColor:R}=se(E),{scrollTopVerseIndex:H,setScrollTopVerseIndex:X}=l.useContext(Pe),N=l.useRef([]),d=l.useRef([]);N.current=i==null?void 0:i.map((v,m)=>N.current[m]??l.createRef()),d.current=i==null?void 0:i.map((v,m)=>d.current[m]??l.createRef());const B=new URLSearchParams(window.location.search),Y=100,S=100;window.matchMedia("(orientation: portrait)").addEventListener("change",v=>{const m=v.matches;C(m?200:120)});const[g,F]=l.useState(typeof window<"u"?window.innerHeight:1e3),f=e.showAudioSeekBar?g-150-L:g-100-L,_=Gt(),{t:x}=Lt(),t=l.useCallback(v=>{it.fetchVerses(v).then(m=>{s(m.verses),m&&m.length>0&&h(m.chapterAudio),e.dispatch({type:he.ADD_CHAPTERINFO,payload:{chapterInfo:m}}),p(!1)}).catch(m=>{p(!1),Z.custom(D=>o.jsx(ee,{text:x(m),offset:70,visible:D.visible}))})},[]),r=l.useCallback(v=>{if(e.chapterInfos&&e.chapterInfos.length>0){const m=e.chapterInfos.filter(D=>D.chapterId===v);m.length>0?(s(m[0].verses),h(m[0].chapterAudio)):t(v),p(!1)}else t(v),p(!1)},[e.chapterInfos]);l.useEffect(()=>{var O;p(!0);let v="";localStorage.getItem(J)?v=localStorage.getItem(J)||"":(v=B.get("chapterId")||"",localStorage.setItem(J,v));const m=B.get("subBookId"),D=B.get("verseId");if(D){const y=i.filter(A=>A.verseId==D);y&&y.length>0&&(X(y[0].verseNumber-1),w==G.VERSE_BY_VERSE&&((O=d.current[y[0].verseNumber-1].current)==null||O.scrollIntoView()))}if(v)if(e.subBookInfos&&e.subBookInfos.length>0){const y=e.subBookInfos.filter(A=>A.subBookId===m);if(y.length>0){const A=y[0].chapterInfos.filter(Q=>Q.chapterId===v);A.length>0&&(s(A[0].verses),h(A[0].chapterAudio),p(!1)),p(!1)}else r(v),p(!1)}else r(v),p(!1);else p(!1)},[i]),l.useEffect(()=>{const v=()=>F(window.innerHeight);return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]),l.useEffect(()=>{p(!0);const v=localStorage.getItem(J)||B.get("chapterId");let m=!1;if(e.userHistory&&e.userHistory.length>0&&e.userHistory.forEach(D=>{if(D.readChapterIds.includes(v)){m=!0,p(!1);return}}),!m){const D={chapterId:v};it.saveHistory(D).then(O=>{e.dispatch({type:he.SET_USER_HISTORY,payload:{userHistories:O}}),p(!1)}).catch(O=>{O.status==401&&O.response.data.message==Oe&&(Z.custom(y=>o.jsx(ee,{text:x(O.response.data.message),visible:y.visible})),Ne.logout(),_("/login")),p(!1)})}},[]),l.useEffect(()=>{w==G.ONLY_TRNSLATION&&C(0)},[w]),l.useEffect(()=>{var v,m;w==G.VERSE_BY_VERSE&&H>=0&&((m=(v=d.current[H])==null?void 0:v.current)==null||m.scrollIntoView())},[H,w,d,i]);const c=l.useCallback(v=>{var O;p(!0);const m=(O=e.bookmark)==null?void 0:O.find(y=>y.verseId===v),D={verseId:v};try{if(!m)ot.saveBookmark(D).then(y=>{e.dispatch({type:he.ADD_BOOKMARK,payload:{bookmark:y.bookmark}}),p(!1),Z.custom(A=>o.jsx(ee,{text:x("Bookmark Saved"),type:_e.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:A.visible}))}).catch(y=>{p(!1),y.status==401&&y.response.data.message==Oe&&(Z.custom(A=>o.jsx(ee,{text:x(y.response.data.message),offset:e.showAudioSeekBar?125:70,visible:A.visible})),Ne.logout(),_("/login"))});else{const y=e.bookmark.filter(A=>A.verseId==v);y&&y.length>0&&ot.deleteBookmark(y[0]._id).then(()=>{e.dispatch({type:he.REMOVE_BOOKMARK,payload:{bookmarkId:m._id}}),p(!1),Z.custom(A=>o.jsx(ee,{text:x("Bookmark Deleted"),type:_e.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:A.visible}))}).catch(A=>{p(!1),A.status==401&&A.response.data.message==Oe&&(Z.custom(Q=>o.jsx(ee,{text:x(A.response.data.message),type:_e.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:Q.visible})),Ne.logout(),_("/login"))})}}catch(y){p(!1),Z.custom(A=>o.jsx(ee,{text:x(y),type:_e.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:A.visible}))}},[e,x]),u=l.useCallback((v,m,D)=>{let O=m+(D-v),y=g-150-O;O<Y?(O=Y,y=g-150-Y):y<S&&(O=g-150-S),C(O)},[g]),b=v=>{const m=v.clientY,D=L,O=A=>u(m,D,A.clientY),y=()=>{document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",O),document.addEventListener("mouseup",y)},V=v=>{const m=v.touches[0].clientY,D=L,O=A=>u(m,D,A.touches[0].clientY),y=()=>{document.removeEventListener("touchmove",O),document.removeEventListener("touchend",y)};document.addEventListener("touchmove",O),document.addEventListener("touchend",y)},K=v=>{e.dispatch({type:he.SET_AUDIO_SEEK_BAR_STATUS,payload:{showAudioSeekBar:v}})},$=()=>{_("/sound-settings")},U=()=>{localStorage.removeItem(J),_(-1)},q=l.useCallback(v=>{var be;const m=B.get("bookId"),D=localStorage.getItem(J),O=localStorage.getItem(Se);if(p(!0),!D&&B.get("chapterId")){const W=B.get("chapterId");W&&localStorage.setItem(J,W)}if(!O&&B.get("subBookId")){const W=B.get("subBookId");W&&localStorage.setItem(Se,W)}const y=e.bookInfos.find(W=>W.bookId==m);if(!y){p(!1);return}const A=y.subBooks.find(W=>{var te;return(te=W.chapterInfos)==null?void 0:te.some(z=>z.chapterId==D)});if(!A){p(!1);return}const Q=A.subBookNumber,ie=y.subBooks.find(W=>W.subBookNumber==Q+1),fe=y.subBooks.find(W=>W.subBookNumber==Q-1),le=(W,te)=>{if(W&&W.chapterInfos&&W.chapterInfos.length>0){const z=W.chapterInfos[0].chapterId;localStorage.setItem(J,z),localStorage.setItem(Se,W.subBookId),r(z)}else Z.custom(z=>o.jsx(ee,{text:x(te?"Last Chapter":"First Chapter"),offset:e.showAudioSeekBar?125:70,visible:z.visible})),p(!1)};if(A.noChapter)v==Ae?le(ie,!0):le(fe,!1);else{const W=(be=A.chapterInfos)==null?void 0:be.find(de=>de.chapterId==D);if(!W){p(!1);return}const te=A.chapterInfos.length,z=W.chapterNumber,ce=de=>{const oe=A.chapterInfos.find(ye=>ye.chapterNumber==de);oe&&(localStorage.setItem(J,oe.chapterId),r(oe.chapterId))};v==Ae?z==te-1?le(ie,!0):ce(z+1):z==0?le(fe,!1):ce(z-1)}},[]);return o.jsxs(Yr,{style:{backgroundColor:M},children:[o.jsxs(Kr,{showaudioseekbar:e.showAudioSeekBar?"true":"false",children:[w==G.SPLIT_PANEL&&o.jsxs(o.Fragment,{children:[o.jsx(Ar,{verses:i,height:L}),o.jsx(zr,{style:{backgroundColor:R},onMouseDown:b,onTouchStart:V})]}),(w==G.ONLY_TRNSLATION||w==G.SPLIT_PANEL)&&o.jsx(Fr,{verses:i,height:f,originPanelHeight:L,bookmarks:e.bookmark,isLoggedIn:!!e.currentUser,handleBookmark:c}),w==G.VERSE_BY_VERSE&&o.jsx($r,{children:i.map((v,m)=>{var D;return o.jsxs(Gr,{ref:d.current[m],children:[o.jsx(Ge,{verse:v,refer:N.current[m],index:m}),o.jsx(Dt,{refer:N.current[m],verse:v,index:m,isLoggedIn:!!e.currentUser,handleBookmark:c,isExistingInBookmark:((D=e.bookmark.filter(O=>O.verseId==v.verseId))==null?void 0:D.length)>0})]},m)})})]}),o.jsx(Ur,{src:a,bookTitle:B.get("book")||"",subBookTitle:B.get("subBook")||"",showAudioSeekBar:e.showAudioSeekBar,verses:i,setAudioSeekBarStatus:K,moveToSoundSettingPage:$,moveToPrevPage:U,handleNavigateBtn:q}),I&&o.jsx(Jt,{})]})}const Jr=e=>({bookmark:e.books.bookmark,bookInfos:e.books.bookInfos,subBookInfos:e.books.subBookInfos,chapterInfos:e.books.chapterInfos,userHistory:e.books.userHistory,currentUser:e.user.currentUser,showAudioSeekBar:e.pageStatus.showAudioSeekBar}),un=$t(Jr)(Qr);export{un as default};
