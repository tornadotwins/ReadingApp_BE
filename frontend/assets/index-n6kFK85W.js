import{b as s,j as o,Q as P,ah as Ft,U as $,ak as Pe,ax as et,ay as Ne,az as Mt,X as Yt,af as tt,$ as We,ab as rt,Y as ot,aA as at,aB as Oe,ad as te,ae as ke,aC as st,aD as Kt,aE as zt,aF as lt,ac as Gt,ai as $t,ap as Ve,ao as Te}from"./index-BPBmJKVk.js";import{S as de,g as fe,aC as Qt,aD as Jt,aE as Zt,aF as er,s as L,B as M,aG as De,aH as tr,u as jt,_ as z,c as rr,d as nr,e as ge}from"./App-DUrhBLNl.js";import{I as B,T as oe}from"./images-D5AYxhPc.js";import{p as ir}from"./index-CPJKCDlJ.js";import{C as G,L as or}from"./index-DkPMt03D.js";import{A as ar,b as ct}from"./bookmark.service-2cfjcVuR.js";import{a as qe}from"./auth.service-D_94x3fL.js";import{b as Ee}from"./book.service-B2LodF4F.js";import"./index-2zewk9pN.js";import"./axios-BimPEqV4.js";function sr(e){const{theme:n}=s.useContext(de),{buttonColor:i,buttonTextColor:l}=fe(n);return o.jsx(Qt,{ref:e.refer,"data-id":e.dataId,backgroundColor:i,children:o.jsxs(Jt,{progresscolor:l,children:[o.jsx(Zt,{variant:"determinate",value:e.progress,thickness:2}),o.jsx(er,{src:n==P.EASY_OCEAN?B.bookmark2_white:B.bookmark2_default})]})})}var Dt={};function lr(e){if(e&&e.__esModule)return e;var n={};if(e!=null){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var l=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};l.get||l.set?Object.defineProperty(n,i,l):n[i]=e[i]}}return n.default=e,n}var Ht=lr,se={},Xe,ut;function cr(){if(ut)return Xe;ut=1;function e(n){return n&&n.__esModule?n:{default:n}}return Xe=e,Xe}var Ae,dt;function ur(){if(dt)return Ae;dt=1;function e(){return Ae=e=Object.assign||function(n){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(n[c]=l[c])}return n},e.apply(this,arguments)}return Ae=e,Ae}var Ue,ft;function dr(){if(ft)return Ue;ft=1;function e(n,i){if(n==null)return{};var l={},c=Object.keys(n),h,C;for(C=0;C<c.length;C++)h=c[C],!(i.indexOf(h)>=0)&&(l[h]=n[h]);return l}return Ue=e,Ue}var Fe,ht;function fr(){if(ht)return Fe;ht=1;var e=dr();function n(i,l){if(i==null)return{};var c=e(i,l),h,C;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(i);for(C=0;C<v.length;C++)h=v[C],!(l.indexOf(h)>=0)&&Object.prototype.propertyIsEnumerable.call(i,h)&&(c[h]=i[h])}return c}return Fe=n,Fe}var Ye,gt;function hr(){if(gt)return Ye;gt=1;function e(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}return Ye=e,Ye}var Ke,vt;function gr(){if(vt)return Ke;vt=1;function e(i,l){for(var c=0;c<l.length;c++){var h=l[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}function n(i,l,c){return l&&e(i.prototype,l),c&&e(i,c),i}return Ke=n,Ke}var be,xt;function vr(){if(xt)return be;xt=1;function e(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(c){return typeof c}:e=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},e(i)}function n(i){return typeof Symbol=="function"&&e(Symbol.iterator)==="symbol"?be=n=function(c){return e(c)}:be=n=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":e(c)},n(i)}return be=n,be}var ze,pt;function xr(){if(pt)return ze;pt=1;function e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}return ze=e,ze}var Ge,mt;function pr(){if(mt)return Ge;mt=1;var e=vr(),n=xr();function i(l,c){return c&&(e(c)==="object"||typeof c=="function")?c:n(l)}return Ge=i,Ge}var Be,St;function mr(){if(St)return Be;St=1;function e(n){return Be=e=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},e(n)}return Be=e,Be}var Le,bt;function Sr(){if(bt)return Le;bt=1;function e(n,i){return Le=e=Object.setPrototypeOf||function(c,h){return c.__proto__=h,c},e(n,i)}return Le=e,Le}var $e,yt;function br(){if(yt)return $e;yt=1;var e=Sr();function n(i,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(l&&l.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),l&&e(i,l)}return $e=n,$e}var Qe,_t;function Wt(){if(_t)return Qe;_t=1;var e=function(){};return Qe=e,Qe}var Je={},Ze,It;function He(){if(It)return Ze;It=1;function e(n){return n&&n.__esModule?n:{default:n}}return Ze=e,Ze}var ye={},wt;function yr(){if(wt)return ye;wt=1;var e=He();Object.defineProperty(ye,"__esModule",{value:!0}),ye.default=void 0;var n=e(s);e(Wt());var i=function(h){h.index;var C=h.children;n.default.Children.count(C)},l=i;return ye.default=l,ye}var Re={},_e={},kt;function Vt(){if(kt)return _e;kt=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var e={RESISTANCE_COEF:.6,UNCERTAINTY_THRESHOLD:3};return _e.default=e,_e}var Ct;function _r(){if(Ct)return Re;Ct=1;var e=He();Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=l;var n=e(s),i=e(Vt());function l(c){var h=c.children,C=c.startIndex,v=c.startX,N=c.pageX,A=c.viewLength,S=c.resistance,I=n.default.Children.count(h)-1,O=C+(v-N)/A,b;return S?O<0?O=Math.exp(O*i.default.RESISTANCE_COEF)-1:O>I&&(O=I+1-Math.exp((I-O)*i.default.RESISTANCE_COEF)):O<0?(O=0,b=(O-C)*A+N):O>I&&(O=I,b=(O-C)*A+N),{index:O,startX:b}}return Re}var Ie={},Tt;function Ir(){if(Tt)return Ie;Tt=1;var e=He();Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.default=void 0;var n=e(s),i=function(h,C){var v=!1,N=function(D){return D?D.key:"empty"};if(h.children.length&&C.children.length){var A=n.default.Children.map(h.children,N),S=A[h.index];if(S!=null){var I=n.default.Children.map(C.children,N),O=I[C.index];S===O&&(v=!0)}}return v},l=i;return Ie.default=l,Ie}var we={},Et;function wr(){if(Et)return we;Et=1,Object.defineProperty(we,"__esModule",{value:!0}),we.default=void 0;function e(i,l){var c=i%l;return c<0?c+l:c}var n=e;return we.default=n,we}var At;function kr(){return At||(At=1,function(e){var n=He();Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"checkIndexBounds",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"computeIndex",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"constant",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"getDisplaySameSlide",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"mod",{enumerable:!0,get:function(){return C.default}});var i=n(yr()),l=n(_r()),c=n(Vt()),h=n(Ir()),C=n(wr())}(Je)),Je}var Bt;function Cr(){if(Bt)return se;Bt=1;var e=Ht,n=cr();Object.defineProperty(se,"__esModule",{value:!0}),se.getDomTreeShapes=g,se.findNativeHandler=Y,se.default=se.SwipeableViewsContext=void 0;var i=n(ur()),l=n(fr()),c=n(hr()),h=n(gr()),C=n(pr()),v=n(mr()),N=n(br()),A=e(s);n(ir),n(Wt());var S=kr();function I(a,d,x,t){return a.addEventListener(d,x,t),{remove:function(){a.removeEventListener(d,x,t)}}}var O={container:{direction:"ltr",display:"flex",willChange:"transform"},slide:{width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"}},b={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(d){return"translate(".concat(-d,"%, 0)")},"x-reverse":function(d){return"translate(".concat(d,"%, 0)")},y:function(d){return"translate(0, ".concat(-d,"%)")},"y-reverse":function(d){return"translate(0, ".concat(d,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function D(a,d){var x=d.duration,t=d.easeFunction,r=d.delay;return"".concat(a," ").concat(x," ").concat(t," ").concat(r)}function X(a,d){var x=b.rotationMatrix[d];return{pageX:x.x[0]*a.pageX+x.x[1]*a.pageY,pageY:x.y[0]*a.pageX+x.y[1]*a.pageY}}function j(a){return a.touches=[{pageX:a.pageX,pageY:a.pageY}],a}function g(a,d){for(var x=[];a&&a!==d&&a!==document.body&&!a.hasAttribute("data-swipeable");){var t=window.getComputedStyle(a);t.getPropertyValue("position")==="absolute"||t.getPropertyValue("overflow-x")==="hidden"?x=[]:(a.clientWidth>0&&a.scrollWidth>a.clientWidth||a.clientHeight>0&&a.scrollHeight>a.clientHeight)&&x.push({element:a,scrollWidth:a.scrollWidth,scrollHeight:a.scrollHeight,clientWidth:a.clientWidth,clientHeight:a.clientHeight,scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}),a=a.parentNode}return x}var H=null;function Y(a){var d=a.domTreeShapes,x=a.pageX,t=a.startX,r=a.axis;return d.some(function(m){var p=x>=t;(r==="x"||r==="y")&&(p=!p);var _=Math.round(m[b.scrollPosition[r]]),W=_>0,U=_+m[b.clientLength[r]]<m[b.scrollLength[r]];return p&&U||!p&&W?(H=m.element,!0):!1})}var w=A.createContext();se.SwipeableViewsContext=w;var k=function(a){(0,N.default)(d,a);function d(x){var t;return(0,c.default)(this,d),t=(0,C.default)(this,(0,v.default)(d).call(this,x)),t.rootNode=null,t.containerNode=null,t.ignoreNextScrollEvents=!1,t.viewLength=0,t.startX=0,t.lastX=0,t.vx=0,t.startY=0,t.isSwiping=void 0,t.started=!1,t.startIndex=0,t.transitionListener=null,t.touchMoveListener=null,t.activeSlide=null,t.indexCurrent=null,t.firstRenderTimeout=null,t.setRootNode=function(r){t.rootNode=r},t.setContainerNode=function(r){t.containerNode=r},t.setActiveSlide=function(r){t.activeSlide=r,t.updateHeight()},t.handleSwipeStart=function(r){var m=t.props.axis,p=X(r.touches[0],m);t.viewLength=t.rootNode.getBoundingClientRect()[b.length[m]],t.startX=p.pageX,t.lastX=p.pageX,t.vx=0,t.startY=p.pageY,t.isSwiping=void 0,t.started=!0;var _=window.getComputedStyle(t.containerNode),W=_.getPropertyValue("-webkit-transform")||_.getPropertyValue("transform");if(W&&W!=="none"){var U=W.split("(")[1].split(")")[0].split(","),V=window.getComputedStyle(t.rootNode),F=X({pageX:parseInt(U[4],10),pageY:parseInt(U[5],10)},m);t.startIndex=-F.pageX/(t.viewLength-parseInt(V.paddingLeft,10)-parseInt(V.paddingRight,10))||0}},t.handleSwipeMove=function(r){if(!t.started){t.handleTouchStart(r);return}if(!(H!==null&&H!==t.rootNode)){var m=t.props,p=m.axis,_=m.children,W=m.ignoreNativeScroll,U=m.onSwitching,V=m.resistance,F=X(r.touches[0],p);if(t.isSwiping===void 0){var ee=Math.abs(F.pageX-t.startX),re=Math.abs(F.pageY-t.startY),le=ee>re&&ee>S.constant.UNCERTAINTY_THRESHOLD;if(!V&&(p==="y"||p==="y-reverse")&&(t.indexCurrent===0&&t.startX<F.pageX||t.indexCurrent===A.Children.count(t.props.children)-1&&t.startX>F.pageX)){t.isSwiping=!1;return}if(ee>re&&r.preventDefault(),le===!0||re>S.constant.UNCERTAINTY_THRESHOLD){t.isSwiping=le,t.startX=F.pageX;return}}if(t.isSwiping===!0){r.preventDefault(),t.vx=t.vx*.5+(F.pageX-t.lastX)*.5,t.lastX=F.pageX;var xe=(0,S.computeIndex)({children:_,resistance:V,pageX:F.pageX,startIndex:t.startIndex,startX:t.startX,viewLength:t.viewLength}),pe=xe.index,ne=xe.startX;if(H===null&&!W){var me=g(r.target,t.rootNode),u=Y({domTreeShapes:me,startX:t.startX,pageX:F.pageX,axis:p});if(u)return}ne?t.startX=ne:H===null&&(H=t.rootNode),t.setIndexCurrent(pe);var f=function(){U&&U(pe,"move")};(t.state.displaySameSlide||!t.state.isDragging)&&t.setState({displaySameSlide:!1,isDragging:!0},f),f()}}},t.handleSwipeEnd=function(){if(H=null,!!t.started&&(t.started=!1,t.isSwiping===!0)){var r=t.state.indexLatest,m=t.indexCurrent,p=r-m,_;Math.abs(t.vx)>t.props.threshold?t.vx>0?_=Math.floor(m):_=Math.ceil(m):Math.abs(p)>t.props.hysteresis?_=p>0?Math.floor(m):Math.ceil(m):_=r;var W=A.Children.count(t.props.children)-1;_<0?_=0:_>W&&(_=W),t.setIndexCurrent(_),t.setState({indexLatest:_,isDragging:!1},function(){t.props.onSwitching&&t.props.onSwitching(_,"end"),t.props.onChangeIndex&&_!==r&&t.props.onChangeIndex(_,r,{reason:"swipe"}),m===r&&t.handleTransitionEnd()})}},t.handleTouchStart=function(r){t.props.onTouchStart&&t.props.onTouchStart(r),t.handleSwipeStart(r)},t.handleTouchEnd=function(r){t.props.onTouchEnd&&t.props.onTouchEnd(r),t.handleSwipeEnd(r)},t.handleMouseDown=function(r){t.props.onMouseDown&&t.props.onMouseDown(r),r.persist(),t.handleSwipeStart(j(r))},t.handleMouseUp=function(r){t.props.onMouseUp&&t.props.onMouseUp(r),t.handleSwipeEnd(j(r))},t.handleMouseLeave=function(r){t.props.onMouseLeave&&t.props.onMouseLeave(r),t.started&&t.handleSwipeEnd(j(r))},t.handleMouseMove=function(r){t.props.onMouseMove&&t.props.onMouseMove(r),t.started&&t.handleSwipeMove(j(r))},t.handleScroll=function(r){if(t.props.onScroll&&t.props.onScroll(r),r.target===t.rootNode){if(t.ignoreNextScrollEvents){t.ignoreNextScrollEvents=!1;return}var m=t.state.indexLatest,p=Math.ceil(r.target.scrollLeft/r.target.clientWidth)+m;t.ignoreNextScrollEvents=!0,r.target.scrollLeft=0,t.props.onChangeIndex&&p!==m&&t.props.onChangeIndex(p,m,{reason:"focus"})}},t.updateHeight=function(){if(t.activeSlide!==null){var r=t.activeSlide.children[0];r!==void 0&&r.offsetHeight!==void 0&&t.state.heightLatest!==r.offsetHeight&&t.setState({heightLatest:r.offsetHeight})}},t.state={indexLatest:x.index,isDragging:!1,renderOnlyActive:!x.disableLazyLoading,heightLatest:0,displaySameSlide:!0},t.setIndexCurrent(x.index),t}return(0,h.default)(d,[{key:"componentDidMount",value:function(){var t=this;this.transitionListener=I(this.containerNode,"transitionend",function(r){r.target===t.containerNode&&t.handleTransitionEnd()}),this.touchMoveListener=I(this.rootNode,"touchmove",function(r){t.props.disabled||t.handleSwipeMove(r)},{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout(function(){t.setState({renderOnlyActive:!1})},0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var r=t.index;typeof r=="number"&&r!==this.props.index&&(this.setIndexCurrent(r),this.setState({displaySameSlide:(0,S.getDisplaySameSlide)(this.props,t),indexLatest:r}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"getSwipeableViewsContext",value:function(){var t=this;return{slideUpdateHeight:function(){t.updateHeight()}}}},{key:"setIndexCurrent",value:function(t){if(!this.props.animateTransitions&&this.indexCurrent!==t&&this.handleTransitionEnd(),this.indexCurrent=t,this.containerNode){var r=this.props.axis,m=b.transform[r](t*100);this.containerNode.style.WebkitTransform=m,this.containerNode.style.transform=m}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var t=this,r=this.props;r.action;var m=r.animateHeight,p=r.animateTransitions,_=r.axis,W=r.children,U=r.containerStyle,V=r.disabled;r.disableLazyLoading;var F=r.enableMouseEvents;r.hysteresis,r.ignoreNativeScroll,r.index,r.onChangeIndex,r.onSwitching,r.onTransitionEnd,r.resistance;var ee=r.slideStyle,re=r.slideClassName,le=r.springConfig,xe=r.style;r.threshold;var pe=(0,l.default)(r,["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"]),ne=this.state,me=ne.displaySameSlide,u=ne.heightLatest,f=ne.indexLatest,T=ne.isDragging,E=ne.renderOnlyActive,R=V?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},y=!V&&F?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{},Z=(0,i.default)({},O.slide,ee),J,ce;if(T||!p||me)J="all 0s ease 0s",ce="all 0s ease 0s";else if(J=D("transform",le),ce=D("-webkit-transform",le),u!==0){var Se=", ".concat(D("height",le));J+=Se,ce+=Se}var he={height:null,WebkitFlexDirection:b.flexDirection[_],flexDirection:b.flexDirection[_],WebkitTransition:ce,transition:J};if(!E){var q=b.transform[_](this.indexCurrent*100);he.WebkitTransform=q,he.transform=q}return m&&(he.height=u),A.createElement(w.Provider,{value:this.getSwipeableViewsContext()},A.createElement("div",(0,i.default)({ref:this.setRootNode,style:(0,i.default)({},b.root[_],xe)},pe,R,y,{onScroll:this.handleScroll}),A.createElement("div",{ref:this.setContainerNode,style:(0,i.default)({},he,O.container,U),className:"react-swipeable-view-container"},A.Children.map(W,function(ue,K){if(E&&K!==f)return null;var ae,ie=!0;return K===f&&(ie=!1,m&&(ae=t.setActiveSlide,Z.overflowY="hidden")),A.createElement("div",{ref:ae,style:Z,className:re,"aria-hidden":ie,"data-swipeable":"true"},ue)}))))}}]),d}(A.Component);k.displayName="ReactSwipableView",k.propTypes={},k.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1};var Q=k;return se.default=Q,se}(function(e){var n=Ht;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"SwipeableViewsContext",{enumerable:!0,get:function(){return i.SwipeableViewsContext}});var i=n(Cr())})(Dt);const Tr=Ft(Dt),Er=L(M)({width:"100%",margin:"0px"}),Ar=L(M)({margin:"0px",padding:"0px",position:"relative"}),Br=L(M)({width:"100%",height:"100%",margin:"0px",padding:"0px",position:"relative"}),qt=L(Tr)(({scrollcolor:e})=>({width:"100%",height:"100%",marginBottom:"8px",padding:"14px 0px 20px 0px","::-webkit-scrollbar-thumb":{background:"red"},"::-webkit-scrollbar-thumb: hover":{backgroundColor:e,opacity:"1"},"& .react-swipeable-view-container":{height:"100%"}})),Me=L(M)({width:"100%",padding:"0px 14px","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}}),Xt=L(M)({height:"10px",width:"100%",position:"absolute",bottom:"0",display:"flex",justifyContent:"center","& :last-child":{marginRight:"0px"}}),je=L(M)(({active:e,linecolor:n})=>({borderTop:`1px solid ${n}`,width:e=="true"?"20px":e=="false"?"10px":"0px",color:"black",marginRight:"5px",marginTop:"5px"})),Lr=L(M)(({scrollbarcolor:e})=>({width:"100%",height:"100%","::-webkit-scrollbar-thumb":{backgroundColor:"red"},"::-webkit-scrollbar-track":{backgroundColor:"transparent"},scrollbarWidth:"auto",scrollbarColor:`${e} transparent`})),Lt=L(M)({width:"100%",padding:"0px",margin:"0px"}),Rr=L(M)({width:"100%",margin:"auto",padding:"20px 0px","& .MuiBox-root":{textWrap:"wrap"}}),Pr=L(M)({width:"100%",height:"100%",position:"relative",overflowX:"hidden",padding:"0px 15px",scrollbarGutter:"stable both-edges"}),Rt=L("img")({width:"100%"}),Nr=L(M)({width:"100%","& .MuiAccordion-gutters":{width:"100%"},"& .MuiAccordion-root .MuiAccordionSummary-root .Mui-expanded":{margin:"12px 0px !important"}}),Or=L(M)({width:"100%","& .MuiBox-root":{padding:"0px "}}),Mr=L(M)({width:"100%",overflow:"hidden",position:"relative",display:"flex",flexDirection:"column"}),jr=L(M)({width:"100%",padding:"20px 0px",position:"relative",display:"flex",zIndex:"2","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}}),Dr=L(M)({width:"100%",margin:"0px",position:"relative",display:"flex",flexDirection:"column",zIndex:"2","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}});L(M)({width:"40px",height:"100%",backgroundColor:"#FFAA5D",justifyContent:"center",alignItems:"center"});L(M)({width:"20px",height:"50%",position:"relative"});function nt(e){var I,O;const[n,i]=s.useState(0),{theme:l,textSize:c,referenceLanguage:h,showQuranReferences:C,displayType:v}=s.useContext(de),{topTextColor:N,backgroundColor:A}=fe(l),S=e.verse.verseReference.ref;return v==$.VERSE_BY_VERSE?o.jsxs(Ar,{children:[o.jsxs(qt,{style:{backgroundColor:A},scrollcolor:N,enableMouseEvents:!0,disabled:!C,onSwitching:b=>i(b),children:[o.jsx(Me,{children:o.jsx(Lt,{"data-id":e.verse.verseId,"data-index":e.index,ref:e.refer,children:o.jsx(oe,{fontFamily:"Inter",fontSize:c,lineHeight:c+20,fontWeight:"700",color:N,dataIndex:e.index.toString(),language:h,direction:h==Pe?"rtl":"ltr",children:(I=e.verse.verseText)==null?void 0:I[h]})})}),o.jsx(Me,{children:S&&S.map((b,D)=>o.jsx(oe,{fontFamily:"Inter",fontWeight:"700",fontSize:c,lineHeight:c+20,color:N,children:b},D))})]}),S&&S.length>0&&C&&o.jsxs(Xt,{children:[o.jsx(je,{active:n==0?"true":"false",linecolor:N}),o.jsx(je,{active:n==1?"true":"false",linecolor:N})]})]}):o.jsx(Lt,{"data-id":e.verse.verseId,"data-index":e.index,ref:e.refer,style:{backgroundColor:A},children:o.jsx(oe,{fontFamily:"Inter",fontSize:c,lineHeight:c+20,fontWeight:"700",color:N,dataIndex:e.index.toString(),language:h,direction:h==Pe?"rtl":"ltr",onTouchStart:()=>e.onTouchStart&&e.onTouchStart(e.verse.verseReference.ref),onMouseDown:()=>e.onMouseDown&&e.onMouseDown(e.verse.verseReference.ref),children:(O=e.verse.verseText)==null?void 0:O[h]})})}function Hr(e){var H,Y;const[n,i]=s.useState([]),[l,c]=s.useState(0),{scrollTopVerseIndex:h,setScrollTopVerseIndex:C,setHiddenTopVersePercentage:v,activeScroll:N,setActiveScroll:A}=s.useContext(De),S=s.useRef([]);S.current=(H=e.verses)==null?void 0:H.map((w,k)=>S.current[k]??s.createRef());const{theme:I,textSize:O,showQuranReferences:b,displayType:D}=s.useContext(de),{backgroundColor:X,topTextColor:j}=fe(I);s.useEffect(()=>{var w;if(D==$.SPLIT_PANEL&&h>=0&&(N==et||N==Ne)){const k=S.current[Number(h)];(w=k==null?void 0:k.current)==null||w.scrollIntoView()}},[h,D]);const g=w=>{if(D==$.SPLIT_PANEL){A(Mt);const k=w.currentTarget.getBoundingClientRect().top,Q=w.currentTarget.clientHeight;let a=-1,d=1/0;if(S.current.forEach((x,t)=>{if(x.current){const r=x.current.getBoundingClientRect().top,m=x.current.getBoundingClientRect().bottom,p=r-k;m>k&&r<k+Q&&Math.abs(p)<d&&(d=Math.abs(p),a=t)}}),a!==-1){C(a);const x=S.current[a];if(x.current){const t=x.current.getBoundingClientRect().top,r=x.current.clientHeight,m=Math.max(0,Math.min(100,(k-t)/r*100));v(m)}}}};return o.jsx(Er,{style:{height:e.height},children:D===$.SPLIT_PANEL?o.jsxs(Br,{children:[o.jsxs(qt,{style:{backgroundColor:X},scrollcolor:j,enableMouseEvents:!0,disabled:!b,onScrollCapture:N!=et?w=>g(w):()=>{},onSwitching:w=>c(w),children:[o.jsx(Me,{children:(Y=e.verses)==null?void 0:Y.map((w,k)=>o.jsx(nt,{refer:S.current[k],verse:w,index:k,onMouseDown:i,onTouchStart:i},k))}),o.jsx(Me,{children:n&&n.map((w,k)=>o.jsx(oe,{fontFamily:"Inter",fontWeight:"700",fontSize:O-2,color:j,children:w},k))})]}),b&&o.jsxs(Xt,{style:{background:X,bottom:"5px"},children:[o.jsx(je,{active:l===0?"true":"false",linecolor:j}),o.jsx(je,{active:l===1?"true":"false",linecolor:j})]})]}):o.jsx(Lr,{style:{backgroundColor:X},scrollbarcolor:j,children:e.verses.map((w,k)=>o.jsx(nt,{refer:S.current[k],verse:w,index:k},k))})})}const Wr=L(M)({position:"fixed",zIndex:"3",bottom:"0px",width:"100%",height:"150px",overflow:"hidden"}),Vr=L(M)({position:"relative",display:"flex",justifyContent:"center","& .MuiBox-root":{alignContent:"center"}}),qr=L("img")({width:"100%",position:"absolute",top:"20px"}),Xr=L(M)({width:"100%",maxWidth:"700px",padding:"0px 20px",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",zIndex:"1",paddingTop:"20px",alignContent:"center","@media (min-width: 600px)":{paddingTop:"25px"}}),Ur=L(M)({position:"relative",bottom:"-75px",height:"100px",alignItems:"center",justifyContent:"space-between"}),Fr=L("img")({width:"100%",position:"absolute"}),Yr=L(M)(({readingcontrol:e})=>({height:"100px",width:"100%",maxWidth:"700px",margin:"auto",display:"flex",flexDirection:e==Yt.LEFT_HANDED?"row":"row-reverse",justifyContent:"space-between",alignItems:"center",padding:"0px 15px","@media (min-width: 1075px)":{width:"80%",margin:"auto"}})),Kr=L(M)({width:"90px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px","@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}}),zr=L(M)({width:"90px",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"20px","@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}}),ve=L("img")({width:"60px",height:"40px",borderRadius:"50%",cursor:"pointer",zIndex:"1"}),Gr=L(M)(({underlinecolor:e})=>({width:"90px",textDecoration:"underline",textDecorationColor:e,textUnderlineOffset:"3px",zIndex:"1",cursor:"pointer",marginBottom:"20px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}})),$r=L(M)({width:"100%",height:"60px",overflow:"hidden",padding:"0 10px"}),Qr=L(tr)(({barcolor:e})=>({color:e,opacity:"1",height:"5px","& .MuiSlider-thumb":{width:"13.25px",height:"14px",color:e,transition:"0.3s cubic-bezier(.47,1.64,.41,.8)","&::before":{boxShadow:"0 2px 12px 0 rgba(0,0,0,0.4)"},"&:hover, &.Mui-focusVisible":{boxShadow:"0px 0px 0px 8px rgb(0 0 0 / 16%)"},"&.Mui-active":{width:20,height:20}}})),Jr=L(M)({display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"-20px"});function Zr(e){const{duration:n,currentTime:i,onTimeChange:l}=e,[c,h]=s.useState(i),{theme:C}=s.useContext(de),{buttonTextColor:v}=fe(C);s.useEffect(()=>{h(i)},[i]);const N=(A,S)=>{h(S),l(S)};return o.jsxs($r,{children:[o.jsx(Qr,{"aria-label":"time-indicator",value:c,min:0,max:Math.floor(n),step:1,barcolor:v,onChange:N}),o.jsxs(Jr,{children:[o.jsx(oe,{color:v,children:Pt(c)}),o.jsx(oe,{color:v,children:"-"+Pt(Math.floor(n-c))})]})]})}function Pt(e){const n=Math.floor(e/60),i=Math.floor(e%60);return`${n}:${i<10?`0${i}`:i}`}function en(e){const[n,i]=s.useState(!1),[l,c]=s.useState(0),[h,C]=s.useState(0),[v,N]=s.useState(0),A=s.useRef(new Audio),{setScrollTopVerseIndex:S,setActiveScroll:I}=s.useContext(De),{autoScrollText:O,volume:b,audioLanguage:D,readingControls:X,pageControl:j,theme:g}=s.useContext(de),{logoTextColor:H}=fe(g),{t:Y}=jt();s.useEffect(()=>{const p=A.current;e.src&&(p.src=tt+e.src[D||We.TRANSLATION]);const _=()=>{C(p.duration)},W=()=>{c(Math.floor(p.currentTime))};return p.addEventListener("loadedmetadata",_),p.addEventListener("timeupdate",W),()=>{p.removeEventListener("loadedmetadata",_),p.removeEventListener("timeupdate",W)}},[e.src]),s.useEffect(()=>{if(A.current.ended)t();else if(O){const p=e.verses.findIndex((_,W)=>{var F,ee,re;const U=(F=_.verseAudioStart)==null?void 0:F[D||We.TRANSLATION],V=(re=(ee=e.verses[W+1])==null?void 0:ee.verseAudioStart)==null?void 0:re[D||We.TRANSLATION];return l>=U&&l<V});p!==-1&&(p!==v||p==0)&&(S(p),N(p),I(Ne))}},[l,e.verses,D,O,n]),s.useEffect(()=>{A.current.volume=b/100},[b]);const w=()=>{const p=A.current;I(Ne),p.readyState>=2?(i(!0),p.play().catch(_=>z.custom(W=>o.jsx(G,{text:Y("Audio Play Error"+_),offset:125,visible:W.visible})))):z.custom(_=>o.jsx(G,{text:Y("Audio Not Ready"),offset:125,visible:_.visible}))},k=()=>{i(!1),A.current.pause(),I(rt)},Q=()=>{k(),e.moveToSoundSettingPage()},a=()=>{k(),e.setAudioSeekBarStatus(!1)},d=()=>{k(),localStorage.getItem(te)&&localStorage.removeItem(te),localStorage.getItem(ke)&&localStorage.removeItem(ke),e.moveToPrevPage()},x=p=>{A.current.currentTime=p,c(p)},t=()=>{c(0),i(!1),S(0),I(rt)},r=()=>o.jsxs(Vr,{children:[o.jsx(qr,{src:g==P.DEFAULT||g==P.DARK?B.bar_reading_audio_subtract:g==P.BLACK_AND_WHITE?B.bar_reading_audio_subtract_BAW:g==P.SAPPHIRE?B.bar_reading_audio_subtract_sapphire:B.bar_reading_audio_subtract_easyocean}),o.jsxs(Xr,{children:[o.jsx(ve,{src:g==P.DEFAULT||g==P.DARK?B.btn_sound_setting:g==P.BLACK_AND_WHITE?B.btn_sound_setting_BAW:g==P.SAPPHIRE?B.btn_sound_setting_sapphire:B.btn_sound_setting_easyocean,onClick:Q}),o.jsx(Zr,{duration:h,currentTime:l,onTimeChange:x}),o.jsx(ve,{src:g==P.DEFAULT||g==P.DARK?B.btn_close:g==P.BLACK_AND_WHITE?B.btn_close_BAW:g==P.SAPPHIRE?B.btn_close_sapphire:B.btn_close_easyocean,onClick:a})]})]}),m=()=>o.jsxs(Ur,{children:[o.jsx(Fr,{src:g==P.DEFAULT||g==P.DARK?B.bar_reading_subtract:g==P.BLACK_AND_WHITE?B.bar_reading_subtract_BAW:g==P.SAPPHIRE?B.bar_reading_subtract_sapphire:B.bar_reading_subtract_easyocean}),o.jsxs(Yr,{readingcontrol:X,children:[o.jsxs(Kr,{children:[o.jsx(ve,{src:g==P.DEFAULT||g==P.DARK?B.btn_arrow_left:g==P.BLACK_AND_WHITE?B.btn_arrow_left_BAW:g==P.SAPPHIRE?B.btn_arrow_left_sapphire:B.btn_arrow_left_easyocean,onClick:()=>e.handleNavigateBtn(j==ot.LEFT_TO_RIGHT?at:Oe)}),o.jsx(ve,{src:g==P.DEFAULT||g==P.DARK?B.btn_arrow_right:g==P.BLACK_AND_WHITE?B.btn_arrow_right_BAW:g==P.SAPPHIRE?B.btn_arrow_right_sapphire:B.btn_arrow_right_easyocean,onClick:()=>e.handleNavigateBtn(j==ot.LEFT_TO_RIGHT?Oe:at)})]}),!e.isIntro&&o.jsx(zr,{children:e.showAudioSeekBar?n?o.jsx(ve,{src:g==P.DEFAULT||g==P.DARK?B.btn_pause:g==P.BLACK_AND_WHITE?B.btn_pause_BAW:g==P.SAPPHIRE?B.btn_pause_sapphire:B.btn_pause_easyocean,onClick:k}):o.jsx(ve,{src:g==P.DEFAULT||g==P.DARK?B.btn_play:g==P.BLACK_AND_WHITE?B.btn_play_BAW:g==P.SAPPHIRE?B.btn_play_sapphire:B.btn_play_easyocean,onClick:w}):o.jsx(ve,{src:g==P.DEFAULT||g==P.DARK?B.btn_sound:g==P.BLACK_AND_WHITE?B.btn_sound_BAW:g==P.SAPPHIRE?B.btn_sound_sapphire:B.btn_sound_easyocean,onClick:()=>e.setAudioSeekBarStatus(!0)})}),o.jsx(Gr,{underlinecolor:H,onClick:d,children:o.jsx(oe,{color:H,textAlign:"right",children:e.bookTitle+": "+e.subBookTitle})})]})]});return o.jsxs(Wr,{children:[e.showAudioSeekBar&&r(),m()]})}function it(e){const[n,i]=s.useState(e.isExistingInBookmark?100:0),[l,c]=s.useState(null),[h,C]=s.useState(!1),[v,N]=s.useState(0),[A,S]=s.useState(0),{textSize:I,theme:O,readingLanguage:b}=s.useContext(de),{mainBGColor:D}=fe(O),X=s.useRef(null),j=s.useRef(n),g=e.refer,H=s.useRef(),Y=window.matchMedia("(orientation: portrait)").matches;s.useEffect(()=>{j.current=n},[n]),s.useEffect(()=>{if(X.current&&g.current&&("verseHeader"in e.verse&&(X.current.style.height=`${g.current.getBoundingClientRect().height-4}px`,X.current.style.bottom="2px",X.current.style.alignSelf="self-end"),g.current.offsetHeight>0&&g.current.offsetHeight<=24)){const t=X.current.children[0];t.style.width="20px",t.style.height="20px",t.children[1].style.width="10px",t.children[1].style.height="10px"}},[e.verse,e.translatePanelHeight,Y]);const w=s.useCallback(t=>{if(t>0&&t<st){const r=t/st*100,m=e.isExistingInBookmark?100-r:r;i(m),j.current=m}else if(t>0){const r=e.isExistingInBookmark?0:100;i(r),j.current=r}else{const r=e.isExistingInBookmark?100:0;i(r),j.current=r}},[e.isExistingInBookmark]),k=s.useCallback(()=>{if(g.current){const t=Math.max(0,Math.min(A,zt));g.current.style.transform=`translateX(${t}px)`,w(t-Kt)}h&&(H.current=requestAnimationFrame(k))},[h,A,w]);s.useEffect(()=>(h?H.current=requestAnimationFrame(k):cancelAnimationFrame(H.current),()=>cancelAnimationFrame(H.current)),[h,k]);const Q=t=>{var m;!e.language&&C(!0),N(t);const r=(m=g.current)==null?void 0:m.getAttribute("data-id");r&&c(r)},a=t=>{if(!h)return;const r=Math.max(0,t-v);e.isLoggedIn&&r>lt&&S(r-lt)},d=()=>{C(!1),g.current&&(!e.isExistingInBookmark&&j.current==100||e.isExistingInBookmark&&j.current==0?l&&e.handleBookmark(l):e.isExistingInBookmark?(i(100),j.current=100):(i(0),j.current=0),g.current.style.transition="transform 0.3s ease-out",g.current.style.transform="translateX(0)",setTimeout(()=>{g.current&&(g.current.style.transition="")},300)),S(0)};s.useEffect(()=>{const t=g.current;if(t){const r=V=>{V.preventDefault(),Q(V.clientX)},m=V=>{V.preventDefault(),a(V.clientX)},p=V=>{V.preventDefault(),d()},_=V=>{Q(V.touches[0].clientX)},W=V=>{a(V.touches[0].clientX)},U=V=>{d()};return t.addEventListener("mousedown",r),document.addEventListener("mousemove",m),document.addEventListener("mouseup",p),t.addEventListener("touchstart",_),t.addEventListener("touchmove",W),t.addEventListener("touchend",U),()=>{t.removeEventListener("mousedown",r),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",p),t.removeEventListener("touchstart",_),t.removeEventListener("touchmove",W),t.removeEventListener("touchend",U)}}},[g,w,e.handleBookmark,v]);const x=t=>{for(var r in t)if(t[r]!==null&&t[r]!=="")return!0;return!1};return o.jsxs(Mr,{children:["verseHeader"in e.verse&&x(e.verse.verseHeader)&&o.jsx(jr,{"data-id":e.verse.verseId,"data-index":e.index,style:{backgroundColor:D},children:o.jsx(oe,{fontFamily:"Inter",fontWeight:"700",backgroundColor:D,fontSize:I,lineHeight:I+15,direction:e.language||b===Pe?"rtl":"ltr",children:e.verse.verseHeader[e.language||b]})}),!e.language&&o.jsx(sr,{progress:n,refer:X,backgroundColor:D}),o.jsx(Dr,{"data-id":"verseId"in e.verse?e.verse.verseId:e.verse.id,"data-index":e.index,ref:e.refer,children:o.jsx(oe,{fontFamily:"Inter",fontSize:I,backgroundColor:D,dataIndex:e.language?"":e.index.toString(),lineHeight:I+20,direction:b===Pe?"rtl":"ltr",children:"verseText"in e.verse?e.verse.verseText[e.language||b]:e.verse.text[e.language||b]})})]})}function Nt(e){var w,k,Q;const[n,i]=s.useState([]),[l,c]=s.useState([]),{scrollTopVerseIndex:h,setScrollTopVerseIndex:C,setHiddenTopVersePercentage:v,activeScroll:N,setActiveScroll:A}=s.useContext(De),S=s.useRef(null),I=s.useRef([]);I.current=(w=e.verses)==null?void 0:w.map((a,d)=>I.current[d]??s.createRef());const{theme:O,displayType:b}=s.useContext(de),{mainBGColor:D,textColor:X}=fe(O),j=localStorage.getItem(Gt)||$t,g=s.useCallback(()=>{let a=[];return I.current.forEach(d=>{d.current&&d.current.children[0]&&a.push(d.current.children[0].offsetHeight)}),a},[I]);s.useEffect(()=>{const a=g();i(a);const d=a.reduce((x,t,r)=>(x[r]=(x[r-1]||0)+t,x),[]);c(d)},[e.verses,g]);const H=s.useCallback(()=>{if(!S.current)return;const a=S.current.scrollTop;A(et);let d=0,x=l.length-1;for(;d<=x;){const U=Math.floor((d+x)/2);l[U]>a?x=U-1:d=U+1}const t=d-1;C(t);const r=t>0?l[t-1]:0,m=n[t],_=(a-r)/m*100,W=Math.min(Math.max(_,0),100);v(W)},[l,n,C]);s.useEffect(()=>{const a=S.current;if(a)return a.addEventListener("scroll",H),a.addEventListener("scrollend",()=>A(rt)),()=>{a.removeEventListener("scroll",H)}}),s.useEffect(()=>{var a;if((b===$.SPLIT_PANEL||b===$.ONLY_TRNSLATION)&&h>=0&&(N==Mt||N==Ne)){const d=I.current[Number(h)];(a=d==null?void 0:d.current)==null||a.scrollIntoView()}},[h]);const Y=(a,d)=>{var x;return a.image?o.jsx(Rt,{src:tt+"/images/"+a.image,alt:a.title.en||"Intro Image"},d):a.isCollapse?o.jsx(Nr,{children:o.jsx(ar,{label:(x=a.title)==null?void 0:x[j],outArrow:!0,detail:o.jsx(Or,{children:a.content.map((t,r)=>t.image?o.jsx(Rt,{src:tt+"/images/"+t.image,alt:a.title.en||"Intro Image"},r):o.jsx(oe,{children:t==null?void 0:t[j]},r))})})},d):o.jsx(it,{refer:I.current[d],verse:a,index:d,language:j,isExistingInBookmark:e.bookmarks.some(t=>t.id===a.id),isLoggedIn:e.isLoggedIn,translatePanelHeight:e.height,handleBookmark:e.handleBookmark},d)};return o.jsx(Rr,{style:{backgroundColor:D,color:X,height:e.height},children:o.jsxs(Pr,{ref:S,children:[!e.isIntro&&((k=e.verses)==null?void 0:k.map((a,d)=>o.jsx(it,{refer:I.current[d],verse:a,index:d,isExistingInBookmark:e.bookmarks.some(x=>x.verseId===a.verseId),isLoggedIn:e.isLoggedIn,translatePanelHeight:e.height,handleBookmark:e.handleBookmark},d))),e.isIntro&&((Q=e.verses)==null?void 0:Q.map((a,d)=>Y(a,d)))]})})}const tn=L(M)({margin:"0px",height:"100dvh"}),Ot=L(M)(({showaudioseekbar:e})=>({width:"100%",padding:"20px",height:e=="true"?"calc(100dvh - 150px)":"calc(100dvh - 100px)"})),rn=L(M)({width:"45px",height:"8px",margin:"auto",marginTop:"-4px",position:"relative",zIndex:"2",cursor:"grab","&:active":{cursor:"grabbing"}}),nn=L(M)({width:"100%",height:"100%",overflowX:"hidden",overflowY:"auto",margin:"0px",paddingBottom:"0px"}),on=L(M)({width:"100%",padding:"15px"});function an(e){const n=window.matchMedia("(orientation: portrait)").matches,[i,l]=s.useState([]),[c,h]=s.useState(null),[C,v]=s.useState(!1),[N,A]=s.useState(n?200:120),[S,I]=s.useState(!1),{theme:O,displayType:b}=s.useContext(de),{mainBGColor:D,topTextColor:X}=fe(O),{scrollTopVerseIndex:j,setScrollTopVerseIndex:g}=s.useContext(De),H=s.useRef([]),Y=s.useRef([]);H.current=i==null?void 0:i.map((u,f)=>H.current[f]??s.createRef()),Y.current=i==null?void 0:i.map((u,f)=>Y.current[f]??s.createRef());const w=new URLSearchParams(window.location.search),k=100,Q=100;window.matchMedia("(orientation: portrait)").addEventListener("change",u=>{const f=u.matches;A(f?200:120)});const[a,d]=s.useState(typeof window<"u"?window.innerHeight:1e3),x=e.showAudioSeekBar?a-150-N:a-100-N,t=nr(),{t:r}=jt(),m=s.useCallback(u=>{Ee.fetchVerses(u).then(f=>{l(f.verses),f&&f.length>0&&h(f.chapterAudio),e.dispatch({type:ge.ADD_CHAPTERINFO,payload:{chapterInfo:f}}),v(!1)}).catch(f=>{v(!1),z.custom(T=>o.jsx(G,{text:r(f),offset:70,visible:T.visible}))})},[]),p=s.useCallback((u,f)=>{var T;if(I(f),(T=e.chapterInfos)!=null&&T.length){const E=e.chapterInfos.find(R=>R.chapterId===u);E?(I(E.chapterNumber==0),l(E.verses),h(E.chapterAudio)):f?_(u):m(u),v(!1)}else f?_(u):m(u),v(!1)},[]),_=s.useCallback(u=>{Ee.fetchIntroVerses(u).then(f=>{l(f.verses),e.dispatch({type:ge.ADD_CHAPTERINFO,payload:{chapterInfo:f}})}).catch(f=>{z.custom(T=>o.jsx(G,{text:r(f),offset:70,visible:T.visible}))}).finally(()=>{v(!1)})},[]),W=s.useCallback(async u=>{try{const f=await Ee.fetchSubBookInfo(u);e.dispatch({type:ge.ADD_SUBBOOK,payload:{subBook:f}})}catch(f){z.custom(T=>o.jsx(G,{text:r(f),visible:T.visible}))}finally{v(!1)}},[e.subBooks]),U=s.useCallback(u=>{for(const f of e.bookInfos)for(const T of f.subBooks){const E=T.chapterInfos.find(R=>R.chapterId==u);if(E)return E}},[]),V=s.useCallback(u=>{for(const f of e.subBooks){const T=f.chapterInfos.find(E=>E.chapterId==u);if(T)return T}},[]);s.useEffect(()=>{const u=w.get("subBookId");!e.subBooks.find(T=>T.subBookId==u)&&u&&W(u)},[e.subBooks]),s.useEffect(()=>{var E,R;v(!0);let u="";localStorage.getItem(te)?u=localStorage.getItem(te)||"":(u=w.get("chapterId")||"",localStorage.setItem(te,u));const f=w.get("subBookId"),T=w.get("verseId");if(T){const y=i.find(Z=>Z.verseId==T);y&&(g(y[0].verseNumber-1),b==$.VERSE_BY_VERSE&&((E=Y.current[y[0].verseNumber-1].current)==null||E.scrollIntoView()))}if(u){const y=U(u);if(((R=e.subBookInfos)==null?void 0:R.length)>=0){const Z=e.subBookInfos.find(J=>J.subBookId===f);if(Z){const J=Z.chapterInfos.find(ce=>ce.chapterId===u);J?(I(J.chapterNumber==0),l(J.verses),h(J.chapterAudio)):(I(!!y),p(u,(y==null?void 0:y.chapterNumber)==0))}else I(!!y),p(u,(y==null?void 0:y.chapterNumber)==0)}else I(!!y),p(u,(y==null?void 0:y.chapterNumber)==0)}v(!1)},[S]),s.useEffect(()=>{const u=()=>d(window.innerHeight);return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]),s.useEffect(()=>{v(!0);const u=localStorage.getItem(te)||w.get("chapterId");let f=!1;if(e.userHistory&&e.userHistory.length>0&&e.userHistory.forEach(T=>{if(T.readChapterIds.includes(u)){f=!0,v(!1);return}}),!f){const T={chapterId:u};Ee.saveHistory(T).then(E=>{e.dispatch({type:ge.SET_USER_HISTORY,payload:{userHistories:E}}),v(!1)}).catch(E=>{E.status==401&&E.response.data.message==Ve&&(z.custom(R=>o.jsx(G,{text:r(E.response.data.message),visible:R.visible})),qe.logout(),t("/login")),v(!1)})}},[]),s.useEffect(()=>{(b==$.ONLY_TRNSLATION||S)&&A(0),b!=$.ONLY_TRNSLATION&&!S&&A(n?200:120)},[b,S]),s.useEffect(()=>{var u,f;b==$.VERSE_BY_VERSE&&j>=0&&((f=(u=Y.current[j])==null?void 0:u.current)==null||f.scrollIntoView())},[j,b,Y,i]),s.useEffect(()=>{const u=w.get("bothTranslated");b!=$.ONLY_TRNSLATION&&u=="false"&&z.custom(f=>o.jsx(G,{text:r("One Translated"),offset:e.showAudioSeekBar?125:70,visible:f.visible}))},[b]);const F=s.useCallback(u=>{var E;v(!0);const f=(E=e.bookmark)==null?void 0:E.find(R=>R.verseId===u),T={verseId:u};try{if(!f)ct.saveBookmark(T).then(R=>{e.dispatch({type:ge.ADD_BOOKMARK,payload:{bookmark:R.bookmark}}),v(!1),z.custom(y=>o.jsx(G,{text:r("Bookmark Saved"),type:Te.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:y.visible}))}).catch(R=>{v(!1),R.status==401&&R.response.data.message==Ve&&(z.custom(y=>o.jsx(G,{text:r(R.response.data.message),offset:e.showAudioSeekBar?125:70,visible:y.visible})),qe.logout(),t("/login"))});else{const R=e.bookmark.filter(y=>y.verseId==u);R&&R.length>0&&ct.deleteBookmark(R[0]._id).then(()=>{e.dispatch({type:ge.REMOVE_BOOKMARK,payload:{bookmarkId:f._id}}),v(!1),z.custom(y=>o.jsx(G,{text:r("Bookmark Deleted"),type:Te.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:y.visible}))}).catch(y=>{v(!1),y.status==401&&y.response.data.message==Ve&&(z.custom(Z=>o.jsx(G,{text:r(y.response.data.message),type:Te.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:Z.visible})),qe.logout(),t("/login"))})}}catch(R){v(!1),z.custom(y=>o.jsx(G,{text:r(R),type:Te.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:y.visible}))}},[e,r]),ee=s.useCallback((u,f,T)=>{let E=f+(T-u),R=a-150-E;E<k?(E=k,R=a-150-k):R<Q&&(E=a-150-Q),A(E)},[a]),re=u=>{const f=u.clientY,T=N,E=y=>ee(f,T,y.clientY),R=()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",R)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",R)},le=u=>{const f=u.touches[0].clientY,T=N,E=y=>ee(f,T,y.touches[0].clientY),R=()=>{document.removeEventListener("touchmove",E),document.removeEventListener("touchend",R)};document.addEventListener("touchmove",E),document.addEventListener("touchend",R)},xe=u=>{e.dispatch({type:ge.SET_AUDIO_SEEK_BAR_STATUS,payload:{showAudioSeekBar:u}})},pe=()=>{t("/sound-settings")},ne=()=>{localStorage.removeItem(te),t(-1)},me=s.useCallback(u=>{var he;const f=w.get("bookId"),T=localStorage.getItem(te),E=localStorage.getItem(ke);if(v(!0),!T&&w.get("chapterId")){const q=w.get("chapterId");q&&localStorage.setItem(te,q)}if(!E&&w.get("subBookId")){const q=w.get("subBookId");q&&localStorage.setItem(ke,q)}const R=e.bookInfos.find(q=>q.bookId==f);if(!R){v(!1);return}const y=e.subBooks.find(q=>{var ue;return(ue=q.chapterInfos)==null?void 0:ue.some(K=>K.chapterId==T)});if(!y){v(!1);return}const Z=y.subBookNumber,J=R.subBooks.find(q=>q.subBookNumber==Z+1),ce=R.subBooks.find(q=>q.subBookNumber==Z-1),Se=(q,ue)=>{if(q&&q.chapterInfos&&q.chapterInfos.length>0){const K=q.chapterInfos[0].chapterId;localStorage.setItem(te,K),localStorage.setItem(ke,q.subBookId);const ae=V(K);p(K,(ae==null?void 0:ae.chapterNumber)==0)}else z.custom(K=>o.jsx(G,{text:r(ue?"Last Chapter":"First Chapter"),offset:e.showAudioSeekBar?125:70,visible:K.visible})),v(!1)};if(y!=null&&y.noChapter)u==Oe?Se(J,!0):Se(ce,!1);else{const q=(he=y.chapterInfos)==null?void 0:he.find(ie=>ie.chapterId==T);if(!q){v(!1);return}const ue=y.chapterInfos.length,K=q.chapterNumber,ae=ie=>{const Ce=y.chapterInfos.find(Ut=>Ut.chapterNumber==ie);Ce&&(localStorage.setItem(te,Ce.chapterId),Ce.chapterNumber==0?I(!0):I(!1),l(Ce.verses),v(!1))};u==Oe?K>=ue-1?(v(!1),z.custom(ie=>o.jsx(G,{text:r("Last Chapter"),offset:70,visible:ie.visible}))):ae(K+1):K==0?(v(!1),z.custom(ie=>o.jsx(G,{text:r("First Chapter"),offset:70,visible:ie.visible}))):ae(K-1)}},[e.subBooks]);return o.jsxs(tn,{style:{backgroundColor:D},children:[!S&&o.jsxs(Ot,{showaudioseekbar:e.showAudioSeekBar?"true":"false",children:[b==$.SPLIT_PANEL&&o.jsxs(o.Fragment,{children:[o.jsx(Hr,{verses:i,height:N}),o.jsx(rn,{style:{backgroundColor:X},onMouseDown:re,onTouchStart:le})]}),(b==$.ONLY_TRNSLATION||b==$.SPLIT_PANEL)&&o.jsx(Nt,{verses:i,height:x,originPanelHeight:N,bookmarks:e.bookmark,isLoggedIn:!!e.currentUser,isIntro:S,handleBookmark:F}),b==$.VERSE_BY_VERSE&&o.jsx(nn,{children:i.map((u,f)=>{var T;return o.jsxs(on,{ref:Y.current[f],children:[o.jsx(nt,{verse:u,refer:H.current[f],index:f}),o.jsx(it,{refer:H.current[f],verse:u,index:f,isLoggedIn:!!e.currentUser,handleBookmark:F,isExistingInBookmark:((T=e.bookmark.filter(E=>E.verseId==u.verseId))==null?void 0:T.length)>0})]},f)})})]}),S&&o.jsx(Ot,{showaudioseekbar:"false",children:o.jsx(Nt,{verses:i,height:x,originPanelHeight:N,bookmarks:e.bookmark,isLoggedIn:!!e.currentUser,isIntro:S,handleBookmark:F})}),o.jsx(en,{src:c,bookTitle:w.get("book")||"",subBookTitle:w.get("subBook")||"",showAudioSeekBar:e.showAudioSeekBar,verses:i,isIntro:S,setAudioSeekBarStatus:xe,moveToSoundSettingPage:pe,moveToPrevPage:ne,handleNavigateBtn:me}),C&&o.jsx(or,{})]})}const sn=e=>({bookmark:e.books.bookmark,bookInfos:e.books.bookInfos,subBooks:e.books.subBooks,subBookInfos:e.books.subBookInfos,chapterInfos:e.books.chapterInfos,userHistory:e.books.userHistory,currentUser:e.user.currentUser,showAudioSeekBar:e.pageStatus.showAudioSeekBar}),mn=rr(sn)(an);export{mn as default};
