var H=Object.defineProperty;var U=(e,t,o)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var v=(e,t,o)=>U(e,typeof t!="symbol"?t+"":t,o);import{b as i,j as n,a3 as A,au as N}from"./index-8GXEJ_4u.js";import{S as T,g as b,a as P,b as I,s as y,B as R,c as F,u as M,d as c,k as _}from"./App-CILHVfpg.js";import{u as w}from"./useOrientation-AQr98f9Y.js";import{B as K,S as O,L as W,T as z,H as D,a as j,b as Y,c as q}from"./styled-c-gsX2Nk.js";import{T as p,I as E}from"./index-D5pPTTqE.js";import{H as J}from"./index-DluHCj7w.js";import{B as Q}from"./Button-BvFHyHEf.js";import{L as V}from"./index-B1wHBceb.js";import{S as X}from"./index-Dw0zGuTl.js";import{C as k}from"./index-BCtnnp_i.js";import{a as B}from"./auth.service-A_fsn4LQ.js";import{a as Z}from"./axios-upsvKRUO.js";import"./index-B7f_unvN.js";function $({label:e,checked:t,onChange:o}){const{theme:l}=i.useContext(T),{altTextColor:g}=b(l);return n.jsx(P,{control:n.jsx(I,{checked:t,bordercolor:g,onChange:o}),label:n.jsx(p,{color:g,children:e}),style:{color:g},bordercolor:g})}const ee=y(R)({display:"flex"}),ae=y(ee)({justifyContent:"center",alignItems:"center"}),te=y(ae)({width:"100dvw",height:"100dvh"});function ne(e){const{theme:t}=i.useContext(T),{headerBGColor:o,logoTextColor:l}=b(t),[g,m]=i.useState(""),[h,C]=i.useState("");return i.useEffect(()=>{var u,x,L,f,S,s;if(e.isHeaven){const a=(u=e.pageTerms)==null?void 0:u.texts.find(r=>r.variable=="Welcome Heavenly");m(((x=a==null?void 0:a.text)==null?void 0:x[e.appLanguage])||((L=a==null?void 0:a.text)==null?void 0:L.en)||"")}else{const a=(f=e.pageTerms)==null?void 0:f.texts.find(r=>r.variable=="Welcome");m(((S=a==null?void 0:a.text)==null?void 0:S[e.appLanguage])||((s=a==null?void 0:a.text)==null?void 0:s.en)||"")}},[e.isHeaven,e.pageTerms,e.appLanguage]),i.useEffect(()=>{const u=e.isHeaven?t==A.EASY_OCEAN?E.main_logo_heaven_easyocean:E.main_logo_heaven:t==A.EASY_OCEAN?E.main_logo_easyocean:E.main_logo;C(u)},[e.isHeaven,t]),n.jsxs(K,{style:{backgroundColor:o},children:[n.jsx(O,{children:n.jsx(J,{isLogin:e.isLoggedIn,textColor:l,itemBgColor:o,terms:e.pageTerms,onLogin:e.onLogin,onSettings:e.onSettings})}),n.jsx(W,{src:h}),n.jsx(z,{children:n.jsx(p,{color:l,fontFamily:"Buenard",fontWeight:"700",textAlign:"center",fontSize:36,lineHeight:47,children:g})})]})}function se(e){var h,C,u,x,L,f,S,s;const{theme:t}=i.useContext(T),{mainBGColor:o,altTextColor:l}=b(t),g=a=>{const r=a.target.value;e.handleLanguageChange(r)},m=a=>{e.handleKeepLanguageChange(a.target.checked)};return n.jsxs(D,{style:{backgroundColor:o},children:[n.jsx(p,{color:l,children:((C=(h=e.pageTerms.texts.find(a=>a.variable=="Reading Language"))==null?void 0:h.text)==null?void 0:C[e.appLanguage])||"Reading Language"}),n.jsx(j,{children:n.jsx(X,{label:"",options:e.languages,value:e.appLanguage,textColor:l,backgroundColor:o,onChange:g})}),n.jsx(j,{children:n.jsx($,{label:((x=(u=e.pageTerms.texts.find(a=>a.variable=="Keep App"))==null?void 0:u.text)==null?void 0:x[e.appLanguage])||"Keep App in English",checked:e.keepLanguage,onChange:m})}),n.jsx(Y,{children:n.jsx(Q,{label:((f=(L=e.pageTerms.texts.find(a=>a.variable=="Start"))==null?void 0:L.text)==null?void 0:f[e.appLanguage])||"Start",onClick:e.onStartClicked,size:"medium"})}),n.jsx(q,{children:n.jsx(V,{label:((s=(S=e.pageTerms.texts.find(a=>a.variable=="Save App"))==null?void 0:S.text)==null?void 0:s[e.appLanguage])||"Save this as an app"})})]})}class oe{constructor(){v(this,"getAllTerms",()=>new Promise((t,o)=>{const l=N+"/translator/appTexts";Z.get(l).then(g=>{t(g.data)}).catch(g=>{o(this.getErrorMessage(g))})}))}getErrorMessage(t){let o=t.message;return t.response&&t.response.data&&t.response.data.message&&(o=t.response.data.message),o}}const ge=new oe;function ie(e){const t=w(),o=M(),[l,g]=i.useState(!1),[m,h]=i.useState(),{readingLanguage:C}=i.useContext(T);i.useEffect(()=>{ge.getAllTerms().then(s=>{var r,d;e.dispatch({type:c.SET_TERMS,payload:{terms:s}});const a=s.find(G=>G.pageTitle="Welcome Page");((r=a==null?void 0:a.isPublished)!=null&&r[C]||(d=a==null?void 0:a.isPublished)!=null&&d.en)&&h(a)}).catch(s=>{_.custom(a=>n.jsx(k,{text:s,visible:a.visible}))})},[]),i.useEffect(()=>{window.location.href.includes("holy")?g(!1):g(!0)},[]),i.useEffect(()=>{const s=e.terms.find(a=>a.pageTitle="Welcome Page");h(s)},[e.terms]),i.useEffect(()=>{B.getAllLanguages().then(s=>{const r=s.languages.map(d=>({value:d==="English"?"en":d==="Arabic"?"ar":d==="Tagalog"?"tlg":d,label:d}));e.dispatch({type:c.SET_LANGUAGES,payload:{languages:r}})}).catch(s=>{_.custom(a=>n.jsx(k,{text:s,visible:a.visible}))})},[]);const u=()=>{o("/login")},x=()=>{e.dispatch({type:c.RESET_USER}),e.dispatch({type:c.RESET_BOOK}),e.dispatch({type:c.RESET_PAGE_STATUS}),B.logout()},L=()=>{o("/library")},f=s=>{e.dispatch({type:c.SET_APP_LANGUAGE,payload:{language:s}}),e.dispatch({type:c.SET_READING_LANGUAGE,payload:{language:s}})},S=s=>{e.dispatch({type:c.SET_APP_LANGUAGE,payload:{language:"en"}}),e.dispatch({type:c.SET_READING_LANGUAGE,payload:{language:"en"}}),e.dispatch({type:c.SET_KEEP_EN_LANGUAGE,payload:{keepLanguage:s}})};return n.jsxs(te,{flexDirection:t?"column":"row",children:[n.jsx(ne,{isLoggedIn:e.currentUser!=null,isHeaven:l,pageTerms:m||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},appLanguage:e.appLanguage,onLogin:e.currentUser?x:u,onSettings:()=>o("/settings")}),n.jsx(se,{pageTerms:m||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},appLanguage:e.appLanguage,readingLanguage:e.readingLanguage,keepLanguage:e.keepLanguage,languages:e.languages,onStartClicked:L,handleLanguageChange:f,handleKeepLanguageChange:S})]})}function le(e){return{currentUser:e.user.currentUser,appLanguage:e.user.appLanguage,readingLanguage:e.user.readingLanguage,keepLanguage:e.user.keepEnLanguage,languages:e.user.languages,terms:e.terms.terms}}const ye=F(le)(ie);export{ye as default};
