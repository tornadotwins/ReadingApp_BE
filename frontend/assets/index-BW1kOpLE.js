var Me=Object.defineProperty;var Le=(e,t,i)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var xe=(e,t,i)=>Le(e,typeof t!="symbol"?t+"":t,i);import{c as ge,_ as N,j as o,N as X,b as u,a8 as $e,o as J,J as Fe,ac as oe,ag as ne,Q as B,aj as se,ak as re,M as L,al as le,am as Ue,an as ze,ao as ce,ap as he,aq as fe,af as He}from"./index-DDg5x1vp.js";import{x as Ae,y as Ee,z as We,A as ae,s as r,D as Ke,E as Oe,F as ue,G as De,J as Ge,B as b,K as Ye,u as Q,S as Z,g as ee,_ as G,c as qe,d as Ve,e as z}from"./App-BunYvIBc.js";import{I as x,T as R,g as Xe,a as pe}from"./images-BjV7i-w0.js";import{H as Je}from"./index-DkyAOS7O.js";import{A as Qe,b as ke}from"./bookmark.service-BfvhNkdn.js";import{S as Ze}from"./index-CjxYLSXE.js";import{C as Y,L as et}from"./index-CK9kFthR.js";import{b as me}from"./book.service-2NLq_LIt.js";import{a as de}from"./auth.service-Dnuse4UM.js";import"./index-gXoRnnud.js";import"./axios-BimPEqV4.js";function tt(e){return Ae("MuiPagination",e)}Ee("MuiPagination",["root","ul","outlined","text"]);const ot=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function nt(e={}){const{boundaryCount:t=1,componentName:i="usePagination",count:n=1,defaultPage:l=1,disabled:k=!1,hideNextButton:s=!1,hidePrevButton:g=!1,onChange:h,page:f,showFirstButton:v=!1,showLastButton:C=!1,siblingCount:S=1}=e,y=ge(e,ot),[m,M]=We({controlled:f,default:l,name:i,state:"page"}),P=(a,c)=>{f||M(c),h&&h(a,c)},I=(a,c)=>{const w=c-a+1;return Array.from({length:w},(q,j)=>a+j)},_=I(1,Math.min(t,n)),A=I(Math.max(n-t+1,t+1),n),E=Math.max(Math.min(m-S,n-t-S*2-1),t+2),T=Math.min(Math.max(m+S,t+S*2+2),A.length>0?A[0]-2:n-1),O=[...v?["first"]:[],...g?[]:["previous"],..._,...E>t+2?["start-ellipsis"]:t+1<n-t?[t+1]:[],...I(E,T),...T<n-t-1?["end-ellipsis"]:n-t>t?[n-t]:[],...A,...s?[]:["next"],...C?["last"]:[]],F=a=>{switch(a){case"first":return 1;case"previous":return m-1;case"next":return m+1;case"last":return n;default:return null}},d=O.map(a=>typeof a=="number"?{onClick:c=>{P(c,a)},type:"page",page:a,selected:a===m,disabled:k,"aria-current":a===m?"true":void 0}:{onClick:c=>{P(c,F(a))},type:a,page:F(a),selected:!1,disabled:k||a.indexOf("ellipsis")===-1&&(a==="next"||a==="last"?m>=n:m<=1)});return N({items:d},y)}function at(e){return Ae("MuiPaginationItem",e)}const $=Ee("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),ye=ae(o.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Be=ae(o.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),ve=ae(o.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Ce=ae(o.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),it=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Pe=(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],t[`size${J(i.size)}`],i.variant==="text"&&t[`text${J(i.color)}`],i.variant==="outlined"&&t[`outlined${J(i.color)}`],i.shape==="rounded"&&t.rounded,i.type==="page"&&t.page,(i.type==="start-ellipsis"||i.type==="end-ellipsis")&&t.ellipsis,(i.type==="previous"||i.type==="next")&&t.previousNext,(i.type==="first"||i.type==="last")&&t.firstLast]},st=e=>{const{classes:t,color:i,disabled:n,selected:l,size:k,shape:s,type:g,variant:h}=e,f={root:["root",`size${J(k)}`,h,s,i!=="standard"&&`color${J(i)}`,i!=="standard"&&`${h}${J(i)}`,n&&"disabled",l&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[g]],icon:["icon"]};return De(f,at,t)},rt=r("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Pe})(({theme:e,ownerState:t})=>N({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${$.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),lt=r(Ke,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Pe})(({theme:e,ownerState:t})=>N({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${$.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${$.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${$.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:X(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${$.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:X(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${$.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:t})=>N({},t.variant==="text"&&{[`&.${$.selected}`]:N({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}},[`&.${$.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}},{[`&.${$.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},t.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${$.selected}`]:N({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:X(e.palette[t.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:X(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:X(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${$.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:X(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${$.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),ct=r("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})(({theme:e,ownerState:t})=>N({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(22)})),dt=u.forwardRef(function(t,i){const n=Oe({props:t,name:"MuiPaginationItem"}),{className:l,color:k="standard",component:s,components:g={},disabled:h=!1,page:f,selected:v=!1,shape:C="circular",size:S="medium",slots:y={},type:m="page",variant:M="text"}=n,P=ge(n,it),I=N({},n,{color:k,disabled:h,selected:v,shape:C,size:S,type:m,variant:M}),_=$e(),A=st(I),T=(_?{previous:y.next||g.next||Ce,next:y.previous||g.previous||ve,last:y.first||g.first||ye,first:y.last||g.last||Be}:{previous:y.previous||g.previous||ve,next:y.next||g.next||Ce,first:y.first||g.first||ye,last:y.last||g.last||Be})[m];return m==="start-ellipsis"||m==="end-ellipsis"?o.jsx(rt,{ref:i,ownerState:I,className:ue(A.root,l),children:"â€¦"}):o.jsxs(lt,N({ref:i,ownerState:I,component:s,disabled:h,className:ue(A.root,l)},P,{children:[m==="page"&&f,T?o.jsx(ct,{as:T,ownerState:I,className:A.icon}):null]}))}),ut=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],gt=e=>{const{classes:t,variant:i}=e;return De({root:["root",i],ul:["ul"]},tt,t)},bt=r("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant]]}})({}),xt=r("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function ht(e,t,i){return e==="page"?`${i?"":"Go to "}page ${t}`:`Go to ${e} page`}const ft=u.forwardRef(function(t,i){const n=Oe({props:t,name:"MuiPagination"}),{boundaryCount:l=1,className:k,color:s="standard",count:g=1,defaultPage:h=1,disabled:f=!1,getItemAriaLabel:v=ht,hideNextButton:C=!1,hidePrevButton:S=!1,renderItem:y=d=>o.jsx(dt,N({},d)),shape:m="circular",showFirstButton:M=!1,showLastButton:P=!1,siblingCount:I=1,size:_="medium",variant:A="text"}=n,E=ge(n,ut),{items:T}=nt(N({},n,{componentName:"Pagination"})),O=N({},n,{boundaryCount:l,color:s,count:g,defaultPage:h,disabled:f,getItemAriaLabel:v,hideNextButton:C,hidePrevButton:S,renderItem:y,shape:m,showFirstButton:M,showLastButton:P,siblingCount:I,size:_,variant:A}),F=gt(O);return o.jsx(bt,N({"aria-label":"pagination navigation",className:ue(F.root,k),ownerState:O,ref:i},E,{children:o.jsx(xt,{className:F.ul,ownerState:O,children:T.map((d,a)=>o.jsx("li",{children:y(N({},d,{color:s,"aria-label":v(d.type,d.page,d.selected),shape:m,size:_,variant:A}))},a))})}))});function pt(e){return o.jsx(ft,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function Se(){const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}function kt(){const[e,t]=u.useState(Se());return u.useEffect(()=>{function i(){t(Se())}return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),e}var be={},mt=Fe;Object.defineProperty(be,"__esModule",{value:!0});var Re=be.default=void 0,yt=mt(Ge()),Bt=o;Re=be.default=(0,yt.default)((0,Bt.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const vt=r(b)({display:"flex",position:"relative",width:"100%"}),Ct=r("img")({width:"100%",marginTop:"57px"}),St=r(b)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),It=r(b)({display:"flex",alignItems:"baseline"}),wt=r(b)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),Tt=r("img")({width:"100%",height:"100%"}),jt=r(b)({margin:0,marginLeft:"12px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),_t=r(b)(({hamburgercolor:e})=>({position:"absolute",top:"12px",right:"15px",width:"46px","& .hamburger-react":{width:"46px !important",color:e},"& .hamburger-react ~ .MuiBox-root ":{border:`1px solid ${e}`},"@media (max-height: 639px)":{top:"8px",right:"10px"},"@media screen and (orientation: landscape)":{right:"15px"}})),At=r("img")({cursor:"pointer","&:active":{opacity:"0.8"}}),Et=r(b)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),Ot=r("img")({width:"100%","&:active":{opacity:"0.8"}});r("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}});const Dt=r(b)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Pt=r(b)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Rt=r(b)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),Ie=r(b)(({active:e,bordercolor:t})=>({width:"50%",height:"37.9px",border:`1px solid ${t}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer",marginBottom:"20px"})),we=r("img")({}),Te=r(b)(({active:e})=>({marginLeft:"5px"})),Nt=r(b)({width:"100%",display:"flex",flexDirection:"column"}),Mt=r(b)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),Lt=r(b)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});r(b)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const $t=r(b)({display:"flex",flexDirection:"column"}),Ft=r(b)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),Ut=r(b)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});r(b)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const zt=r(b)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),Ht=r("img")({cursor:"pointer",marginRight:"15px"}),Wt=r(Ye)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),Kt=r(b)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),Gt=r("img")({width:"63px"}),Yt=r(b)({margin:"0px",marginLeft:"24px","@media (max-height: 600px)":{"& .MuiBox-root":{fontSize:"14px !important"}}}),qt=r(b)({width:"100%",justifyContent:"space-between",alignItems:"center",margin:"10px 0px"}),Vt=r(b)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"center",padding:"0px 7px"});r(Re)({marginLeft:"-33px",color:"#17637D",height:"30px"});const Xt=r(b)(({progress:e,progresscolor:t})=>({width:"calc(100% - 60px)",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",borderBottom:`1px solid ${t}`,"::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${e}%`,borderBottom:e!=0?`2px solid ${t}`:"none"}})),Jt=r(b)(({istransliteration:e})=>({margin:"5px 0px 5px 0px",display:"flex",justifyContent:"space-between","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& .MuiBox-root:first-of-type":{width:"48%"},"& .MuiBox-root:last-child":{marginInlineEnd:"auto",width:e=="true"?"48%":"75%"}})),Qt=r(b)({display:"flex",justifyContent:"space-between"}),Zt=r(b)({width:"80%",display:"flex","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}),eo=r("img")({width:"20px",marginLeft:"10px"}),to=r(b)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),je=r("img")({marginLeft:"3px",cursor:"pointer"}),oo=r(b)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),no=r(b)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),ao=r(b)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),_e=r(b)(({style:e,disable:t,readalready:i,readbgcolor:n,readtextcolor:l})=>({opacity:t=="true"?.5:1,pointerEvents:t=="true"?"none":"initial",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:i=="true"?`${n} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:i=="true"?`${l} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:i=="true"?`${l} !important`:`${e.color} !important`}})),io=r("img")({width:"50%",height:"50%"});function so(e){var C;const[t,i]=u.useState(""),[n,l]=u.useState(""),{t:k}=Q(),{theme:s}=u.useContext(Z),{buttonTextColor:g,logoTextColor:h,headerBGColor:f}=ee(s),v=localStorage.getItem(oe)||ne;return u.useEffect(()=>{var S;e.markTitle?i((S=e.markTitle)==null?void 0:S[v]):i(k("Default Book Title")),e.markImg?l(e.markImg):l(x.default_cover)},[e.markTitle,e.markImg]),o.jsxs(vt,{children:[o.jsx(Ct,{src:s==B.DEFAULT||s==B.DARK?x.book_subtract:s==B.BLACK_AND_WHITE?x.book_subtract_BAW:s==B.SAPPHIRE?x.book_subtract_sapphire:x.book_subtract_easyocean}),o.jsxs(St,{children:[o.jsxs(It,{children:[o.jsxs(wt,{onClick:e.onLogoClick,children:[o.jsx(Tt,{src:n}),o.jsx(R,{fontFamily:"Kapakana",fontSize:25,lineHeight:24,fontWeight:"400",color:g,children:(C=e.markTitle)==null?void 0:C[v]})]}),o.jsx(jt,{children:o.jsx(R,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:h,children:t})})]}),o.jsx(At,{src:s==B.EASY_OCEAN?x.search_easyocean:x.search,onClick:e.onSearchClick})]}),o.jsx(Et,{children:o.jsx(Ot,{src:s==B.DEFAULT||s==B.DARK?x.close2:s==B.BLACK_AND_WHITE?x.close2_BAW:s==B.SAPPHIRE?x.close2_sapphire:x.close2_easyocean,onClick:e.onCloseClick})}),o.jsx(_t,{hamburgercolor:f,children:o.jsx(Je,{isLogin:e.isLogIn,textColor:h,itemBgColor:f,onLogin:e.onLogin,onSettings:e.onSettings})})]})}function ro(e){var a,c,w,q,j;const[t,i]=u.useState([]),[n,l]=u.useState(),[k,s]=u.useState(!1),[g,h]=u.useState(!1),[f,v]=u.useState(0),{theme:C}=u.useContext(Z),{mainBGColor:S,altTextColor:y,backgroundColor:m,topTextColor:M,highlightColor:P,buttonColor:I,buttonTextColor:_}=ee(C),{t:A}=Q(),E=localStorage.getItem(oe)||ne,T=u.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const p=e.userHistory.filter(D=>D.bookId==e.bookId);if(p&&p.length>0)return p[0].readChapterIds}return[]},[e.userHistory]),O=e.subBookId;u.useEffect(()=>{e.openedSubBook==e.subBookId?s(!0):s(!1)},[e.openedSubBook]),u.useEffect(()=>{var H,W;const p=e.subBooks.filter(U=>U.subBookId===O);let D=0;if(p&&p.length>0&&(D=(H=p[0].chapterInfos)==null?void 0:H.length,l(p[0])),e.currentUser){const U=e.userHistory.filter(K=>K.bookId==e.bookId);if(U&&U.length>0){const K=U[0].subBooks.filter(ie=>ie.subBookId==O);K&&K.length>0&&v(Math.floor(((W=K[0])==null?void 0:W.readChapters)/D*100))}}if(e.subBooks&&e.subBooks.length>0){const U=e.subBooks.filter(K=>K.subBookId==O);if(U&&U.length>0){let K=U[0].chapterInfos;K.sort((ie,Ne)=>ie.chapterNumber-Ne.chapterNumber),i(K)}}},[e.subBooks,e.userHistory]),u.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const p=e.subBookInfos.filter(D=>D.subBookId==O);p&&p.length>0?h(!0):h(!1)}},[]);const F=u.useCallback(p=>{h(D=>!D),e.onDownload(p)},[]),d=()=>{var p,D;n!=null&&n.noChapter?e.moveToReading(n==null?void 0:n.chapterInfos[0].chapterId,(p=e.bookTitle)==null?void 0:p[E],(D=n.subBookTitle)==null?void 0:D[E],n.subBookId):(s(!k),e.handleOpenedSubBook(e.subBookId))};return o.jsxs(qt,{children:[o.jsxs(Vt,{children:[o.jsxs(Xt,{progress:f,progresscolor:I,onClick:d,children:[(n==null?void 0:n.subBookNumber)!=0&&o.jsxs(Jt,{istransliteration:((a=n==null?void 0:n.subBookTitle)==null?void 0:a[se])!=null?"true":"false",children:[((c=n==null?void 0:n.subBookTitle)==null?void 0:c[se])&&o.jsx(R,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:y,language:re,children:(n==null?void 0:n.subBookNumber)+". "+((w=n==null?void 0:n.subBookTitle)==null?void 0:w[se])}),o.jsx(R,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:y,language:re,direction:"rtl",children:(q=n==null?void 0:n.subBookTitle)==null?void 0:q[re]})]}),o.jsxs(Qt,{children:[o.jsxs(Zt,{children:[o.jsx(R,{fontFamily:'"Baloo Da 2"',color:y,children:(j=n==null?void 0:n.subBookTitle)==null?void 0:j[E]}),(n==null?void 0:n.subBookNumber)==0&&o.jsx(eo,{src:x.icon_intro})]}),e.currentUser&&f!==0&&!(n!=null&&n.noChapter)&&o.jsx(R,{fontFamily:'"Baloo Da 2"',color:I,children:`${f}%`})]})]}),o.jsxs(to,{isdownloaded:g?"true":"false",children:[o.jsx(je,{src:g?C==B.DEFAULT||C==B.EASY_OCEAN?x.download_cancel:x.download_cancel_white:C==B.DEFAULT||C==B.EASY_OCEAN?x.download:x.download_white,onClick:()=>F(O)}),g&&o.jsx(je,{src:C==B.DEFAULT||C==B.EASY_OCEAN?x.download_refresh:x.download_refresh_white,onClick:()=>e.onDownloadRefresh(O)})]})]}),k&&o.jsxs(oo,{style:{backgroundColor:m},children:[o.jsxs(no,{children:[o.jsx(R,{fontFamily:"Inter",color:M,children:A("Surah")}),o.jsx(R,{fontFamily:"Inter",color:P,children:A("Chapter")})]}),o.jsx(ao,{children:t==null?void 0:t.map((p,D)=>p.chapterNumber==0?o.jsx(_e,{disable:p.isTranslated?"false":"true",readalready:T&&T.length>0&&T.includes(p.chapterId)?"true":"false",style:{backgroundColor:S,color:y},readbgcolor:I,readtextcolor:_,onClick:()=>{var H,W;e.moveToReading(p.chapterId,(H=e.bookTitle)==null?void 0:H[E],(W=n.subBookTitle)==null?void 0:W[E],n.subBookId)},children:o.jsx(io,{src:x.icon_intro})},D):o.jsx(_e,{disable:p.isTranslated?"false":"true",readalready:T&&T.length>0&&T.includes(p.chapterId)?"true":"false",style:{backgroundColor:S,color:y},readbgcolor:I,readtextcolor:_,onClick:()=>{var H,W;e.moveToReading(p.chapterId,(H=e.bookTitle)==null?void 0:H[E],(W=n.subBookTitle)==null?void 0:W[E],n.subBookId)},children:o.jsx(R,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:p.chapterNumber})},D))})]})]})}function lo(e){const[t,i]=u.useState([]);return u.useEffect(()=>{let n=e.subBooks;n&&n.sort((l,k)=>l.subBookNumber-k.subBookNumber),i(n)},[e.subBooks]),o.jsx(o.Fragment,{children:t&&t.length>0&&t.map((n,l)=>o.jsx(ro,{bookId:e.bookId,bookTitle:e.bookTitle,subBooks:t,subBookId:n.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},l))})}function co(e){const[t,i]=u.useState(""),[n,l]=u.useState([]),[k,s]=u.useState(1),[g,h]=u.useState([]),{t:f}=Q(),{theme:v}=u.useContext(Z),{backgroundColor:C,topTextColor:S,mainTextColor:y}=ee(v),m=localStorage.getItem(oe)||ne,M=Xe(e.deviceHeight),P=k*M,I=P-M,_=e.currentUser&&n.slice(I,P);u.useEffect(()=>{if(e.subBooks&&e.subBooks.length>0){const a=e.subBooks.map(c=>{var w;return{label:(w=c.subBookTitle)==null?void 0:w[m],value:c.subBookId}});a.unshift({label:f("All Books"),value:"all"}),h(a)}},[e.subBooks]),u.useEffect(()=>{g.length>0&&i(g[0].value)},[g]),u.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const a=e.bookmark.filter(c=>c.subBookId===t);l(t==="all"||t===""?e.bookmark:a)}else l([]),s(0);k>1&&_.length==1&&s(a=>a-1)},[e.bookmark]);const A=(a,c)=>{s(c)},E=u.useCallback(a=>{const c=a.target.value;i(c);const w=e.bookmark.filter(q=>q.subBookId===c);l(c==="all"?e.bookmark:w)},[e.bookmark]),T=()=>o.jsx(Mt,{style:{backgroundColor:C},children:o.jsx(Qe,{label:f("Filter"),detail:o.jsxs(Lt,{children:[o.jsx(R,{color:S,children:f("Show")}),o.jsx(Ze,{label:"",options:g,value:t,backgroundColor:C,textColor:S,onChange:E})]})})}),O=()=>o.jsx($t,{children:(_==null?void 0:_.length)>0&&_.map((a,c)=>{var w;return o.jsxs(b,{children:[o.jsxs(Ft,{children:[o.jsxs(Ut,{onClick:()=>e.moveToReadingFromBookmark(a._id),children:[o.jsx(R,{color:y,children:(w=a.subBookTitle)==null?void 0:w[m]}),o.jsx(R,{color:y,children:a.chapterNumber>0?`${f("Surah Bookmark")} ${a.chapterNumber}, ${f("Aya")} ${a.verseNumber}`:`${f("Surah Bookmark")} _ , ${f("Aya")} ${a.verseNumber}`})]}),o.jsx(Ht,{src:v==B.DEFAULT||v==B.EASY_OCEAN||v==B.EASY_SUNRISE?x.black_bookmark:x.white_bookmark,onClick:()=>e.removeBookmark(a._id)})]}),o.jsx(zt,{})]},c)})}),F=()=>o.jsx(Wt,{buttoncolor:y,children:o.jsx(pt,{count:e.currentUser?Math.ceil(n.length/M):0,page:k,hidePrevButton:!0,hideNextButton:!0,onChange:A})}),d=()=>o.jsxs(Kt,{style:{backgroundColor:C},children:[o.jsx(Gt,{src:v==B.DEFAULT||v==B.BLACK_AND_WHITE?x.swipe:v==B.EASY_OCEAN?x.swipe_easyocean:x.swipe_white}),o.jsx(Yt,{style:{color:S},children:f("Bookmark Help")})]});return o.jsxs(Nt,{children:[T(),O(),F(),d()]})}function uo(e){const[t,i]=u.useState(L),{t:n}=Q(),{theme:l}=u.useContext(Z),{mainBGColor:k,headerBGColor:s,buttonColor:g,buttonTextColor:h,mainTextColor:f}=ee(l),v=C=>{e.currentUser?i(C):G.custom(S=>o.jsx(Y,{text:n("Bookmark Read Description"),visible:S.visible}))};return o.jsx(Dt,{style:{backgroundColor:s},children:o.jsxs(Pt,{style:{backgroundColor:k},children:[o.jsxs(Rt,{children:[o.jsxs(Ie,{active:t==L?"true":"false",style:{backgroundColor:t==L?g:k},bordercolor:f,onClick:()=>v(L),children:[o.jsx(we,{src:l==B.DEFAULT?x.index:l==B.EASY_OCEAN?t==L?x.index_active:x.index:t==L?x.index:x.index_active}),o.jsx(Te,{active:t==L?"true":"false",children:o.jsx(R,{fontSize:16,fontWeight:"500",lineHeight:24,color:t==L?h:f,children:n("Index")})})]}),o.jsxs(Ie,{active:t==L?"false":"true",style:{backgroundColor:t==le?g:k},bordercolor:f,onClick:()=>v(le),children:[o.jsx(we,{src:l==B.DEFAULT?x.bookmark2_default:l==B.EASY_OCEAN?t==L?x.bookmark2_default:x.bookmark2_white:t==L?x.bookmark2_white:x.bookmark2_default}),o.jsx(Te,{active:t==L?"false":"true",children:o.jsx(R,{fontSize:16,fontWeight:"500",lineHeight:24,color:t==le?h:f,children:n("Bookmarks")})})]})]}),t==L?o.jsx(lo,{bookId:e.bookId,bookTitle:e.bookTitle,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):o.jsx(co,{subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark,deviceHeight:e.deviceHeight,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const go=Ue,V=ze,bo=1;class xo{constructor(){xe(this,"db",null)}async initDB(){return new Promise((t,i)=>{const n=indexedDB.open(go,bo);n.onerror=()=>i(n.error),n.onsuccess=()=>{this.db=n.result,t()},n.onupgradeneeded=l=>{l.target.result.createObjectStore(V,{keyPath:"subBookId"})}})}async saveSubBookInfo(t){return this.db||await this.initDB(),new Promise((i,n)=>{const s=this.db.transaction([V],"readwrite").objectStore(V).put(t);s.onerror=()=>n(s.error),s.onsuccess=()=>i()})}async getSubBookInfo(t){return this.db||await this.initDB(),new Promise((i,n)=>{const s=this.db.transaction([V],"readonly").objectStore(V).get(t);s.onerror=()=>n(s.error),s.onsuccess=()=>i(s.result)})}async removeSubBookInfo(t){return this.db||await this.initDB(),new Promise((i,n)=>{const s=this.db.transaction([V],"readwrite").objectStore(V).delete(t);s.onerror=()=>n(s.error),s.onsuccess=()=>i()})}}const te=new xo,ho=r(b)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function fo(e){const[t,i]=u.useState(),[n,l]=u.useState(!1),s=new URLSearchParams(window.location.search).get("id")||"",g=Ve(),{t:h}=Q(),{height:f}=kt(),{theme:v}=u.useContext(Z),{mainBGColor:C}=ee(v),S=localStorage.getItem(oe)||ne,y=u.useCallback(()=>{s&&me.fetchBookInfo(s).then(d=>{var a,c,w;if(e.dispatch({type:z.ADD_BOOKINFO,payload:{bookInfo:d}}),i(d),e.currentUser&&!e.userHistory.some(j=>j.bookId==s)&&d.subBooks){const j=d.subBooks.find(U=>U.subBookNumber==0),p=(a=j==null?void 0:j.chapterInfos[0])==null?void 0:a.chapterId,D=(c=d.bookTitle)==null?void 0:c[S],H=(w=j==null?void 0:j.subBookTitle)==null?void 0:w[S],W=j==null?void 0:j.subBookId;P(p,D,H,W)}}).catch(d=>{G.custom(a=>o.jsx(Y,{text:h(d),type:ce.BOOKMARK,visible:a.visible}))}).finally(()=>{l(!1)})},[s,e.dispatch,e.userHistory,e.currentUser]),m=u.useCallback(async d=>{try{const a=await me.fetchSubBookInfo(d);e.dispatch({type:z.ADD_SUBBOOKINFO,payload:{subBookInfo:a}}),e.dispatch({type:z.ADD_SUBBOOK,payload:{subBook:a}}),await te.saveSubBookInfo(a),l(!1)}catch(a){G.custom(c=>o.jsx(Y,{text:h(a),visible:c.visible})),l(!1)}},[e.dispatch]);u.useEffect(()=>{(async()=>{var a;l(!0),!((a=e.bookInfos)!=null&&a.length)||!e.bookInfos.some(c=>c.bookId===s)?await y():(i(e.bookInfos.find(c=>c.bookId===s)),l(!1))})(),e.currentUser&&ke.fetchBookmarks().then(a=>{e.dispatch({type:z.SET_BOOKMARKS,payload:{bookmark:a}})}).catch(a=>{a.status===401&&a.response.data.message===he&&(G.custom(c=>o.jsx(Y,{text:h(a.response.data.message),visible:c.visible})),de.logout(),g("/login"))})},[s,e.bookInfos,e.currentUser,e.dispatch]);const M=()=>{G.custom(d=>o.jsx(Y,{text:h("Not Built Yet"),visible:d.visible}))},P=(d,a,c,w)=>{g(`/reading?chapterId=${d}&book=${a}&subBook=${c}&subBookId=${w}&bookId=${s}`)},I=u.useCallback(async d=>{l(!0),pe()<fe?await te.getSubBookInfo(d)?(await te.removeSubBookInfo(d),e.dispatch({type:z.REMOVE_SUBBOOKINFO,payload:{subBookId:d}})):await m(d):G.custom(c=>o.jsx(Y,{text:h("Not Enough Space"),visible:c.visible})),l(!1)},[m,e.dispatch]),_=u.useCallback(async d=>{l(!0),await te.removeSubBookInfo(d),e.dispatch({type:z.REMOVE_SUBBOOKINFO,payload:{subBookId:d}}),pe()<fe?await m(d):G.custom(c=>o.jsx(Y,{text:h("Not Enough Space"),visible:c.visible})),l(!1)},[m,e.dispatch]),A=u.useCallback(d=>{if(l(!0),e.bookmark&&e.bookmark.length>0){const a=e.bookmark.filter(c=>c._id===d);if(a&&a.length>0){const{chapterId:c,bookTitle:w,subBookId:q,subBookTitle:j,verseId:p}=a[0];g(`/reading?chapterId=${c}&book=${w.en}&subBook=${j.en}&subBookId=${q}&verseId=${p}&bookId=${s}`),l(!1)}}},[s,g,e.bookmark]),E=u.useCallback(d=>{l(!0),ke.deleteBookmark(d).then(a=>{e.dispatch({type:z.REMOVE_BOOKMARK,payload:{bookmarkId:d}}),G.custom(c=>o.jsx(Y,{text:h(a.message),type:ce.BOOKMARK,visible:c.visible})),l(!1)}).catch(a=>{a.status==401&&a.response.data.message==he&&(G.custom(c=>o.jsx(Y,{text:h(a.response.data.message),type:ce.BOOKMARK,visible:c.visible})),de.logout(),g("/login")),l(!1)})},[e.dispatch]),T=u.useCallback(d=>{e.dispatch({type:z.SET_OPENED_SUBBOOK,payload:{openedSubBook:e.openedSubBook===d?"":d}})},[e.openedSubBook,e.dispatch]),O=()=>{e.dispatch({type:z.RESET_USER}),e.dispatch({type:z.RESET_BOOK}),e.dispatch({type:z.RESET_PAGE_STATUS}),de.logout()},F=()=>{g("/login")};return o.jsxs(ho,{style:{backgroundColor:C},children:[o.jsx(so,{markImg:t&&He+t.bookImage,markTitle:t==null?void 0:t.bookTitle,isLogIn:!!e.currentUser,onLogoClick:()=>g("/"),onCloseClick:()=>g("/library"),onLogin:e.currentUser?O:F,onSettings:()=>g("/settings"),onSearchClick:M}),o.jsx(uo,{bookId:s,bookTitle:t==null?void 0:t.bookTitle,subBooks:t==null?void 0:t.subBooks,deviceHeight:f,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.openedSubBook,moveToReading:P,moveToReadingFromBookmark:A,onDownload:I,onDownloadRefresh:_,removeBookmark:E,handleOpenedSubBook:T}),n&&o.jsx(et,{})]})}function po(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,openedSubBook:e.pageStatus.openedSubBook,currentUser:e.user.currentUser,activeChapterId:e.books.activeChapterId}}const Ao=qe(po)(fo);export{Ao as default};
