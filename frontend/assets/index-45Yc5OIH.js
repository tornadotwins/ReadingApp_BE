var Lt=Object.defineProperty;var Mt=(e,o,a)=>o in e?Lt(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a;var mt=(e,o,a)=>Mt(e,typeof o!="symbol"?o+"":o,a);import{c as Re,_ as V,j as i,N as de,b as x,a8 as $t,o as ce,J as Ut,ac as Ne,ag as De,Q as E,ah as Pe,ai as je,M as Y,aj as Ee,ak as Ft,al as zt,am as pe,an as ft,ao as _e,ap as kt,ad as Ht}from"./index-H5ykdk14.js";import{v as _t,w as At,x as Kt,y as we,s as l,z as Wt,A as Ot,D as Oe,E as Rt,F as Gt,B as h,G as Vt,S as Se,g as Be,_ as W,c as Yt,u as qt,d as D}from"./App-DZhMb0Bm.js";import{I as v,T as X,g as Xt,a as yt}from"./index-BgJ3qDTJ.js";import{H as Qt}from"./index-JH2oxa_9.js";import{C as G}from"./index-ByoVJCyk.js";import{A as Zt,b as ht}from"./bookmark.service-DCNIraVG.js";import{S as Jt}from"./index-Db4dPrFx.js";import{L as eo}from"./index-Bg-tokIy.js";import{b as vt}from"./book.service-CxiClxcZ.js";import{a as Ae}from"./auth.service-DjQkdAge.js";import"./index-BYsBH8hC.js";import"./axios-BimPEqV4.js";function to(e){return _t("MuiPagination",e)}At("MuiPagination",["root","ul","outlined","text"]);const oo=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function no(e={}){const{boundaryCount:o=1,componentName:a="usePagination",count:t=1,defaultPage:g=1,disabled:u=!1,hideNextButton:y=!1,hidePrevButton:S=!1,onChange:w,page:k,showFirstButton:C=!1,showLastButton:P=!1,siblingCount:d=1}=e,r=Re(e,oo),[B,_]=Kt({controlled:k,default:g,name:a,state:"page"}),$=(b,p)=>{k||_(p),w&&w(b,p)},A=(b,p)=>{const c=p-b+1;return Array.from({length:c},(s,m)=>b+m)},O=A(1,Math.min(o,t)),R=A(Math.max(t-o+1,o+1),t),Q=Math.max(Math.min(B-d,t-o-d*2-1),o+2),L=Math.min(Math.max(B+d,o+d*2+2),R.length>0?R[0]-2:t-1),F=[...C?["first"]:[],...S?[]:["previous"],...O,...Q>o+2?["start-ellipsis"]:o+1<t-o?[o+1]:[],...A(Q,L),...L<t-o-1?["end-ellipsis"]:t-o>o?[t-o]:[],...R,...y?[]:["next"],...P?["last"]:[]],Z=b=>{switch(b){case"first":return 1;case"previous":return B-1;case"next":return B+1;case"last":return t;default:return null}},f=F.map(b=>typeof b=="number"?{onClick:p=>{$(p,b)},type:"page",page:b,selected:b===B,disabled:u,"aria-current":b===B?"true":void 0}:{onClick:p=>{$(p,Z(b))},type:b,page:Z(b),selected:!1,disabled:u||b.indexOf("ellipsis")===-1&&(b==="next"||b==="last"?B>=t:B<=1)});return V({items:f},r)}function io(e){return _t("MuiPaginationItem",e)}const q=At("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),Ct=we(i.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),St=we(i.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Bt=we(i.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Tt=we(i.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),ao=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Nt=(e,o)=>{const{ownerState:a}=e;return[o.root,o[a.variant],o[`size${ce(a.size)}`],a.variant==="text"&&o[`text${ce(a.color)}`],a.variant==="outlined"&&o[`outlined${ce(a.color)}`],a.shape==="rounded"&&o.rounded,a.type==="page"&&o.page,(a.type==="start-ellipsis"||a.type==="end-ellipsis")&&o.ellipsis,(a.type==="previous"||a.type==="next")&&o.previousNext,(a.type==="first"||a.type==="last")&&o.firstLast]},so=e=>{const{classes:o,color:a,disabled:t,selected:g,size:u,shape:y,type:S,variant:w}=e,k={root:["root",`size${ce(u)}`,w,y,a!=="standard"&&`color${ce(a)}`,a!=="standard"&&`${w}${ce(a)}`,t&&"disabled",g&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[S]],icon:["icon"]};return Rt(k,io,o)},ro=l("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Nt})(({theme:e,ownerState:o})=>V({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${q.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},o.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},o.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),lo=l(Wt,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Nt})(({theme:e,ownerState:o})=>V({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${q.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${q.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${q.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:de(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${q.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:de(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${q.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},o.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},o.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},o.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:o})=>V({},o.variant==="text"&&{[`&.${q.selected}`]:V({},o.color!=="standard"&&{color:(e.vars||e).palette[o.color].contrastText,backgroundColor:(e.vars||e).palette[o.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[o.color].main}},[`&.${q.focusVisible}`]:{backgroundColor:(e.vars||e).palette[o.color].dark}},{[`&.${q.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},o.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${q.selected}`]:V({},o.color!=="standard"&&{color:(e.vars||e).palette[o.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / 0.5)`:de(e.palette[o.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:de(e.palette[o.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:de(e.palette[o.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${q.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:de(e.palette[o.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${q.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),co=l("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,o)=>o.icon})(({theme:e,ownerState:o})=>V({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},o.size==="small"&&{fontSize:e.typography.pxToRem(18)},o.size==="large"&&{fontSize:e.typography.pxToRem(22)})),uo=x.forwardRef(function(o,a){const t=Ot({props:o,name:"MuiPaginationItem"}),{className:g,color:u="standard",component:y,components:S={},disabled:w=!1,page:k,selected:C=!1,shape:P="circular",size:d="medium",slots:r={},type:B="page",variant:_="text"}=t,$=Re(t,ao),A=V({},t,{color:u,disabled:w,selected:C,shape:P,size:d,type:B,variant:_}),O=$t(),R=so(A),L=(O?{previous:r.next||S.next||Tt,next:r.previous||S.previous||Bt,last:r.first||S.first||Ct,first:r.last||S.last||St}:{previous:r.previous||S.previous||Bt,next:r.next||S.next||Tt,first:r.first||S.first||Ct,last:r.last||S.last||St})[B];return B==="start-ellipsis"||B==="end-ellipsis"?i.jsx(ro,{ref:a,ownerState:A,className:Oe(R.root,g),children:"â€¦"}):i.jsxs(lo,V({ref:a,ownerState:A,component:y,disabled:w,className:Oe(R.root,g)},$,{children:[B==="page"&&k,L?i.jsx(co,{as:L,ownerState:A,className:R.icon}):null]}))}),go=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],xo=e=>{const{classes:o,variant:a}=e;return Rt({root:["root",a],ul:["ul"]},to,o)},bo=l("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[o.root,o[a.variant]]}})({}),mo=l("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,o)=>o.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function fo(e,o,a){return e==="page"?`${a?"":"Go to "}page ${o}`:`Go to ${e} page`}const ko=x.forwardRef(function(o,a){const t=Ot({props:o,name:"MuiPagination"}),{boundaryCount:g=1,className:u,color:y="standard",count:S=1,defaultPage:w=1,disabled:k=!1,getItemAriaLabel:C=fo,hideNextButton:P=!1,hidePrevButton:d=!1,renderItem:r=f=>i.jsx(uo,V({},f)),shape:B="circular",showFirstButton:_=!1,showLastButton:$=!1,siblingCount:A=1,size:O="medium",variant:R="text"}=t,Q=Re(t,go),{items:L}=no(V({},t,{componentName:"Pagination"})),F=V({},t,{boundaryCount:g,color:y,count:S,defaultPage:w,disabled:k,getItemAriaLabel:C,hideNextButton:P,hidePrevButton:d,renderItem:r,shape:B,showFirstButton:_,showLastButton:$,siblingCount:A,size:O,variant:R}),Z=xo(F);return i.jsx(bo,V({"aria-label":"pagination navigation",className:Oe(Z.root,u),ownerState:F,ref:a},Q,{children:i.jsx(mo,{className:Z.ul,ownerState:F,children:L.map((f,b)=>i.jsx("li",{children:r(V({},f,{color:y,"aria-label":C(f.type,f.page,f.selected),shape:B,size:O,variant:R}))},b))})}))});function yo(e){return i.jsx(ko,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function pt(){const{innerWidth:e,innerHeight:o}=window;return{width:e,height:o}}function ho(){const[e,o]=x.useState(pt());return x.useEffect(()=>{function a(){o(pt())}return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),e}var Le={},vo=Ut;Object.defineProperty(Le,"__esModule",{value:!0});var Dt=Le.default=void 0,Co=vo(Gt()),So=i;Dt=Le.default=(0,Co.default)((0,So.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const Bo=l(h)({display:"flex",position:"relative",width:"100%"}),To=l("img")({width:"100%",marginTop:"57px"}),po=l(h)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),Io=l(h)({display:"flex",alignItems:"baseline"}),wo=l(h)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),Po=l("img")({width:"100%",height:"100%"}),jo=l(h)({margin:0,marginLeft:"12px",position:"relative",top:"-20px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),Eo=l(h)(({hamburgercolor:e})=>({position:"absolute",top:"12px",right:"15px",width:"46px","& .hamburger-react":{width:"46px !important",color:e},"& .hamburger-react ~ .MuiBox-root ":{border:`1px solid ${e}`},"@media (max-height: 639px)":{top:"8px",right:"10px"},"@media screen and (orientation: landscape)":{right:"15px"}})),_o=l("img")({position:"relative",top:"-20px",cursor:"pointer","&:active":{opacity:"0.8"}}),Ao=l(h)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),Oo=l("img")({width:"100%","&:active":{opacity:"0.8"}});l("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}});const Ro=l(h)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),No=l(h)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Do=l(h)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),It=l(h)(({active:e,bordercolor:o})=>({width:"50%",height:"37.9px",border:`1px solid ${o}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer",marginBottom:"20px"})),wt=l("img")({}),Pt=l(h)(({active:e})=>({marginLeft:"5px"})),Lo=l(h)({width:"100%",display:"flex",flexDirection:"column"}),Mo=l(h)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),$o=l(h)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});l(h)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const Uo=l(h)({display:"flex",flexDirection:"column"}),Fo=l(h)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),zo=l(h)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});l(h)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const Ho=l(h)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),Ko=l("img")({cursor:"pointer",marginRight:"15px"}),Wo=l(Vt)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),Go=l(h)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),Vo=l("img")({width:"63px"}),Yo=l(h)({margin:"0px",marginLeft:"24px","@media (max-height: 600px)":{"& .MuiBox-root":{fontSize:"14px !important"}}}),qo=l(h)({width:"100%",justifyContent:"space-between",alignItems:"center",margin:"10px 0px"}),Xo=l(h)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"center",padding:"0px 7px"});l(Dt)({marginLeft:"-33px",color:"#17637D",height:"30px"});const Qo=l(h)(({progress:e,progresscolor:o})=>({width:"calc(100% - 60px)",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",borderBottom:`1px solid ${o}`,"::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${e}%`,borderBottom:e!=0?`2px solid ${o}`:"none"}})),Zo=l(h)(({istransliteration:e,translatestatus:o})=>({margin:"5px 0px 5px 0px",display:"flex",justifyContent:"space-between",opacity:o=="one"||o=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& .MuiBox-root:first-of-type":{width:"48%"},"& .MuiBox-root:last-child":{marginInlineEnd:"auto",width:e=="true"?"48%":"75%"}})),Jo=l(h)({display:"flex",justifyContent:"space-between"}),en=l(h)(({translatestatus:e})=>({width:"80%",display:"flex",opacity:e=="one"||e=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}})),tn=l("img")({width:"20px",marginLeft:"10px"}),on=l(h)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),jt=l("img")({marginLeft:"3px",cursor:"pointer"}),nn=l(h)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),an=l(h)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),sn=l(h)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),Et=l(h)(({style:e,translatestatus:o,readalready:a,readbgcolor:t,readtextcolor:g})=>({opacity:o=="one"||o=="none"?"0.5":"1",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:a=="true"?`${t} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:a=="true"?`${g} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:a=="true"?`${g} !important`:`${e.color} !important`}})),rn=l("img")({width:"50%",height:"50%"});function ln(e){const[o,a]=x.useState(""),[t,g]=x.useState(""),{theme:u,readingLanguage:y}=x.useContext(Se),{logoTextColor:S,headerBGColor:w}=Be(u),k=localStorage.getItem(Ne)||De;return x.useEffect(()=>{var C,P,d,r;e.markTitle?a((C=e.markTitle)==null?void 0:C[k]):a(((r=(d=(P=e.terms)==null?void 0:P.texts.find(B=>B.variable=="Default Book Title"))==null?void 0:d.text)==null?void 0:r[y])||""),e.markImg?g(e.markImg):g(v.default_cover)},[e.markTitle,e.markImg]),i.jsxs(Bo,{children:[i.jsx(To,{src:u==E.DEFAULT||u==E.DARK?v.book_subtract:u==E.BLACK_AND_WHITE?v.book_subtract_BAW:u==E.SAPPHIRE?v.book_subtract_sapphire:v.book_subtract_easyocean}),i.jsxs(po,{children:[i.jsxs(Io,{children:[i.jsx(wo,{onClick:e.onLogoClick,children:i.jsx(Po,{src:t})}),i.jsx(jo,{children:i.jsx(X,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:S,children:o})})]}),i.jsx(_o,{src:u==E.EASY_OCEAN?v.search_easyocean:v.search,onClick:e.onSearchClick})]}),i.jsx(Ao,{children:i.jsx(Oo,{src:u==E.DEFAULT||u==E.DARK?v.close2:u==E.BLACK_AND_WHITE?v.close2_BAW:u==E.SAPPHIRE?v.close2_sapphire:v.close2_easyocean,onClick:e.onCloseClick})}),i.jsx(Eo,{hamburgercolor:w,children:i.jsx(Qt,{isLogin:e.isLogIn,textColor:S,itemBgColor:w,toggleColor:w,terms:e.welcomePageTerms,onLogin:e.onLogin,onSettings:e.onSettings})})]})}function dn(e){var p,c,s,m,j,T,I,J,ae,te,oe,ne,ie,se,ue,ge,xe,M,Me,$e,Ue,Fe,ze,He,Ke,We,Ge,Ve,Ye,qe,Xe,Qe,Ze,Je,et,tt,ot,nt,it,at;const[o,a]=x.useState([]),[t,g]=x.useState(),[u,y]=x.useState(!1),[S,w]=x.useState(!1),[k,C]=x.useState(0),{theme:P,referenceLanguage:d,readingLanguage:r}=x.useContext(Se),{mainBGColor:B,altTextColor:_,backgroundColor:$,topTextColor:A,buttonColor:O,buttonTextColor:R}=Be(P),Q=localStorage.getItem(Ne)||De,L=x.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const n=e.userHistory.filter(z=>z.bookId==e.bookId);if(n&&n.length>0)return n[0].readChapterIds}return[]},[e.userHistory]),F=e.subBookId;x.useEffect(()=>{e.bookTitle.en=="Qur'an"||e.bookTitle.en=="Zabur"?y(!1):e.openedSubBook==e.subBookId?y(!0):y(!1)},[e.openedSubBook]),x.useEffect(()=>{var K,H;const n=e.subBooks.filter(U=>U.subBookId===F);let z=0;if(n&&n.length>0&&(z=(K=n[0].chapterInfos)==null?void 0:K.length,g(n[0])),e.currentUser){const U=e.userHistory.filter(N=>N.bookId==e.bookId);if(U&&U.length>0){const N=U[0].subBooks.filter(ee=>ee.subBookId==F);N&&N.length>0&&C(Math.floor(((H=N[0])==null?void 0:H.readChapters)/z*100))}}if(e.subBooks&&e.subBooks.length>0){const U=e.subBooks.filter(N=>N.subBookId==F);if(U&&U.length>0){let N=U[0].chapterInfos;N.sort((ee,re)=>ee.chapterNumber-re.chapterNumber),a(N)}}},[e.subBooks,e.userHistory]),x.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const n=e.subBookInfos.filter(z=>z.subBookId==F);n&&n.length>0?w(!0):w(!1)}},[]);const Z=x.useCallback(n=>{w(z=>!z),e.onDownload(n)},[]),f=()=>{var n,z;if(t!=null&&t.noChapter){const K=(n=t==null?void 0:t.chapterInfos[0])==null?void 0:n.isTranslated,H=(z=t==null?void 0:t.chapterInfos[0])==null?void 0:z.isPublished;!(K!=null&&K[d])&&!(K!=null&&K[r])||!(H!=null&&H[d])&&!(H!=null&&H[r])?W.custom(U=>{var N,ee,re;return i.jsx(G,{text:((re=(ee=(N=e.terms)==null?void 0:N.texts.find(Te=>Te.variable=="None Translated"))==null?void 0:ee.text)==null?void 0:re[r])||"",visible:U.visible})}):e.moveToReading(t==null?void 0:t.chapterInfos[0].chapterId,t.subBookId)}else y(!u),e.handleOpenedSubBook(e.subBookId)},b=(n,z)=>{z=="none"?W.custom(K=>{var H,U,N;return i.jsx(G,{text:((N=(U=(H=e.terms)==null?void 0:H.texts.find(ee=>ee.variable=="None Translated"))==null?void 0:U.text)==null?void 0:N[r])||"",visible:K.visible})}):e.moveToReading(n,t.subBookId)};return i.jsxs(qo,{id:e.id,children:[i.jsxs(Xo,{children:[i.jsxs(Qo,{progress:k,progresscolor:O,onClick:f,children:[(t==null?void 0:t.subBookNumber)!=0&&i.jsxs(Zo,{istransliteration:((p=t==null?void 0:t.subBookTitle)==null?void 0:p[Pe])!=null?"true":"false",translatestatus:(t==null?void 0:t.noChapter)&&(!((s=(c=t==null?void 0:t.chapterInfos[0])==null?void 0:c.isTranslated)!=null&&s[d])&&!((j=(m=t==null?void 0:t.chapterInfos[0])==null?void 0:m.isTranslated)!=null&&j[r])||!((I=(T=t==null?void 0:t.chapterInfos[0])==null?void 0:T.isPublished)!=null&&I[d])&&!((ae=(J=t==null?void 0:t.chapterInfos[0])==null?void 0:J.isPublished)!=null&&ae[r])?"none":(!((oe=(te=t==null?void 0:t.chapterInfos[0])==null?void 0:te.isTranslated)!=null&&oe[d])||!((ie=(ne=t==null?void 0:t.chapterInfos[0])==null?void 0:ne.isTranslated)!=null&&ie[r]))&&((ue=(se=t==null?void 0:t.chapterInfos[0])==null?void 0:se.isPublished)!=null&&ue[d]||!((xe=(ge=t==null?void 0:t.chapterInfos[0])==null?void 0:ge.isPublished)!=null&&xe[r]))?"one":"both")||"",children:[((M=t==null?void 0:t.subBookTitle)==null?void 0:M[Pe])&&i.jsx(X,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:_,language:je,children:(t==null?void 0:t.subBookNumber)+". "+((Me=t==null?void 0:t.subBookTitle)==null?void 0:Me[Pe])}),i.jsx(X,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:_,language:je,direction:"rtl",children:($e=t==null?void 0:t.subBookTitle)==null?void 0:$e[je]})]}),i.jsxs(Jo,{children:[i.jsxs(en,{translatestatus:t!=null&&t.noChapter&&(!((Fe=(Ue=t==null?void 0:t.chapterInfos[0])==null?void 0:Ue.isTranslated)!=null&&Fe[d])&&!((He=(ze=t==null?void 0:t.chapterInfos[0])==null?void 0:ze.isTranslated)!=null&&He[r])||!((We=(Ke=t==null?void 0:t.chapterInfos[0])==null?void 0:Ke.isPublished)!=null&&We[d])&&!((Ve=(Ge=t==null?void 0:t.chapterInfos[0])==null?void 0:Ge.isPublished)!=null&&Ve[r]))?"none":(!((qe=(Ye=t==null?void 0:t.chapterInfos[0])==null?void 0:Ye.isTranslated)!=null&&qe[d])||!((Qe=(Xe=t==null?void 0:t.chapterInfos[0])==null?void 0:Xe.isTranslated)!=null&&Qe[r]))&&((Je=(Ze=t==null?void 0:t.chapterInfos[0])==null?void 0:Ze.isPublished)!=null&&Je[d]||!((tt=(et=t==null?void 0:t.chapterInfos[0])==null?void 0:et.isPublished)!=null&&tt[r]))?"one":"both",children:[i.jsx(X,{fontFamily:'"Baloo Da 2"',color:_,children:(ot=t==null?void 0:t.subBookTitle)==null?void 0:ot[Q]}),(t==null?void 0:t.subBookNumber)==0&&i.jsx(tn,{src:v.icon_intro})]}),e.currentUser&&k!==0&&!(t!=null&&t.noChapter)&&i.jsx(X,{fontFamily:'"Baloo Da 2"',color:O,children:`${k}%`})]})]}),i.jsxs(on,{isdownloaded:S?"true":"false",children:[i.jsx(jt,{src:S?P==E.DEFAULT||P==E.EASY_OCEAN?v.download_cancel:v.download_cancel_white:P==E.DEFAULT||P==E.EASY_OCEAN?v.download:v.download_white,onClick:()=>Z(F)}),S&&i.jsx(jt,{src:P==E.DEFAULT||P==E.EASY_OCEAN?v.download_refresh:v.download_refresh_white,onClick:()=>e.onDownloadRefresh(F)})]})]}),u&&i.jsxs(nn,{style:{backgroundColor:$},children:[i.jsx(an,{children:i.jsx(X,{fontFamily:"Inter",color:A,children:((at=(it=(nt=e.terms)==null?void 0:nt.texts.find(n=>n.variable=="Chapter"))==null?void 0:it.text)==null?void 0:at[r])||""})}),i.jsx(sn,{children:o==null?void 0:o.map((n,z)=>{var K,H,U,N,ee,re,Te,st,rt,lt,dt,ct,ut,gt,xt,bt;return n.chapterNumber==0?i.jsx(Et,{translatestatus:!((K=n==null?void 0:n.isTranslated)!=null&&K[d])&&!((H=n==null?void 0:n.isTranslated)!=null&&H[r])||!((U=n==null?void 0:n.isPublished)!=null&&U[d])&&!((N=n==null?void 0:n.isPublished)!=null&&N[r])?"none":(!((ee=n==null?void 0:n.isTranslated)!=null&&ee[d])||!((re=n==null?void 0:n.isTranslated)!=null&&re[r]))&&((Te=n==null?void 0:n.isPublished)!=null&&Te[d]||!((st=n==null?void 0:n.isPublished)!=null&&st[r]))?"one":"both",readalready:L&&L.length>0&&L.includes(n.chapterId)?"true":"false",style:{backgroundColor:B,color:_},readbgcolor:O,readtextcolor:R,onClick:()=>{var be,me,fe,ke,ye,he,ve,Ce;return b(n.chapterId,!((be=n==null?void 0:n.isTranslated)!=null&&be[d])&&!((me=n==null?void 0:n.isTranslated)!=null&&me[r])||!((fe=n==null?void 0:n.isPublished)!=null&&fe[d])&&!((ke=n==null?void 0:n.isPublished)!=null&&ke[r])?"none":(!((ye=n.isTranslated)!=null&&ye[d])||!((he=n==null?void 0:n.isTranslated)!=null&&he[r]))&&((ve=n==null?void 0:n.isPublished)!=null&&ve[d]||!((Ce=n==null?void 0:n.isPublished)!=null&&Ce[r]))?"one":"both")},children:i.jsx(rn,{src:v.icon_intro})},z):i.jsx(Et,{translatestatus:!((rt=n==null?void 0:n.isTranslated)!=null&&rt[d])&&!((lt=n==null?void 0:n.isTranslated)!=null&&lt[r])||!((dt=n==null?void 0:n.isPublished)!=null&&dt[d])&&!((ct=n==null?void 0:n.isPublished)!=null&&ct[r])?"none":(!((ut=n==null?void 0:n.isTranslated)!=null&&ut[d])||!((gt=n==null?void 0:n.isTranslated)!=null&&gt[r]))&&((xt=n==null?void 0:n.isPublished)!=null&&xt[d]||!((bt=n==null?void 0:n.isPublished)!=null&&bt[r]))?"one":"both",readalready:L&&L.length>0&&L.includes(n.chapterId)?"true":"false",style:{backgroundColor:B,color:_},readbgcolor:O,readtextcolor:R,onClick:()=>{var be,me,fe,ke,ye,he,ve,Ce;return b(n.chapterId,!((be=n==null?void 0:n.isTranslated)!=null&&be[d])&&!((me=n==null?void 0:n.isTranslated)!=null&&me[r])||!((fe=n==null?void 0:n.isPublished)!=null&&fe[d])&&!((ke=n==null?void 0:n.isPublished)!=null&&ke[r])?"none":(!((ye=n.isTranslated)!=null&&ye[d])||!((he=n.isTranslated)!=null&&he[r]))&&(!((ve=n==null?void 0:n.isPublished)!=null&&ve[d])||!((Ce=n==null?void 0:n.isPublished)!=null&&Ce[r]))?"one":"both")},children:i.jsx(X,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:n.chapterNumber})},z)})})]})]})}function cn(e){const[o,a]=x.useState([]);return x.useEffect(()=>{let t=e.subBooks;t&&t.sort((g,u)=>g.subBookNumber-u.subBookNumber),a(t)},[e.subBooks]),i.jsx(i.Fragment,{children:o&&o.length>0&&o.map((t,g)=>i.jsx(dn,{id:`subbook-${t.subBookId}`,bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:o,subBookId:t.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},g))})}function un(e){const[o,a]=x.useState(""),[t,g]=x.useState([]),[u,y]=x.useState(1),[S,w]=x.useState([]),{theme:k,readingLanguage:C}=x.useContext(Se),{backgroundColor:P,topTextColor:d,mainTextColor:r}=Be(k),B=Xt(e.deviceHeight),_=u*B,$=_-B,A=e.currentUser&&t.slice($,_);x.useEffect(()=>{var f,b,p,c,s,m;if(e.subBooks&&e.subBooks.length>0){const j=e.subBooks.map(T=>{var I;return{label:(I=T.subBookTitle)==null?void 0:I[C],value:T.subBookId}});j.unshift({label:((f=e.bookTitle)==null?void 0:f.en)=="Qur'an"||((b=e.bookTitle)==null?void 0:b.en)=="Zabur"?(c=(p=e.terms.texts.find(T=>T.variable=="All Chapters"))==null?void 0:p.text)==null?void 0:c[C]:(m=(s=e.terms.texts.find(T=>T.variable=="All SubBooks"))==null?void 0:s.text)==null?void 0:m[C],value:"all"}),w(j)}},[e.subBooks]),x.useEffect(()=>{S.length>0&&a(S[0].value)},[S]),x.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const f=e.bookmark.filter(b=>b.subBookId===o);g(o==="all"||o===""?e.bookmark:f)}else g([]),y(0);u>1&&A.length==1&&y(f=>f-1)},[e.bookmark]);const O=(f,b)=>{y(b)},R=x.useCallback(f=>{const b=f.target.value;a(b);const p=e.bookmark.filter(c=>c.subBookId===b);g(b==="all"?e.bookmark:p)},[e.bookmark]),Q=()=>{var f,b,p,c;return i.jsx(Mo,{style:{backgroundColor:P},children:i.jsx(Zt,{label:((b=(f=e.terms.texts.find(s=>s.variable=="Filter"))==null?void 0:f.text)==null?void 0:b[C])||"",detail:i.jsxs($o,{children:[i.jsx(X,{color:d,children:(c=(p=e.terms.texts.find(s=>s.variable=="Show"))==null?void 0:p.text)==null?void 0:c[C]}),i.jsx(Jt,{label:"",options:S,value:o,backgroundColor:P,textColor:d,onChange:R})]})})})},L=()=>i.jsx(Uo,{children:(A==null?void 0:A.length)>0&&A.map((f,b)=>{var p,c,s,m,j,T,I,J,ae,te,oe,ne,ie,se,ue,ge,xe;return i.jsxs(h,{children:[i.jsxs(Fo,{children:[i.jsxs(zo,{onClick:()=>e.moveToReadingFromBookmark(f._id),children:[i.jsx(X,{color:r,children:(p=f.subBookTitle)==null?void 0:p[C]}),i.jsx(X,{color:r,children:f.bookTitle.en=="Qur'an"||f.bookTitle.en=="Zabur"?f.chapterNumber>0?`${(s=(c=e.terms.texts.find(M=>M.variable=="Surah Bookmark"))==null?void 0:c.text)==null?void 0:s[C]} ${f.chapterNumber}, ${(j=(m=e.terms.texts.find(M=>M.variable=="Aya"))==null?void 0:m.text)==null?void 0:j[C]} ${f.verseNumber}`:`${(I=(T=e.terms.texts.find(M=>M.variable=="Surah Bookmark"))==null?void 0:T.text)==null?void 0:I[C]} _ , ${(ae=(J=e.terms.texts.find(M=>M.variable=="Aya"))==null?void 0:J.text)==null?void 0:ae[C]} ${f.verseNumber}`:f.chapterNumber>0?`${(oe=(te=e.terms.texts.find(M=>M.variable=="Chapter Bookmark"))==null?void 0:te.text)==null?void 0:oe[C]} ${f.chapterNumber}, ${(ie=(ne=e.terms.texts.find(M=>M.variable=="Aya"))==null?void 0:ne.text)==null?void 0:ie[C]} ${f.verseNumber}`:`${(ue=(se=e.terms.texts.find(M=>M.variable=="Chapter Bookmark"))==null?void 0:se.text)==null?void 0:ue[C]} _ , ${(xe=(ge=e.terms.texts.find(M=>M.variable=="Aya"))==null?void 0:ge.text)==null?void 0:xe[C]} ${f.verseNumber}`})]}),i.jsx(Ko,{src:k==E.DEFAULT||k==E.EASY_OCEAN||k==E.EASY_SUNRISE?v.black_bookmark:v.white_bookmark,onClick:()=>e.removeBookmark(f._id)})]}),i.jsx(Ho,{})]},b)})}),F=()=>i.jsx(Wo,{buttoncolor:r,children:i.jsx(yo,{count:e.currentUser?Math.ceil(t.length/B):0,page:u,hidePrevButton:!0,hideNextButton:!0,onChange:O})}),Z=()=>{var f,b;return i.jsxs(Go,{style:{backgroundColor:P},children:[i.jsx(Vo,{src:k==E.DEFAULT||k==E.BLACK_AND_WHITE?v.swipe:k==E.EASY_OCEAN?v.swipe_easyocean:v.swipe_white}),i.jsx(Yo,{style:{color:d},children:(b=(f=e.terms.texts.find(p=>p.variable=="Bookmark Help"))==null?void 0:f.text)==null?void 0:b[C]})]})};return i.jsxs(Lo,{children:[Q(),L(),F(),Z()]})}function gn(e){var P,d,r,B;const[o,a]=x.useState(Y),{theme:t,readingLanguage:g}=x.useContext(Se),{mainBGColor:u,headerBGColor:y,buttonColor:S,buttonTextColor:w,mainTextColor:k}=Be(t),C=_=>{e.currentUser?a(_):W.custom($=>{var A,O;return i.jsx(G,{text:((O=(A=e.terms.texts.find(R=>R.variable=="Bookmark Read Description"))==null?void 0:A.text)==null?void 0:O[g])||"",visible:$.visible})})};return i.jsx(Ro,{style:{backgroundColor:y},children:i.jsxs(No,{style:{backgroundColor:u},children:[i.jsxs(Do,{children:[i.jsxs(It,{active:o==Y?"true":"false",style:{backgroundColor:o==Y?S:u},bordercolor:k,onClick:()=>C(Y),children:[i.jsx(wt,{src:t==E.DEFAULT?v.index:t==E.EASY_OCEAN?o==Y?v.index_active:v.index:o==Y?v.index:v.index_active}),i.jsx(Pt,{active:o==Y?"true":"false",children:i.jsx(X,{fontSize:16,fontWeight:"500",lineHeight:24,color:o==Y?w:k,children:((d=(P=e.terms.texts.find(_=>_.variable=="Index"))==null?void 0:P.text)==null?void 0:d[g])||""})})]}),i.jsxs(It,{active:o==Y?"false":"true",style:{backgroundColor:o==Ee?S:u},bordercolor:k,onClick:()=>C(Ee),children:[i.jsx(wt,{src:t==E.DEFAULT?v.bookmark2_default:t==E.EASY_OCEAN?o==Y?v.bookmark2_default:v.bookmark2_white:o==Y?v.bookmark2_white:v.bookmark2_default}),i.jsx(Pt,{active:o==Y?"false":"true",children:i.jsx(X,{fontSize:16,fontWeight:"500",lineHeight:24,color:o==Ee?w:k,children:((B=(r=e.terms.texts.find(_=>_.variable=="Bookmarks"))==null?void 0:r.text)==null?void 0:B[g])||""})})]})]}),o==Y?i.jsx(cn,{bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):i.jsx(un,{bookTitle:e.bookTitle,subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark.filter(_=>_.bookId==e.bookId),deviceHeight:e.deviceHeight,terms:e.terms,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const xn=Ft,le=zt,bn=1;class mn{constructor(){mt(this,"db",null)}async initDB(){return new Promise((o,a)=>{const t=indexedDB.open(xn,bn);t.onerror=()=>a(t.error),t.onsuccess=()=>{this.db=t.result,o()},t.onupgradeneeded=g=>{g.target.result.createObjectStore(le,{keyPath:"subBookId"})}})}async saveSubBookInfo(o){return this.db||await this.initDB(),new Promise((a,t)=>{const y=this.db.transaction([le],"readwrite").objectStore(le).put(o);y.onerror=()=>t(y.error),y.onsuccess=()=>a()})}async getSubBookInfo(o){return this.db||await this.initDB(),new Promise((a,t)=>{const y=this.db.transaction([le],"readonly").objectStore(le).get(o);y.onerror=()=>t(y.error),y.onsuccess=()=>a(y.result)})}async removeSubBookInfo(o){return this.db||await this.initDB(),new Promise((a,t)=>{const y=this.db.transaction([le],"readwrite").objectStore(le).delete(o);y.onerror=()=>t(y.error),y.onsuccess=()=>a()})}}const Ie=new mn,fn=l(h)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function kn(e){const[o,a]=x.useState(),[t,g]=x.useState(!1),[u,y]=x.useState(),[S,w]=x.useState(),k=qt(),{height:C}=ho(),{theme:P,readingLanguage:d}=x.useContext(Se),{mainBGColor:r}=Be(P),B=localStorage.getItem(Ne)||De,_=x.useCallback(()=>{e.currentBook&&vt.fetchBookInfo(e.currentBook).then(c=>{var s,m,j;if(e.dispatch({type:D.ADD_BOOKINFO,payload:{bookInfo:c}}),a(c),e.currentUser&&!e.userHistory.some(I=>I.bookId==e.currentBook)&&c.subBooks){const I=c.subBooks.find(te=>te.subBookNumber==0),J=(s=I==null?void 0:I.chapterInfos[0])==null?void 0:s.chapterId,ae=I==null?void 0:I.subBookId;(j=(m=I==null?void 0:I.chapterInfos[0])==null?void 0:m.isTranslated)!=null&&j[B]?O(J,ae):W.custom(te=>{var oe,ne,ie;return i.jsx(G,{text:((ie=(ne=(oe=u==null?void 0:u.texts)==null?void 0:oe.find(se=>se.variable=="None Translated"))==null?void 0:ne.text)==null?void 0:ie[d])||"",type:pe.BOOKMARK,visible:te.visible})})}}).catch(c=>{W.custom(s=>i.jsx(G,{text:c,type:pe.BOOKMARK,visible:s.visible}))}).finally(()=>{g(!1)})},[e.currentBook,e.dispatch,e.userHistory,e.currentUser]),$=x.useCallback(async c=>{try{const s=await vt.fetchSubBookInfo(c);e.dispatch({type:D.ADD_SUBBOOKINFO,payload:{subBookInfo:s}}),e.dispatch({type:D.ADD_SUBBOOK,payload:{subBook:s}}),await Ie.saveSubBookInfo(s),g(!1)}catch(s){W.custom(m=>i.jsx(G,{text:s,visible:m.visible})),g(!1)}},[e.dispatch]);x.useEffect(()=>{var m,j;const c=e.terms.find(T=>T.pageTitle=="Index & Bookmark Page"),s=e.terms.find(T=>T.pageTitle=="Welcome Page");(m=c==null?void 0:c.isPublished)!=null&&m[d]?y(c):W.custom(T=>i.jsx(G,{text:"The terminologies for this page are not published.",visible:T.visible})),(j=s==null?void 0:s.isPublished)!=null&&j[d]?w(s):W.custom(T=>i.jsx(G,{text:"The terminologies for hamburgur menu are not published.",visible:T.visible}))},[e.terms]),x.useEffect(()=>{(async()=>{var s;g(!0),!((s=e.bookInfos)!=null&&s.length)||!e.bookInfos.some(m=>m.bookId===e.currentBook)?await _():(a(e.bookInfos.find(m=>m.bookId===e.currentBook)),g(!1))})(),e.currentUser&&ht.fetchBookmarks().then(s=>{e.dispatch({type:D.SET_BOOKMARKS,payload:{bookmark:s}})}).catch(s=>{s.status===401&&s.response.data.message===ft&&(W.custom(m=>i.jsx(G,{text:s.response.data.message,visible:m.visible})),Ae.logout(),k("/login"))})},[e.currentBook,e.bookInfos,e.currentUser,e.dispatch]),x.useEffect(()=>{if(e.currentSubBook&&e.prevPage===_e.READING){const s=setTimeout(()=>{const m=document.getElementById(`subbook-${e.currentSubBook}`);m&&m.scrollIntoView({behavior:"smooth"})},100);return()=>clearTimeout(s)}},[e.currentSubBook,e.prevPage]);const A=()=>{W.custom(c=>{var s,m,j;return i.jsx(G,{text:((j=(m=(s=u==null?void 0:u.texts)==null?void 0:s.find(T=>T.variable=="Not Built Yet"))==null?void 0:m.text)==null?void 0:j[d])||"",visible:c.visible})})},O=(c,s)=>{e.dispatch({type:D.SET_CURRENT_CHAPTER,payload:{currentChapter:c}}),e.dispatch({type:D.SET_CURRENT_SUBBOOK,payload:{currentSubBook:s}}),e.dispatch({type:D.SET_PREVIOUS_PAGE,payload:{prevPage:_e.BOOKS}}),k("/reading")},R=()=>{k("/library"),e.dispatch({type:D.SET_PREVIOUS_PAGE,payload:{prevPage:_e.BOOKS}}),e.dispatch({type:D.SET_CURRENT_SUBBOOK,payload:{currentSubBook:""}})},Q=x.useCallback(async c=>{g(!0),yt()<kt?await Ie.getSubBookInfo(c)?(await Ie.removeSubBookInfo(c),e.dispatch({type:D.REMOVE_SUBBOOKINFO,payload:{subBookId:c}})):await $(c):W.custom(m=>{var j,T,I;return i.jsx(G,{text:((I=(T=(j=u==null?void 0:u.texts)==null?void 0:j.find(J=>J.variable=="Not Enough Space"))==null?void 0:T.text)==null?void 0:I[d])||"",visible:m.visible})}),g(!1)},[$,e.dispatch]),L=x.useCallback(async c=>{g(!0),await Ie.removeSubBookInfo(c),e.dispatch({type:D.REMOVE_SUBBOOKINFO,payload:{subBookId:c}}),yt()<kt?await $(c):W.custom(m=>{var j,T,I;return i.jsx(G,{text:((I=(T=(j=u==null?void 0:u.texts)==null?void 0:j.find(J=>J.variable=="Not Enough Space"))==null?void 0:T.text)==null?void 0:I[d])||"",visible:m.visible})}),g(!1)},[$,e.dispatch]),F=x.useCallback(c=>{if(g(!0),e.bookmark&&e.bookmark.length>0){const s=e.bookmark.find(m=>m._id===c);if(s){const{chapterId:m,subBookId:j,verseId:T}=s;e.dispatch({type:D.SET_CURRENT_SUBBOOK,payload:{currentSubBook:j}}),e.dispatch({type:D.SET_CURRENT_CHAPTER,payload:{currentChapter:m}}),e.dispatch({type:D.SET_CURRENT_VERSE,payload:{currentVerse:T}}),k("/reading"),g(!1)}}},[e.currentBook,k,e.bookmark]),Z=x.useCallback(c=>{g(!0),ht.deleteBookmark(c).then(s=>{e.dispatch({type:D.REMOVE_BOOKMARK,payload:{bookmarkId:c}}),W.custom(m=>i.jsx(G,{text:s.message,type:pe.BOOKMARK,visible:m.visible})),g(!1)}).catch(s=>{s.status==401&&s.response.data.message==ft&&(W.custom(m=>i.jsx(G,{text:s.response.data.message,type:pe.BOOKMARK,visible:m.visible})),Ae.logout(),k("/login")),g(!1)})},[e.dispatch]),f=x.useCallback(c=>{e.dispatch({type:D.SET_CURRENT_SUBBOOK,payload:{currentSubBook:e.currentSubBook===c?"":c}})},[e.currentSubBook,e.dispatch]),b=()=>{e.dispatch({type:D.RESET_USER}),e.dispatch({type:D.RESET_BOOK}),e.dispatch({type:D.RESET_PAGE_STATUS}),Ae.logout()},p=()=>{k("/login")};return i.jsxs(fn,{style:{backgroundColor:r},children:[i.jsx(ln,{markImg:o&&Ht+o.bookImage,markTitle:o==null?void 0:o.bookTitle,isLogIn:!!e.currentUser,terms:u||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},welcomePageTerms:S||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},onLogoClick:()=>k("/"),onCloseClick:R,onLogin:e.currentUser?b:p,onSettings:()=>k("/settings"),onSearchClick:A}),i.jsx(gn,{bookId:e.currentBook,bookTitle:o==null?void 0:o.bookTitle,bookImage:o==null?void 0:o.bookImage,subBooks:o==null?void 0:o.subBooks,deviceHeight:C,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.currentSubBook,terms:u||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},moveToReading:O,moveToReadingFromBookmark:F,onDownload:Q,onDownloadRefresh:L,removeBookmark:Z,handleOpenedSubBook:f}),t&&i.jsx(eo,{})]})}function yn(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,terms:e.terms.terms,currentBook:e.pageStatus.currentBook,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,currentSubBook:e.pageStatus.currentSubBook,prevPage:e.pageStatus.prevPage,currentUser:e.user.currentUser,activeChapterId:e.books.activeChapterId}}const An=Yt(yn)(kn);export{An as default};
