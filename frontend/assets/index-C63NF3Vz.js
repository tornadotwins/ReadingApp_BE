var Dt=Object.defineProperty;var Lt=(e,o,a)=>o in e?Dt(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a;var bt=(e,o,a)=>Lt(e,typeof o!="symbol"?o+"":o,a);import{c as Oe,_ as V,j as i,N as le,b as x,a8 as Mt,o as de,J as $t,ac as Re,ai as Ne,Q as P,aj as je,ak as Pe,M as Y,al as _e,am as Ut,an as Ft,ao as pe,ap as mt,aq as ft,af as zt}from"./index-BPBmJKVk.js";import{v as _t,w as Et,x as Ht,y as we,s as d,z as Kt,A as At,D as Ae,E as Ot,F as Wt,B as y,G as Gt,S as Be,g as Se,_ as W,c as Vt,u as Yt,d as F}from"./App-Dod54FHb.js";import{I as v,T as X,g as qt,a as kt}from"./index-uV_Y_vZg.js";import{H as Xt}from"./index-DJrSLpYI.js";import{C as G}from"./index-BkWHB1Dl.js";import{A as Qt,b as ht}from"./bookmark.service-CFDhgpcz.js";import{S as Zt}from"./index-UB3tLf5B.js";import{L as Jt}from"./index-BCPYsaWb.js";import{b as yt}from"./book.service-B2LodF4F.js";import{a as Ee}from"./auth.service-D_94x3fL.js";import"./index-BYY0BWDk.js";import"./axios-BimPEqV4.js";function eo(e){return _t("MuiPagination",e)}Et("MuiPagination",["root","ul","outlined","text"]);const to=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function oo(e={}){const{boundaryCount:o=1,componentName:a="usePagination",count:t=1,defaultPage:g=1,disabled:u=!1,hideNextButton:h=!1,hidePrevButton:B=!1,onChange:w,page:k,showFirstButton:C=!1,showLastButton:j=!1,siblingCount:c=1}=e,l=Oe(e,to),[S,_]=Ht({controlled:k,default:g,name:a,state:"page"}),L=(m,s)=>{k||_(s),w&&w(m,s)},E=(m,s)=>{const r=s-m+1;return Array.from({length:r},(b,p)=>m+p)},A=E(1,Math.min(o,t)),O=E(Math.max(t-o+1,o+1),t),Q=Math.max(Math.min(S-c,t-o-c*2-1),o+2),N=Math.min(Math.max(S+c,o+c*2+2),O.length>0?O[0]-2:t-1),$=[...C?["first"]:[],...B?[]:["previous"],...A,...Q>o+2?["start-ellipsis"]:o+1<t-o?[o+1]:[],...E(Q,N),...N<t-o-1?["end-ellipsis"]:t-o>o?[t-o]:[],...O,...h?[]:["next"],...j?["last"]:[]],Z=m=>{switch(m){case"first":return 1;case"previous":return S-1;case"next":return S+1;case"last":return t;default:return null}},f=$.map(m=>typeof m=="number"?{onClick:s=>{L(s,m)},type:"page",page:m,selected:m===S,disabled:u,"aria-current":m===S?"true":void 0}:{onClick:s=>{L(s,Z(m))},type:m,page:Z(m),selected:!1,disabled:u||m.indexOf("ellipsis")===-1&&(m==="next"||m==="last"?S>=t:S<=1)});return V({items:f},l)}function no(e){return _t("MuiPaginationItem",e)}const q=Et("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),vt=we(i.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Ct=we(i.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Bt=we(i.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),St=we(i.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),io=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Rt=(e,o)=>{const{ownerState:a}=e;return[o.root,o[a.variant],o[`size${de(a.size)}`],a.variant==="text"&&o[`text${de(a.color)}`],a.variant==="outlined"&&o[`outlined${de(a.color)}`],a.shape==="rounded"&&o.rounded,a.type==="page"&&o.page,(a.type==="start-ellipsis"||a.type==="end-ellipsis")&&o.ellipsis,(a.type==="previous"||a.type==="next")&&o.previousNext,(a.type==="first"||a.type==="last")&&o.firstLast]},ao=e=>{const{classes:o,color:a,disabled:t,selected:g,size:u,shape:h,type:B,variant:w}=e,k={root:["root",`size${de(u)}`,w,h,a!=="standard"&&`color${de(a)}`,a!=="standard"&&`${w}${de(a)}`,t&&"disabled",g&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[B]],icon:["icon"]};return Ot(k,no,o)},so=d("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Rt})(({theme:e,ownerState:o})=>V({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${q.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},o.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},o.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),ro=d(Kt,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Rt})(({theme:e,ownerState:o})=>V({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${q.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${q.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${q.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:le(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${q.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:le(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${q.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},o.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},o.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},o.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:o})=>V({},o.variant==="text"&&{[`&.${q.selected}`]:V({},o.color!=="standard"&&{color:(e.vars||e).palette[o.color].contrastText,backgroundColor:(e.vars||e).palette[o.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[o.color].main}},[`&.${q.focusVisible}`]:{backgroundColor:(e.vars||e).palette[o.color].dark}},{[`&.${q.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},o.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${q.selected}`]:V({},o.color!=="standard"&&{color:(e.vars||e).palette[o.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / 0.5)`:le(e.palette[o.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:le(e.palette[o.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:le(e.palette[o.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${q.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:le(e.palette[o.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${q.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),lo=d("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,o)=>o.icon})(({theme:e,ownerState:o})=>V({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},o.size==="small"&&{fontSize:e.typography.pxToRem(18)},o.size==="large"&&{fontSize:e.typography.pxToRem(22)})),co=x.forwardRef(function(o,a){const t=At({props:o,name:"MuiPaginationItem"}),{className:g,color:u="standard",component:h,components:B={},disabled:w=!1,page:k,selected:C=!1,shape:j="circular",size:c="medium",slots:l={},type:S="page",variant:_="text"}=t,L=Oe(t,io),E=V({},t,{color:u,disabled:w,selected:C,shape:j,size:c,type:S,variant:_}),A=Mt(),O=ao(E),N=(A?{previous:l.next||B.next||St,next:l.previous||B.previous||Bt,last:l.first||B.first||vt,first:l.last||B.last||Ct}:{previous:l.previous||B.previous||Bt,next:l.next||B.next||St,first:l.first||B.first||vt,last:l.last||B.last||Ct})[S];return S==="start-ellipsis"||S==="end-ellipsis"?i.jsx(so,{ref:a,ownerState:E,className:Ae(O.root,g),children:"â€¦"}):i.jsxs(ro,V({ref:a,ownerState:E,component:h,disabled:w,className:Ae(O.root,g)},L,{children:[S==="page"&&k,N?i.jsx(lo,{as:N,ownerState:E,className:O.icon}):null]}))}),uo=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],go=e=>{const{classes:o,variant:a}=e;return Ot({root:["root",a],ul:["ul"]},eo,o)},xo=d("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[o.root,o[a.variant]]}})({}),bo=d("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,o)=>o.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function mo(e,o,a){return e==="page"?`${a?"":"Go to "}page ${o}`:`Go to ${e} page`}const fo=x.forwardRef(function(o,a){const t=At({props:o,name:"MuiPagination"}),{boundaryCount:g=1,className:u,color:h="standard",count:B=1,defaultPage:w=1,disabled:k=!1,getItemAriaLabel:C=mo,hideNextButton:j=!1,hidePrevButton:c=!1,renderItem:l=f=>i.jsx(co,V({},f)),shape:S="circular",showFirstButton:_=!1,showLastButton:L=!1,siblingCount:E=1,size:A="medium",variant:O="text"}=t,Q=Oe(t,uo),{items:N}=oo(V({},t,{componentName:"Pagination"})),$=V({},t,{boundaryCount:g,color:h,count:B,defaultPage:w,disabled:k,getItemAriaLabel:C,hideNextButton:j,hidePrevButton:c,renderItem:l,shape:S,showFirstButton:_,showLastButton:L,siblingCount:E,size:A,variant:O}),Z=go($);return i.jsx(xo,V({"aria-label":"pagination navigation",className:Ae(Z.root,u),ownerState:$,ref:a},Q,{children:i.jsx(bo,{className:Z.ul,ownerState:$,children:N.map((f,m)=>i.jsx("li",{children:l(V({},f,{color:h,"aria-label":C(f.type,f.page,f.selected),shape:S,size:A,variant:O}))},m))})}))});function ko(e){return i.jsx(fo,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function Tt(){const{innerWidth:e,innerHeight:o}=window;return{width:e,height:o}}function ho(){const[e,o]=x.useState(Tt());return x.useEffect(()=>{function a(){o(Tt())}return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),e}var De={},yo=$t;Object.defineProperty(De,"__esModule",{value:!0});var Nt=De.default=void 0,vo=yo(Wt()),Co=i;Nt=De.default=(0,vo.default)((0,Co.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const Bo=d(y)({display:"flex",position:"relative",width:"100%"}),So=d("img")({width:"100%",marginTop:"57px"}),To=d(y)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),po=d(y)({display:"flex",alignItems:"baseline"}),Io=d(y)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),wo=d("img")({width:"100%",height:"100%"}),jo=d(y)({margin:0,marginLeft:"12px",position:"relative",top:"-20px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),Po=d(y)(({hamburgercolor:e})=>({position:"absolute",top:"12px",right:"15px",width:"46px","& .hamburger-react":{width:"46px !important",color:e},"& .hamburger-react ~ .MuiBox-root ":{border:`1px solid ${e}`},"@media (max-height: 639px)":{top:"8px",right:"10px"},"@media screen and (orientation: landscape)":{right:"15px"}})),_o=d("img")({position:"relative",top:"-20px",cursor:"pointer","&:active":{opacity:"0.8"}}),Eo=d(y)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),Ao=d("img")({width:"100%","&:active":{opacity:"0.8"}});d("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}});const Oo=d(y)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Ro=d(y)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),No=d(y)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),pt=d(y)(({active:e,bordercolor:o})=>({width:"50%",height:"37.9px",border:`1px solid ${o}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer",marginBottom:"20px"})),It=d("img")({}),wt=d(y)(({active:e})=>({marginLeft:"5px"})),Do=d(y)({width:"100%",display:"flex",flexDirection:"column"}),Lo=d(y)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),Mo=d(y)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});d(y)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const $o=d(y)({display:"flex",flexDirection:"column"}),Uo=d(y)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),Fo=d(y)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});d(y)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const zo=d(y)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),Ho=d("img")({cursor:"pointer",marginRight:"15px"}),Ko=d(Gt)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),Wo=d(y)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),Go=d("img")({width:"63px"}),Vo=d(y)({margin:"0px",marginLeft:"24px","@media (max-height: 600px)":{"& .MuiBox-root":{fontSize:"14px !important"}}}),Yo=d(y)({width:"100%",justifyContent:"space-between",alignItems:"center",margin:"10px 0px"}),qo=d(y)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"center",padding:"0px 7px"});d(Nt)({marginLeft:"-33px",color:"#17637D",height:"30px"});const Xo=d(y)(({progress:e,progresscolor:o})=>({width:"calc(100% - 60px)",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",borderBottom:`1px solid ${o}`,"::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${e}%`,borderBottom:e!=0?`2px solid ${o}`:"none"}})),Qo=d(y)(({istransliteration:e,translatestatus:o})=>({margin:"5px 0px 5px 0px",display:"flex",justifyContent:"space-between",opacity:o=="one"||o=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& .MuiBox-root:first-of-type":{width:"48%"},"& .MuiBox-root:last-child":{marginInlineEnd:"auto",width:e=="true"?"48%":"75%"}})),Zo=d(y)({display:"flex",justifyContent:"space-between"}),Jo=d(y)(({translatestatus:e})=>({width:"80%",display:"flex",opacity:e=="one"||e=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}})),en=d("img")({width:"20px",marginLeft:"10px"}),tn=d(y)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),jt=d("img")({marginLeft:"3px",cursor:"pointer"}),on=d(y)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),nn=d(y)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),an=d(y)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),Pt=d(y)(({style:e,translatestatus:o,readalready:a,readbgcolor:t,readtextcolor:g})=>({opacity:o=="one"||o=="none"?"0.5":"1",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:a=="true"?`${t} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:a=="true"?`${g} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:a=="true"?`${g} !important`:`${e.color} !important`}})),sn=d("img")({width:"50%",height:"50%"});function rn(e){const[o,a]=x.useState(""),[t,g]=x.useState(""),{theme:u,readingLanguage:h}=x.useContext(Be),{logoTextColor:B,headerBGColor:w}=Se(u),k=localStorage.getItem(Re)||Ne;return x.useEffect(()=>{var C,j,c,l;e.markTitle?a((C=e.markTitle)==null?void 0:C[k]):a(((l=(c=(j=e.terms)==null?void 0:j.texts.find(S=>S.variable=="Default Book Title"))==null?void 0:c.text)==null?void 0:l[h])||""),e.markImg?g(e.markImg):g(v.default_cover)},[e.markTitle,e.markImg]),i.jsxs(Bo,{children:[i.jsx(So,{src:u==P.DEFAULT||u==P.DARK?v.book_subtract:u==P.BLACK_AND_WHITE?v.book_subtract_BAW:u==P.SAPPHIRE?v.book_subtract_sapphire:v.book_subtract_easyocean}),i.jsxs(To,{children:[i.jsxs(po,{children:[i.jsx(Io,{onClick:e.onLogoClick,children:i.jsx(wo,{src:t})}),i.jsx(jo,{children:i.jsx(X,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:B,children:o})})]}),i.jsx(_o,{src:u==P.EASY_OCEAN?v.search_easyocean:v.search,onClick:e.onSearchClick})]}),i.jsx(Eo,{children:i.jsx(Ao,{src:u==P.DEFAULT||u==P.DARK?v.close2:u==P.BLACK_AND_WHITE?v.close2_BAW:u==P.SAPPHIRE?v.close2_sapphire:v.close2_easyocean,onClick:e.onCloseClick})}),i.jsx(Po,{hamburgercolor:w,children:i.jsx(Xt,{isLogin:e.isLogIn,textColor:B,itemBgColor:w,toggleColor:w,terms:e.welcomePageTerms,onLogin:e.onLogin,onSettings:e.onSettings})})]})}function ln(e){var s,r,b,p,I,T,H,ie,ee,te,oe,ne,ae,ce,ue,ge,xe,D,Le,Me,$e,Ue,Fe,ze,He,Ke,We,Ge,Ve,Ye,qe,Xe,Qe,Ze,Je,et,tt,ot,nt,it;const[o,a]=x.useState([]),[t,g]=x.useState(),[u,h]=x.useState(!1),[B,w]=x.useState(!1),[k,C]=x.useState(0),{theme:j,referenceLanguage:c,readingLanguage:l}=x.useContext(Be),{mainBGColor:S,altTextColor:_,backgroundColor:L,topTextColor:E,buttonColor:A,buttonTextColor:O}=Se(j),Q=localStorage.getItem(Re)||Ne,N=x.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const n=e.userHistory.filter(U=>U.bookId==e.bookId);if(n&&n.length>0)return n[0].readChapterIds}return[]},[e.userHistory]),$=e.subBookId;x.useEffect(()=>{e.bookTitle.en=="Qur'an"||e.bookTitle.en=="Zabur"?h(!1):e.openedSubBook==e.subBookId?h(!0):h(!1)},[e.openedSubBook]),x.useEffect(()=>{var K,z;const n=e.subBooks.filter(M=>M.subBookId===$);let U=0;if(n&&n.length>0&&(U=(K=n[0].chapterInfos)==null?void 0:K.length,g(n[0])),e.currentUser){const M=e.userHistory.filter(R=>R.bookId==e.bookId);if(M&&M.length>0){const R=M[0].subBooks.filter(J=>J.subBookId==$);R&&R.length>0&&C(Math.floor(((z=R[0])==null?void 0:z.readChapters)/U*100))}}if(e.subBooks&&e.subBooks.length>0){const M=e.subBooks.filter(R=>R.subBookId==$);if(M&&M.length>0){let R=M[0].chapterInfos;R.sort((J,se)=>J.chapterNumber-se.chapterNumber),a(R)}}},[e.subBooks,e.userHistory]),x.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const n=e.subBookInfos.filter(U=>U.subBookId==$);n&&n.length>0?w(!0):w(!1)}},[]);const Z=x.useCallback(n=>{w(U=>!U),e.onDownload(n)},[]),f=()=>{var n,U;if(t!=null&&t.noChapter){const K=(n=t==null?void 0:t.chapterInfos[0])==null?void 0:n.isTranslated,z=(U=t==null?void 0:t.chapterInfos[0])==null?void 0:U.isPublished;!(K!=null&&K[c])&&!(K!=null&&K[l])||!(z!=null&&z[c])&&!(z!=null&&z[l])?W.custom(M=>{var R,J,se;return i.jsx(G,{text:((se=(J=(R=e.terms)==null?void 0:R.texts.find(Te=>Te.variable=="None Translated"))==null?void 0:J.text)==null?void 0:se[l])||"",visible:M.visible})}):e.moveToReading(t==null?void 0:t.chapterInfos[0].chapterId,t.subBookId)}else h(!u),e.handleOpenedSubBook(e.subBookId)},m=(n,U)=>{U=="none"?W.custom(K=>{var z,M,R;return i.jsx(G,{text:((R=(M=(z=e.terms)==null?void 0:z.texts.find(J=>J.variable=="None Translated"))==null?void 0:M.text)==null?void 0:R[l])||"",visible:K.visible})}):e.moveToReading(n,t.subBookId)};return i.jsxs(Yo,{id:e.id,children:[i.jsxs(qo,{children:[i.jsxs(Xo,{progress:k,progresscolor:A,onClick:f,children:[(t==null?void 0:t.subBookNumber)!=0&&i.jsxs(Qo,{istransliteration:((s=t==null?void 0:t.subBookTitle)==null?void 0:s[je])!=null?"true":"false",translatestatus:(t==null?void 0:t.noChapter)&&(!((b=(r=t==null?void 0:t.chapterInfos[0])==null?void 0:r.isTranslated)!=null&&b[c])&&!((I=(p=t==null?void 0:t.chapterInfos[0])==null?void 0:p.isTranslated)!=null&&I[l])||!((H=(T=t==null?void 0:t.chapterInfos[0])==null?void 0:T.isPublished)!=null&&H[c])&&!((ee=(ie=t==null?void 0:t.chapterInfos[0])==null?void 0:ie.isPublished)!=null&&ee[l])?"none":(!((oe=(te=t==null?void 0:t.chapterInfos[0])==null?void 0:te.isTranslated)!=null&&oe[c])||!((ae=(ne=t==null?void 0:t.chapterInfos[0])==null?void 0:ne.isTranslated)!=null&&ae[l]))&&((ue=(ce=t==null?void 0:t.chapterInfos[0])==null?void 0:ce.isPublished)!=null&&ue[c]||!((xe=(ge=t==null?void 0:t.chapterInfos[0])==null?void 0:ge.isPublished)!=null&&xe[l]))?"one":"both")||"",children:[((D=t==null?void 0:t.subBookTitle)==null?void 0:D[je])&&i.jsx(X,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:_,language:Pe,children:(t==null?void 0:t.subBookNumber)+". "+((Le=t==null?void 0:t.subBookTitle)==null?void 0:Le[je])}),i.jsx(X,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:_,language:Pe,direction:"rtl",children:(Me=t==null?void 0:t.subBookTitle)==null?void 0:Me[Pe]})]}),i.jsxs(Zo,{children:[i.jsxs(Jo,{translatestatus:t!=null&&t.noChapter&&(!((Ue=($e=t==null?void 0:t.chapterInfos[0])==null?void 0:$e.isTranslated)!=null&&Ue[c])&&!((ze=(Fe=t==null?void 0:t.chapterInfos[0])==null?void 0:Fe.isTranslated)!=null&&ze[l])||!((Ke=(He=t==null?void 0:t.chapterInfos[0])==null?void 0:He.isPublished)!=null&&Ke[c])&&!((Ge=(We=t==null?void 0:t.chapterInfos[0])==null?void 0:We.isPublished)!=null&&Ge[l]))?"none":(!((Ye=(Ve=t==null?void 0:t.chapterInfos[0])==null?void 0:Ve.isTranslated)!=null&&Ye[c])||!((Xe=(qe=t==null?void 0:t.chapterInfos[0])==null?void 0:qe.isTranslated)!=null&&Xe[l]))&&((Ze=(Qe=t==null?void 0:t.chapterInfos[0])==null?void 0:Qe.isPublished)!=null&&Ze[c]||!((et=(Je=t==null?void 0:t.chapterInfos[0])==null?void 0:Je.isPublished)!=null&&et[l]))?"one":"both",children:[i.jsx(X,{fontFamily:'"Baloo Da 2"',color:_,children:(tt=t==null?void 0:t.subBookTitle)==null?void 0:tt[Q]}),(t==null?void 0:t.subBookNumber)==0&&i.jsx(en,{src:v.icon_intro})]}),e.currentUser&&k!==0&&!(t!=null&&t.noChapter)&&i.jsx(X,{fontFamily:'"Baloo Da 2"',color:A,children:`${k}%`})]})]}),i.jsxs(tn,{isdownloaded:B?"true":"false",children:[i.jsx(jt,{src:B?j==P.DEFAULT||j==P.EASY_OCEAN?v.download_cancel:v.download_cancel_white:j==P.DEFAULT||j==P.EASY_OCEAN?v.download:v.download_white,onClick:()=>Z($)}),B&&i.jsx(jt,{src:j==P.DEFAULT||j==P.EASY_OCEAN?v.download_refresh:v.download_refresh_white,onClick:()=>e.onDownloadRefresh($)})]})]}),u&&i.jsxs(on,{style:{backgroundColor:L},children:[i.jsx(nn,{children:i.jsx(X,{fontFamily:"Inter",color:E,children:((it=(nt=(ot=e.terms)==null?void 0:ot.texts.find(n=>n.variable=="Chapter"))==null?void 0:nt.text)==null?void 0:it[l])||""})}),i.jsx(an,{children:o==null?void 0:o.map((n,U)=>{var K,z,M,R,J,se,Te,at,st,rt,lt,dt,ct,ut,gt,xt;return n.chapterNumber==0?i.jsx(Pt,{translatestatus:!((K=n==null?void 0:n.isTranslated)!=null&&K[c])&&!((z=n==null?void 0:n.isTranslated)!=null&&z[l])||!((M=n==null?void 0:n.isPublished)!=null&&M[c])&&!((R=n==null?void 0:n.isPublished)!=null&&R[l])?"none":(!((J=n==null?void 0:n.isTranslated)!=null&&J[c])||!((se=n==null?void 0:n.isTranslated)!=null&&se[l]))&&((Te=n==null?void 0:n.isPublished)!=null&&Te[c]||!((at=n==null?void 0:n.isPublished)!=null&&at[l]))?"one":"both",readalready:N&&N.length>0&&N.includes(n.chapterId)?"true":"false",style:{backgroundColor:S,color:_},readbgcolor:A,readtextcolor:O,onClick:()=>{var be,me,fe,ke,he,ye,ve,Ce;return m(n.chapterId,!((be=n==null?void 0:n.isTranslated)!=null&&be[c])&&!((me=n==null?void 0:n.isTranslated)!=null&&me[l])||!((fe=n==null?void 0:n.isPublished)!=null&&fe[c])&&!((ke=n==null?void 0:n.isPublished)!=null&&ke[l])?"none":(!((he=n.isTranslated)!=null&&he[c])||!((ye=n==null?void 0:n.isTranslated)!=null&&ye[l]))&&((ve=n==null?void 0:n.isPublished)!=null&&ve[c]||!((Ce=n==null?void 0:n.isPublished)!=null&&Ce[l]))?"one":"both")},children:i.jsx(sn,{src:v.icon_intro})},U):i.jsx(Pt,{translatestatus:!((st=n==null?void 0:n.isTranslated)!=null&&st[c])&&!((rt=n==null?void 0:n.isTranslated)!=null&&rt[l])||!((lt=n==null?void 0:n.isPublished)!=null&&lt[c])&&!((dt=n==null?void 0:n.isPublished)!=null&&dt[l])?"none":(!((ct=n==null?void 0:n.isTranslated)!=null&&ct[c])||!((ut=n==null?void 0:n.isTranslated)!=null&&ut[l]))&&((gt=n==null?void 0:n.isPublished)!=null&&gt[c]||!((xt=n==null?void 0:n.isPublished)!=null&&xt[l]))?"one":"both",readalready:N&&N.length>0&&N.includes(n.chapterId)?"true":"false",style:{backgroundColor:S,color:_},readbgcolor:A,readtextcolor:O,onClick:()=>{var be,me,fe,ke,he,ye,ve,Ce;return m(n.chapterId,!((be=n==null?void 0:n.isTranslated)!=null&&be[c])&&!((me=n==null?void 0:n.isTranslated)!=null&&me[l])||!((fe=n==null?void 0:n.isPublished)!=null&&fe[c])&&!((ke=n==null?void 0:n.isPublished)!=null&&ke[l])?"none":(!((he=n.isTranslated)!=null&&he[c])||!((ye=n.isTranslated)!=null&&ye[l]))&&(!((ve=n==null?void 0:n.isPublished)!=null&&ve[c])||!((Ce=n==null?void 0:n.isPublished)!=null&&Ce[l]))?"one":"both")},children:i.jsx(X,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:n.chapterNumber})},U)})})]})]})}function dn(e){const[o,a]=x.useState([]);return x.useEffect(()=>{let t=e.subBooks;t&&t.sort((g,u)=>g.subBookNumber-u.subBookNumber),a(t)},[e.subBooks]),i.jsx(i.Fragment,{children:o&&o.length>0&&o.map((t,g)=>i.jsx(ln,{id:`subbook-${t.subBookId}`,bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:o,subBookId:t.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},g))})}function cn(e){const[o,a]=x.useState(""),[t,g]=x.useState([]),[u,h]=x.useState(1),[B,w]=x.useState([]),{theme:k,readingLanguage:C}=x.useContext(Be),{backgroundColor:j,topTextColor:c,mainTextColor:l}=Se(k),S=qt(e.deviceHeight),_=u*S,L=_-S,E=e.currentUser&&t.slice(L,_);x.useEffect(()=>{var f,m,s,r,b,p;if(e.subBooks&&e.subBooks.length>0){const I=e.subBooks.map(T=>{var H;return{label:(H=T.subBookTitle)==null?void 0:H[C],value:T.subBookId}});I.unshift({label:((f=e.bookTitle)==null?void 0:f.en)=="Qur'an"||((m=e.bookTitle)==null?void 0:m.en)=="Zabur"?(r=(s=e.terms.texts.find(T=>T.variable=="All Chapters"))==null?void 0:s.text)==null?void 0:r[C]:(p=(b=e.terms.texts.find(T=>T.variable=="All SubBooks"))==null?void 0:b.text)==null?void 0:p[C],value:"all"}),w(I)}},[e.subBooks]),x.useEffect(()=>{B.length>0&&a(B[0].value)},[B]),x.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const f=e.bookmark.filter(m=>m.subBookId===o);g(o==="all"||o===""?e.bookmark:f)}else g([]),h(0);u>1&&E.length==1&&h(f=>f-1)},[e.bookmark]);const A=(f,m)=>{h(m)},O=x.useCallback(f=>{const m=f.target.value;a(m);const s=e.bookmark.filter(r=>r.subBookId===m);g(m==="all"?e.bookmark:s)},[e.bookmark]),Q=()=>{var f,m,s,r;return i.jsx(Lo,{style:{backgroundColor:j},children:i.jsx(Qt,{label:((m=(f=e.terms.texts.find(b=>b.variable=="Filter"))==null?void 0:f.text)==null?void 0:m[C])||"",detail:i.jsxs(Mo,{children:[i.jsx(X,{color:c,children:(r=(s=e.terms.texts.find(b=>b.variable=="Show"))==null?void 0:s.text)==null?void 0:r[C]}),i.jsx(Zt,{label:"",options:B,value:o,backgroundColor:j,textColor:c,onChange:O})]})})})},N=()=>i.jsx($o,{children:(E==null?void 0:E.length)>0&&E.map((f,m)=>{var s,r,b,p,I,T,H,ie,ee,te,oe,ne,ae,ce,ue,ge,xe;return i.jsxs(y,{children:[i.jsxs(Uo,{children:[i.jsxs(Fo,{onClick:()=>e.moveToReadingFromBookmark(f._id),children:[i.jsx(X,{color:l,children:(s=f.subBookTitle)==null?void 0:s[C]}),i.jsx(X,{color:l,children:f.bookTitle.en=="Qur'an"||f.bookTitle.en=="Zabur"?f.chapterNumber>0?`${(b=(r=e.terms.texts.find(D=>D.variable=="Surah Bookmark"))==null?void 0:r.text)==null?void 0:b[C]} ${f.chapterNumber}, ${(I=(p=e.terms.texts.find(D=>D.variable=="Aya"))==null?void 0:p.text)==null?void 0:I[C]} ${f.verseNumber}`:`${(H=(T=e.terms.texts.find(D=>D.variable=="Surah Bookmark"))==null?void 0:T.text)==null?void 0:H[C]} _ , ${(ee=(ie=e.terms.texts.find(D=>D.variable=="Aya"))==null?void 0:ie.text)==null?void 0:ee[C]} ${f.verseNumber}`:f.chapterNumber>0?`${(oe=(te=e.terms.texts.find(D=>D.variable=="Chapter Bookmark"))==null?void 0:te.text)==null?void 0:oe[C]} ${f.chapterNumber}, ${(ae=(ne=e.terms.texts.find(D=>D.variable=="Aya"))==null?void 0:ne.text)==null?void 0:ae[C]} ${f.verseNumber}`:`${(ue=(ce=e.terms.texts.find(D=>D.variable=="Chapter Bookmark"))==null?void 0:ce.text)==null?void 0:ue[C]} _ , ${(xe=(ge=e.terms.texts.find(D=>D.variable=="Aya"))==null?void 0:ge.text)==null?void 0:xe[C]} ${f.verseNumber}`})]}),i.jsx(Ho,{src:k==P.DEFAULT||k==P.EASY_OCEAN||k==P.EASY_SUNRISE?v.black_bookmark:v.white_bookmark,onClick:()=>e.removeBookmark(f._id)})]}),i.jsx(zo,{})]},m)})}),$=()=>i.jsx(Ko,{buttoncolor:l,children:i.jsx(ko,{count:e.currentUser?Math.ceil(t.length/S):0,page:u,hidePrevButton:!0,hideNextButton:!0,onChange:A})}),Z=()=>{var f,m;return i.jsxs(Wo,{style:{backgroundColor:j},children:[i.jsx(Go,{src:k==P.DEFAULT||k==P.BLACK_AND_WHITE?v.swipe:k==P.EASY_OCEAN?v.swipe_easyocean:v.swipe_white}),i.jsx(Vo,{style:{color:c},children:(m=(f=e.terms.texts.find(s=>s.variable=="Bookmark Help"))==null?void 0:f.text)==null?void 0:m[C]})]})};return i.jsxs(Do,{children:[Q(),N(),$(),Z()]})}function un(e){var j,c,l,S;const[o,a]=x.useState(Y),{theme:t,readingLanguage:g}=x.useContext(Be),{mainBGColor:u,headerBGColor:h,buttonColor:B,buttonTextColor:w,mainTextColor:k}=Se(t),C=_=>{e.currentUser?a(_):W.custom(L=>{var E,A;return i.jsx(G,{text:((A=(E=e.terms.texts.find(O=>O.variable=="Bookmark Read Description"))==null?void 0:E.text)==null?void 0:A[g])||"",visible:L.visible})})};return i.jsx(Oo,{style:{backgroundColor:h},children:i.jsxs(Ro,{style:{backgroundColor:u},children:[i.jsxs(No,{children:[i.jsxs(pt,{active:o==Y?"true":"false",style:{backgroundColor:o==Y?B:u},bordercolor:k,onClick:()=>C(Y),children:[i.jsx(It,{src:t==P.DEFAULT?v.index:t==P.EASY_OCEAN?o==Y?v.index_active:v.index:o==Y?v.index:v.index_active}),i.jsx(wt,{active:o==Y?"true":"false",children:i.jsx(X,{fontSize:16,fontWeight:"500",lineHeight:24,color:o==Y?w:k,children:((c=(j=e.terms.texts.find(_=>_.variable=="Index"))==null?void 0:j.text)==null?void 0:c[g])||""})})]}),i.jsxs(pt,{active:o==Y?"false":"true",style:{backgroundColor:o==_e?B:u},bordercolor:k,onClick:()=>C(_e),children:[i.jsx(It,{src:t==P.DEFAULT?v.bookmark2_default:t==P.EASY_OCEAN?o==Y?v.bookmark2_default:v.bookmark2_white:o==Y?v.bookmark2_white:v.bookmark2_default}),i.jsx(wt,{active:o==Y?"false":"true",children:i.jsx(X,{fontSize:16,fontWeight:"500",lineHeight:24,color:o==_e?w:k,children:((S=(l=e.terms.texts.find(_=>_.variable=="Bookmarks"))==null?void 0:l.text)==null?void 0:S[g])||""})})]})]}),o==Y?i.jsx(dn,{bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):i.jsx(cn,{bookTitle:e.bookTitle,subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark.filter(_=>_.bookId==e.bookId),deviceHeight:e.deviceHeight,terms:e.terms,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const gn=Ut,re=Ft,xn=1;class bn{constructor(){bt(this,"db",null)}async initDB(){return new Promise((o,a)=>{const t=indexedDB.open(gn,xn);t.onerror=()=>a(t.error),t.onsuccess=()=>{this.db=t.result,o()},t.onupgradeneeded=g=>{g.target.result.createObjectStore(re,{keyPath:"subBookId"})}})}async saveSubBookInfo(o){return this.db||await this.initDB(),new Promise((a,t)=>{const h=this.db.transaction([re],"readwrite").objectStore(re).put(o);h.onerror=()=>t(h.error),h.onsuccess=()=>a()})}async getSubBookInfo(o){return this.db||await this.initDB(),new Promise((a,t)=>{const h=this.db.transaction([re],"readonly").objectStore(re).get(o);h.onerror=()=>t(h.error),h.onsuccess=()=>a(h.result)})}async removeSubBookInfo(o){return this.db||await this.initDB(),new Promise((a,t)=>{const h=this.db.transaction([re],"readwrite").objectStore(re).delete(o);h.onerror=()=>t(h.error),h.onsuccess=()=>a()})}}const Ie=new bn,mn=d(y)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function fn(e){const[o,a]=x.useState(),[t,g]=x.useState(!1),[u,h]=x.useState(),[B,w]=x.useState(),k=Yt(),{height:C}=ho(),{theme:j,readingLanguage:c}=x.useContext(Be),{mainBGColor:l}=Se(j),S=localStorage.getItem(Re)||Ne,_=x.useCallback(()=>{e.currentBook&&yt.fetchBookInfo(e.currentBook).then(s=>{var r,b,p;if(e.dispatch({type:F.ADD_BOOKINFO,payload:{bookInfo:s}}),a(s),e.currentUser&&!e.userHistory.some(T=>T.bookId==e.currentBook)&&s.subBooks){const T=s.subBooks.find(ee=>ee.subBookNumber==0),H=(r=T==null?void 0:T.chapterInfos[0])==null?void 0:r.chapterId,ie=T==null?void 0:T.subBookId;(p=(b=T==null?void 0:T.chapterInfos[0])==null?void 0:b.isTranslated)!=null&&p[S]?A(H,ie):W.custom(ee=>{var te,oe,ne;return i.jsx(G,{text:((ne=(oe=(te=u==null?void 0:u.texts)==null?void 0:te.find(ae=>ae.variable=="None Translated"))==null?void 0:oe.text)==null?void 0:ne[c])||"",type:pe.BOOKMARK,visible:ee.visible})})}}).catch(s=>{W.custom(r=>i.jsx(G,{text:s,type:pe.BOOKMARK,visible:r.visible}))}).finally(()=>{g(!1)})},[e.currentBook,e.dispatch,e.userHistory,e.currentUser]),L=x.useCallback(async s=>{try{const r=await yt.fetchSubBookInfo(s);e.dispatch({type:F.ADD_SUBBOOKINFO,payload:{subBookInfo:r}}),e.dispatch({type:F.ADD_SUBBOOK,payload:{subBook:r}}),await Ie.saveSubBookInfo(r),g(!1)}catch(r){W.custom(b=>i.jsx(G,{text:r,visible:b.visible})),g(!1)}},[e.dispatch]);x.useEffect(()=>{var b,p;const s=e.terms.find(I=>I.pageTitle=="Index & Bookmark Page"),r=e.terms.find(I=>I.pageTitle=="Welcome Page");(b=s==null?void 0:s.isPublished)!=null&&b[c]?h(s):W.custom(I=>i.jsx(G,{text:"The terminologies for this page are not published.",visible:I.visible})),(p=r==null?void 0:r.isPublished)!=null&&p[c]?w(r):W.custom(I=>i.jsx(G,{text:"The terminologies for hamburgur menu are not published.",visible:I.visible}))},[e.terms]),x.useEffect(()=>{(async()=>{var r;g(!0),!((r=e.bookInfos)!=null&&r.length)||!e.bookInfos.some(b=>b.bookId===e.currentBook)?await _():(a(e.bookInfos.find(b=>b.bookId===e.currentBook)),g(!1))})(),e.currentUser&&ht.fetchBookmarks().then(r=>{e.dispatch({type:F.SET_BOOKMARKS,payload:{bookmark:r}})}).catch(r=>{r.status===401&&r.response.data.message===mt&&(W.custom(b=>i.jsx(G,{text:r.response.data.message,visible:b.visible})),Ee.logout(),k("/login"))})},[e.currentBook,e.bookInfos,e.currentUser,e.dispatch]),x.useEffect(()=>{if(e.currentSubBook&&e.prevPage==="Reading"){const r=setTimeout(()=>{const b=document.getElementById(`subbook-${e.currentSubBook}`);b&&b.scrollIntoView({behavior:"smooth"})},100);return()=>clearTimeout(r)}},[e.currentSubBook,e.prevPage]);const E=()=>{W.custom(s=>{var r,b,p;return i.jsx(G,{text:((p=(b=(r=u==null?void 0:u.texts)==null?void 0:r.find(I=>I.variable=="Not Built Yet"))==null?void 0:b.text)==null?void 0:p[c])||"",visible:s.visible})})},A=(s,r)=>{e.dispatch({type:F.SET_CURRENT_CHAPTER,payload:{currentChapter:s}}),e.dispatch({type:F.SET_CURRENT_SUBBOOK,payload:{currentSubBook:r}}),k("/reading")},O=x.useCallback(async s=>{g(!0),kt()<ft?await Ie.getSubBookInfo(s)?(await Ie.removeSubBookInfo(s),e.dispatch({type:F.REMOVE_SUBBOOKINFO,payload:{subBookId:s}})):await L(s):W.custom(b=>{var p,I,T;return i.jsx(G,{text:((T=(I=(p=u==null?void 0:u.texts)==null?void 0:p.find(H=>H.variable=="Not Enough Space"))==null?void 0:I.text)==null?void 0:T[c])||"",visible:b.visible})}),g(!1)},[L,e.dispatch]),Q=x.useCallback(async s=>{g(!0),await Ie.removeSubBookInfo(s),e.dispatch({type:F.REMOVE_SUBBOOKINFO,payload:{subBookId:s}}),kt()<ft?await L(s):W.custom(b=>{var p,I,T;return i.jsx(G,{text:((T=(I=(p=u==null?void 0:u.texts)==null?void 0:p.find(H=>H.variable=="Not Enough Space"))==null?void 0:I.text)==null?void 0:T[c])||"",visible:b.visible})}),g(!1)},[L,e.dispatch]),N=x.useCallback(s=>{if(g(!0),e.bookmark&&e.bookmark.length>0){const r=e.bookmark.find(b=>b._id===s);if(r){const{chapterId:b,subBookId:p,verseId:I}=r;e.dispatch({type:F.SET_CURRENT_SUBBOOK,payload:{currentSubBook:p}}),e.dispatch({type:F.SET_CURRENT_CHAPTER,payload:{currentChapter:b}}),e.dispatch({type:F.SET_CURRENT_VERSE,payload:{currentVerse:I}}),k("/reading"),g(!1)}}},[e.currentBook,k,e.bookmark]),$=x.useCallback(s=>{g(!0),ht.deleteBookmark(s).then(r=>{e.dispatch({type:F.REMOVE_BOOKMARK,payload:{bookmarkId:s}}),W.custom(b=>i.jsx(G,{text:r.message,type:pe.BOOKMARK,visible:b.visible})),g(!1)}).catch(r=>{r.status==401&&r.response.data.message==mt&&(W.custom(b=>i.jsx(G,{text:r.response.data.message,type:pe.BOOKMARK,visible:b.visible})),Ee.logout(),k("/login")),g(!1)})},[e.dispatch]),Z=x.useCallback(s=>{e.dispatch({type:F.SET_CURRENT_SUBBOOK,payload:{currentSubBook:e.currentSubBook===s?"":s}})},[e.currentSubBook,e.dispatch]),f=()=>{e.dispatch({type:F.RESET_USER}),e.dispatch({type:F.RESET_BOOK}),e.dispatch({type:F.RESET_PAGE_STATUS}),Ee.logout()},m=()=>{k("/login")};return i.jsxs(mn,{style:{backgroundColor:l},children:[i.jsx(rn,{markImg:o&&zt+o.bookImage,markTitle:o==null?void 0:o.bookTitle,isLogIn:!!e.currentUser,terms:u||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},welcomePageTerms:B||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},onLogoClick:()=>k("/"),onCloseClick:()=>k("/library"),onLogin:e.currentUser?f:m,onSettings:()=>k("/settings"),onSearchClick:E}),i.jsx(un,{bookId:e.currentBook,bookTitle:o==null?void 0:o.bookTitle,bookImage:o==null?void 0:o.bookImage,subBooks:o==null?void 0:o.subBooks,deviceHeight:C,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.currentSubBook,terms:u||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},moveToReading:A,moveToReadingFromBookmark:N,onDownload:O,onDownloadRefresh:Q,removeBookmark:$,handleOpenedSubBook:Z}),t&&i.jsx(Jt,{})]})}function kn(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,terms:e.terms.terms,currentBook:e.pageStatus.currentBook,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,currentSubBook:e.pageStatus.currentSubBook,prevPage:e.pageStatus.prevPage,currentUser:e.user.currentUser,activeChapterId:e.books.activeChapterId}}const En=Vt(kn)(fn);export{En as default};
