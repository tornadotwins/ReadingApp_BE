var Rt=Object.defineProperty;var Lt=(e,o,a)=>o in e?Rt(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a;var bt=(e,o,a)=>Lt(e,typeof o!="symbol"?o+"":o,a);import{c as Le,_ as Y,j as i,N as xe,b as x,a8 as Mt,o as be,J as $t,ac as Me,ai as $e,Q as _,aj as Ee,ak as Oe,M as q,al as Ne,am as Ft,an as Ut,ao as Pe,ap as mt,aq as ft,af as zt}from"./index-DH-c_rFj.js";import{v as _t,w as At,x as Ht,y as Ae,s as l,z as Wt,A as Et,D as Re,E as Ot,F as Kt,B as y,G as Gt,S as Te,g as Ie,_ as K,c as Yt,u as qt,d as V}from"./App-18QLLKMc.js";import{I as C,T as Z}from"./index-Dmlgjfnd.js";import{H as Vt}from"./index-DqcaoH7P.js";import{C as G}from"./index-CvJtpuIx.js";import{A as Xt,b as kt}from"./bookmark.service-DaazbEgc.js";import{S as Qt}from"./index-CBg9q5NM.js";import{g as Zt,a as ht}from"./index-BBcM0dtj.js";import{L as Jt}from"./index-BvD-2T8g.js";import{b as yt}from"./book.service-mTnJ_pqv.js";import{a as De}from"./auth.service-CGfWy4g4.js";import"./index-BcnQO5GJ.js";import"./axios-BimPEqV4.js";function eo(e){return _t("MuiPagination",e)}At("MuiPagination",["root","ul","outlined","text"]);const to=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function oo(e={}){const{boundaryCount:o=1,componentName:a="usePagination",count:t=1,defaultPage:u=1,disabled:r=!1,hideNextButton:v=!1,hidePrevButton:p=!1,onChange:P,page:I,showFirstButton:f=!1,showLastButton:B=!1,siblingCount:g=1}=e,s=Le(e,to),[h,A]=Ht({controlled:I,default:u,name:a,state:"page"}),$=(b,j)=>{I||A(j),P&&P(b,j)},E=(b,j)=>{const U=j-b+1;return Array.from({length:U},(d,c)=>b+c)},N=E(1,Math.min(o,t)),L=E(Math.max(t-o+1,o+1),t),H=Math.max(Math.min(h-g,t-o-g*2-1),o+2),F=Math.min(Math.max(h+g,o+g*2+2),L.length>0?L[0]-2:t-1),W=[...f?["first"]:[],...p?[]:["previous"],...N,...H>o+2?["start-ellipsis"]:o+1<t-o?[o+1]:[],...E(H,F),...F<t-o-1?["end-ellipsis"]:t-o>o?[t-o]:[],...L,...v?[]:["next"],...B?["last"]:[]],J=b=>{switch(b){case"first":return 1;case"previous":return h-1;case"next":return h+1;case"last":return t;default:return null}},m=W.map(b=>typeof b=="number"?{onClick:j=>{$(j,b)},type:"page",page:b,selected:b===h,disabled:r,"aria-current":b===h?"true":void 0}:{onClick:j=>{$(j,J(b))},type:b,page:J(b),selected:!1,disabled:r||b.indexOf("ellipsis")===-1&&(b==="next"||b==="last"?h>=t:h<=1)});return Y({items:m},s)}function no(e){return _t("MuiPaginationItem",e)}const Q=At("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),vt=Ae(i.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Ct=Ae(i.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Bt=Ae(i.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),St=Ae(i.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),io=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Nt=(e,o)=>{const{ownerState:a}=e;return[o.root,o[a.variant],o[`size${be(a.size)}`],a.variant==="text"&&o[`text${be(a.color)}`],a.variant==="outlined"&&o[`outlined${be(a.color)}`],a.shape==="rounded"&&o.rounded,a.type==="page"&&o.page,(a.type==="start-ellipsis"||a.type==="end-ellipsis")&&o.ellipsis,(a.type==="previous"||a.type==="next")&&o.previousNext,(a.type==="first"||a.type==="last")&&o.firstLast]},ao=e=>{const{classes:o,color:a,disabled:t,selected:u,size:r,shape:v,type:p,variant:P}=e,I={root:["root",`size${be(r)}`,P,v,a!=="standard"&&`color${be(a)}`,a!=="standard"&&`${P}${be(a)}`,t&&"disabled",u&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[p]],icon:["icon"]};return Ot(I,no,o)},so=l("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Nt})(({theme:e,ownerState:o})=>Y({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${Q.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},o.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},o.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),lo=l(Wt,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Nt})(({theme:e,ownerState:o})=>Y({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${Q.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Q.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Q.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:xe(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${Q.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:xe(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${Q.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},o.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},o.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},o.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:o})=>Y({},o.variant==="text"&&{[`&.${Q.selected}`]:Y({},o.color!=="standard"&&{color:(e.vars||e).palette[o.color].contrastText,backgroundColor:(e.vars||e).palette[o.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[o.color].main}},[`&.${Q.focusVisible}`]:{backgroundColor:(e.vars||e).palette[o.color].dark}},{[`&.${Q.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},o.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Q.selected}`]:Y({},o.color!=="standard"&&{color:(e.vars||e).palette[o.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / 0.5)`:xe(e.palette[o.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:xe(e.palette[o.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:xe(e.palette[o.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Q.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:xe(e.palette[o.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${Q.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),ro=l("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,o)=>o.icon})(({theme:e,ownerState:o})=>Y({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},o.size==="small"&&{fontSize:e.typography.pxToRem(18)},o.size==="large"&&{fontSize:e.typography.pxToRem(22)})),co=x.forwardRef(function(o,a){const t=Et({props:o,name:"MuiPaginationItem"}),{className:u,color:r="standard",component:v,components:p={},disabled:P=!1,page:I,selected:f=!1,shape:B="circular",size:g="medium",slots:s={},type:h="page",variant:A="text"}=t,$=Le(t,io),E=Y({},t,{color:r,disabled:P,selected:f,shape:B,size:g,type:h,variant:A}),N=Mt(),L=ao(E),F=(N?{previous:s.next||p.next||St,next:s.previous||p.previous||Bt,last:s.first||p.first||vt,first:s.last||p.last||Ct}:{previous:s.previous||p.previous||Bt,next:s.next||p.next||St,first:s.first||p.first||vt,last:s.last||p.last||Ct})[h];return h==="start-ellipsis"||h==="end-ellipsis"?i.jsx(so,{ref:a,ownerState:E,className:Re(L.root,u),children:"â€¦"}):i.jsxs(lo,Y({ref:a,ownerState:E,component:v,disabled:P,className:Re(L.root,u)},$,{children:[h==="page"&&I,F?i.jsx(ro,{as:F,ownerState:E,className:L.icon}):null]}))}),uo=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],go=e=>{const{classes:o,variant:a}=e;return Ot({root:["root",a],ul:["ul"]},eo,o)},xo=l("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[o.root,o[a.variant]]}})({}),bo=l("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,o)=>o.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function mo(e,o,a){return e==="page"?`${a?"":"Go to "}page ${o}`:`Go to ${e} page`}const fo=x.forwardRef(function(o,a){const t=Et({props:o,name:"MuiPagination"}),{boundaryCount:u=1,className:r,color:v="standard",count:p=1,defaultPage:P=1,disabled:I=!1,getItemAriaLabel:f=mo,hideNextButton:B=!1,hidePrevButton:g=!1,renderItem:s=m=>i.jsx(co,Y({},m)),shape:h="circular",showFirstButton:A=!1,showLastButton:$=!1,siblingCount:E=1,size:N="medium",variant:L="text"}=t,H=Le(t,uo),{items:F}=oo(Y({},t,{componentName:"Pagination"})),W=Y({},t,{boundaryCount:u,color:v,count:p,defaultPage:P,disabled:I,getItemAriaLabel:f,hideNextButton:B,hidePrevButton:g,renderItem:s,shape:h,showFirstButton:A,showLastButton:$,siblingCount:E,size:N,variant:L}),J=go(W);return i.jsx(xo,Y({"aria-label":"pagination navigation",className:Re(J.root,r),ownerState:W,ref:a},H,{children:i.jsx(bo,{className:J.ul,ownerState:W,children:F.map((m,b)=>i.jsx("li",{children:s(Y({},m,{color:v,"aria-label":f(m.type,m.page,m.selected),shape:h,size:N,variant:L}))},b))})}))});function ko(e){return i.jsx(fo,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function pt(){const{innerWidth:e,innerHeight:o}=window;return{width:e,height:o}}function ho(){const[e,o]=x.useState(pt());return x.useEffect(()=>{function a(){o(pt())}return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),e}var Fe={},yo=$t;Object.defineProperty(Fe,"__esModule",{value:!0});var Dt=Fe.default=void 0,vo=yo(Kt()),Co=i;Dt=Fe.default=(0,vo.default)((0,Co.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const Bo=l(y)({display:"flex",position:"relative",width:"100%"}),So=l("img")({width:"100%",marginTop:"57px"}),po=l(y)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),To=l(y)({display:"flex",alignItems:"baseline"}),Io=l(y)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),wo=l("img")({width:"100%",height:"100%"}),jo=l(y)({margin:0,marginLeft:"12px",position:"relative",top:"-20px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),Po=l(y)(({hamburgercolor:e})=>({position:"absolute",top:"12px",right:"15px",width:"46px","& .hamburger-react":{width:"46px !important",color:e},"& .hamburger-react ~ .MuiBox-root ":{border:`1px solid ${e}`},"@media (max-height: 639px)":{top:"8px",right:"10px"},"@media screen and (orientation: landscape)":{right:"15px"}})),_o=l("img")({position:"relative",top:"-20px",cursor:"pointer","&:active":{opacity:"0.8"}}),Ao=l(y)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),Eo=l("img")({width:"100%","&:active":{opacity:"0.8"}});l("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}});const Oo=l(y)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),No=l(y)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Do=l(y)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),Tt=l(y)(({active:e,bordercolor:o})=>({width:"50%",height:"37.9px",border:`1px solid ${o}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer",marginBottom:"20px"})),It=l("img")({}),wt=l(y)(({active:e})=>({marginLeft:"5px"})),Ro=l(y)({width:"100%",display:"flex",flexDirection:"column"}),Lo=l(y)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),Mo=l(y)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});l(y)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const $o=l(y)({display:"flex",flexDirection:"column"}),Fo=l(y)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),Uo=l(y)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});l(y)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const zo=l(y)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),Ho=l("img")({cursor:"pointer",marginRight:"15px"}),Wo=l(Gt)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),Ko=l(y)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),Go=l("img")({width:"63px"}),Yo=l(y)({margin:"0px",marginLeft:"24px","@media (max-height: 600px)":{"& .MuiBox-root":{fontSize:"14px !important"}}}),qo=l(y)({width:"100%",justifyContent:"space-between",alignItems:"center",margin:"10px 0px"}),Vo=l(y)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"center",padding:"0px 7px"});l(Dt)({marginLeft:"-33px",color:"#17637D",height:"30px"});const Xo=l(y)(({progress:e,progresscolor:o})=>({width:"calc(100% - 60px)",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",borderBottom:`1px solid ${o}`,"::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${e}%`,borderBottom:e!=0?`2px solid ${o}`:"none"}})),Qo=l(y)(({istransliteration:e,translatestatus:o})=>({margin:"5px 0px 5px 0px",display:"flex",justifyContent:"space-between",opacity:o=="one"||o=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& .MuiBox-root:first-of-type":{width:"48%"},"& .MuiBox-root:last-child":{marginInlineEnd:"auto",width:e=="true"?"48%":"75%"}})),Zo=l(y)({display:"flex",justifyContent:"space-between"}),Jo=l(y)(({translatestatus:e})=>({width:"80%",display:"flex",opacity:e=="one"||e=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}})),en=l("img")({width:"20px",marginLeft:"10px"}),tn=l(y)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),jt=l("img")({marginLeft:"3px",cursor:"pointer"}),on=l(y)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),nn=l(y)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),an=l(y)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),Pt=l(y)(({style:e,translatestatus:o,readalready:a,readbgcolor:t,readtextcolor:u})=>({opacity:o=="one"||o=="none"?"0.5":"1",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:a=="true"?`${t} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:a=="true"?`${u} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:a=="true"?`${u} !important`:`${e.color} !important`}})),sn=l("img")({width:"50%",height:"50%"});function ln(e){const[o,a]=x.useState(""),[t,u]=x.useState(""),{theme:r,readingLanguage:v}=x.useContext(Te),{logoTextColor:p,headerBGColor:P}=Ie(r),I=localStorage.getItem(Me)||$e;return x.useEffect(()=>{var f,B,g,s;e.markTitle?a((f=e.markTitle)==null?void 0:f[I]):a(((s=(g=(B=e.terms)==null?void 0:B.texts.find(h=>h.variable=="Default Book Title"))==null?void 0:g.text)==null?void 0:s[v])||""),e.markImg?u(e.markImg):u(C.default_cover)},[e.markTitle,e.markImg]),i.jsxs(Bo,{children:[i.jsx(So,{src:r==_.DEFAULT||r==_.DARK?C.book_subtract:r==_.BLACK_AND_WHITE?C.book_subtract_BAW:r==_.SAPPHIRE?C.book_subtract_sapphire:C.book_subtract_easyocean}),i.jsxs(po,{children:[i.jsxs(To,{children:[i.jsx(Io,{onClick:e.onLogoClick,children:i.jsx(wo,{src:t})}),i.jsx(jo,{children:i.jsx(Z,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:p,children:o})})]}),i.jsx(_o,{src:r==_.EASY_OCEAN?C.search_easyocean:C.search,onClick:e.onSearchClick})]}),i.jsx(Ao,{children:i.jsx(Eo,{src:r==_.DEFAULT||r==_.DARK?C.close2:r==_.BLACK_AND_WHITE?C.close2_BAW:r==_.SAPPHIRE?C.close2_sapphire:C.close2_easyocean,onClick:e.onCloseClick})}),i.jsx(Po,{hamburgercolor:P,children:i.jsx(Vt,{isLogin:e.isLogIn,textColor:p,itemBgColor:P,toggleColor:P,terms:e.welcomePageTerms,onLogin:e.onLogin,onSettings:e.onSettings})})]})}function rn(e){var j,U,d,c,k,S,T,M,X,R,se,le,re,de,ce,ie,ae,D,me,we,Ue,ze,He,We,Ke,Ge,Ye,qe,Ve,Xe,Qe,Ze,Je,et,tt,ot,nt,it,at,st;const[o,a]=x.useState([]),[t,u]=x.useState(),[r,v]=x.useState(!1),[p,P]=x.useState(!1),[I,f]=x.useState(0),{theme:B,referenceLanguage:g,readingLanguage:s}=x.useContext(Te),{mainBGColor:h,altTextColor:A,backgroundColor:$,topTextColor:E,buttonColor:N,buttonTextColor:L}=Ie(B),H=localStorage.getItem(Me)||$e,F=x.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const n=e.userHistory.filter(z=>z.bookId==e.bookId);if(n&&n.length>0)return n[0].readChapterIds}return[]},[e.userHistory]),W=e.subBookId;x.useEffect(()=>{e.openedSubBook==e.subBookId?v(!0):v(!1)},[e.openedSubBook]),x.useEffect(()=>{var ee,te;const n=e.subBooks.filter(w=>w.subBookId===W);let z=0;if(n&&n.length>0&&(z=(ee=n[0].chapterInfos)==null?void 0:ee.length,u(n[0])),e.currentUser){const w=e.userHistory.filter(O=>O.bookId==e.bookId);if(w&&w.length>0){const O=w[0].subBooks.filter(oe=>oe.subBookId==W);O&&O.length>0&&f(Math.floor(((te=O[0])==null?void 0:te.readChapters)/z*100))}}if(e.subBooks&&e.subBooks.length>0){const w=e.subBooks.filter(O=>O.subBookId==W);if(w&&w.length>0){let O=w[0].chapterInfos;O.sort((oe,ne)=>oe.chapterNumber-ne.chapterNumber),a(O)}}},[e.subBooks,e.userHistory]),x.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const n=e.subBookInfos.filter(z=>z.subBookId==W);n&&n.length>0?P(!0):P(!1)}},[]);const J=x.useCallback(n=>{P(z=>!z),e.onDownload(n)},[]),m=()=>{var n,z,ee,te;if(t!=null&&t.noChapter){const w=(n=t==null?void 0:t.chapterInfos[0])==null?void 0:n.isTranslated,O=(z=t==null?void 0:t.chapterInfos[0])==null?void 0:z.isPublished;!(w!=null&&w[g])&&!(w!=null&&w[s])||!(O!=null&&O[g])&&!(O!=null&&O[s])?K.custom(oe=>{var ne,ue,fe;return i.jsx(G,{text:((fe=(ue=(ne=e.terms)==null?void 0:ne.texts.find(je=>je.variable=="None Translated"))==null?void 0:ue.text)==null?void 0:fe[s])||"",visible:oe.visible})}):e.moveToReading(t==null?void 0:t.chapterInfos[0].chapterId,(ee=e.bookTitle)==null?void 0:ee[H],e.bookImage,(te=t.subBookTitle)==null?void 0:te[H],t.subBookId,!!(w!=null&&w[g]&&(w!=null&&w[s])))}else v(!r),e.handleOpenedSubBook(e.subBookId)},b=(n,z)=>{var ee,te;z=="none"?K.custom(w=>{var O,oe,ne;return i.jsx(G,{text:((ne=(oe=(O=e.terms)==null?void 0:O.texts.find(ue=>ue.variable=="None Translated"))==null?void 0:oe.text)==null?void 0:ne[s])||"",visible:w.visible})}):e.moveToReading(n,(ee=e.bookTitle)==null?void 0:ee[H],e.bookImage,(te=t.subBookTitle)==null?void 0:te[H],t.subBookId,z=="both")};return i.jsxs(qo,{children:[i.jsxs(Vo,{children:[i.jsxs(Xo,{progress:I,progresscolor:N,onClick:m,children:[(t==null?void 0:t.subBookNumber)!=0&&i.jsxs(Qo,{istransliteration:((j=t==null?void 0:t.subBookTitle)==null?void 0:j[Ee])!=null?"true":"false",translatestatus:(t==null?void 0:t.noChapter)&&(!((d=(U=t==null?void 0:t.chapterInfos[0])==null?void 0:U.isTranslated)!=null&&d[g])&&!((k=(c=t==null?void 0:t.chapterInfos[0])==null?void 0:c.isTranslated)!=null&&k[s])||!((T=(S=t==null?void 0:t.chapterInfos[0])==null?void 0:S.isPublished)!=null&&T[g])&&!((X=(M=t==null?void 0:t.chapterInfos[0])==null?void 0:M.isPublished)!=null&&X[s])?"none":(!((se=(R=t==null?void 0:t.chapterInfos[0])==null?void 0:R.isTranslated)!=null&&se[g])||!((re=(le=t==null?void 0:t.chapterInfos[0])==null?void 0:le.isTranslated)!=null&&re[s]))&&((ce=(de=t==null?void 0:t.chapterInfos[0])==null?void 0:de.isPublished)!=null&&ce[g]||!((ae=(ie=t==null?void 0:t.chapterInfos[0])==null?void 0:ie.isPublished)!=null&&ae[s]))?"one":"both")||"",children:[((D=t==null?void 0:t.subBookTitle)==null?void 0:D[Ee])&&i.jsx(Z,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:A,language:Oe,children:(t==null?void 0:t.subBookNumber)+". "+((me=t==null?void 0:t.subBookTitle)==null?void 0:me[Ee])}),i.jsx(Z,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:A,language:Oe,direction:"rtl",children:(we=t==null?void 0:t.subBookTitle)==null?void 0:we[Oe]})]}),i.jsxs(Zo,{children:[i.jsxs(Jo,{translatestatus:t!=null&&t.noChapter&&(!((ze=(Ue=t==null?void 0:t.chapterInfos[0])==null?void 0:Ue.isTranslated)!=null&&ze[g])&&!((We=(He=t==null?void 0:t.chapterInfos[0])==null?void 0:He.isTranslated)!=null&&We[s])||!((Ge=(Ke=t==null?void 0:t.chapterInfos[0])==null?void 0:Ke.isPublished)!=null&&Ge[g])&&!((qe=(Ye=t==null?void 0:t.chapterInfos[0])==null?void 0:Ye.isPublished)!=null&&qe[s]))?"none":(!((Xe=(Ve=t==null?void 0:t.chapterInfos[0])==null?void 0:Ve.isTranslated)!=null&&Xe[g])||!((Ze=(Qe=t==null?void 0:t.chapterInfos[0])==null?void 0:Qe.isTranslated)!=null&&Ze[s]))&&((et=(Je=t==null?void 0:t.chapterInfos[0])==null?void 0:Je.isPublished)!=null&&et[g]||!((ot=(tt=t==null?void 0:t.chapterInfos[0])==null?void 0:tt.isPublished)!=null&&ot[s]))?"one":"both",children:[i.jsx(Z,{fontFamily:'"Baloo Da 2"',color:A,children:(nt=t==null?void 0:t.subBookTitle)==null?void 0:nt[H]}),(t==null?void 0:t.subBookNumber)==0&&i.jsx(en,{src:C.icon_intro})]}),e.currentUser&&I!==0&&!(t!=null&&t.noChapter)&&i.jsx(Z,{fontFamily:'"Baloo Da 2"',color:N,children:`${I}%`})]})]}),i.jsxs(tn,{isdownloaded:p?"true":"false",children:[i.jsx(jt,{src:p?B==_.DEFAULT||B==_.EASY_OCEAN?C.download_cancel:C.download_cancel_white:B==_.DEFAULT||B==_.EASY_OCEAN?C.download:C.download_white,onClick:()=>J(W)}),p&&i.jsx(jt,{src:B==_.DEFAULT||B==_.EASY_OCEAN?C.download_refresh:C.download_refresh_white,onClick:()=>e.onDownloadRefresh(W)})]})]}),r&&i.jsxs(on,{style:{backgroundColor:$},children:[i.jsx(nn,{children:i.jsx(Z,{fontFamily:"Inter",color:E,children:((st=(at=(it=e.terms)==null?void 0:it.texts.find(n=>n.variable=="Chapter"))==null?void 0:at.text)==null?void 0:st[s])||""})}),i.jsx(an,{children:o==null?void 0:o.map((n,z)=>{var ee,te,w,O,oe,ne,ue,fe,je,lt,rt,dt,ct,ut,gt,xt;return n.chapterNumber==0?i.jsx(Pt,{translatestatus:!((ee=n==null?void 0:n.isTranslated)!=null&&ee[g])&&!((te=n==null?void 0:n.isTranslated)!=null&&te[s])||!((w=n==null?void 0:n.isPublished)!=null&&w[g])&&!((O=n==null?void 0:n.isPublished)!=null&&O[s])?"none":(!((oe=n==null?void 0:n.isTranslated)!=null&&oe[g])||!((ne=n==null?void 0:n.isTranslated)!=null&&ne[s]))&&((ue=n==null?void 0:n.isPublished)!=null&&ue[g]||!((fe=n==null?void 0:n.isPublished)!=null&&fe[s]))?"one":"both",readalready:F&&F.length>0&&F.includes(n.chapterId)?"true":"false",style:{backgroundColor:h,color:A},readbgcolor:N,readtextcolor:L,onClick:()=>{var ke,he,ye,ve,Ce,Be,Se,pe;return b(n.chapterId,!((ke=n==null?void 0:n.isTranslated)!=null&&ke[g])&&!((he=n==null?void 0:n.isTranslated)!=null&&he[s])||!((ye=n==null?void 0:n.isPublished)!=null&&ye[g])&&!((ve=n==null?void 0:n.isPublished)!=null&&ve[s])?"none":(!((Ce=n.isTranslated)!=null&&Ce[g])||!((Be=n==null?void 0:n.isTranslated)!=null&&Be[s]))&&((Se=n==null?void 0:n.isPublished)!=null&&Se[g]||!((pe=n==null?void 0:n.isPublished)!=null&&pe[s]))?"one":"both")},children:i.jsx(sn,{src:C.icon_intro})},z):i.jsx(Pt,{translatestatus:!((je=n==null?void 0:n.isTranslated)!=null&&je[g])&&!((lt=n==null?void 0:n.isTranslated)!=null&&lt[s])||!((rt=n==null?void 0:n.isPublished)!=null&&rt[g])&&!((dt=n==null?void 0:n.isPublished)!=null&&dt[s])?"none":(!((ct=n==null?void 0:n.isTranslated)!=null&&ct[g])||!((ut=n==null?void 0:n.isTranslated)!=null&&ut[s]))&&((gt=n==null?void 0:n.isPublished)!=null&&gt[g]||!((xt=n==null?void 0:n.isPublished)!=null&&xt[s]))?"one":"both",readalready:F&&F.length>0&&F.includes(n.chapterId)?"true":"false",style:{backgroundColor:h,color:A},readbgcolor:N,readtextcolor:L,onClick:()=>{var ke,he,ye,ve,Ce,Be,Se,pe;return b(n.chapterId,!((ke=n==null?void 0:n.isTranslated)!=null&&ke[g])&&!((he=n==null?void 0:n.isTranslated)!=null&&he[s])||!((ye=n==null?void 0:n.isPublished)!=null&&ye[g])&&!((ve=n==null?void 0:n.isPublished)!=null&&ve[s])?"none":(!((Ce=n.isTranslated)!=null&&Ce[g])||!((Be=n.isTranslated)!=null&&Be[s]))&&(!((Se=n==null?void 0:n.isPublished)!=null&&Se[g])||!((pe=n==null?void 0:n.isPublished)!=null&&pe[s]))?"one":"both")},children:i.jsx(Z,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:n.chapterNumber})},z)})})]})]})}function dn(e){const[o,a]=x.useState([]);return x.useEffect(()=>{let t=e.subBooks;t&&t.sort((u,r)=>u.subBookNumber-r.subBookNumber),a(t)},[e.subBooks]),i.jsx(i.Fragment,{children:o&&o.length>0&&o.map((t,u)=>i.jsx(rn,{bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:o,subBookId:t.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},u))})}function cn(e){const[o,a]=x.useState(""),[t,u]=x.useState([]),[r,v]=x.useState(1),[p,P]=x.useState([]),{theme:I,readingLanguage:f}=x.useContext(Te),{backgroundColor:B,topTextColor:g,mainTextColor:s}=Ie(I),h=Zt(e.deviceHeight),A=r*h,$=A-h,E=e.currentUser&&t.slice($,A);x.useEffect(()=>{var m,b,j,U,d,c;if(e.subBooks&&e.subBooks.length>0){const k=e.subBooks.map(S=>{var T;return{label:(T=S.subBookTitle)==null?void 0:T[f],value:S.subBookId}});k.unshift({label:((m=e.bookTitle)==null?void 0:m.en)=="Qur'an"||((b=e.bookTitle)==null?void 0:b.en)=="Zabur"?(U=(j=e.terms.texts.find(S=>S.variable=="All Chapters"))==null?void 0:j.text)==null?void 0:U[f]:(c=(d=e.terms.texts.find(S=>S.variable=="All SubBooks"))==null?void 0:d.text)==null?void 0:c[f],value:"all"}),P(k)}},[e.subBooks]),x.useEffect(()=>{p.length>0&&a(p[0].value)},[p]),x.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const m=e.bookmark.filter(b=>b.subBookId===o);u(o==="all"||o===""?e.bookmark:m)}else u([]),v(0);r>1&&E.length==1&&v(m=>m-1)},[e.bookmark]);const N=(m,b)=>{v(b)},L=x.useCallback(m=>{const b=m.target.value;a(b);const j=e.bookmark.filter(U=>U.subBookId===b);u(b==="all"?e.bookmark:j)},[e.bookmark]),H=()=>{var m,b,j,U;return i.jsx(Lo,{style:{backgroundColor:B},children:i.jsx(Xt,{label:((b=(m=e.terms.texts.find(d=>d.variable=="Filter"))==null?void 0:m.text)==null?void 0:b[f])||"",detail:i.jsxs(Mo,{children:[i.jsx(Z,{color:g,children:(U=(j=e.terms.texts.find(d=>d.variable=="Show"))==null?void 0:j.text)==null?void 0:U[f]}),i.jsx(Qt,{label:"",options:p,value:o,backgroundColor:B,textColor:g,onChange:L})]})})})},F=()=>i.jsx($o,{children:(E==null?void 0:E.length)>0&&E.map((m,b)=>{var j,U,d,c,k,S,T,M,X,R,se,le,re,de,ce,ie,ae;return i.jsxs(y,{children:[i.jsxs(Fo,{children:[i.jsxs(Uo,{onClick:()=>e.moveToReadingFromBookmark(m._id),children:[i.jsx(Z,{color:s,children:(j=m.subBookTitle)==null?void 0:j[f]}),i.jsx(Z,{color:s,children:m.bookTitle.en=="Qur'an"||m.bookTitle.en=="Zabur"?m.chapterNumber>0?`${(d=(U=e.terms.texts.find(D=>D.variable=="Surah Bookmark"))==null?void 0:U.text)==null?void 0:d[f]} ${m.chapterNumber}, ${(k=(c=e.terms.texts.find(D=>D.variable=="Aya"))==null?void 0:c.text)==null?void 0:k[f]} ${m.verseNumber}`:`${(T=(S=e.terms.texts.find(D=>D.variable=="Surah Bookmark"))==null?void 0:S.text)==null?void 0:T[f]} _ , ${(X=(M=e.terms.texts.find(D=>D.variable=="Aya"))==null?void 0:M.text)==null?void 0:X[f]} ${m.verseNumber}`:m.chapterNumber>0?`${(se=(R=e.terms.texts.find(D=>D.variable=="Chapter Bookmark"))==null?void 0:R.text)==null?void 0:se[f]} ${m.chapterNumber}, ${(re=(le=e.terms.texts.find(D=>D.variable=="Aya"))==null?void 0:le.text)==null?void 0:re[f]} ${m.verseNumber}`:`${(ce=(de=e.terms.texts.find(D=>D.variable=="Chapter Bookmark"))==null?void 0:de.text)==null?void 0:ce[f]} _ , ${(ae=(ie=e.terms.texts.find(D=>D.variable=="Aya"))==null?void 0:ie.text)==null?void 0:ae[f]} ${m.verseNumber}`})]}),i.jsx(Ho,{src:I==_.DEFAULT||I==_.EASY_OCEAN||I==_.EASY_SUNRISE?C.black_bookmark:C.white_bookmark,onClick:()=>e.removeBookmark(m._id)})]}),i.jsx(zo,{})]},b)})}),W=()=>i.jsx(Wo,{buttoncolor:s,children:i.jsx(ko,{count:e.currentUser?Math.ceil(t.length/h):0,page:r,hidePrevButton:!0,hideNextButton:!0,onChange:N})}),J=()=>{var m,b;return i.jsxs(Ko,{style:{backgroundColor:B},children:[i.jsx(Go,{src:I==_.DEFAULT||I==_.BLACK_AND_WHITE?C.swipe:I==_.EASY_OCEAN?C.swipe_easyocean:C.swipe_white}),i.jsx(Yo,{style:{color:g},children:(b=(m=e.terms.texts.find(j=>j.variable=="Bookmark Help"))==null?void 0:m.text)==null?void 0:b[f]})]})};return i.jsxs(Ro,{children:[H(),F(),W(),J()]})}function un(e){var B,g,s,h;const[o,a]=x.useState(q),{theme:t,readingLanguage:u}=x.useContext(Te),{mainBGColor:r,headerBGColor:v,buttonColor:p,buttonTextColor:P,mainTextColor:I}=Ie(t),f=A=>{e.currentUser?a(A):K.custom($=>{var E,N;return i.jsx(G,{text:((N=(E=e.terms.texts.find(L=>L.variable=="Bookmark Read Description"))==null?void 0:E.text)==null?void 0:N[u])||"",visible:$.visible})})};return i.jsx(Oo,{style:{backgroundColor:v},children:i.jsxs(No,{style:{backgroundColor:r},children:[i.jsxs(Do,{children:[i.jsxs(Tt,{active:o==q?"true":"false",style:{backgroundColor:o==q?p:r},bordercolor:I,onClick:()=>f(q),children:[i.jsx(It,{src:t==_.DEFAULT?C.index:t==_.EASY_OCEAN?o==q?C.index_active:C.index:o==q?C.index:C.index_active}),i.jsx(wt,{active:o==q?"true":"false",children:i.jsx(Z,{fontSize:16,fontWeight:"500",lineHeight:24,color:o==q?P:I,children:((g=(B=e.terms.texts.find(A=>A.variable=="Index"))==null?void 0:B.text)==null?void 0:g[u])||""})})]}),i.jsxs(Tt,{active:o==q?"false":"true",style:{backgroundColor:o==Ne?p:r},bordercolor:I,onClick:()=>f(Ne),children:[i.jsx(It,{src:t==_.DEFAULT?C.bookmark2_default:t==_.EASY_OCEAN?o==q?C.bookmark2_default:C.bookmark2_white:o==q?C.bookmark2_white:C.bookmark2_default}),i.jsx(wt,{active:o==q?"false":"true",children:i.jsx(Z,{fontSize:16,fontWeight:"500",lineHeight:24,color:o==Ne?P:I,children:((h=(s=e.terms.texts.find(A=>A.variable=="Bookmarks"))==null?void 0:s.text)==null?void 0:h[u])||""})})]})]}),o==q?i.jsx(dn,{bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):i.jsx(cn,{bookTitle:e.bookTitle,subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark.filter(A=>A.bookId==e.bookId),deviceHeight:e.deviceHeight,terms:e.terms,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const gn=Ft,ge=Ut,xn=1;class bn{constructor(){bt(this,"db",null)}async initDB(){return new Promise((o,a)=>{const t=indexedDB.open(gn,xn);t.onerror=()=>a(t.error),t.onsuccess=()=>{this.db=t.result,o()},t.onupgradeneeded=u=>{u.target.result.createObjectStore(ge,{keyPath:"subBookId"})}})}async saveSubBookInfo(o){return this.db||await this.initDB(),new Promise((a,t)=>{const v=this.db.transaction([ge],"readwrite").objectStore(ge).put(o);v.onerror=()=>t(v.error),v.onsuccess=()=>a()})}async getSubBookInfo(o){return this.db||await this.initDB(),new Promise((a,t)=>{const v=this.db.transaction([ge],"readonly").objectStore(ge).get(o);v.onerror=()=>t(v.error),v.onsuccess=()=>a(v.result)})}async removeSubBookInfo(o){return this.db||await this.initDB(),new Promise((a,t)=>{const v=this.db.transaction([ge],"readwrite").objectStore(ge).delete(o);v.onerror=()=>t(v.error),v.onsuccess=()=>a()})}}const _e=new bn,mn=l(y)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function fn(e){const[o,a]=x.useState(),[t,u]=x.useState(!1),[r,v]=x.useState(),[p,P]=x.useState(),f=new URLSearchParams(window.location.search).get("id")||"",B=qt(),{height:g}=ho(),{theme:s,readingLanguage:h}=x.useContext(Te),{mainBGColor:A}=Ie(s),$=localStorage.getItem(Me)||$e,E=x.useCallback(()=>{f&&yt.fetchBookInfo(f).then(d=>{var c,k,S,T,M;if(e.dispatch({type:V.ADD_BOOKINFO,payload:{bookInfo:d}}),a(d),e.currentUser&&!e.userHistory.some(R=>R.bookId==f)&&d.subBooks){const R=d.subBooks.find(ie=>ie.subBookNumber==0),se=(c=R==null?void 0:R.chapterInfos[0])==null?void 0:c.chapterId,le=(k=d.bookTitle)==null?void 0:k[$],re=d.bookImage||"",de=(S=R==null?void 0:R.subBookTitle)==null?void 0:S[$],ce=R==null?void 0:R.subBookId;(M=(T=R==null?void 0:R.chapterInfos[0])==null?void 0:T.isTranslated)!=null&&M[$]?H(se,le,re,de,ce):K.custom(ie=>{var ae,D,me;return i.jsx(G,{text:((me=(D=(ae=r==null?void 0:r.texts)==null?void 0:ae.find(we=>we.variable=="None Translated"))==null?void 0:D.text)==null?void 0:me[h])||"",type:Pe.BOOKMARK,visible:ie.visible})})}}).catch(d=>{K.custom(c=>i.jsx(G,{text:d,type:Pe.BOOKMARK,visible:c.visible}))}).finally(()=>{u(!1)})},[f,e.dispatch,e.userHistory,e.currentUser]),N=x.useCallback(async d=>{try{const c=await yt.fetchSubBookInfo(d);console.log({subBookInfo:c}),e.dispatch({type:V.ADD_SUBBOOKINFO,payload:{subBookInfo:c}}),e.dispatch({type:V.ADD_SUBBOOK,payload:{subBook:c}}),await _e.saveSubBookInfo(c),u(!1)}catch(c){K.custom(k=>i.jsx(G,{text:c,visible:k.visible})),u(!1)}},[e.dispatch]);x.useEffect(()=>{var k,S;const d=e.terms.find(T=>T.pageTitle=="Index & Bookmark Page"),c=e.terms.find(T=>T.pageTitle=="Welcome Page");(k=d==null?void 0:d.isPublished)!=null&&k[h]?v(d):K.custom(T=>i.jsx(G,{text:"The terminologies for this page are not published.",visible:T.visible})),(S=c==null?void 0:c.isPublished)!=null&&S[h]?P(c):K.custom(T=>i.jsx(G,{text:"The terminologies for hamburgur menu are not published.",visible:T.visible}))},[e.terms]),x.useEffect(()=>{(async()=>{var c;u(!0),!((c=e.bookInfos)!=null&&c.length)||!e.bookInfos.some(k=>k.bookId===f)?await E():(a(e.bookInfos.find(k=>k.bookId===f)),u(!1))})(),e.currentUser&&kt.fetchBookmarks().then(c=>{e.dispatch({type:V.SET_BOOKMARKS,payload:{bookmark:c}})}).catch(c=>{c.status===401&&c.response.data.message===mt&&(K.custom(k=>i.jsx(G,{text:c.response.data.message,visible:k.visible})),De.logout(),B("/login"))})},[f,e.bookInfos,e.currentUser,e.dispatch]);const L=()=>{K.custom(d=>{var c,k,S;return i.jsx(G,{text:((S=(k=(c=r==null?void 0:r.texts)==null?void 0:c.find(T=>T.variable=="Not Built Yet"))==null?void 0:k.text)==null?void 0:S[h])||"",visible:d.visible})})},H=(d,c,k,S,T,M)=>{e.dispatch({type:V.SET_CURRENT_CHAPTER,payload:{currentChapter:d}}),e.dispatch({type:V.SET_OPENED_SUBBOOK,payload:{openedSubBook:T}}),B("/reading")},F=x.useCallback(async d=>{u(!0),ht()<ft?await _e.getSubBookInfo(d)?(await _e.removeSubBookInfo(d),e.dispatch({type:V.REMOVE_SUBBOOKINFO,payload:{subBookId:d}})):await N(d):K.custom(k=>{var S,T,M;return i.jsx(G,{text:((M=(T=(S=r==null?void 0:r.texts)==null?void 0:S.find(X=>X.variable=="Not Enough Space"))==null?void 0:T.text)==null?void 0:M[h])||"",visible:k.visible})}),u(!1)},[N,e.dispatch]),W=x.useCallback(async d=>{u(!0),await _e.removeSubBookInfo(d),e.dispatch({type:V.REMOVE_SUBBOOKINFO,payload:{subBookId:d}}),ht()<ft?await N(d):K.custom(k=>{var S,T,M;return i.jsx(G,{text:((M=(T=(S=r==null?void 0:r.texts)==null?void 0:S.find(X=>X.variable=="Not Enough Space"))==null?void 0:T.text)==null?void 0:M[h])||"",visible:k.visible})}),u(!1)},[N,e.dispatch]),J=x.useCallback(d=>{if(u(!0),e.bookmark&&e.bookmark.length>0){const c=e.bookmark.find(k=>k._id===d);if(c){const{chapterId:k,bookTitle:S,subBookId:T,subBookTitle:M,verseId:X}=c;B(`/reading?chapterId=${k}&book=${S==null?void 0:S[$]}&subBook=${M==null?void 0:M[$]}&subBookId=${T}&verseId=${X}&bookId=${f}`),u(!1)}}},[f,B,e.bookmark]),m=x.useCallback(d=>{u(!0),kt.deleteBookmark(d).then(c=>{e.dispatch({type:V.REMOVE_BOOKMARK,payload:{bookmarkId:d}}),K.custom(k=>i.jsx(G,{text:c.message,type:Pe.BOOKMARK,visible:k.visible})),u(!1)}).catch(c=>{c.status==401&&c.response.data.message==mt&&(K.custom(k=>i.jsx(G,{text:c.response.data.message,type:Pe.BOOKMARK,visible:k.visible})),De.logout(),B("/login")),u(!1)})},[e.dispatch]),b=x.useCallback(d=>{e.dispatch({type:V.SET_OPENED_SUBBOOK,payload:{openedSubBook:e.openedSubBook===d?"":d}})},[e.openedSubBook,e.dispatch]),j=()=>{e.dispatch({type:V.RESET_USER}),e.dispatch({type:V.RESET_BOOK}),e.dispatch({type:V.RESET_PAGE_STATUS}),De.logout()},U=()=>{B("/login")};return i.jsxs(mn,{style:{backgroundColor:A},children:[i.jsx(ln,{markImg:o&&zt+o.bookImage,markTitle:o==null?void 0:o.bookTitle,isLogIn:!!e.currentUser,terms:r||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},welcomePageTerms:p||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},onLogoClick:()=>B("/"),onCloseClick:()=>B("/library"),onLogin:e.currentUser?j:U,onSettings:()=>B("/settings"),onSearchClick:L}),i.jsx(un,{bookId:f,bookTitle:o==null?void 0:o.bookTitle,bookImage:o==null?void 0:o.bookImage,subBooks:o==null?void 0:o.subBooks,deviceHeight:g,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.openedSubBook,terms:r||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},moveToReading:H,moveToReadingFromBookmark:J,onDownload:F,onDownloadRefresh:W,removeBookmark:m,handleOpenedSubBook:b}),t&&i.jsx(Jt,{})]})}function kn(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,terms:e.terms.terms,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,openedSubBook:e.pageStatus.openedSubBook,currentUser:e.user.currentUser,activeChapterId:e.books.activeChapterId}}const En=Yt(kn)(fn);export{En as default};
