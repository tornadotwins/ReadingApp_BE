var Me=Object.defineProperty;var $e=(e,t,a)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var be=(e,t,a)=>$e(e,typeof t!="symbol"?t+"":t,a);import{c as ue,_ as R,j as o,N as X,b as u,a7 as Le,o as J,J as Fe,ab as oe,ad as ne,Q as v,ag as se,ah as re,M as $,ai as le,aj as Ue,ak as ze,al as ce,am as xe,an as fe,ac as He}from"./index-TfMfeDo7.js";import{x as Ae,y as Oe,z as We,A as ae,s,D as Ke,E as Ee,F as de,G as De,J as Ge,B as f,K as Ye,u as Q,S as Z,g as ee,_ as W,c as qe,d as Ve,e as Y}from"./App-BORvBstc.js";import{I as x,T as P,g as Xe,a as he}from"./images-BSDyU14y.js";import{A as Je,b as pe}from"./bookmark.service-D8XoGE_V.js";import{S as Qe}from"./index-B27TxH9d.js";import{C as K,L as Ze}from"./index-BT4Cadma.js";import{b as ke}from"./book.service-C_Kh9pbB.js";import{a as me}from"./auth.service-DbxfmjlK.js";import"./index-Cm-o7MeL.js";import"./axios-BimPEqV4.js";function et(e){return Ae("MuiPagination",e)}Oe("MuiPagination",["root","ul","outlined","text"]);const tt=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function ot(e={}){const{boundaryCount:t=1,componentName:a="usePagination",count:n=1,defaultPage:r=1,disabled:k=!1,hideNextButton:i=!1,hidePrevButton:b=!1,onChange:p,page:h,showFirstButton:I=!1,showLastButton:w=!1,siblingCount:j=1}=e,S=ue(e,tt),[m,M]=We({controlled:h,default:r,name:a,state:"page"}),N=(l,y)=>{h||M(y),p&&p(l,y)},T=(l,y)=>{const C=y-l+1;return Array.from({length:C},(z,V)=>l+V)},A=T(1,Math.min(t,n)),O=T(Math.max(n-t+1,t+1),n),E=Math.max(Math.min(m-j,n-t-j*2-1),t+2),_=Math.min(Math.max(m+j,t+j*2+2),O.length>0?O[0]-2:n-1),c=[...I?["first"]:[],...b?[]:["previous"],...A,...E>t+2?["start-ellipsis"]:t+1<n-t?[t+1]:[],...T(E,_),..._<n-t-1?["end-ellipsis"]:n-t>t?[n-t]:[],...O,...i?[]:["next"],...w?["last"]:[]],d=l=>{switch(l){case"first":return 1;case"previous":return m-1;case"next":return m+1;case"last":return n;default:return null}},g=c.map(l=>typeof l=="number"?{onClick:y=>{N(y,l)},type:"page",page:l,selected:l===m,disabled:k,"aria-current":l===m?"true":void 0}:{onClick:y=>{N(y,d(l))},type:l,page:d(l),selected:!1,disabled:k||l.indexOf("ellipsis")===-1&&(l==="next"||l==="last"?m>=n:m<=1)});return R({items:g},S)}function nt(e){return Ae("MuiPaginationItem",e)}const L=Oe("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),ye=ae(o.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Be=ae(o.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),ve=ae(o.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Ce=ae(o.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),at=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Ne=(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`size${J(a.size)}`],a.variant==="text"&&t[`text${J(a.color)}`],a.variant==="outlined"&&t[`outlined${J(a.color)}`],a.shape==="rounded"&&t.rounded,a.type==="page"&&t.page,(a.type==="start-ellipsis"||a.type==="end-ellipsis")&&t.ellipsis,(a.type==="previous"||a.type==="next")&&t.previousNext,(a.type==="first"||a.type==="last")&&t.firstLast]},it=e=>{const{classes:t,color:a,disabled:n,selected:r,size:k,shape:i,type:b,variant:p}=e,h={root:["root",`size${J(k)}`,p,i,a!=="standard"&&`color${J(a)}`,a!=="standard"&&`${p}${J(a)}`,n&&"disabled",r&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[b]],icon:["icon"]};return De(h,nt,t)},st=s("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Ne})(({theme:e,ownerState:t})=>R({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${L.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),rt=s(Ke,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Ne})(({theme:e,ownerState:t})=>R({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${L.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${L.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${L.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:X(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${L.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:X(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${L.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:t})=>R({},t.variant==="text"&&{[`&.${L.selected}`]:R({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}},[`&.${L.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}},{[`&.${L.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},t.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${L.selected}`]:R({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:X(e.palette[t.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:X(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:X(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${L.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:X(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${L.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),lt=s("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})(({theme:e,ownerState:t})=>R({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(22)})),ct=u.forwardRef(function(t,a){const n=Ee({props:t,name:"MuiPaginationItem"}),{className:r,color:k="standard",component:i,components:b={},disabled:p=!1,page:h,selected:I=!1,shape:w="circular",size:j="medium",slots:S={},type:m="page",variant:M="text"}=n,N=ue(n,at),T=R({},n,{color:k,disabled:p,selected:I,shape:w,size:j,type:m,variant:M}),A=Le(),O=it(T),_=(A?{previous:S.next||b.next||Ce,next:S.previous||b.previous||ve,last:S.first||b.first||ye,first:S.last||b.last||Be}:{previous:S.previous||b.previous||ve,next:S.next||b.next||Ce,first:S.first||b.first||ye,last:S.last||b.last||Be})[m];return m==="start-ellipsis"||m==="end-ellipsis"?o.jsx(st,{ref:a,ownerState:T,className:de(O.root,r),children:"â€¦"}):o.jsxs(rt,R({ref:a,ownerState:T,component:i,disabled:p,className:de(O.root,r)},N,{children:[m==="page"&&h,_?o.jsx(lt,{as:_,ownerState:T,className:O.icon}):null]}))}),dt=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],ut=e=>{const{classes:t,variant:a}=e;return De({root:["root",a],ul:["ul"]},et,t)},gt=s("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant]]}})({}),bt=s("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function xt(e,t,a){return e==="page"?`${a?"":"Go to "}page ${t}`:`Go to ${e} page`}const ft=u.forwardRef(function(t,a){const n=Ee({props:t,name:"MuiPagination"}),{boundaryCount:r=1,className:k,color:i="standard",count:b=1,defaultPage:p=1,disabled:h=!1,getItemAriaLabel:I=xt,hideNextButton:w=!1,hidePrevButton:j=!1,renderItem:S=g=>o.jsx(ct,R({},g)),shape:m="circular",showFirstButton:M=!1,showLastButton:N=!1,siblingCount:T=1,size:A="medium",variant:O="text"}=n,E=ue(n,dt),{items:_}=ot(R({},n,{componentName:"Pagination"})),c=R({},n,{boundaryCount:r,color:i,count:b,defaultPage:p,disabled:h,getItemAriaLabel:I,hideNextButton:w,hidePrevButton:j,renderItem:S,shape:m,showFirstButton:M,showLastButton:N,siblingCount:T,size:A,variant:O}),d=ut(c);return o.jsx(gt,R({"aria-label":"pagination navigation",className:de(d.root,k),ownerState:c,ref:a},E,{children:o.jsx(bt,{className:d.ul,ownerState:c,children:_.map((g,l)=>o.jsx("li",{children:S(R({},g,{color:i,"aria-label":I(g.type,g.page,g.selected),shape:m,size:A,variant:O}))},l))})}))});function ht(e){return o.jsx(ft,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function Se(){const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}function pt(){const[e,t]=u.useState(Se());return u.useEffect(()=>{function a(){t(Se())}return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),e}var ge={},kt=Fe;Object.defineProperty(ge,"__esModule",{value:!0});var Pe=ge.default=void 0,mt=kt(Ge()),yt=o;Pe=ge.default=(0,mt.default)((0,yt.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const Bt=s(f)({display:"flex",position:"relative",width:"100%"}),vt=s("img")({width:"100%",marginTop:"57px"}),Ct=s(f)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),St=s(f)({display:"flex",alignItems:"baseline"}),It=s(f)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),wt=s("img")({width:"100%",height:"100%"}),jt=s(f)({margin:0,marginLeft:"12px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),Tt=s("img")({cursor:"pointer","&:active":{opacity:"0.8"}}),_t=s(f)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),At=s("img")({width:"100%","&:active":{opacity:"0.8"}}),Ot=s("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}}),Et=s(f)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Dt=s(f)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Nt=s(f)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),Ie=s(f)(({active:e,bordercolor:t})=>({width:"50%",height:"37.9px",border:`1px solid ${t}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer",marginBottom:"20px"})),we=s("img")({}),je=s(f)(({active:e})=>({marginLeft:"5px"})),Pt=s(f)({width:"100%",display:"flex",flexDirection:"column"}),Rt=s(f)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),Mt=s(f)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});s(f)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const $t=s(f)({display:"flex",flexDirection:"column"}),Lt=s(f)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),Ft=s(f)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});s(f)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const Ut=s(f)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),zt=s("img")({cursor:"pointer",marginRight:"15px"}),Ht=s(Ye)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),Wt=s(f)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),Kt=s("img")({width:"63px"}),Gt=s(f)({margin:"0px",marginLeft:"24px","@media (max-height: 600px)":{"& .MuiBox-root":{fontSize:"14px !important"}}}),Yt=s(f)({width:"100%",justifyContent:"space-between",alignItems:"center",margin:"10px 0px"}),qt=s(f)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"center",padding:"0px 7px"});s(Pe)({marginLeft:"-33px",color:"#17637D",height:"30px"});const Vt=s(f)(({progress:e,progresscolor:t})=>({width:"calc(100% - 60px)",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",borderBottom:`1px solid ${t}`,"::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${e}%`,borderBottom:e!=0?`2px solid ${t}`:"none"}})),Xt=s(f)(({istransliteration:e})=>({margin:"5px 0px 5px 0px",display:"flex",justifyContent:"space-between","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& .MuiBox-root:first-of-type":{width:"48%"},"& .MuiBox-root:last-child":{marginInlineEnd:"auto",width:e=="true"?"48%":"75%"}})),Jt=s(f)({display:"flex",justifyContent:"space-between"}),Qt=s(f)({width:"80%",display:"flex","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}),Zt=s("img")({width:"20px",marginLeft:"10px"}),eo=s(f)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),Te=s("img")({marginLeft:"3px",cursor:"pointer"}),to=s(f)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),oo=s(f)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),no=s(f)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),_e=s(f)(({style:e,disable:t,readalready:a,readbgcolor:n,readtextcolor:r})=>({opacity:t=="true"?.5:1,pointerEvents:t=="true"?"none":"initial",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:a=="true"?`${n} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:a=="true"?`${r} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:a=="true"?`${r} !important`:`${e.color} !important`}})),ao=s("img")({width:"50%",height:"50%"});function io(e){var I;const[t,a]=u.useState(""),[n,r]=u.useState(""),{t:k}=Q(),{theme:i}=u.useContext(Z),{buttonTextColor:b,logoTextColor:p}=ee(i),h=localStorage.getItem(oe)||ne;return u.useEffect(()=>{var w;e.markTitle?a((w=e.markTitle)==null?void 0:w[h]):a(k("Default Book Title")),e.markImg?r(e.markImg):r(x.default_cover)},[e.markTitle,e.markImg]),o.jsxs(Bt,{children:[o.jsx(vt,{src:i==v.DEFAULT||i==v.DARK?x.book_subtract:i==v.BLACK_AND_WHITE?x.book_subtract_BAW:i==v.SAPPHIRE?x.book_subtract_sapphire:x.book_subtract_easyocean}),o.jsxs(Ct,{children:[o.jsxs(St,{children:[o.jsxs(It,{onClick:e.onLogoClick,children:[o.jsx(wt,{src:n}),o.jsx(P,{fontFamily:"Kapakana",fontSize:25,lineHeight:24,fontWeight:"400",color:b,children:(I=e.markTitle)==null?void 0:I[h]})]}),o.jsx(jt,{children:o.jsx(P,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:p,children:t})})]}),o.jsx(Tt,{src:i==v.EASY_OCEAN?x.search_easyocean:x.search,onClick:e.onSearchClick})]}),o.jsx(_t,{children:o.jsx(At,{src:i==v.DEFAULT||i==v.DARK?x.close2:i==v.BLACK_AND_WHITE?x.close2_BAW:i==v.SAPPHIRE?x.close2_sapphire:x.close2_easyocean,onClick:e.onCloseClick})}),o.jsx(Ot,{src:i==v.DEFAULT||i==v.EASY_OCEAN?x.setting:x.setting_white,onClick:e.onSettingClick})]})}function so(e){var l,y,C,z,V;const[t,a]=u.useState([]),[n,r]=u.useState(),[k,i]=u.useState(!1),[b,p]=u.useState(!1),[h,I]=u.useState(0),{theme:w}=u.useContext(Z),{mainBGColor:j,altTextColor:S,backgroundColor:m,topTextColor:M,highlightColor:N,buttonColor:T,buttonTextColor:A}=ee(w),{t:O}=Q(),E=localStorage.getItem(oe)||ne,_=u.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const B=e.userHistory.filter(D=>D.bookId==e.bookId);if(B&&B.length>0)return B[0].readChapterIds}return[]},[e.userHistory]),c=e.subBookId;u.useEffect(()=>{e.openedSubBook==e.subBookId?i(!0):i(!1)},[e.openedSubBook]),u.useEffect(()=>{var F,G;const B=e.subBooks.filter(H=>H.subBookId===c);let D=0;if(B&&B.length>0&&(D=(F=B[0].chapterInfos)==null?void 0:F.length,r(B[0])),e.currentUser){const H=e.userHistory.filter(U=>U.bookId==e.bookId);if(H&&H.length>0){const U=H[0].subBooks.filter(ie=>ie.subBookId==c);U&&U.length>0&&I(Math.floor(((G=U[0])==null?void 0:G.readChapters)/D*100))}}if(e.subBooks&&e.subBooks.length>0){const H=e.subBooks.filter(U=>U.subBookId==c);if(H&&H.length>0){let U=H[0].chapterInfos;U.sort((ie,Re)=>ie.chapterNumber-Re.chapterNumber),a(U)}}},[e.subBooks,e.userHistory]),u.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const B=e.subBookInfos.filter(D=>D.subBookId==c);B&&B.length>0?p(!0):p(!1)}},[]);const d=u.useCallback(B=>{p(D=>!D),e.onDownload(B)},[]),g=()=>{var B,D;n!=null&&n.noChapter?e.moveToReading(n==null?void 0:n.chapterInfos[0].chapterId,(B=e.bookTitle)==null?void 0:B[E],(D=n.subBookTitle)==null?void 0:D[E],n.subBookId):(i(!k),e.handleOpenedSubBook(e.subBookId))};return o.jsxs(Yt,{children:[o.jsxs(qt,{children:[o.jsxs(Vt,{progress:h,progresscolor:T,onClick:g,children:[(n==null?void 0:n.subBookNumber)!=0&&o.jsxs(Xt,{istransliteration:((l=n==null?void 0:n.subBookTitle)==null?void 0:l[se])!=null?"true":"false",children:[((y=n==null?void 0:n.subBookTitle)==null?void 0:y[se])&&o.jsx(P,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:S,language:re,children:(n==null?void 0:n.subBookNumber)+". "+((C=n==null?void 0:n.subBookTitle)==null?void 0:C[se])}),o.jsx(P,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:S,language:re,direction:"rtl",children:(z=n==null?void 0:n.subBookTitle)==null?void 0:z[re]})]}),o.jsxs(Jt,{children:[o.jsxs(Qt,{children:[o.jsx(P,{fontFamily:'"Baloo Da 2"',color:S,children:(V=n==null?void 0:n.subBookTitle)==null?void 0:V[E]}),(n==null?void 0:n.subBookNumber)==0&&o.jsx(Zt,{src:x.icon_intro})]}),e.currentUser&&h!==0&&!(n!=null&&n.noChapter)&&o.jsx(P,{fontFamily:'"Baloo Da 2"',color:T,children:`${h}%`})]})]}),o.jsxs(eo,{isdownloaded:b?"true":"false",children:[o.jsx(Te,{src:b?w==v.DEFAULT||w==v.EASY_OCEAN?x.download_cancel:x.download_cancel_white:w==v.DEFAULT||w==v.EASY_OCEAN?x.download:x.download_white,onClick:()=>d(c)}),b&&o.jsx(Te,{src:w==v.DEFAULT||w==v.EASY_OCEAN?x.download_refresh:x.download_refresh_white,onClick:()=>e.onDownloadRefresh(c)})]})]}),k&&o.jsxs(to,{style:{backgroundColor:m},children:[o.jsxs(oo,{children:[o.jsx(P,{fontFamily:"Inter",color:M,children:O("Surah")}),o.jsx(P,{fontFamily:"Inter",color:N,children:O("Chapter")})]}),o.jsx(no,{children:t==null?void 0:t.map((B,D)=>B.chapterNumber==0?o.jsx(_e,{disable:B.isTranslated?"false":"true",readalready:_&&_.length>0&&_.includes(B.chapterId)?"true":"false",style:{backgroundColor:j,color:S},readbgcolor:T,readtextcolor:A,onClick:()=>{var F,G;e.moveToReading(B.chapterId,(F=e.bookTitle)==null?void 0:F[E],(G=n.subBookTitle)==null?void 0:G[E],n.subBookId)},children:o.jsx(ao,{src:x.icon_intro})},D):o.jsx(_e,{disable:B.isTranslated?"false":"true",readalready:_&&_.length>0&&_.includes(B.chapterId)?"true":"false",style:{backgroundColor:j,color:S},readbgcolor:T,readtextcolor:A,onClick:()=>{var F,G;e.moveToReading(B.chapterId,(F=e.bookTitle)==null?void 0:F[E],(G=n.subBookTitle)==null?void 0:G[E],n.subBookId)},children:o.jsx(P,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:B.chapterNumber})},D))})]})]})}function ro(e){const[t,a]=u.useState([]);return u.useEffect(()=>{let n=e.subBooks;n&&n.sort((r,k)=>r.subBookNumber-k.subBookNumber),a(n)},[e.subBooks]),o.jsx(o.Fragment,{children:t&&t.length>0&&t.map((n,r)=>o.jsx(so,{bookId:e.bookId,bookTitle:e.bookTitle,subBooks:t,subBookId:n.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},r))})}function lo(e){const[t,a]=u.useState(""),[n,r]=u.useState([]),[k,i]=u.useState(1),[b,p]=u.useState([]),{t:h}=Q(),{theme:I}=u.useContext(Z),{backgroundColor:w,topTextColor:j,mainTextColor:S}=ee(I),m=localStorage.getItem(oe)||ne,M=Xe(e.deviceHeight),N=k*M,T=N-M,A=e.currentUser&&n.slice(T,N);u.useEffect(()=>{if(e.subBooks&&e.subBooks.length>0){const l=e.subBooks.map(y=>{var C;return{label:(C=y.subBookTitle)==null?void 0:C[m],value:y.subBookId}});l.unshift({label:h("All Books"),value:"all"}),p(l)}},[e.subBooks]),u.useEffect(()=>{b.length>0&&a(b[0].value)},[b]),u.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const l=e.bookmark.filter(y=>y.subBookId===t);r(t==="all"||t===""?e.bookmark:l)}else r([]),i(0);k>1&&A.length==1&&i(l=>l-1)},[e.bookmark]);const O=(l,y)=>{i(y)},E=u.useCallback(l=>{const y=l.target.value;a(y);const C=e.bookmark.filter(z=>z.subBookId===y);r(y==="all"?e.bookmark:C)},[e.bookmark]),_=()=>o.jsx(Rt,{style:{backgroundColor:w},children:o.jsx(Je,{label:h("Filter"),detail:o.jsxs(Mt,{children:[o.jsx(P,{color:j,children:h("Show")}),o.jsx(Qe,{label:"",options:b,value:t,backgroundColor:w,textColor:j,onChange:E})]})})}),c=()=>o.jsx($t,{children:(A==null?void 0:A.length)>0&&A.map((l,y)=>{var C;return o.jsxs(f,{children:[o.jsxs(Lt,{children:[o.jsxs(Ft,{onClick:()=>e.moveToReadingFromBookmark(l._id),children:[o.jsx(P,{color:S,children:(C=l.subBookTitle)==null?void 0:C[m]}),o.jsx(P,{color:S,children:l.chapterNumber>0?`${h("Surah Bookmark")} ${l.chapterNumber}, ${h("Aya")} ${l.verseNumber}`:`${h("Surah Bookmark")} _ , ${h("Aya")} ${l.verseNumber}`})]}),o.jsx(zt,{src:I==v.DEFAULT||I==v.EASY_OCEAN||I==v.EASY_SUNRISE?x.black_bookmark:x.white_bookmark,onClick:()=>e.removeBookmark(l._id)})]}),o.jsx(Ut,{})]},y)})}),d=()=>o.jsx(Ht,{buttoncolor:S,children:o.jsx(ht,{count:e.currentUser?Math.ceil(n.length/M):0,page:k,hidePrevButton:!0,hideNextButton:!0,onChange:O})}),g=()=>o.jsxs(Wt,{style:{backgroundColor:w},children:[o.jsx(Kt,{src:I==v.DEFAULT||I==v.BLACK_AND_WHITE?x.swipe:I==v.EASY_OCEAN?x.swipe_easyocean:x.swipe_white}),o.jsx(Gt,{style:{color:j},children:h("Bookmark Help")})]});return o.jsxs(Pt,{children:[_(),c(),d(),g()]})}function co(e){const[t,a]=u.useState($),{t:n}=Q(),{theme:r}=u.useContext(Z),{mainBGColor:k,headerBGColor:i,buttonColor:b,buttonTextColor:p,mainTextColor:h}=ee(r),I=w=>{e.currentUser?a(w):W.custom(j=>o.jsx(K,{text:n("Bookmark Read Description"),visible:j.visible}))};return o.jsx(Et,{style:{backgroundColor:i},children:o.jsxs(Dt,{style:{backgroundColor:k},children:[o.jsxs(Nt,{children:[o.jsxs(Ie,{active:t==$?"true":"false",style:{backgroundColor:t==$?b:k},bordercolor:h,onClick:()=>I($),children:[o.jsx(we,{src:r==v.DEFAULT?x.index:r==v.EASY_OCEAN?t==$?x.index_active:x.index:t==$?x.index:x.index_active}),o.jsx(je,{active:t==$?"true":"false",children:o.jsx(P,{fontSize:16,fontWeight:"500",lineHeight:24,color:t==$?p:h,children:n("Index")})})]}),o.jsxs(Ie,{active:t==$?"false":"true",style:{backgroundColor:t==le?b:k},bordercolor:h,onClick:()=>I(le),children:[o.jsx(we,{src:r==v.DEFAULT?x.bookmark2_default:r==v.EASY_OCEAN?t==$?x.bookmark2_default:x.bookmark2_white:t==$?x.bookmark2_white:x.bookmark2_default}),o.jsx(je,{active:t==$?"false":"true",children:o.jsx(P,{fontSize:16,fontWeight:"500",lineHeight:24,color:t==le?p:h,children:n("Bookmarks")})})]})]}),t==$?o.jsx(ro,{bookId:e.bookId,bookTitle:e.bookTitle,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):o.jsx(lo,{subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark,deviceHeight:e.deviceHeight,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const uo=Ue,q=ze,go=1;class bo{constructor(){be(this,"db",null)}async initDB(){return new Promise((t,a)=>{const n=indexedDB.open(uo,go);n.onerror=()=>a(n.error),n.onsuccess=()=>{this.db=n.result,t()},n.onupgradeneeded=r=>{r.target.result.createObjectStore(q,{keyPath:"subBookId"})}})}async saveSubBookInfo(t){return this.db||await this.initDB(),new Promise((a,n)=>{const i=this.db.transaction([q],"readwrite").objectStore(q).put(t);i.onerror=()=>n(i.error),i.onsuccess=()=>a()})}async getSubBookInfo(t){return this.db||await this.initDB(),new Promise((a,n)=>{const i=this.db.transaction([q],"readonly").objectStore(q).get(t);i.onerror=()=>n(i.error),i.onsuccess=()=>a(i.result)})}async removeSubBookInfo(t){return this.db||await this.initDB(),new Promise((a,n)=>{const i=this.db.transaction([q],"readwrite").objectStore(q).delete(t);i.onerror=()=>n(i.error),i.onsuccess=()=>a()})}}const te=new bo,xo=s(f)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function fo(e){const[t,a]=u.useState(),[n,r]=u.useState(!1),i=new URLSearchParams(window.location.search).get("id")||"",b=Ve(),{t:p}=Q(),{height:h}=pt(),{theme:I}=u.useContext(Z),{mainBGColor:w}=ee(I),j=localStorage.getItem(oe)||ne,S=u.useCallback(()=>{i&&ke.fetchBookInfo(i).then(c=>{var d,g,l;if(e.dispatch({type:Y.ADD_BOOKINFO,payload:{bookInfo:c}}),a(c),e.currentUser&&!e.userHistory.some(C=>C.bookId==i)&&c.subBooks){const C=c.subBooks.find(F=>F.subBookNumber==0),z=(d=C==null?void 0:C.chapterInfos[0])==null?void 0:d.chapterId,V=(g=c.bookTitle)==null?void 0:g[j],B=(l=C==null?void 0:C.subBookTitle)==null?void 0:l[j],D=C==null?void 0:C.subBookId;N(z,V,B,D)}}).catch(c=>{W.custom(d=>o.jsx(K,{text:p(c),type:ce.BOOKMARK,visible:d.visible}))}).finally(()=>{r(!1)})},[i,e.dispatch,e.userHistory,e.currentUser]),m=u.useCallback(async c=>{try{const d=await ke.fetchSubBookInfo(c);console.log(d),e.dispatch({type:Y.ADD_SUBBOOKINFO,payload:{subBookInfo:d}}),await te.saveSubBookInfo(d),r(!1)}catch(d){W.custom(g=>o.jsx(K,{text:p(d),visible:g.visible})),r(!1)}},[e.dispatch]);u.useEffect(()=>{(async()=>{var d;r(!0),!((d=e.bookInfos)!=null&&d.length)||!e.bookInfos.some(g=>g.bookId===i)?await S():(a(e.bookInfos.find(g=>g.bookId===i)),r(!1))})(),e.currentUser&&pe.fetchBookmarks().then(d=>{e.dispatch({type:Y.SET_BOOKMARKS,payload:{bookmark:d}})}).catch(d=>{d.status===401&&d.response.data.message===xe&&(W.custom(g=>o.jsx(K,{text:p(d.response.data.message),visible:g.visible})),me.logout(),b("/login"))})},[i,e.bookInfos,e.currentUser,e.dispatch]);const M=()=>{W.custom(c=>o.jsx(K,{text:p("Not Built Yet"),visible:c.visible}))},N=(c,d,g,l)=>{b(`/reading?chapterId=${c}&book=${d}&subBook=${g}&subBookId=${l}&bookId=${i}`)},T=u.useCallback(async c=>{r(!0),he()<fe?await te.getSubBookInfo(c)?(await te.removeSubBookInfo(c),e.dispatch({type:Y.REMOVE_SUBBOOKINFO,payload:{subBookId:c}})):await m(c):W.custom(g=>o.jsx(K,{text:p("Not Enough Space"),visible:g.visible})),r(!1)},[m,e.dispatch]),A=u.useCallback(async c=>{r(!0),await te.removeSubBookInfo(c),e.dispatch({type:Y.REMOVE_SUBBOOKINFO,payload:{subBookId:c}}),he()<fe?await m(c):W.custom(g=>o.jsx(K,{text:p("Not Enough Space"),visible:g.visible})),r(!1)},[m,e.dispatch]),O=u.useCallback(c=>{if(r(!0),e.bookmark&&e.bookmark.length>0){const d=e.bookmark.filter(g=>g._id===c);if(d&&d.length>0){const{chapterId:g,bookTitle:l,subBookId:y,subBookTitle:C,verseId:z}=d[0];b(`/reading?chapterId=${g}&book=${l.en}&subBook=${C.en}&subBookId=${y}&verseId=${z}&bookId=${i}`),r(!1)}}},[i,b,e.bookmark]),E=u.useCallback(c=>{r(!0),pe.deleteBookmark(c).then(d=>{e.dispatch({type:Y.REMOVE_BOOKMARK,payload:{bookmarkId:c}}),W.custom(g=>o.jsx(K,{text:p(d.message),type:ce.BOOKMARK,visible:g.visible})),r(!1)}).catch(d=>{d.status==401&&d.response.data.message==xe&&(W.custom(g=>o.jsx(K,{text:p(d.response.data.message),type:ce.BOOKMARK,visible:g.visible})),me.logout(),b("/login")),r(!1)})},[e.dispatch]),_=u.useCallback(c=>{e.dispatch({type:Y.SET_OPENED_SUBBOOK,payload:{openedSubBook:e.openedSubBook===c?"":c}})},[e.openedSubBook,e.dispatch]);return o.jsxs(xo,{style:{backgroundColor:w},children:[o.jsx(io,{markImg:t&&He+t.bookImage,markTitle:t==null?void 0:t.bookTitle,onLogoClick:()=>b("/"),onCloseClick:()=>b("/library"),onSettingClick:()=>b("/settings"),onSearchClick:M}),o.jsx(co,{bookId:i,bookTitle:t==null?void 0:t.bookTitle,subBooks:t==null?void 0:t.subBooks,deviceHeight:h,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.openedSubBook,moveToReading:N,moveToReadingFromBookmark:O,onDownload:T,onDownloadRefresh:A,removeBookmark:E,handleOpenedSubBook:_}),n&&o.jsx(Ze,{})]})}function ho(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,openedSubBook:e.pageStatus.openedSubBook,currentUser:e.user.currentUser,activeChapterId:e.books.activeChapterId}}const To=qe(ho)(fo);export{To as default};
