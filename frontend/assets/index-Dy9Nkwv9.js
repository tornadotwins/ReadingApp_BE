import{c as Oe,_ as Q,j as n,$ as re,b as x,ak as Lt,F as de,X as Dt,ao as Re,as as Ne,a3 as j,at as Ie,au as Pe,Z as X,av as je,aw as Te,ax as bt,ay as _e,az as mt,ap as Mt}from"./index-BlVR3GtE.js";import{x as _t,y as Et,z as $t,A as we,s as d,D as Ut,E as At,F as Ae,G as Ot,J as Ft,B as C,K as zt,S as Ce,g as Se,k as Y,c as Ht,u as Kt,d as $}from"./App-BVc3Io-i.js";import{I as S,T as ee,g as Wt,t as ft,a as kt}from"./index-CP0EpG0K.js";import{H as Gt}from"./index-D8hmWfqn.js";import{C as Z}from"./index-CfJdu7Np.js";import{A as Vt}from"./index-DsvgggYH.js";import{S as Yt}from"./index-Brm85ER_.js";import{L as Zt}from"./index--cXTmVPe.js";import{b as yt}from"./book.service-832DIfAB.js";import{b as vt}from"./bookmark.service-Bj-jm2Uc.js";import{i as pe}from"./indexedDB.service-CKMmsQ70.js";import{a as Ee}from"./auth.service-BbDv6u2-.js";import"./index-DW-2L3us.js";import"./axios-upsvKRUO.js";function Qt(e){return Et("MuiPagination",e)}_t("MuiPagination",["root","ul","outlined","text"]);const Xt=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function qt(e={}){const{boundaryCount:o=1,componentName:s="usePagination",count:t=1,defaultPage:m=1,disabled:g=!1,hideNextButton:E=!1,hidePrevButton:T=!1,onChange:I,page:y,showFirstButton:B=!1,showLastButton:P=!1,siblingCount:c=1}=e,a=Oe(e,Xt),[p,_]=$t({controlled:y,default:m,name:s,state:"page"}),z=(b,w)=>{y||_(w),I&&I(b,w)},A=(b,w)=>{const l=w-b+1;return Array.from({length:l},(r,u)=>b+u)},N=A(1,Math.min(o,t)),L=A(Math.max(t-o+1,o+1),t),te=Math.max(Math.min(p-c,t-o-c*2-1),o+2),U=Math.min(Math.max(p+c,o+c*2+2),L.length>0?L[0]-2:t-1),K=[...B?["first"]:[],...T?[]:["previous"],...N,...te>o+2?["start-ellipsis"]:o+1<t-o?[o+1]:[],...A(te,U),...U<t-o-1?["end-ellipsis"]:t-o>o?[t-o]:[],...L,...E?[]:["next"],...P?["last"]:[]],oe=b=>{switch(b){case"first":return 1;case"previous":return p-1;case"next":return p+1;case"last":return t;default:return null}},f=K.map(b=>typeof b=="number"?{onClick:w=>{z(w,b)},type:"page",page:b,selected:b===p,disabled:g,"aria-current":b===p?"true":void 0}:{onClick:w=>{z(w,oe(b))},type:b,page:oe(b),selected:!1,disabled:g||b.indexOf("ellipsis")===-1&&(b==="next"||b==="last"?p>=t:p<=1)});return Q({items:f},a)}function Jt(e){return Et("MuiPaginationItem",e)}const J=_t("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),ht=we(n.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Ct=we(n.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),St=we(n.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Bt=we(n.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),eo=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Rt=(e,o)=>{const{ownerState:s}=e;return[o.root,o[s.variant],o[`size${de(s.size)}`],s.variant==="text"&&o[`text${de(s.color)}`],s.variant==="outlined"&&o[`outlined${de(s.color)}`],s.shape==="rounded"&&o.rounded,s.type==="page"&&o.page,(s.type==="start-ellipsis"||s.type==="end-ellipsis")&&o.ellipsis,(s.type==="previous"||s.type==="next")&&o.previousNext,(s.type==="first"||s.type==="last")&&o.firstLast]},to=e=>{const{classes:o,color:s,disabled:t,selected:m,size:g,shape:E,type:T,variant:I}=e,y={root:["root",`size${de(g)}`,I,E,s!=="standard"&&`color${de(s)}`,s!=="standard"&&`${I}${de(s)}`,t&&"disabled",m&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[T]],icon:["icon"]};return Ot(y,Jt,o)},oo=d("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Rt})(({theme:e,ownerState:o})=>Q({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${J.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},o.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},o.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),io=d(Ut,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Rt})(({theme:e,ownerState:o})=>Q({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${J.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${J.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${J.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:re(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${J.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:re(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${J.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},o.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},o.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},o.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:o})=>Q({},o.variant==="text"&&{[`&.${J.selected}`]:Q({},o.color!=="standard"&&{color:(e.vars||e).palette[o.color].contrastText,backgroundColor:(e.vars||e).palette[o.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[o.color].main}},[`&.${J.focusVisible}`]:{backgroundColor:(e.vars||e).palette[o.color].dark}},{[`&.${J.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},o.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${J.selected}`]:Q({},o.color!=="standard"&&{color:(e.vars||e).palette[o.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / 0.5)`:re(e.palette[o.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:re(e.palette[o.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:re(e.palette[o.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${J.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:re(e.palette[o.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${J.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),no=d("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,o)=>o.icon})(({theme:e,ownerState:o})=>Q({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},o.size==="small"&&{fontSize:e.typography.pxToRem(18)},o.size==="large"&&{fontSize:e.typography.pxToRem(22)})),ao=x.forwardRef(function(o,s){const t=At({props:o,name:"MuiPaginationItem"}),{className:m,color:g="standard",component:E,components:T={},disabled:I=!1,page:y,selected:B=!1,shape:P="circular",size:c="medium",slots:a={},type:p="page",variant:_="text"}=t,z=Oe(t,eo),A=Q({},t,{color:g,disabled:I,selected:B,shape:P,size:c,type:p,variant:_}),N=Lt(),L=to(A),U=(N?{previous:a.next||T.next||Bt,next:a.previous||T.previous||St,last:a.first||T.first||ht,first:a.last||T.last||Ct}:{previous:a.previous||T.previous||St,next:a.next||T.next||Bt,first:a.first||T.first||ht,last:a.last||T.last||Ct})[p];return p==="start-ellipsis"||p==="end-ellipsis"?n.jsx(oo,{ref:s,ownerState:A,className:Ae(L.root,m),children:"â€¦"}):n.jsxs(io,Q({ref:s,ownerState:A,component:E,disabled:I,className:Ae(L.root,m)},z,{children:[p==="page"&&y,U?n.jsx(no,{as:U,ownerState:A,className:L.icon}):null]}))}),so=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],lo=e=>{const{classes:o,variant:s}=e;return Ot({root:["root",s],ul:["ul"]},Qt,o)},ro=d("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.root,o[s.variant]]}})({}),co=d("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,o)=>o.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function uo(e,o,s){return e==="page"?`${s?"":"Go to "}page ${o}`:`Go to ${e} page`}const go=x.forwardRef(function(o,s){const t=At({props:o,name:"MuiPagination"}),{boundaryCount:m=1,className:g,color:E="standard",count:T=1,defaultPage:I=1,disabled:y=!1,getItemAriaLabel:B=uo,hideNextButton:P=!1,hidePrevButton:c=!1,renderItem:a=f=>n.jsx(ao,Q({},f)),shape:p="circular",showFirstButton:_=!1,showLastButton:z=!1,siblingCount:A=1,size:N="medium",variant:L="text"}=t,te=Oe(t,so),{items:U}=qt(Q({},t,{componentName:"Pagination"})),K=Q({},t,{boundaryCount:m,color:E,count:T,defaultPage:I,disabled:y,getItemAriaLabel:B,hideNextButton:P,hidePrevButton:c,renderItem:a,shape:p,showFirstButton:_,showLastButton:z,siblingCount:A,size:N,variant:L}),oe=lo(K);return n.jsx(ro,Q({"aria-label":"pagination navigation",className:Ae(oe.root,g),ownerState:K,ref:s},te,{children:n.jsx(co,{className:oe.ul,ownerState:K,children:U.map((f,b)=>n.jsx("li",{children:a(Q({},f,{color:E,"aria-label":B(f.type,f.page,f.selected),shape:p,size:N,variant:L}))},b))})}))});function xo(e){return n.jsx(go,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function Tt(){const{innerWidth:e,innerHeight:o}=window;return{width:e,height:o}}function bo(){const[e,o]=x.useState(Tt());return x.useEffect(()=>{function s(){o(Tt())}return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),e}var Le={},mo=Dt;Object.defineProperty(Le,"__esModule",{value:!0});var Nt=Le.default=void 0,fo=mo(Ft()),ko=n;Nt=Le.default=(0,fo.default)((0,ko.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const yo=d(C)({display:"flex",position:"relative",width:"100%"}),vo=d("img")({width:"100%",marginTop:"57px"}),ho=d(C)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),Co=d(C)({display:"flex",alignItems:"baseline"}),So=d(C)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),Bo=d("img")({width:"100%",height:"100%"}),To=d(C)({margin:0,marginLeft:"12px",position:"relative",top:"-20px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),po=d(C)(({hamburgercolor:e})=>({position:"absolute",top:"12px",right:"15px",width:"46px","& .hamburger-react":{width:"46px !important",color:e},"& .hamburger-react ~ .MuiBox-root ":{border:`1px solid ${e}`},"@media (max-height: 639px)":{top:"8px",right:"10px"},"@media screen and (orientation: landscape)":{right:"15px"}})),wo=d("img")({position:"relative",top:"-20px",cursor:"pointer","&:active":{opacity:"0.8"}}),Io=d(C)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),Po=d("img")({width:"100%","&:active":{opacity:"0.8"}});d("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}});const jo=d(C)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),_o=d(C)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Eo=d(C)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),pt=d(C)(({active:e,bordercolor:o})=>({width:"50%",height:"37.9px",border:`1px solid ${o}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer",marginBottom:"20px"})),wt=d("img")({}),It=d(C)(({active:e})=>({marginLeft:"5px"})),Ao=d(C)({width:"100%",display:"flex",flexDirection:"column"}),Oo=d(C)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),Ro=d(C)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});d(C)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const No=d(C)({display:"flex",flexDirection:"column"}),Lo=d(C)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),Do=d(C)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});d(C)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const Mo=d(C)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),$o=d("img")({cursor:"pointer",marginRight:"15px"}),Uo=d(zt)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),Fo=d(C)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),zo=d("img")({width:"63px"}),Ho=d(C)({margin:"0px",marginLeft:"24px","@media (max-height: 600px)":{"& .MuiBox-root":{fontSize:"14px !important"}}}),Ko=d(C)({width:"100%",justifyContent:"space-between",alignItems:"center",margin:"10px 0px"}),Wo=d(C)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"center",padding:"0px 7px"});d(Nt)({marginLeft:"-33px",color:"#17637D",height:"30px"});const Go=d(C)(({progress:e,progresscolor:o})=>({width:"calc(100% - 60px)",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",borderBottom:`1px solid ${o}`,"::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${e}%`,borderBottom:e!=0?`2px solid ${o}`:"none"}})),Vo=d(C)(({istransliteration:e,translatestatus:o})=>({margin:"5px 0px 5px 0px",display:"flex",justifyContent:"space-between",opacity:o=="one"||o=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& .MuiBox-root:first-of-type":{width:"48%"},"& .MuiBox-root:last-child":{marginInlineEnd:"auto",width:e=="true"?"48%":"75%"}})),Yo=d(C)({display:"flex",justifyContent:"space-between"}),Zo=d(C)(({translatestatus:e})=>({width:"80%",display:"flex",opacity:e=="one"||e=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}})),Qo=d("img")({width:"20px",marginLeft:"10px"}),Xo=d(C)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),Pt=d("img")({marginLeft:"3px",cursor:"pointer"}),qo=d(C)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),Jo=d(C)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),ei=d(C)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),jt=d(C)(({style:e,translatestatus:o,readalready:s,readbgcolor:t,readtextcolor:m})=>({opacity:o=="one"||o=="none"?"0.5":"1",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:s=="true"?`${t} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:s=="true"?`${m} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:s=="true"?`${m} !important`:`${e.color} !important`}})),ti=d("img")({width:"50%",height:"50%"});function oi(e){const[o,s]=x.useState(""),[t,m]=x.useState(""),{theme:g,readingLanguage:E}=x.useContext(Ce),{logoTextColor:T,headerBGColor:I}=Se(g),y=localStorage.getItem(Re)||Ne;return x.useEffect(()=>{var B,P,c,a;e.markTitle?s((B=e.markTitle)==null?void 0:B[y]):s(((a=(c=(P=e.terms)==null?void 0:P.texts.find(p=>p.variable=="Default Book Title"))==null?void 0:c.text)==null?void 0:a[E])||""),e.markImg?m(e.markImg):m(S.default_cover)},[e.markTitle,e.markImg]),n.jsxs(yo,{children:[n.jsx(vo,{src:g==j.DEFAULT||g==j.DARK?S.book_subtract:g==j.BLACK_AND_WHITE?S.book_subtract_BAW:g==j.SAPPHIRE?S.book_subtract_sapphire:S.book_subtract_easyocean}),n.jsxs(ho,{children:[n.jsxs(Co,{children:[n.jsx(So,{onClick:e.onLogoClick,children:n.jsx(Bo,{src:t})}),n.jsx(To,{children:n.jsx(ee,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:T,children:o})})]}),n.jsx(wo,{src:g==j.EASY_OCEAN?S.search_easyocean:S.search,onClick:e.onSearchClick})]}),n.jsx(Io,{children:n.jsx(Po,{src:g==j.DEFAULT||g==j.DARK?S.close2:g==j.BLACK_AND_WHITE?S.close2_BAW:g==j.SAPPHIRE?S.close2_sapphire:S.close2_easyocean,onClick:e.onCloseClick})}),n.jsx(po,{hamburgercolor:I,children:n.jsx(Gt,{isLogin:e.isLogIn,textColor:T,itemBgColor:I,toggleColor:I,terms:e.welcomePageTerms,onLogin:e.onLogin,onSettings:e.onSettings})})]})}function ii(e){var w,l,r,u,v,k,h,D,R,q,ie,ne,O,se,ce,ue,ge,F,De,Me,$e,Ue,Fe,ze,He,Ke,We,Ge,Ve,Ye,Ze,Qe,Xe,qe,Je,et,tt,ot,it,nt;const[o,s]=x.useState([]),[t,m]=x.useState(),[g,E]=x.useState(!1),[T,I]=x.useState(!1),[y,B]=x.useState(0),{theme:P,referenceLanguage:c,readingLanguage:a}=x.useContext(Ce),{mainBGColor:p,altTextColor:_,backgroundColor:z,topTextColor:A,buttonColor:N,buttonTextColor:L}=Se(P),te=localStorage.getItem(Re)||Ne,U=x.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const i=e.userHistory.filter(W=>W.bookId==e.bookId);if(i&&i.length>0)return i[0].readChapterIds}return[]},[e.userHistory]),K=e.subBookId;x.useEffect(()=>{e.bookTitle.en=="Qur'an"||e.bookTitle.en=="Zabur"?E(!1):e.openedSubBook==e.subBookId?E(!0):E(!1)},[e.openedSubBook]),x.useEffect(()=>{var V,G;const i=e.subBooks.filter(H=>H.subBookId===K);let W=0;if(i&&i.length>0&&(W=(V=i[0].chapterInfos)==null?void 0:V.length,m(i[0])),e.currentUser){const H=e.userHistory.filter(M=>M.bookId==e.bookId);if(H&&H.length>0){const M=H[0].subBooks.filter(ae=>ae.subBookId==K);M&&M.length>0&&B(Math.floor(((G=M[0])==null?void 0:G.readChapters)/W*100))}}if(e.subBooks&&e.subBooks.length>0){const H=e.subBooks.filter(M=>M.subBookId==K);if(H&&H.length>0){let M=H[0].chapterInfos;M.sort((ae,le)=>ae.chapterNumber-le.chapterNumber),s(M)}}},[e.subBooks,e.userHistory]),x.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const i=e.subBookInfos.filter(W=>W.subBookId==K);i&&i.length>0?I(!0):I(!1)}},[]);const oe=x.useCallback(i=>{I(W=>!W),e.onDownload(i)},[]),f=()=>{var i,W;if(t!=null&&t.noChapter){const V=(i=t==null?void 0:t.chapterInfos[0])==null?void 0:i.isTranslated,G=(W=t==null?void 0:t.chapterInfos[0])==null?void 0:W.isPublished;!(V!=null&&V[c])&&!(V!=null&&V[a])||!(G!=null&&G[c])&&!(G!=null&&G[a])?Y.custom(H=>{var M,ae,le;return n.jsx(Z,{text:((le=(ae=(M=e.terms)==null?void 0:M.texts.find(Be=>Be.variable=="None Translated"))==null?void 0:ae.text)==null?void 0:le[a])||"",visible:H.visible})}):e.moveToReading(t==null?void 0:t.chapterInfos[0].chapterId,t.subBookId)}else E(!g),e.handleOpenedSubBook(e.subBookId)},b=(i,W)=>{W=="none"?Y.custom(V=>{var G,H,M;return n.jsx(Z,{text:((M=(H=(G=e.terms)==null?void 0:G.texts.find(ae=>ae.variable=="None Translated"))==null?void 0:H.text)==null?void 0:M[a])||"",visible:V.visible})}):e.moveToReading(i,t.subBookId)};return n.jsxs(Ko,{id:e.id,children:[n.jsxs(Wo,{children:[n.jsxs(Go,{progress:y,progresscolor:N,onClick:f,children:[(t==null?void 0:t.subBookNumber)!=0&&n.jsxs(Vo,{istransliteration:((w=t==null?void 0:t.subBookTitle)==null?void 0:w[Ie])!=null?"true":"false",translatestatus:(t==null?void 0:t.noChapter)&&(!((r=(l=t==null?void 0:t.chapterInfos[0])==null?void 0:l.isTranslated)!=null&&r[c])&&!((v=(u=t==null?void 0:t.chapterInfos[0])==null?void 0:u.isTranslated)!=null&&v[a])||!((h=(k=t==null?void 0:t.chapterInfos[0])==null?void 0:k.isPublished)!=null&&h[c])&&!((R=(D=t==null?void 0:t.chapterInfos[0])==null?void 0:D.isPublished)!=null&&R[a])?"none":(!((ie=(q=t==null?void 0:t.chapterInfos[0])==null?void 0:q.isTranslated)!=null&&ie[c])||!((O=(ne=t==null?void 0:t.chapterInfos[0])==null?void 0:ne.isTranslated)!=null&&O[a]))&&((ce=(se=t==null?void 0:t.chapterInfos[0])==null?void 0:se.isPublished)!=null&&ce[c]||!((ge=(ue=t==null?void 0:t.chapterInfos[0])==null?void 0:ue.isPublished)!=null&&ge[a]))?"one":"both")||"",children:[((F=t==null?void 0:t.subBookTitle)==null?void 0:F[Ie])&&n.jsx(ee,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:_,language:Pe,children:(t==null?void 0:t.subBookNumber)+". "+((De=t==null?void 0:t.subBookTitle)==null?void 0:De[Ie])}),n.jsx(ee,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:_,language:Pe,direction:"rtl",children:(Me=t==null?void 0:t.subBookTitle)==null?void 0:Me[Pe]})]}),n.jsxs(Yo,{children:[n.jsxs(Zo,{translatestatus:t!=null&&t.noChapter&&(!((Ue=($e=t==null?void 0:t.chapterInfos[0])==null?void 0:$e.isTranslated)!=null&&Ue[c])&&!((ze=(Fe=t==null?void 0:t.chapterInfos[0])==null?void 0:Fe.isTranslated)!=null&&ze[a])||!((Ke=(He=t==null?void 0:t.chapterInfos[0])==null?void 0:He.isPublished)!=null&&Ke[c])&&!((Ge=(We=t==null?void 0:t.chapterInfos[0])==null?void 0:We.isPublished)!=null&&Ge[a]))?"none":(!((Ye=(Ve=t==null?void 0:t.chapterInfos[0])==null?void 0:Ve.isTranslated)!=null&&Ye[c])||!((Qe=(Ze=t==null?void 0:t.chapterInfos[0])==null?void 0:Ze.isTranslated)!=null&&Qe[a]))&&((qe=(Xe=t==null?void 0:t.chapterInfos[0])==null?void 0:Xe.isPublished)!=null&&qe[c]||!((et=(Je=t==null?void 0:t.chapterInfos[0])==null?void 0:Je.isPublished)!=null&&et[a]))?"one":"both",children:[n.jsx(ee,{fontFamily:'"Baloo Da 2"',color:_,children:(tt=t==null?void 0:t.subBookTitle)==null?void 0:tt[te]}),(t==null?void 0:t.subBookNumber)==0&&n.jsx(Qo,{src:S.icon_intro})]}),e.currentUser&&y!==0&&!(t!=null&&t.noChapter)&&n.jsx(ee,{fontFamily:'"Baloo Da 2"',color:N,children:`${y}%`})]})]}),n.jsxs(Xo,{isdownloaded:T?"true":"false",children:[n.jsx(Pt,{src:T?P==j.DEFAULT||P==j.EASY_OCEAN?S.download_cancel:S.download_cancel_white:P==j.DEFAULT||P==j.EASY_OCEAN?S.download:S.download_white,onClick:()=>oe(K)}),T&&n.jsx(Pt,{src:P==j.DEFAULT||P==j.EASY_OCEAN?S.download_refresh:S.download_refresh_white,onClick:()=>e.onDownloadRefresh(K)})]})]}),g&&n.jsxs(qo,{style:{backgroundColor:z},children:[n.jsx(Jo,{children:n.jsx(ee,{fontFamily:"Inter",color:A,children:((nt=(it=(ot=e.terms)==null?void 0:ot.texts.find(i=>i.variable=="Chapter"))==null?void 0:it.text)==null?void 0:nt[a])||""})}),n.jsx(ei,{children:o==null?void 0:o.map((i,W)=>{var V,G,H,M,ae,le,Be,at,st,lt,rt,dt,ct,ut,gt,xt;return i.chapterNumber==0?n.jsx(jt,{translatestatus:!((V=i==null?void 0:i.isTranslated)!=null&&V[c])&&!((G=i==null?void 0:i.isTranslated)!=null&&G[a])||!((H=i==null?void 0:i.isPublished)!=null&&H[c])&&!((M=i==null?void 0:i.isPublished)!=null&&M[a])?"none":(!((ae=i==null?void 0:i.isTranslated)!=null&&ae[c])||!((le=i==null?void 0:i.isTranslated)!=null&&le[a]))&&((Be=i==null?void 0:i.isPublished)!=null&&Be[c]||!((at=i==null?void 0:i.isPublished)!=null&&at[a]))?"one":"both",readalready:U&&U.length>0&&U.includes(i.chapterId)?"true":"false",style:{backgroundColor:p,color:_},readbgcolor:N,readtextcolor:L,onClick:()=>{var xe,be,me,fe,ke,ye,ve,he;return b(i.chapterId,!((xe=i==null?void 0:i.isTranslated)!=null&&xe[c])&&!((be=i==null?void 0:i.isTranslated)!=null&&be[a])||!((me=i==null?void 0:i.isPublished)!=null&&me[c])&&!((fe=i==null?void 0:i.isPublished)!=null&&fe[a])?"none":(!((ke=i.isTranslated)!=null&&ke[c])||!((ye=i==null?void 0:i.isTranslated)!=null&&ye[a]))&&((ve=i==null?void 0:i.isPublished)!=null&&ve[c]||!((he=i==null?void 0:i.isPublished)!=null&&he[a]))?"one":"both")},children:n.jsx(ti,{src:S.icon_intro})},W):n.jsx(jt,{translatestatus:!((st=i==null?void 0:i.isTranslated)!=null&&st[c])&&!((lt=i==null?void 0:i.isTranslated)!=null&&lt[a])||!((rt=i==null?void 0:i.isPublished)!=null&&rt[c])&&!((dt=i==null?void 0:i.isPublished)!=null&&dt[a])?"none":(!((ct=i==null?void 0:i.isTranslated)!=null&&ct[c])||!((ut=i==null?void 0:i.isTranslated)!=null&&ut[a]))&&((gt=i==null?void 0:i.isPublished)!=null&&gt[c]||!((xt=i==null?void 0:i.isPublished)!=null&&xt[a]))?"one":"both",readalready:U&&U.length>0&&U.includes(i.chapterId)?"true":"false",style:{backgroundColor:p,color:_},readbgcolor:N,readtextcolor:L,onClick:()=>{var xe,be,me,fe,ke,ye,ve,he;return b(i.chapterId,!((xe=i==null?void 0:i.isTranslated)!=null&&xe[c])&&!((be=i==null?void 0:i.isTranslated)!=null&&be[a])||!((me=i==null?void 0:i.isPublished)!=null&&me[c])&&!((fe=i==null?void 0:i.isPublished)!=null&&fe[a])?"none":(!((ke=i.isTranslated)!=null&&ke[c])||!((ye=i.isTranslated)!=null&&ye[a]))&&(!((ve=i==null?void 0:i.isPublished)!=null&&ve[c])||!((he=i==null?void 0:i.isPublished)!=null&&he[a]))?"one":"both")},children:n.jsx(ee,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:i.chapterNumber})},W)})})]})]})}function ni(e){const[o,s]=x.useState([]);return x.useEffect(()=>{let t=e.subBooks;t&&t.sort((m,g)=>m.subBookNumber-g.subBookNumber),s(t)},[e.subBooks]),n.jsx(n.Fragment,{children:o&&o.length>0&&o.map((t,m)=>n.jsx(ii,{id:`subbook-${t.subBookId}`,bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:o,subBookId:t.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},m))})}function ai(e){const[o,s]=x.useState(""),[t,m]=x.useState([]),[g,E]=x.useState(1),[T,I]=x.useState([]),{theme:y,readingLanguage:B}=x.useContext(Ce),{backgroundColor:P,topTextColor:c,mainTextColor:a}=Se(y),p=Wt(e.deviceHeight),_=g*p,z=_-p,A=e.currentUser&&t.slice(z,_);x.useEffect(()=>{var f,b,w,l,r,u;if(e.subBooks&&e.subBooks.length>0){const v=e.subBooks.map(k=>{var h;return{label:(h=k.subBookTitle)==null?void 0:h[B],value:k.subBookId}});v.unshift({label:((f=e.bookTitle)==null?void 0:f.en)=="Qur'an"||((b=e.bookTitle)==null?void 0:b.en)=="Zabur"?(l=(w=e.terms.texts.find(k=>k.variable=="All Chapters"))==null?void 0:w.text)==null?void 0:l[B]:(u=(r=e.terms.texts.find(k=>k.variable=="All SubBooks"))==null?void 0:r.text)==null?void 0:u[B],value:"all"}),I(v)}},[e.subBooks]),x.useEffect(()=>{T.length>0&&s(T[0].value)},[T]),x.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const f=e.bookmark.filter(b=>b.subBookId===o);m(o==="all"||o===""?e.bookmark:f)}else m([]),E(0);g>1&&A.length==1&&E(f=>f-1)},[e.bookmark]);const N=(f,b)=>{E(b)},L=x.useCallback(f=>{const b=f.target.value;s(b);const w=e.bookmark.filter(l=>l.subBookId===b);m(b==="all"?e.bookmark:w)},[e.bookmark]),te=()=>{var f,b,w,l;return n.jsx(Oo,{style:{backgroundColor:P},children:n.jsx(Vt,{label:((b=(f=e.terms.texts.find(r=>r.variable=="Filter"))==null?void 0:f.text)==null?void 0:b[B])||"",detail:n.jsxs(Ro,{children:[n.jsx(ee,{color:c,children:(l=(w=e.terms.texts.find(r=>r.variable=="Show"))==null?void 0:w.text)==null?void 0:l[B]}),n.jsx(Yt,{label:"",options:T,value:o,backgroundColor:P,textColor:c,onChange:L})]})})})},U=()=>n.jsx(No,{children:(A==null?void 0:A.length)>0&&A.map((f,b)=>{var w,l,r,u,v,k,h,D,R,q,ie,ne,O,se,ce,ue,ge;return n.jsxs(C,{children:[n.jsxs(Lo,{children:[n.jsxs(Do,{onClick:()=>e.moveToReadingFromBookmark(f._id),children:[n.jsx(ee,{color:a,children:(w=f.subBookTitle)==null?void 0:w[B]}),n.jsx(ee,{color:a,children:f.bookTitle.en=="Qur'an"||f.bookTitle.en=="Zabur"?f.chapterNumber>0?`${(r=(l=e.terms.texts.find(F=>F.variable=="Surah Bookmark"))==null?void 0:l.text)==null?void 0:r[B]} ${f.chapterNumber}, ${(v=(u=e.terms.texts.find(F=>F.variable=="Aya"))==null?void 0:u.text)==null?void 0:v[B]} ${f.verseNumber}`:`${(h=(k=e.terms.texts.find(F=>F.variable=="Surah Bookmark"))==null?void 0:k.text)==null?void 0:h[B]} _ , ${(R=(D=e.terms.texts.find(F=>F.variable=="Aya"))==null?void 0:D.text)==null?void 0:R[B]} ${f.verseNumber}`:f.chapterNumber>0?`${(ie=(q=e.terms.texts.find(F=>F.variable=="Chapter Bookmark"))==null?void 0:q.text)==null?void 0:ie[B]} ${f.chapterNumber}, ${(O=(ne=e.terms.texts.find(F=>F.variable=="Aya"))==null?void 0:ne.text)==null?void 0:O[B]} ${f.verseNumber}`:`${(ce=(se=e.terms.texts.find(F=>F.variable=="Chapter Bookmark"))==null?void 0:se.text)==null?void 0:ce[B]} _ , ${(ge=(ue=e.terms.texts.find(F=>F.variable=="Aya"))==null?void 0:ue.text)==null?void 0:ge[B]} ${f.verseNumber}`})]}),n.jsx($o,{src:y==j.DEFAULT||y==j.EASY_OCEAN||y==j.EASY_SUNRISE?S.black_bookmark:S.white_bookmark,onClick:()=>e.removeBookmark(f._id)})]}),n.jsx(Mo,{})]},b)})}),K=()=>n.jsx(Uo,{buttoncolor:a,children:n.jsx(xo,{count:e.currentUser?Math.ceil(t.length/p):0,page:g,hidePrevButton:!0,hideNextButton:!0,onChange:N})}),oe=()=>{var f,b;return n.jsxs(Fo,{style:{backgroundColor:P},children:[n.jsx(zo,{src:y==j.DEFAULT||y==j.BLACK_AND_WHITE?S.swipe:y==j.EASY_OCEAN?S.swipe_easyocean:S.swipe_white}),n.jsx(Ho,{style:{color:c},children:(b=(f=e.terms.texts.find(w=>w.variable=="Bookmark Help"))==null?void 0:f.text)==null?void 0:b[B]})]})};return n.jsxs(Ao,{children:[te(),U(),K(),oe()]})}function si(e){var P,c,a,p;const[o,s]=x.useState(X),{theme:t,readingLanguage:m}=x.useContext(Ce),{mainBGColor:g,headerBGColor:E,buttonColor:T,buttonTextColor:I,mainTextColor:y}=Se(t),B=_=>{e.currentUser?s(_):Y.custom(z=>{var A,N;return n.jsx(Z,{text:((N=(A=e.terms.texts.find(L=>L.variable=="Bookmark Read Description"))==null?void 0:A.text)==null?void 0:N[m])||"",visible:z.visible})})};return n.jsx(jo,{style:{backgroundColor:E},children:n.jsxs(_o,{style:{backgroundColor:g},children:[n.jsxs(Eo,{children:[n.jsxs(pt,{active:o==X?"true":"false",style:{backgroundColor:o==X?T:g},bordercolor:y,onClick:()=>B(X),children:[n.jsx(wt,{src:t==j.DEFAULT?S.index:t==j.EASY_OCEAN?o==X?S.index_active:S.index:o==X?S.index:S.index_active}),n.jsx(It,{active:o==X?"true":"false",children:n.jsx(ee,{fontSize:16,fontWeight:"500",lineHeight:24,color:o==X?I:y,children:((c=(P=e.terms.texts.find(_=>_.variable=="Index"))==null?void 0:P.text)==null?void 0:c[m])||""})})]}),n.jsxs(pt,{active:o==X?"false":"true",style:{backgroundColor:o==je?T:g},bordercolor:y,onClick:()=>B(je),children:[n.jsx(wt,{src:t==j.DEFAULT?S.bookmark2_default:t==j.EASY_OCEAN?o==X?S.bookmark2_default:S.bookmark2_white:o==X?S.bookmark2_white:S.bookmark2_default}),n.jsx(It,{active:o==X?"false":"true",children:n.jsx(ee,{fontSize:16,fontWeight:"500",lineHeight:24,color:o==je?I:y,children:((p=(a=e.terms.texts.find(_=>_.variable=="Bookmarks"))==null?void 0:a.text)==null?void 0:p[m])||""})})]})]}),o==X?n.jsx(ni,{bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):n.jsx(ai,{bookTitle:e.bookTitle,subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark.filter(_=>_.bookId==e.bookId),deviceHeight:e.deviceHeight,terms:e.terms,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const li=d(C)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function ri(e){const[o,s]=x.useState(),[t,m]=x.useState(!1),[g,E]=x.useState(),[T,I]=x.useState(),y=Kt(),{height:B}=bo(),{theme:P,readingLanguage:c}=x.useContext(Ce),{mainBGColor:a}=Se(P),p=localStorage.getItem(Re)||Ne,_=x.useCallback(()=>{e.currentBook&&yt.fetchBookInfo(e.currentBook).then(l=>{var r,u,v;if(e.dispatch({type:$.ADD_BOOKINFO,payload:{bookInfo:l}}),s(l),e.currentUser&&!e.userHistory.some(h=>h.bookId==e.currentBook)&&l.subBooks){const h=l.subBooks.find(q=>q.subBookNumber==0),D=(r=h==null?void 0:h.chapterInfos[0])==null?void 0:r.chapterId,R=h==null?void 0:h.subBookId;(v=(u=h==null?void 0:h.chapterInfos[0])==null?void 0:u.isTranslated)!=null&&v[p]?N(D,R):Y.custom(q=>{var ie,ne,O;return n.jsx(Z,{text:((O=(ne=(ie=g==null?void 0:g.texts)==null?void 0:ie.find(se=>se.variable=="None Translated"))==null?void 0:ne.text)==null?void 0:O[c])||"",type:Te.BOOKMARK,visible:q.visible})})}}).catch(l=>{Y.custom(r=>n.jsx(Z,{text:l,type:Te.BOOKMARK,visible:r.visible}))}).finally(()=>{m(!1)})},[e.currentBook,e.dispatch,e.userHistory,e.currentUser]),z=x.useCallback(async l=>{var r,u,v;try{const k=await yt.fetchSubBookInfo(l);e.dispatch({type:$.ADD_SUBBOOKINFO,payload:{subBookInfo:k}}),e.dispatch({type:$.ADD_SUBBOOK,payload:{subBook:k}}),await pe.saveSubBookInfo(k);const h=(r=e.bookInfos)==null?void 0:r.find(R=>(R==null?void 0:R.bookId)==e.currentBook),D=h&&((u=h==null?void 0:h.subBooks)==null?void 0:u.find(R=>(R==null?void 0:R.subBookId)==l));if(D){const R=(v=D==null?void 0:D.subBookTitle)==null?void 0:v.en;ft("Sub books","download_subbook",R)}m(!1)}catch(k){Y.custom(h=>n.jsx(Z,{text:k,visible:h.visible})),m(!1)}},[e.dispatch]);x.useEffect(()=>{var u,v;const l=e.terms.find(k=>k.pageTitle=="Index & Bookmark Page"),r=e.terms.find(k=>k.pageTitle=="Welcome Page");(u=l==null?void 0:l.isPublished)!=null&&u[c]?E(l):Y.custom(k=>n.jsx(Z,{text:"The terminologies for this page are not published.",visible:k.visible})),(v=r==null?void 0:r.isPublished)!=null&&v[c]?I(r):Y.custom(k=>n.jsx(Z,{text:"The terminologies for hamburgur menu are not published.",visible:k.visible}))},[e.terms]),x.useEffect(()=>{(async()=>{var r;m(!0),!((r=e.bookInfos)!=null&&r.length)||!e.bookInfos.some(u=>u.bookId===e.currentBook)?await _():(s(e.bookInfos.find(u=>u.bookId===e.currentBook)),m(!1))})(),e.currentUser&&vt.fetchBookmarks().then(r=>{e.dispatch({type:$.SET_BOOKMARKS,payload:{bookmark:r}})}).catch(r=>{r.status===401&&r.response.data.message===bt&&(Y.custom(u=>n.jsx(Z,{text:r.response.data.message,visible:u.visible})),Ee.logout(),y("/login"))})},[e.currentBook,e.bookInfos,e.currentUser,e.dispatch]),x.useEffect(()=>{if(e.currentSubBook&&e.prevPage===_e.READING){const r=setTimeout(()=>{const u=document.getElementById(`subbook-${e.currentSubBook}`);u&&u.scrollIntoView({behavior:"smooth"})},100);return()=>clearTimeout(r)}},[e.currentSubBook,e.prevPage]);const A=()=>{Y.custom(l=>{var r,u,v;return n.jsx(Z,{text:((v=(u=(r=g==null?void 0:g.texts)==null?void 0:r.find(k=>k.variable=="Not Built Yet"))==null?void 0:u.text)==null?void 0:v[c])||"",visible:l.visible})})},N=(l,r)=>{var h,D,R,q,ie,ne;e.dispatch({type:$.SET_CURRENT_CHAPTER,payload:{currentChapter:l}}),e.dispatch({type:$.SET_CURRENT_SUBBOOK,payload:{currentSubBook:r}}),e.dispatch({type:$.SET_PREVIOUS_PAGE,payload:{prevPage:_e.BOOKS}});const u=(h=e.bookInfos)==null?void 0:h.find(O=>(O==null?void 0:O.bookId)==e.currentBook),v=u&&((D=u==null?void 0:u.subBooks)==null?void 0:D.find(O=>(O==null?void 0:O.subBookId)==r)),k=(R=v==null?void 0:v.chapterInfos)==null?void 0:R.find(O=>(O==null?void 0:O.chapterId)==l);if(v){const O=(q=v==null?void 0:v.subBookTitle)==null?void 0:q.en,se=k==null?void 0:k.chapterNumber;ft("Chapter","read_chapter",((ie=o==null?void 0:o.bookTitle)==null?void 0:ie.en)=="Qur'an"||((ne=o==null?void 0:o.bookTitle)==null?void 0:ne.en)=="Zabur"?O:`${O}-${se==0?"Introduction":se}`)}y("/reading")},L=()=>{y("/library"),e.dispatch({type:$.SET_PREVIOUS_PAGE,payload:{prevPage:_e.BOOKS}}),e.dispatch({type:$.SET_CURRENT_SUBBOOK,payload:{currentSubBook:""}})},te=x.useCallback(async l=>{m(!0),kt()<mt?await pe.getSubBookInfo(l)?(await pe.removeSubBookInfo(l),e.dispatch({type:$.REMOVE_SUBBOOKINFO,payload:{subBookId:l}})):await z(l):Y.custom(u=>{var v,k,h;return n.jsx(Z,{text:((h=(k=(v=g==null?void 0:g.texts)==null?void 0:v.find(D=>D.variable=="Not Enough Space"))==null?void 0:k.text)==null?void 0:h[c])||"",visible:u.visible})}),m(!1)},[z,e.dispatch]),U=x.useCallback(async l=>{m(!0),await pe.removeSubBookInfo(l),e.dispatch({type:$.REMOVE_SUBBOOKINFO,payload:{subBookId:l}}),kt()<mt?await z(l):Y.custom(u=>{var v,k,h;return n.jsx(Z,{text:((h=(k=(v=g==null?void 0:g.texts)==null?void 0:v.find(D=>D.variable=="Not Enough Space"))==null?void 0:k.text)==null?void 0:h[c])||"",visible:u.visible})}),m(!1)},[z,e.dispatch]),K=x.useCallback(l=>{if(m(!0),e.bookmark&&e.bookmark.length>0){const r=e.bookmark.find(u=>u._id===l);if(r){const{chapterId:u,subBookId:v,verseId:k}=r;e.dispatch({type:$.SET_CURRENT_SUBBOOK,payload:{currentSubBook:v}}),e.dispatch({type:$.SET_CURRENT_CHAPTER,payload:{currentChapter:u}}),e.dispatch({type:$.SET_CURRENT_VERSE,payload:{currentVerse:k}}),y("/reading"),m(!1)}}},[e.currentBook,y,e.bookmark]),oe=x.useCallback(l=>{m(!0),vt.deleteBookmark(l).then(r=>{e.dispatch({type:$.REMOVE_BOOKMARK,payload:{bookmarkId:l}}),Y.custom(u=>n.jsx(Z,{text:r.message,type:Te.BOOKMARK,visible:u.visible})),m(!1)}).catch(r=>{r.status==401&&r.response.data.message==bt&&(Y.custom(u=>n.jsx(Z,{text:r.response.data.message,type:Te.BOOKMARK,visible:u.visible})),Ee.logout(),y("/login")),m(!1)})},[e.dispatch]),f=x.useCallback(l=>{e.dispatch({type:$.SET_CURRENT_SUBBOOK,payload:{currentSubBook:e.currentSubBook===l?"":l}})},[e.currentSubBook,e.dispatch]),b=()=>{e.dispatch({type:$.RESET_USER}),e.dispatch({type:$.RESET_BOOK}),e.dispatch({type:$.RESET_PAGE_STATUS}),Ee.logout()},w=()=>{y("/login")};return n.jsxs(li,{style:{backgroundColor:a},children:[n.jsx(oi,{markImg:o&&Mt+o.bookImage,markTitle:o==null?void 0:o.bookTitle,isLogIn:!!e.currentUser,terms:g||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},welcomePageTerms:T||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},onLogoClick:()=>y("/"),onCloseClick:L,onLogin:e.currentUser?b:w,onSettings:()=>y("/settings"),onSearchClick:A}),n.jsx(si,{bookId:e.currentBook,bookTitle:o==null?void 0:o.bookTitle,bookImage:o==null?void 0:o.bookImage,subBooks:o==null?void 0:o.subBooks,deviceHeight:B,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.currentSubBook,terms:g||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},moveToReading:N,moveToReadingFromBookmark:K,onDownload:te,onDownloadRefresh:U,removeBookmark:oe,handleOpenedSubBook:f}),t&&n.jsx(Zt,{})]})}function di(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,terms:e.terms.terms,currentBook:e.pageStatus.currentBook,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,currentSubBook:e.pageStatus.currentSubBook,prevPage:e.pageStatus.prevPage,currentUser:e.user.currentUser,activeChapterId:e.books.activeChapterId}}const Ti=Ht(di)(ri);export{Ti as default};
