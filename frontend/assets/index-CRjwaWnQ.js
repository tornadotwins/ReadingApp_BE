import{c as $e,_ as oe,j as i,b as l,ap as $t,F as Le,$ as Te,X as Ut,a3 as D,ax as Ne,ay as bt,Z as re,az as pe,aA as Ie,aB as mt,aC as Re,aD as ft,au as Ft}from"./index-CRP-wFOv.js";import{a as It,b as At,F as Ht,G as Ae,d as Nt,s as r,e as Me,f as pt,J as zt,r as Kt,B as y,K as Wt,S as Ee,g as Oe,V as ce,c as Gt,u as Vt,j as Y,M as Yt,N as Zt,O as ht}from"./App-DUebrZj3.js";import{I as S,T as ge,g as Qt,t as kt,a as vt}from"./index-DUZNFsSz.js";import{H as Xt}from"./index-DiOosLnX.js";import{C as ue}from"./index-3Xq6lJ1x.js";import{A as qt}from"./index-D0ytnNqU.js";import{S as Jt}from"./index-ClXR7ofl.js";import{L as ea}from"./index-D3EHiP07.js";import{b as yt}from"./book.service-wpWcFISR.js";import{b as Ct}from"./bookmark.service-BTZzFokN.js";import{a as De}from"./auth.service-dVhR_m7x.js";import"./index-BtmWYe1n.js";import"./index-C88pvD_q.js";function ta(e){return It("MuiPagination",e)}At("MuiPagination",["root","ul","outlined","text"]);const aa=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function na(e={}){const{boundaryCount:a=1,componentName:s="usePagination",count:t=1,defaultPage:m=1,disabled:u=!1,hideNextButton:R=!1,hidePrevButton:T=!1,onChange:N,page:E,showFirstButton:L=!1,showLastButton:H=!1,siblingCount:j=1}=e,B=$e(e,aa),[g,M]=Ht({controlled:E,default:m,name:s,state:"page"}),Z=(x,I)=>{E||M(I),N&&N(x,I)},p=(x,I)=>{const W=I-x+1;return Array.from({length:W},(X,ee)=>x+ee)},z=p(1,Math.min(a,t)),O=p(Math.max(t-a+1,a+1),t),K=Math.max(Math.min(g-j,t-a-j*2-1),a+2),Q=Math.min(Math.max(g+j,a+j*2+2),O.length>0?O[0]-2:t-1),xe=[...L?["first"]:[],...T?[]:["previous"],...z,...K>a+2?["start-ellipsis"]:a+1<t-a?[a+1]:[],...p(K,Q),...Q<t-a-1?["end-ellipsis"]:t-a>a?[t-a]:[],...O,...R?[]:["next"],...H?["last"]:[]],be=x=>{switch(x){case"first":return 1;case"previous":return g-1;case"next":return g+1;case"last":return t;default:return null}},d=xe.map(x=>typeof x=="number"?{onClick:I=>{Z(I,x)},type:"page",page:x,selected:x===g,disabled:u,"aria-current":x===g?"true":void 0}:{onClick:I=>{Z(I,be(x))},type:x,page:be(x),selected:!1,disabled:u||x.indexOf("ellipsis")===-1&&(x==="next"||x==="last"?g>=t:g<=1)});return oe({items:d},B)}function ia(e){return It("MuiPaginationItem",e)}const de=At("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),St=Ae(i.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Bt=Ae(i.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Tt=Ae(i.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Lt=Ae(i.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),oa=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Rt=(e,a)=>{const{ownerState:s}=e;return[a.root,a[s.variant],a[`size${Le(s.size)}`],s.variant==="text"&&a[`text${Le(s.color)}`],s.variant==="outlined"&&a[`outlined${Le(s.color)}`],s.shape==="rounded"&&a.rounded,s.type==="page"&&a.page,(s.type==="start-ellipsis"||s.type==="end-ellipsis")&&a.ellipsis,(s.type==="previous"||s.type==="next")&&a.previousNext,(s.type==="first"||s.type==="last")&&a.firstLast]},sa=e=>{const{classes:a,color:s,disabled:t,selected:m,size:u,shape:R,type:T,variant:N}=e,E={root:["root",`size${Le(u)}`,N,R,s!=="standard"&&`color${Le(s)}`,s!=="standard"&&`${N}${Le(s)}`,t&&"disabled",m&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[T]],icon:["icon"]};return pt(E,ia,a)},la=r("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Rt})(({theme:e,ownerState:a})=>oe({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${de.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},a.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),ra=r(zt,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Rt})(({theme:e,ownerState:a})=>oe({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${de.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${de.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${de.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Te(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${de.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Te(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${de.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},a.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},a.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:a})=>oe({},a.variant==="text"&&{[`&.${de.selected}`]:oe({},a.color!=="standard"&&{color:(e.vars||e).palette[a.color].contrastText,backgroundColor:(e.vars||e).palette[a.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[a.color].main}},[`&.${de.focusVisible}`]:{backgroundColor:(e.vars||e).palette[a.color].dark}},{[`&.${de.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},a.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${de.selected}`]:oe({},a.color!=="standard"&&{color:(e.vars||e).palette[a.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / 0.5)`:Te(e.palette[a.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:Te(e.palette[a.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Te(e.palette[a.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${de.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Te(e.palette[a.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${de.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),da=r("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,a)=>a.icon})(({theme:e,ownerState:a})=>oe({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},a.size==="small"&&{fontSize:e.typography.pxToRem(18)},a.size==="large"&&{fontSize:e.typography.pxToRem(22)})),ca=l.forwardRef(function(a,s){const t=Nt({props:a,name:"MuiPaginationItem"}),{className:m,color:u="standard",component:R,components:T={},disabled:N=!1,page:E,selected:L=!1,shape:H="circular",size:j="medium",slots:B={},type:g="page",variant:M="text"}=t,Z=$e(t,oa),p=oe({},t,{color:u,disabled:N,selected:L,shape:H,size:j,type:g,variant:M}),z=$t(),O=sa(p),Q=(z?{previous:B.next||T.next||Lt,next:B.previous||T.previous||Tt,last:B.first||T.first||St,first:B.last||T.last||Bt}:{previous:B.previous||T.previous||Tt,next:B.next||T.next||Lt,first:B.first||T.first||St,last:B.last||T.last||Bt})[g];return g==="start-ellipsis"||g==="end-ellipsis"?i.jsx(la,{ref:s,ownerState:p,className:Me(O.root,m),children:"â€¦"}):i.jsxs(ra,oe({ref:s,ownerState:p,component:R,disabled:N,className:Me(O.root,m)},Z,{children:[g==="page"&&E,Q?i.jsx(da,{as:Q,ownerState:p,className:O.icon}):null]}))}),ua=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],ga=e=>{const{classes:a,variant:s}=e;return pt({root:["root",s],ul:["ul"]},ta,a)},xa=r("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:s}=e;return[a.root,a[s.variant]]}})({}),ba=r("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,a)=>a.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function ma(e,a,s){return e==="page"?`${s?"":"Go to "}page ${a}`:`Go to ${e} page`}const fa=l.forwardRef(function(a,s){const t=Nt({props:a,name:"MuiPagination"}),{boundaryCount:m=1,className:u,color:R="standard",count:T=1,defaultPage:N=1,disabled:E=!1,getItemAriaLabel:L=ma,hideNextButton:H=!1,hidePrevButton:j=!1,renderItem:B=d=>i.jsx(ca,oe({},d)),shape:g="circular",showFirstButton:M=!1,showLastButton:Z=!1,siblingCount:p=1,size:z="medium",variant:O="text"}=t,K=$e(t,ua),{items:Q}=na(oe({},t,{componentName:"Pagination"})),xe=oe({},t,{boundaryCount:m,color:R,count:T,defaultPage:N,disabled:E,getItemAriaLabel:L,hideNextButton:H,hidePrevButton:j,renderItem:B,shape:g,showFirstButton:M,showLastButton:Z,siblingCount:p,size:z,variant:O}),be=ga(xe);return i.jsx(xa,oe({"aria-label":"pagination navigation",className:Me(be.root,u),ownerState:xe,ref:s},K,{children:i.jsx(ba,{className:be.ul,ownerState:xe,children:Q.map((d,x)=>i.jsx("li",{children:B(oe({},d,{color:R,"aria-label":L(d.type,d.page,d.selected),shape:g,size:z,variant:O}))},x))})}))});function ha(e){return i.jsx(fa,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function Pt(){const{innerWidth:e,innerHeight:a}=window;return{width:e,height:a}}function ka(){const[e,a]=l.useState(Pt());return l.useEffect(()=>{function s(){a(Pt())}return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),e}var Ue={},va=Ut;Object.defineProperty(Ue,"__esModule",{value:!0});var Dt=Ue.default=void 0,ya=va(Kt()),Ca=i;Dt=Ue.default=(0,ya.default)((0,Ca.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const Sa=r(y)({display:"flex",position:"relative",width:"100%"}),Ba=r("img")({width:"100%",marginTop:"57px"}),Ta=r(y)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),La=r(y)({display:"flex",alignItems:"baseline"}),Pa=r(y)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),wa=r("img")({width:"100%",height:"100%"}),ja=r(y)({margin:0,position:"absolute",top:"50px",left:"75px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),_a=r(y)(({hamburgercolor:e})=>({position:"absolute",top:"12px",right:"15px",width:"46px","& .hamburger-react":{width:"46px !important",color:e},"& .hamburger-react ~ .MuiBox-root ":{border:`1px solid ${e}`},"@media (max-height: 639px)":{top:"8px",right:"10px"},"@media screen and (orientation: landscape)":{right:"15px"}})),Ea=r("img")({position:"absolute",top:"75px",right:"0px",cursor:"pointer","&:active":{opacity:"0.8"}}),Oa=r(y)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),Ia=r("img")({width:"100%","&:active":{opacity:"0.8"}});r("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}});const Aa=r(y)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Na=r(y)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),pa=r(y)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),wt=r(y)(({active:e,bordercolor:a})=>({width:"50%",height:"37.9px",border:`1px solid ${a}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer",marginBottom:"20px"})),jt=r("img")({}),_t=r(y)(({active:e})=>({marginLeft:"5px"})),Ra=r(y)({width:"100%",display:"flex",flexDirection:"column"}),Da=r(y)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),Ma=r(y)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});r(y)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const $a=r(y)({display:"flex",flexDirection:"column"}),Ua=r(y)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),Fa=r(y)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});r(y)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const Ha=r(y)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),za=r("img")({cursor:"pointer",marginRight:"15px"}),Ka=r(Wt)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),Wa=r(y)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),Ga=r("img")({width:"63px"}),Va=r(y)({margin:"0px",marginLeft:"24px","@media (max-height: 600px)":{"& .MuiBox-root":{fontSize:"14px !important"}}}),Ya=r(y)({width:"100%",justifyContent:"space-between",alignItems:"center",margin:"10px 0px"}),Za=r(y)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"center",padding:"0px 7px"});r(Dt)({marginLeft:"-33px",color:"#17637D",height:"30px"});const Qa=r(y)(({progress:e,progresscolor:a})=>({width:"calc(100% - 60px)",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",borderBottom:`1px solid ${a}`,"::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${e}%`,borderBottom:e!=0?`2px solid ${a}`:"none"}})),Xa=r(y)(({istransliteration:e,translatestatus:a})=>({margin:"5px 0px 5px 0px",display:"flex",justifyContent:"space-between",opacity:a=="one"||a=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& .MuiBox-root:first-of-type":{width:"48%"},"& .MuiBox-root:last-child":{marginInlineEnd:"auto",width:e=="true"?"48%":"75%"}})),qa=r(y)({display:"flex",justifyContent:"space-between"}),Ja=r(y)(({translatestatus:e})=>({width:"80%",display:"flex",opacity:e=="one"||e=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}})),en=r("img")({width:"20px",marginLeft:"10px"}),tn=r(y)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),Et=r("img")({marginLeft:"3px",cursor:"pointer"}),an=r(y)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),nn=r(y)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),on=r(y)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),Ot=r(y)(({style:e,translatestatus:a,readalready:s,readbgcolor:t,readtextcolor:m})=>({opacity:a=="one"||a=="none"?"0.5":"1",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:s=="true"?`${t} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:s=="true"?`${m} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:s=="true"?`${m} !important`:`${e.color} !important`}})),sn=r("img")({width:"50%",height:"50%"});function ln(e){var N,E,L,H,j,B;const[a,s]=l.useState(""),[t,m]=l.useState(""),{theme:u}=l.useContext(Ee),{logoTextColor:R,headerBGColor:T}=Oe(u);return l.useEffect(()=>{var g,M,Z,p;e.markTitle?s((g=e.markTitle)==null?void 0:g[e.appLanguage||"en"]):s(((p=(Z=(M=e.terms)==null?void 0:M.texts.find(z=>z.variable=="Default Book Title"))==null?void 0:Z.text)==null?void 0:p[e.appLanguage||"en"])||"Title"),e.markImg?m(e.markImg):m(S.default_cover)},[e.markTitle,e.markImg]),i.jsxs(Sa,{children:[i.jsx(Ba,{src:u==D.DEFAULT||u==D.DARK?S.book_subtract:u==D.BLACK_AND_WHITE?S.book_subtract_BAW:u==D.SAPPHIRE?S.book_subtract_sapphire:S.book_subtract_easyocean}),i.jsxs(Ta,{children:[i.jsxs(La,{children:[i.jsx(Pa,{onClick:e.onLogoClick,children:i.jsx(wa,{src:t})}),i.jsx(ja,{children:i.jsx(ge,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:R,children:((L=(E=(N=e.bookNameTerms)==null?void 0:N.texts.find(g=>{var M;return(g==null?void 0:g.variable)==((M=e.markTitle)==null?void 0:M.en)}))==null?void 0:E.text)==null?void 0:L[e.appLanguage])||((B=(j=(H=e.bookNameTerms)==null?void 0:H.texts.find(g=>(g==null?void 0:g.variable)==a))==null?void 0:j.text)==null?void 0:B.en)||"Book Title"})})]}),i.jsx(Ea,{src:u==D.EASY_OCEAN?S.search_easyocean:S.search,onClick:e.onSearchClick})]}),i.jsx(Oa,{children:i.jsx(Ia,{src:u==D.DEFAULT||u==D.DARK?S.close2:u==D.BLACK_AND_WHITE?S.close2_BAW:u==D.SAPPHIRE?S.close2_sapphire:S.close2_easyocean,onClick:e.onCloseClick})}),i.jsx(_a,{hamburgercolor:T,children:i.jsx(Xt,{isLogin:e.isLogIn,textColor:R,itemBgColor:T,toggleColor:T,terms:e.welcomePageTerms,appLanguage:e.appLanguage,onLogin:e.onLogin,onSettings:e.onSettings})})]})}function rn(e){var x,I,W,X,ee,se,le,q,he,ke,V,me,ve,b,c,o,C,P,k,$,U;const[a,s]=l.useState([]),[t,m]=l.useState(),[u,R]=l.useState(!1),[T,N]=l.useState(!1),[E,L]=l.useState(0),[H,j]=l.useState("both"),{theme:B}=l.useContext(Ee),{mainBGColor:g,altTextColor:M,backgroundColor:Z,topTextColor:p,buttonColor:z,buttonTextColor:O}=Oe(B),K=l.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const n=e.userHistory.filter(v=>v.bookId==e.bookId);if(n&&n.length>0)return n[0].readChapterIds}return[]},[e.userHistory]),Q=e.subBookId;l.useEffect(()=>{e.bookTitle.en=="Qur'an"||e.bookTitle.en=="Zabur"?R(!1):e.openedSubBook==e.subBookId?R(!0):R(!1)},[e.openedSubBook]),l.useEffect(()=>{var _,f;const n=e.subBooks.filter(w=>w.subBookId===Q);let v=0;if(n&&n.length>0&&(v=(_=n[0].chapterInfos)==null?void 0:_.length,m(n[0])),e.currentUser){const w=e.userHistory.filter(A=>A.bookId==e.bookId);if(w&&w.length>0){const A=w[0].subBooks.filter(G=>G.subBookId==Q);A&&A.length>0&&L(Math.floor(((f=A[0])==null?void 0:f.readChapters)/v*100))}}if(e.subBooks&&e.subBooks.length>0){const w=e.subBooks.filter(A=>A.subBookId==Q);if(w&&w.length>0){let A=w[0].chapterInfos;A.sort((G,J)=>G.chapterNumber-J.chapterNumber),s(A)}}},[e.subBooks,e.userHistory]),l.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const n=e.subBookInfos.filter(v=>v.subBookId==Q);n&&n.length>0?N(!0):N(!1)}},[]),l.useEffect(()=>{var n,v,_,f,w,A,G,J,ae,ne,ie,te,fe,F,h,ye,Ce,Se,Pe,we,je,_e,Fe,He,ze,Ke,We,Ge,Ve,Ye,Ze,Qe,Xe,qe,Je,et,tt,at,nt,it,ot,st,lt,rt,dt,ct,ut,gt,xt;if(t!=null&&t.noChapter)!((v=(n=t==null?void 0:t.chapterInfos[0])==null?void 0:n.isTranslated)!=null&&v[e.referenceLanguage])&&!((f=(_=t==null?void 0:t.chapterInfos[0])==null?void 0:_.isTranslated)!=null&&f[e.appLanguage])||!((A=(w=t==null?void 0:t.chapterInfos[0])==null?void 0:w.isPublished)!=null&&A[e.referenceLanguage])&&!((J=(G=t==null?void 0:t.chapterInfos[0])==null?void 0:G.isPublished)!=null&&J[e.appLanguage])?j("none"):(!((ne=(ae=t==null?void 0:t.chapterInfos[0])==null?void 0:ae.isTranslated)!=null&&ne[e.referenceLanguage])||!((te=(ie=t==null?void 0:t.chapterInfos[0])==null?void 0:ie.isTranslated)!=null&&te[e.appLanguage]))&&((F=(fe=t==null?void 0:t.chapterInfos[0])==null?void 0:fe.isPublished)!=null&&F[e.referenceLanguage]||!((ye=(h=t==null?void 0:t.chapterInfos[0])==null?void 0:h.isPublished)!=null&&ye[e.appLanguage]))?j("one"):j("both");else if((t==null?void 0:t.subBookNumber)!==0){const Mt=(Ce=t==null?void 0:t.chapterInfos)==null?void 0:Ce.length;for(let Be=1;Be<Mt-1;Be++)if(!((Pe=(Se=t==null?void 0:t.chapterInfos[Be])==null?void 0:Se.isTranslated)!=null&&Pe[e.referenceLanguage])&&!((je=(we=t==null?void 0:t.chapterInfos[Be])==null?void 0:we.isTranslated)!=null&&je[e.appLanguage])||!((Fe=(_e=t==null?void 0:t.chapterInfos[Be])==null?void 0:_e.isPublished)!=null&&Fe[e.referenceLanguage])&&!((ze=(He=t==null?void 0:t.chapterInfos[Be])==null?void 0:He.isPublished)!=null&&ze[e.appLanguage])){j("none");break}else if((!((We=(Ke=t==null?void 0:t.chapterInfos[1])==null?void 0:Ke.isTranslated)!=null&&We[e.referenceLanguage])||!((Ve=(Ge=t==null?void 0:t.chapterInfos[1])==null?void 0:Ge.isTranslated)!=null&&Ve[e.appLanguage]))&&((Ze=(Ye=t==null?void 0:t.chapterInfos[1])==null?void 0:Ye.isPublished)!=null&&Ze[e.referenceLanguage]||!((Xe=(Qe=t==null?void 0:t.chapterInfos[1])==null?void 0:Qe.isPublished)!=null&&Xe[e.appLanguage]))){j("one");break}}else!((Je=(qe=t==null?void 0:t.chapterInfos[0])==null?void 0:qe.isTranslated)!=null&&Je[e.referenceLanguage])&&!((tt=(et=t==null?void 0:t.chapterInfos[0])==null?void 0:et.isTranslated)!=null&&tt[e.appLanguage])||!((nt=(at=t==null?void 0:t.chapterInfos[0])==null?void 0:at.isPublished)!=null&&nt[e.referenceLanguage])&&!((ot=(it=t==null?void 0:t.chapterInfos[0])==null?void 0:it.isPublished)!=null&&ot[e.appLanguage])?j("none"):(!((lt=(st=t==null?void 0:t.chapterInfos[1])==null?void 0:st.isTranslated)!=null&&lt[e.referenceLanguage])||!((dt=(rt=t==null?void 0:t.chapterInfos[1])==null?void 0:rt.isTranslated)!=null&&dt[e.appLanguage]))&&((ut=(ct=t==null?void 0:t.chapterInfos[1])==null?void 0:ct.isPublished)!=null&&ut[e.referenceLanguage]||!((xt=(gt=t==null?void 0:t.chapterInfos[1])==null?void 0:gt.isPublished)!=null&&xt[e.appLanguage]))?j("one"):j("both")},[t]);const xe=l.useCallback(n=>{N(v=>!v),e.onDownload(n)},[]),be=()=>{var n,v;if(t!=null&&t.noChapter){const _=(n=t==null?void 0:t.chapterInfos[0])==null?void 0:n.isTranslated,f=(v=t==null?void 0:t.chapterInfos[0])==null?void 0:v.isPublished;!(_!=null&&_[e.readingLanguage])&&!(_!=null&&_[e.appLanguage])||!(f!=null&&f[e.readingLanguage])&&!(f!=null&&f[e.appLanguage])?ce.custom(w=>{var A,G,J,ae,ne,ie;return i.jsx(ue,{text:((J=(G=(A=e.terms)==null?void 0:A.texts.find(te=>te.variable=="None Translated"))==null?void 0:G.text)==null?void 0:J[e.appLanguage])||((ie=(ne=(ae=e.terms)==null?void 0:ae.texts.find(te=>te.variable=="None Translated"))==null?void 0:ne.text)==null?void 0:ie.en)||"",visible:w.visible})}):e.moveToReading(t==null?void 0:t.chapterInfos[0].chapterId,t.subBookId)}else R(!u),e.handleOpenedSubBook(e.subBookId)},d=(n,v)=>{v=="none"?ce.custom(_=>{var f,w,A;return i.jsx(ue,{text:((A=(w=(f=e.terms)==null?void 0:f.texts.find(G=>G.variable=="None Translated"))==null?void 0:w.text)==null?void 0:A[e.appLanguage])||"",visible:_.visible})}):e.moveToReading(n,t.subBookId)};return i.jsxs(Ya,{id:e.id,children:[i.jsxs(Za,{children:[i.jsxs(Qa,{progress:E,progresscolor:z,onClick:be,children:[(t==null?void 0:t.subBookNumber)!=0&&i.jsxs(Xa,{istransliteration:((x=t==null?void 0:t.subBookTitle)==null?void 0:x[Ne])!=null?"true":"false",translatestatus:H,children:[((I=t==null?void 0:t.subBookTitle)==null?void 0:I[Ne])&&i.jsx(ge,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:M,language:bt,children:(t==null?void 0:t.subBookNumber)+". "+((W=t==null?void 0:t.subBookTitle)==null?void 0:W[Ne])}),i.jsx(ge,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:M,language:bt,direction:"rtl",children:((le=(se=(ee=(X=e.subBookTerms)==null?void 0:X.texts)==null?void 0:ee.find(n=>{var v;return(n==null?void 0:n.variable)===((v=t==null?void 0:t.subBookTitle)==null?void 0:v.en)}))==null?void 0:se.text)==null?void 0:le.ar)||((q=t==null?void 0:t.subBookTitle)==null?void 0:q.ar)||((he=t==null?void 0:t.subBookTitle)==null?void 0:he.en)})]}),i.jsxs(qa,{children:[i.jsxs(Ja,{translatestatus:H,children:[i.jsx(ge,{fontFamily:'"Baloo Da 2"',color:M,children:e.bookTitle.en==="Zabur"&&(t==null?void 0:t.subBookNumber)!=0?(((ve=(me=(V=(ke=e.subBookTerms)==null?void 0:ke.texts)==null?void 0:V.find(n=>(n==null?void 0:n.variable)==="Psalm"))==null?void 0:me.text)==null?void 0:ve[e.appLanguage||"en"])||"Psalm")+` ${t==null?void 0:t.subBookNumber}`:((C=(o=(c=(b=e.subBookTerms)==null?void 0:b.texts)==null?void 0:c.find(n=>{var v;return(n==null?void 0:n.variable)===((v=t==null?void 0:t.subBookTitle)==null?void 0:v.en)}))==null?void 0:o.text)==null?void 0:C[e.appLanguage||"en"])||((P=t==null?void 0:t.subBookTitle)==null?void 0:P.en)}),(t==null?void 0:t.subBookNumber)==0&&i.jsx(en,{src:S.icon_intro})]}),e.currentUser&&E!==0&&!(t!=null&&t.noChapter)&&i.jsx(ge,{fontFamily:'"Baloo Da 2"',color:z,children:`${E}%`})]})]}),i.jsxs(tn,{isdownloaded:T?"true":"false",children:[i.jsx(Et,{src:T?B==D.DEFAULT||B==D.EASY_OCEAN?S.download_cancel:S.download_cancel_white:B==D.DEFAULT||B==D.EASY_OCEAN?S.download:S.download_white,onClick:()=>xe(Q)}),T&&i.jsx(Et,{src:B==D.DEFAULT||B==D.EASY_OCEAN?S.download_refresh:S.download_refresh_white,onClick:()=>e.onDownloadRefresh(Q)})]})]}),u&&i.jsxs(an,{style:{backgroundColor:Z},children:[i.jsx(nn,{children:i.jsx(ge,{fontFamily:"Inter",color:p,children:((U=($=(k=e.terms)==null?void 0:k.texts.find(n=>n.variable=="Chapter"))==null?void 0:$.text)==null?void 0:U[e.appLanguage])||""})}),i.jsx(on,{children:a==null?void 0:a.map((n,v)=>{var _,f,w,A,G,J,ae,ne,ie,te,fe,F;return n.chapterNumber==0?i.jsx(Ot,{translatestatus:!((_=n==null?void 0:n.isTranslated)!=null&&_[e.readingLanguage])&&!((f=n==null?void 0:n.isTranslated)!=null&&f[e.appLanguage])||!((w=n==null?void 0:n.isPublished)!=null&&w[e.readingLanguage])&&!((A=n==null?void 0:n.isPublished)!=null&&A[e.appLanguage])?"none":(!((G=n==null?void 0:n.isTranslated)!=null&&G[e.readingLanguage])||!((J=n==null?void 0:n.isTranslated)!=null&&J[e.appLanguage]))&&((ae=n==null?void 0:n.isPublished)!=null&&ae[e.readingLanguage]||!((ne=n==null?void 0:n.isPublished)!=null&&ne[e.appLanguage]))?"one":"both",readalready:K&&K.length>0&&K.includes(n.chapterId)?"true":"false",style:{backgroundColor:g,color:M},readbgcolor:z,readtextcolor:O,onClick:()=>{var h,ye,Ce,Se,Pe,we,je,_e;return d(n.chapterId,!((h=n==null?void 0:n.isTranslated)!=null&&h[e.readingLanguage])&&!((ye=n==null?void 0:n.isTranslated)!=null&&ye[e.appLanguage])||!((Ce=n==null?void 0:n.isPublished)!=null&&Ce[e.readingLanguage])&&!((Se=n==null?void 0:n.isPublished)!=null&&Se[e.appLanguage])?"none":(!((Pe=n.isTranslated)!=null&&Pe[e.readingLanguage])||!((we=n==null?void 0:n.isTranslated)!=null&&we[e.appLanguage]))&&((je=n==null?void 0:n.isPublished)!=null&&je[e.readingLanguage]||!((_e=n==null?void 0:n.isPublished)!=null&&_e[e.appLanguage]))?"one":"both")},children:i.jsx(sn,{src:S.icon_intro})},v):i.jsx(Ot,{translatestatus:(ie=n==null?void 0:n.isPublished)!=null&&ie[e.readingLanguage]&&((te=n==null?void 0:n.isPublished)!=null&&te[e.appLanguage])?"both":(fe=n==null?void 0:n.isPublished)!=null&&fe[e.readingLanguage]||(F=n==null?void 0:n.isPublished)!=null&&F[e.appLanguage]?"one":"none",readalready:K&&K.length>0&&K.includes(n.chapterId)?"true":"false",style:{backgroundColor:g,color:M},readbgcolor:z,readtextcolor:O,onClick:()=>{var h,ye,Ce,Se;return d(n.chapterId,(h=n==null?void 0:n.isPublished)!=null&&h[e.readingLanguage]&&((ye=n==null?void 0:n.isPublished)!=null&&ye[e.appLanguage])?"both":(Ce=n==null?void 0:n.isPublished)!=null&&Ce[e.readingLanguage]||(Se=n==null?void 0:n.isPublished)!=null&&Se[e.appLanguage]?"one":"none")},children:i.jsx(ge,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:n.chapterNumber})},v)})})]})]})}function dn(e){const[a,s]=l.useState([]);return l.useEffect(()=>{let t=e.subBooks;t&&t.sort((m,u)=>m.subBookNumber-u.subBookNumber),s(t)},[e.subBooks]),i.jsx(i.Fragment,{children:a&&a.length>0&&a.map((t,m)=>i.jsx(rn,{id:`subbook-${t.subBookId}`,bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:a,subBookId:t.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,subBookTerms:e.subBookTerms,appLanguage:e.appLanguage,readingLanguage:e.readingLanguage,referenceLanguage:e.referenceLanguage,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},m))})}function cn(e){const[a,s]=l.useState(""),[t,m]=l.useState([]),[u,R]=l.useState(1),[T,N]=l.useState([]),{theme:E,readingLanguage:L}=l.useContext(Ee),{backgroundColor:H,topTextColor:j,mainTextColor:B}=Oe(E),g=Qt(e.deviceHeight),M=u*g,Z=M-g,p=e.currentUser&&t.slice(Z,M);l.useEffect(()=>{var d,x,I,W,X,ee,se,le,q,he;if(e.subBooks&&e.subBooks.length>0){const ke=e.subBooks.map(V=>{var me;return{label:(me=V.subBookTitle)==null?void 0:me[L],value:V.subBookId}});ke.unshift({label:((d=e.bookTitle)==null?void 0:d.en)=="Qur'an"||((x=e.bookTitle)==null?void 0:x.en)=="Zabur"?((W=(I=e.terms.texts.find(V=>V.variable=="All Chapters"))==null?void 0:I.text)==null?void 0:W[L])||((ee=(X=e.terms.texts.find(V=>V.variable=="All Chapters"))==null?void 0:X.text)==null?void 0:ee.en):((le=(se=e.terms.texts.find(V=>V.variable=="All SubBooks"))==null?void 0:se.text)==null?void 0:le[L])||((he=(q=e.terms.texts.find(V=>V.variable=="All SubBooks"))==null?void 0:q.text)==null?void 0:he.en),value:"all"}),N(ke)}},[e.subBooks]),l.useEffect(()=>{T.length>0&&s(T[0].value)},[T]),l.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const d=e.bookmark.filter(x=>x.subBookId===a);m(a==="all"||a===""?e.bookmark:d)}else m([]),R(0);u>1&&p.length==1&&R(d=>d-1)},[e.bookmark]);const z=(d,x)=>{R(x)},O=l.useCallback(d=>{const x=d.target.value;s(x);const I=e.bookmark.filter(W=>W.subBookId===x);m(x==="all"?e.bookmark:I)},[e.bookmark]),K=()=>{var d,x,I,W,X,ee,se,le;return i.jsx(Da,{style:{backgroundColor:H},children:i.jsx(qt,{label:((x=(d=e.terms.texts.find(q=>q.variable=="Filter"))==null?void 0:d.text)==null?void 0:x[L])||((W=(I=e.terms.texts.find(q=>q.variable=="Filter"))==null?void 0:I.text)==null?void 0:W.en)||"",detail:i.jsxs(Ma,{children:[i.jsx(ge,{color:j,children:((ee=(X=e.terms.texts.find(q=>q.variable=="Show"))==null?void 0:X.text)==null?void 0:ee[L])||((le=(se=e.terms.texts.find(q=>q.variable=="Show"))==null?void 0:se.text)==null?void 0:le.en)||""}),i.jsx(Jt,{label:"",options:T,value:a,backgroundColor:H,textColor:j,onChange:O})]})})})},Q=()=>i.jsx($a,{children:(p==null?void 0:p.length)>0&&p.map((d,x)=>{var I,W,X,ee,se,le,q,he,ke,V,me,ve,b,c,o,C,P,k,$,U,n,v,_,f,w,A,G,J,ae,ne,ie,te,fe,F;return i.jsxs(y,{children:[i.jsxs(Ua,{children:[i.jsxs(Fa,{onClick:()=>e.moveToReadingFromBookmark(d._id),children:[i.jsx(ge,{color:B,children:((I=d.subBookTitle)==null?void 0:I[L])||((W=d.subBookTitle)==null?void 0:W.en)}),i.jsx(ge,{color:B,children:d.bookTitle.en=="Qur'an"||d.bookTitle.en=="Zabur"?d.chapterNumber>0?`${((ee=(X=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:X.text)==null?void 0:ee[L])||((le=(se=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:se.text)==null?void 0:le.en)} ${d.chapterNumber}, ${((he=(q=e.terms.texts.find(h=>h.variable=="Aya"))==null?void 0:q.text)==null?void 0:he[L])||((V=(ke=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:ke.text)==null?void 0:V.en)} ${d.verseNumber}`:`${((ve=(me=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:me.text)==null?void 0:ve[L])||((c=(b=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:b.text)==null?void 0:c.en)} _ , ${((C=(o=e.terms.texts.find(h=>h.variable=="Aya"))==null?void 0:o.text)==null?void 0:C[L])||((k=(P=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:P.text)==null?void 0:k.en)} ${d.verseNumber}`:d.chapterNumber>0?`${((U=($=e.terms.texts.find(h=>h.variable=="Chapter Bookmark"))==null?void 0:$.text)==null?void 0:U[L])||((v=(n=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:n.text)==null?void 0:v.en)} ${d.chapterNumber}, ${((f=(_=e.terms.texts.find(h=>h.variable=="Aya"))==null?void 0:_.text)==null?void 0:f[L])||((A=(w=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:w.text)==null?void 0:A.en)} ${d.verseNumber}`:`${((J=(G=e.terms.texts.find(h=>h.variable=="Chapter Bookmark"))==null?void 0:G.text)==null?void 0:J[L])||((ne=(ae=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:ae.text)==null?void 0:ne.en)} _ , ${((te=(ie=e.terms.texts.find(h=>h.variable=="Aya"))==null?void 0:ie.text)==null?void 0:te[L])||((F=(fe=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:fe.text)==null?void 0:F.en)} ${d.verseNumber}`})]}),i.jsx(za,{src:E==D.DEFAULT||E==D.EASY_OCEAN||E==D.EASY_SUNRISE?S.black_bookmark:S.white_bookmark,onClick:()=>e.removeBookmark(d._id)})]}),i.jsx(Ha,{})]},x)})}),xe=()=>i.jsx(Ka,{buttoncolor:B,children:i.jsx(ha,{count:e.currentUser?Math.ceil(t.length/g):0,page:u,hidePrevButton:!0,hideNextButton:!0,onChange:z})}),be=()=>{var d,x,I,W;return i.jsxs(Wa,{style:{backgroundColor:H},children:[i.jsx(Ga,{src:E==D.DEFAULT||E==D.BLACK_AND_WHITE?S.swipe:E==D.EASY_OCEAN?S.swipe_easyocean:S.swipe_white}),i.jsx(Va,{style:{color:j},children:((x=(d=e.terms.texts.find(X=>X.variable=="Bookmark Help"))==null?void 0:d.text)==null?void 0:x[L])||((W=(I=e.terms.texts.find(X=>X.variable=="Bookmark Help"))==null?void 0:I.text)==null?void 0:W.en)})]})};return i.jsxs(Ra,{children:[K(),Q(),xe(),be()]})}function un(e){var L,H,j,B;const[a,s]=l.useState(re),{theme:t}=l.useContext(Ee),{mainBGColor:m,headerBGColor:u,buttonColor:R,buttonTextColor:T,mainTextColor:N}=Oe(t),E=g=>{e.currentUser?s(g):ce.custom(M=>{var Z,p,z,O;return i.jsx(ue,{text:((p=(Z=e.terms.texts.find(K=>K.variable=="Bookmark Read Description"))==null?void 0:Z.text)==null?void 0:p[e.appLanguage])||((O=(z=e.terms.texts.find(K=>K.variable=="Bookmark Read Description"))==null?void 0:z.text)==null?void 0:O.en)||"",visible:M.visible})})};return i.jsx(Aa,{style:{backgroundColor:u},children:i.jsxs(Na,{style:{backgroundColor:m},children:[i.jsxs(pa,{children:[i.jsxs(wt,{active:a==re?"true":"false",style:{backgroundColor:a==re?R:m},bordercolor:N,onClick:()=>E(re),children:[i.jsx(jt,{src:t==D.DEFAULT?S.index:t==D.EASY_OCEAN?a==re?S.index_active:S.index:a==re?S.index:S.index_active}),i.jsx(_t,{active:a==re?"true":"false",children:i.jsx(ge,{fontSize:16,fontWeight:"500",lineHeight:24,color:a==re?T:N,children:((H=(L=e.terms.texts.find(g=>g.variable=="Index"))==null?void 0:L.text)==null?void 0:H[e.appLanguage])||"Index"})})]}),i.jsxs(wt,{active:a==re?"false":"true",style:{backgroundColor:a==pe?R:m},bordercolor:N,onClick:()=>E(pe),children:[i.jsx(jt,{src:t==D.DEFAULT?S.bookmark2_default:t==D.EASY_OCEAN?a==re?S.bookmark2_default:S.bookmark2_white:a==re?S.bookmark2_white:S.bookmark2_default}),i.jsx(_t,{active:a==re?"false":"true",children:i.jsx(ge,{fontSize:16,fontWeight:"500",lineHeight:24,color:a==pe?T:N,children:((B=(j=e.terms.texts.find(g=>g.variable=="Bookmarks"))==null?void 0:j.text)==null?void 0:B[e.appLanguage])||"Bookmarks"})})]})]}),a==re?i.jsx(dn,{bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,subBookTerms:e.subBookTerms,appLanguage:e.appLanguage,readingLanguage:e.readingLanguage,referenceLanguage:e.referenceLanguage,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):i.jsx(cn,{bookTitle:e.bookTitle,subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark.filter(g=>g.bookId==e.bookId),deviceHeight:e.deviceHeight,terms:e.terms,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const gn=r(y)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function xn(e){var V,me,ve;const[a,s]=l.useState(),[t,m]=l.useState(!1),[u,R]=l.useState(),[T,N]=l.useState(),[E,L]=l.useState(),[H,j]=l.useState(),[B,g]=l.useState(),[M,Z]=l.useState(),[p,z]=l.useState(),O=Vt(),{height:K}=ka(),{theme:Q}=l.useContext(Ee),{mainBGColor:xe}=Oe(Q),be=l.useCallback(()=>{e.currentBook&&yt.fetchBookInfo(e.currentBook).then(b=>{var c,o,C;if(e.dispatch({type:Y.ADD_BOOKINFO,payload:{bookInfo:b}}),s(b),e.currentUser&&!e.userHistory.some(k=>k.bookId==e.currentBook)&&b.subBooks){const k=b.subBooks.find(n=>n.subBookNumber==0),$=(c=k==null?void 0:k.chapterInfos[0])==null?void 0:c.chapterId,U=k==null?void 0:k.subBookId;(C=(o=k==null?void 0:k.chapterInfos[0])==null?void 0:o.isTranslated)!=null&&C[e.appLanguage]?I($,U):ce.custom(n=>{var v,_,f;return i.jsx(ue,{text:((f=(_=(v=u==null?void 0:u.texts)==null?void 0:v.find(w=>w.variable=="None Translated"))==null?void 0:_.text)==null?void 0:f[e.appLanguage])||"",type:Ie.BOOKMARK,visible:n.visible})})}}).catch(b=>{ce.custom(c=>i.jsx(ue,{text:b,type:Ie.BOOKMARK,visible:c.visible}))}).finally(()=>{m(!1)})},[e.currentBook,e.dispatch,e.userHistory,e.currentUser]),d=l.useCallback(async b=>{var c,o,C;try{const P=await yt.fetchSubBookInfo(b);e.dispatch({type:Y.ADD_SUBBOOKINFO,payload:{subBookInfo:P}}),e.dispatch({type:Y.ADD_SUBBOOK,payload:{subBook:P}}),Yt(P);const k=(c=e.bookInfos)==null?void 0:c.find(U=>(U==null?void 0:U.bookId)==e.currentBook),$=k&&((o=k==null?void 0:k.subBooks)==null?void 0:o.find(U=>(U==null?void 0:U.subBookId)==b));if($){const U=(C=$==null?void 0:$.subBookTitle)==null?void 0:C.en;kt("Sub books","download_subbook",U)}m(!1)}catch(P){ce.custom(k=>i.jsx(ue,{text:P,visible:k.visible})),m(!1)}},[e.dispatch]);l.useEffect(()=>{var U,n,v,_,f,w,A,G,J,ae,ne,ie,te,fe;const b=e.terms.find(F=>F.pageTitle=="Index & Bookmark Page"),c=e.terms.find(F=>F.pageTitle=="Welcome Page"),o=e.terms.find(F=>F.pageTitle==="Book Names"),C=e.terms.find(F=>F.pageTitle==="Origin Injil Sub-book Names"),P=e.terms.find(F=>F.pageTitle==="Origin Qur'an Surah Names"),k=e.terms.find(F=>F.pageTitle==="Origin Tawrat Sub-book Names"),$=e.terms.find(F=>F.pageTitle==="Origin Zabur Sub-book Names");((U=b==null?void 0:b.isPublished)!=null&&U[e.appLanguage]||(n=o==null?void 0:o.isPublished)!=null&&n.en)&&R(b),((v=c==null?void 0:c.isPublished)!=null&&v[e.appLanguage]||(_=o==null?void 0:o.isPublished)!=null&&_.en)&&N(c),((f=o==null?void 0:o.isPublished)!=null&&f[e.appLanguage]||(w=o==null?void 0:o.isPublished)!=null&&w.en)&&L(o),((A=C==null?void 0:C.isPublished)!=null&&A[e.appLanguage]||(G=o==null?void 0:o.isPublished)!=null&&G.en)&&j(C),((J=P==null?void 0:P.isPublished)!=null&&J[e.appLanguage]||(ae=o==null?void 0:o.isPublished)!=null&&ae.en)&&g(P),((ne=k==null?void 0:k.isPublished)!=null&&ne[e.appLanguage]||(ie=o==null?void 0:o.isPublished)!=null&&ie.en)&&Z(k),((te=$==null?void 0:$.isPublished)!=null&&te[e.appLanguage]||(fe=o==null?void 0:o.isPublished)!=null&&fe.en)&&z($)},[e.terms,e.appLanguage]),l.useEffect(()=>{(async()=>{var c;m(!0),!((c=e.bookInfos)!=null&&c.length)||!e.bookInfos.some(o=>o.bookId===e.currentBook)?await be():(s(e.bookInfos.find(o=>o.bookId===e.currentBook)),m(!1))})(),e.currentUser&&Ct.fetchBookmarks().then(c=>{e.dispatch({type:Y.SET_BOOKMARKS,payload:{bookmark:c}})}).catch(c=>{c.status===401&&c.response.data.message===mt&&(ce.custom(o=>i.jsx(ue,{text:c.response.data.message,visible:o.visible})),De.logout(),O("/login"))})},[e.currentBook,e.bookInfos,e.currentUser,e.dispatch]),l.useEffect(()=>{if(e.currentSubBook&&e.prevPage===Re.READING){const c=setTimeout(()=>{const o=document.getElementById(`subbook-${e.currentSubBook}`);o&&o.scrollIntoView({behavior:"smooth"})},100);return()=>clearTimeout(c)}},[e.currentSubBook,e.prevPage]);const x=()=>{ce.custom(b=>{var c,o,C;return i.jsx(ue,{text:((C=(o=(c=u==null?void 0:u.texts)==null?void 0:c.find(P=>P.variable=="Not Built Yet"))==null?void 0:o.text)==null?void 0:C[e.appLanguage])||"",visible:b.visible})})},I=(b,c)=>{var k,$,U,n,v,_;e.dispatch({type:Y.SET_CURRENT_CHAPTER,payload:{currentChapter:b}}),e.dispatch({type:Y.SET_CURRENT_SUBBOOK,payload:{currentSubBook:c}}),e.dispatch({type:Y.SET_PREVIOUS_PAGE,payload:{prevPage:Re.BOOKS}});const o=(k=e.bookInfos)==null?void 0:k.find(f=>(f==null?void 0:f.bookId)==e.currentBook),C=o&&(($=o==null?void 0:o.subBooks)==null?void 0:$.find(f=>(f==null?void 0:f.subBookId)==c)),P=(U=C==null?void 0:C.chapterInfos)==null?void 0:U.find(f=>(f==null?void 0:f.chapterId)==b);if(C){const f=(n=C==null?void 0:C.subBookTitle)==null?void 0:n.en,w=P==null?void 0:P.chapterNumber;kt("Chapter","read_chapter",((v=a==null?void 0:a.bookTitle)==null?void 0:v.en)=="Qur'an"||((_=a==null?void 0:a.bookTitle)==null?void 0:_.en)=="Zabur"?f:`${f}-${w==0?"Introduction":w}`)}O("/reading")},W=()=>{O("/library"),e.dispatch({type:Y.SET_PREVIOUS_PAGE,payload:{prevPage:Re.BOOKS}}),e.dispatch({type:Y.SET_CURRENT_SUBBOOK,payload:{currentSubBook:""}})},X=l.useCallback(async b=>{m(!0),vt()<ft?await Zt(b)?(await ht(b),e.dispatch({type:Y.REMOVE_SUBBOOKINFO,payload:{subBookId:b}})):await d(b):ce.custom(o=>{var C,P,k;return i.jsx(ue,{text:((k=(P=(C=u==null?void 0:u.texts)==null?void 0:C.find($=>$.variable=="Not Enough Space"))==null?void 0:P.text)==null?void 0:k[e.appLanguage])||"Not enough space",visible:o.visible})}),m(!1)},[d,e.dispatch]),ee=l.useCallback(async b=>{m(!0),await ht(b),e.dispatch({type:Y.REMOVE_SUBBOOKINFO,payload:{subBookId:b}}),vt()<ft?await d(b):ce.custom(o=>{var C,P,k;return i.jsx(ue,{text:((k=(P=(C=u==null?void 0:u.texts)==null?void 0:C.find($=>$.variable=="Not Enough Space"))==null?void 0:P.text)==null?void 0:k[e.appLanguage])||"Not enough space",visible:o.visible})}),m(!1)},[d,e.dispatch]),se=l.useCallback(b=>{if(m(!0),e.bookmark&&e.bookmark.length>0){const c=e.bookmark.find(o=>o._id===b);if(c){const{chapterId:o,subBookId:C,verseId:P}=c;e.dispatch({type:Y.SET_CURRENT_SUBBOOK,payload:{currentSubBook:C}}),e.dispatch({type:Y.SET_CURRENT_CHAPTER,payload:{currentChapter:o}}),e.dispatch({type:Y.SET_CURRENT_VERSE,payload:{currentVerse:P}}),O("/reading"),m(!1)}}},[e.currentBook,O,e.bookmark]),le=l.useCallback(b=>{m(!0),Ct.deleteBookmark(b).then(c=>{e.dispatch({type:Y.REMOVE_BOOKMARK,payload:{bookmarkId:b}}),ce.custom(o=>i.jsx(ue,{text:c.message,type:Ie.BOOKMARK,visible:o.visible})),m(!1)}).catch(c=>{c.status==401&&c.response.data.message==mt&&(ce.custom(o=>i.jsx(ue,{text:c.response.data.message,type:Ie.BOOKMARK,visible:o.visible})),De.logout(),O("/login")),m(!1)})},[e.dispatch]),q=l.useCallback(b=>{e.dispatch({type:Y.SET_CURRENT_SUBBOOK,payload:{currentSubBook:e.currentSubBook===b?"":b}})},[e.currentSubBook,e.dispatch]),he=()=>{e.dispatch({type:Y.RESET_USER}),e.dispatch({type:Y.RESET_BOOK}),e.dispatch({type:Y.RESET_PAGE_STATUS}),De.logout()},ke=()=>{O("/login")};return i.jsxs(gn,{style:{backgroundColor:xe},children:[i.jsx(ln,{markImg:a&&Ft+a.bookImage,markTitle:a==null?void 0:a.bookTitle,isLogIn:!!e.currentUser,terms:u||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},welcomePageTerms:T||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},bookNameTerms:E||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},appLanguage:e.appLanguage,onLogoClick:()=>O("/home"),onCloseClick:W,onLogin:e.currentUser?he:ke,onSettings:()=>O("/settings"),onSearchClick:x}),i.jsx(un,{bookId:e.currentBook,bookTitle:a==null?void 0:a.bookTitle,bookImage:a==null?void 0:a.bookImage,subBooks:a==null?void 0:a.subBooks,deviceHeight:K,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.currentSubBook,terms:u||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},subBookTerms:(((V=a==null?void 0:a.bookTitle)==null?void 0:V.en)==="Injil"?H:((me=a==null?void 0:a.bookTitle)==null?void 0:me.en)==="Qur'an"?B:((ve=a==null?void 0:a.bookTitle)==null?void 0:ve.en)==="Zabur"?p:M)||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},appLanguage:e.appLanguage,readingLanguage:e.readingLanguage,referenceLanguage:e.referenceLanguage,moveToReading:I,moveToReadingFromBookmark:se,onDownload:X,onDownloadRefresh:ee,removeBookmark:le,handleOpenedSubBook:q}),t&&i.jsx(ea,{})]})}function bn(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,terms:e.terms.terms,currentBook:e.pageStatus.currentBook,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,currentSubBook:e.pageStatus.currentSubBook,prevPage:e.pageStatus.prevPage,currentUser:e.user.currentUser,appLanguage:e.user.appLanguage,readingLanguage:e.user.readingLanguage,referenceLanguage:e.user.referenceLanguage,activeChapterId:e.books.activeChapterId}}const jn=Gt(bn)(xn);export{jn as default};
