import{c as Ke,_ as ne,j as i,b as l,ap as Ut,F as _e,$ as je,X as Ft,a3 as O,ax as $e,ay as bt,Z as le,az as Ue,aA as De,aB as ft,aC as Fe,aD as kt,au as Ht}from"./index-Dj5rl3f-.js";import{a as Ot,b as At,F as zt,G as Me,d as It,s as r,e as ze,f as Rt,J as Kt,r as Wt,B as v,K as Gt,S as Ie,g as Re,V as ce,c as Vt,u as Yt,j as W,M as Zt,N as Qt,O as ht}from"./App-C0W3meXv.js";import{I as C,T as ge,g as Xt,t as vt,a as yt}from"./index-Bg26INBa.js";import{H as qt}from"./index-B8x6Kivj.js";import{C as ue}from"./index-CYwMUGlF.js";import{A as Jt}from"./index-BPExUbOQ.js";import{S as ea}from"./index-CHfPFQhn.js";import{L as ta}from"./index-LjYGd8NM.js";import{b as Ct}from"./book.service-2R9BPGam.js";import{b as St}from"./bookmark.service-CGwE6_c3.js";import{a as He}from"./auth.service-BY7_Kepk.js";import"./index-DYeNB9I-.js";import"./index-C88pvD_q.js";function aa(e){return Ot("MuiPagination",e)}At("MuiPagination",["root","ul","outlined","text"]);const na=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function ia(e={}){const{boundaryCount:n=1,componentName:s="usePagination",count:t=1,defaultPage:f=1,disabled:g=!1,hideNextButton:E=!1,hidePrevButton:S=!1,onChange:_,page:P,showFirstButton:B=!1,showLastButton:$=!1,siblingCount:w=1}=e,L=Ke(e,na),[o,X]=zt({controlled:P,default:f,name:s,state:"page"}),H=(b,j)=>{P||X(j),_&&_(b,j)},T=(b,j)=>{const U=j-b+1;return Array.from({length:U},(V,J)=>b+J)},q=T(1,Math.min(n,t)),R=T(Math.max(t-n+1,n+1),t),Q=Math.max(Math.min(o-w,t-n-w*2-1),n+2),G=Math.min(Math.max(o+w,n+w*2+2),R.length>0?R[0]-2:t-1),z=[...B?["first"]:[],...S?[]:["previous"],...q,...Q>n+2?["start-ellipsis"]:n+1<t-n?[n+1]:[],...T(Q,G),...G<t-n-1?["end-ellipsis"]:t-n>n?[t-n]:[],...R,...E?[]:["next"],...$?["last"]:[]],xe=b=>{switch(b){case"first":return 1;case"previous":return o-1;case"next":return o+1;case"last":return t;default:return null}},m=z.map(b=>typeof b=="number"?{onClick:j=>{H(j,b)},type:"page",page:b,selected:b===o,disabled:g,"aria-current":b===o?"true":void 0}:{onClick:j=>{H(j,xe(b))},type:b,page:xe(b),selected:!1,disabled:g||b.indexOf("ellipsis")===-1&&(b==="next"||b==="last"?o>=t:o<=1)});return ne({items:m},L)}function oa(e){return Ot("MuiPaginationItem",e)}const de=At("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),Bt=Me(i.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Tt=Me(i.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),pt=Me(i.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Lt=Me(i.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),sa=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Dt=(e,n)=>{const{ownerState:s}=e;return[n.root,n[s.variant],n[`size${_e(s.size)}`],s.variant==="text"&&n[`text${_e(s.color)}`],s.variant==="outlined"&&n[`outlined${_e(s.color)}`],s.shape==="rounded"&&n.rounded,s.type==="page"&&n.page,(s.type==="start-ellipsis"||s.type==="end-ellipsis")&&n.ellipsis,(s.type==="previous"||s.type==="next")&&n.previousNext,(s.type==="first"||s.type==="last")&&n.firstLast]},la=e=>{const{classes:n,color:s,disabled:t,selected:f,size:g,shape:E,type:S,variant:_}=e,P={root:["root",`size${_e(g)}`,_,E,s!=="standard"&&`color${_e(s)}`,s!=="standard"&&`${_}${_e(s)}`,t&&"disabled",f&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[S]],icon:["icon"]};return Rt(P,oa,n)},ra=r("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Dt})(({theme:e,ownerState:n})=>ne({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${de.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},n.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},n.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),da=r(Kt,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Dt})(({theme:e,ownerState:n})=>ne({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${de.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${de.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${de.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:je(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${de.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:je(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${de.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},n.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},n.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},n.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:n})=>ne({},n.variant==="text"&&{[`&.${de.selected}`]:ne({},n.color!=="standard"&&{color:(e.vars||e).palette[n.color].contrastText,backgroundColor:(e.vars||e).palette[n.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[n.color].main}},[`&.${de.focusVisible}`]:{backgroundColor:(e.vars||e).palette[n.color].dark}},{[`&.${de.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},n.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${de.selected}`]:ne({},n.color!=="standard"&&{color:(e.vars||e).palette[n.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[n.color].mainChannel} / 0.5)`:je(e.palette[n.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[n.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:je(e.palette[n.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[n.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:je(e.palette[n.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${de.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:je(e.palette[n.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${de.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),ca=r("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,n)=>n.icon})(({theme:e,ownerState:n})=>ne({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},n.size==="small"&&{fontSize:e.typography.pxToRem(18)},n.size==="large"&&{fontSize:e.typography.pxToRem(22)})),ua=l.forwardRef(function(n,s){const t=It({props:n,name:"MuiPaginationItem"}),{className:f,color:g="standard",component:E,components:S={},disabled:_=!1,page:P,selected:B=!1,shape:$="circular",size:w="medium",slots:L={},type:o="page",variant:X="text"}=t,H=Ke(t,sa),T=ne({},t,{color:g,disabled:_,selected:B,shape:$,size:w,type:o,variant:X}),q=Ut(),R=la(T),G=(q?{previous:L.next||S.next||Lt,next:L.previous||S.previous||pt,last:L.first||S.first||Bt,first:L.last||S.last||Tt}:{previous:L.previous||S.previous||pt,next:L.next||S.next||Lt,first:L.first||S.first||Bt,last:L.last||S.last||Tt})[o];return o==="start-ellipsis"||o==="end-ellipsis"?i.jsx(ra,{ref:s,ownerState:T,className:ze(R.root,f),children:"â€¦"}):i.jsxs(da,ne({ref:s,ownerState:T,component:E,disabled:_,className:ze(R.root,f)},H,{children:[o==="page"&&P,G?i.jsx(ca,{as:G,ownerState:T,className:R.icon}):null]}))}),ga=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],xa=e=>{const{classes:n,variant:s}=e;return Rt({root:["root",s],ul:["ul"]},aa,n)},ma=r("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:s}=e;return[n.root,n[s.variant]]}})({}),ba=r("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,n)=>n.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function fa(e,n,s){return e==="page"?`${s?"":"Go to "}page ${n}`:`Go to ${e} page`}const ka=l.forwardRef(function(n,s){const t=It({props:n,name:"MuiPagination"}),{boundaryCount:f=1,className:g,color:E="standard",count:S=1,defaultPage:_=1,disabled:P=!1,getItemAriaLabel:B=fa,hideNextButton:$=!1,hidePrevButton:w=!1,renderItem:L=m=>i.jsx(ua,ne({},m)),shape:o="circular",showFirstButton:X=!1,showLastButton:H=!1,siblingCount:T=1,size:q="medium",variant:R="text"}=t,Q=Ke(t,ga),{items:G}=ia(ne({},t,{componentName:"Pagination"})),z=ne({},t,{boundaryCount:f,color:E,count:S,defaultPage:_,disabled:P,getItemAriaLabel:B,hideNextButton:$,hidePrevButton:w,renderItem:L,shape:o,showFirstButton:X,showLastButton:H,siblingCount:T,size:q,variant:R}),xe=xa(z);return i.jsx(ma,ne({"aria-label":"pagination navigation",className:ze(xe.root,g),ownerState:z,ref:s},Q,{children:i.jsx(ba,{className:xe.ul,ownerState:z,children:G.map((m,b)=>i.jsx("li",{children:L(ne({},m,{color:E,"aria-label":B(m.type,m.page,m.selected),shape:o,size:q,variant:R}))},b))})}))});function ha(e){return i.jsx(ka,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function Pt(){const{innerWidth:e,innerHeight:n}=window;return{width:e,height:n}}function va(){const[e,n]=l.useState(Pt());return l.useEffect(()=>{function s(){n(Pt())}return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),e}var We={},ya=Ft;Object.defineProperty(We,"__esModule",{value:!0});var Mt=We.default=void 0,Ca=ya(Wt()),Sa=i;Mt=We.default=(0,Ca.default)((0,Sa.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const Ba=r(v)({display:"flex",position:"relative",width:"100%"}),Ta=r("img")({width:"100%",marginTop:"57px"}),pa=r(v)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),La=r(v)({display:"flex",alignItems:"baseline"}),Pa=r(v)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),wa=r("img")({width:"100%",height:"100%"}),ja=r(v)({margin:0,position:"absolute",top:"50px",left:"75px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),_a=r(v)(({hamburgercolor:e})=>({position:"absolute",top:"12px",right:"15px",width:"46px","& .hamburger-react":{width:"46px !important",color:e},"& .hamburger-react ~ .MuiBox-root ":{border:`1px solid ${e}`},"@media (max-height: 639px)":{top:"8px",right:"10px"},"@media screen and (orientation: landscape)":{right:"15px"}})),Ea=r("img")({position:"absolute",top:"75px",right:"0px",cursor:"pointer","&:active":{opacity:"0.8"}}),Na=r(v)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),Oa=r("img")({width:"100%","&:active":{opacity:"0.8"}});r("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}});const Aa=r(v)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Ia=r(v)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Ra=r(v)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),wt=r(v)(({active:e,bordercolor:n})=>({width:"50%",height:"37.9px",border:`1px solid ${n}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer",marginBottom:"20px"})),jt=r("img")({}),_t=r(v)(({active:e})=>({marginLeft:"5px"})),Da=r(v)({width:"100%",display:"flex",flexDirection:"column"}),Ma=r(v)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),$a=r(v)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});r(v)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const Ua=r(v)({display:"flex",flexDirection:"column"}),Fa=r(v)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),Ha=r(v)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});r(v)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const za=r(v)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),Ka=r("img")({cursor:"pointer",marginRight:"15px"}),Wa=r(Gt)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),Ga=r(v)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),Va=r("img")({width:"63px"}),Ya=r(v)({margin:"0px",marginLeft:"24px","@media (max-height: 600px)":{"& .MuiBox-root":{fontSize:"14px !important"}}}),Za=r(v)({width:"100%",justifyContent:"space-between",alignItems:"center",margin:"10px 0px"}),Qa=r(v)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"center",padding:"0px 7px"});r(Mt)({marginLeft:"-33px",color:"#17637D",height:"30px"});const Xa=r(v)(({progress:e,progresscolor:n})=>({width:"calc(100% - 60px)",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",borderBottom:`1px solid ${n}`,"::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${e}%`,borderBottom:e!=0?`2px solid ${n}`:"none"}})),qa=r(v)(({istransliteration:e,translatestatus:n})=>({margin:"5px 0px 5px 0px",display:"flex",justifyContent:"space-between",opacity:n=="one"||n=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& .MuiBox-root:first-of-type":{width:"48%"},"& .MuiBox-root:last-child":{marginInlineEnd:"auto",width:e=="true"?"48%":"75%"}})),Ja=r(v)({display:"flex",justifyContent:"space-between"}),en=r(v)(({translatestatus:e})=>({width:"80%",display:"flex",opacity:e=="one"||e=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}})),tn=r("img")({width:"20px",marginLeft:"10px"}),an=r(v)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),Et=r("img")({marginLeft:"3px",cursor:"pointer"}),nn=r(v)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),on=r(v)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),sn=r(v)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),Nt=r(v)(({style:e,translatestatus:n,readalready:s,readbgcolor:t,readtextcolor:f})=>({opacity:n=="one"||n=="none"?"0.5":"1",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:s=="true"?`${t} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:s=="true"?`${f} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:s=="true"?`${f} !important`:`${e.color} !important`}})),ln=r("img")({width:"50%",height:"50%"});function rn(e){const[n,s]=l.useState(""),[t,f]=l.useState(""),{theme:g}=l.useContext(Ie),{logoTextColor:E,headerBGColor:S}=Re(g);return l.useEffect(()=>{var _,P,B,$;e.markTitle?s((_=e.markTitle)==null?void 0:_[e.appLanguage||"en"]):s((($=(B=(P=e.terms)==null?void 0:P.texts.find(w=>w.variable=="Default Book Title"))==null?void 0:B.text)==null?void 0:$[e.appLanguage||"en"])||"Title"),e.markImg?f(e.markImg):f(C.default_cover)},[e.markTitle,e.markImg]),i.jsxs(Ba,{children:[i.jsx(Ta,{src:g==O.DEFAULT||g==O.DARK?C.book_subtract:g==O.BLACK_AND_WHITE?C.book_subtract_BAW:g==O.SAPPHIRE?C.book_subtract_sapphire:C.book_subtract_easyocean}),i.jsxs(pa,{children:[i.jsxs(La,{children:[i.jsx(Pa,{onClick:e.onLogoClick,children:i.jsx(wa,{src:t})}),i.jsx(ja,{children:i.jsx(ge,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:E,children:n})})]}),i.jsx(Ea,{src:g==O.EASY_OCEAN?C.search_easyocean:C.search,onClick:e.onSearchClick})]}),i.jsx(Na,{children:i.jsx(Oa,{src:g==O.DEFAULT||g==O.DARK?C.close2:g==O.BLACK_AND_WHITE?C.close2_BAW:g==O.SAPPHIRE?C.close2_sapphire:C.close2_easyocean,onClick:e.onCloseClick})}),i.jsx(_a,{hamburgercolor:S,children:i.jsx(qt,{isLogin:e.isLogIn,textColor:E,itemBgColor:S,toggleColor:S,terms:e.welcomePageTerms,appLanguage:e.appLanguage,onLogin:e.onLogin,onSettings:e.onSettings})})]})}function dn(e){var j,U,V,J,ie,oe,Y,me,be,K,d,c,u,y,p,k,D,A,ee,te,ae;const[n,s]=l.useState([]),[t,f]=l.useState(),[g,E]=l.useState(!1),[S,_]=l.useState(!1),[P,B]=l.useState(0),[$,w]=l.useState("both"),{theme:L,referenceLanguage:o}=l.useContext(Ie),{mainBGColor:X,altTextColor:H,backgroundColor:T,topTextColor:q,buttonColor:R,buttonTextColor:Q}=Re(L),G=l.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const a=e.userHistory.filter(x=>x.bookId==e.bookId);if(a&&a.length>0)return a[0].readChapterIds}return[]},[e.userHistory]),z=e.subBookId;l.useEffect(()=>{e.bookTitle.en=="Qur'an"||e.bookTitle.en=="Zabur"?E(!1):e.openedSubBook==e.subBookId?E(!0):E(!1)},[e.openedSubBook]),l.useEffect(()=>{var F,M;const a=e.subBooks.filter(I=>I.subBookId===z);let x=0;if(a&&a.length>0&&(x=(F=a[0].chapterInfos)==null?void 0:F.length,f(a[0])),e.currentUser){const I=e.userHistory.filter(N=>N.bookId==e.bookId);if(I&&I.length>0){const N=I[0].subBooks.filter(Z=>Z.subBookId==z);N&&N.length>0&&B(Math.floor(((M=N[0])==null?void 0:M.readChapters)/x*100))}}if(e.subBooks&&e.subBooks.length>0){const I=e.subBooks.filter(N=>N.subBookId==z);if(I&&I.length>0){let N=I[0].chapterInfos;N.sort((Z,se)=>Z.chapterNumber-se.chapterNumber),s(N)}}},[e.subBooks,e.userHistory]),l.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const a=e.subBookInfos.filter(x=>x.subBookId==z);a&&a.length>0?_(!0):_(!1)}},[]),l.useEffect(()=>{var a,x,F,M,I,N,Z,se,fe,ke,he,re,ve,h,Ee,Ne,Oe,Ae,ye,Ce,Se,Be,Te,pe,Le,Pe,Ge,Ve,Ye,Ze,Qe,Xe,qe,Je,et,tt,at,nt,it,ot,st,lt,rt,dt,ct,ut,gt,xt,mt;if(t!=null&&t.noChapter)!((x=(a=t==null?void 0:t.chapterInfos[0])==null?void 0:a.isTranslated)!=null&&x[o])&&!((M=(F=t==null?void 0:t.chapterInfos[0])==null?void 0:F.isTranslated)!=null&&M[e.appLanguage])||!((N=(I=t==null?void 0:t.chapterInfos[0])==null?void 0:I.isPublished)!=null&&N[o])&&!((se=(Z=t==null?void 0:t.chapterInfos[0])==null?void 0:Z.isPublished)!=null&&se[e.appLanguage])?w("none"):(!((ke=(fe=t==null?void 0:t.chapterInfos[0])==null?void 0:fe.isTranslated)!=null&&ke[o])||!((re=(he=t==null?void 0:t.chapterInfos[0])==null?void 0:he.isTranslated)!=null&&re[e.appLanguage]))&&((h=(ve=t==null?void 0:t.chapterInfos[0])==null?void 0:ve.isPublished)!=null&&h[o]||!((Ne=(Ee=t==null?void 0:t.chapterInfos[0])==null?void 0:Ee.isPublished)!=null&&Ne[e.appLanguage]))?w("one"):w("both");else if((t==null?void 0:t.subBookNumber)!==0){const $t=(Oe=t==null?void 0:t.chapterInfos)==null?void 0:Oe.length;for(let we=1;we<$t-1;we++)if(!((ye=(Ae=t==null?void 0:t.chapterInfos[we])==null?void 0:Ae.isTranslated)!=null&&ye[o])&&!((Se=(Ce=t==null?void 0:t.chapterInfos[we])==null?void 0:Ce.isTranslated)!=null&&Se[e.appLanguage])||!((Te=(Be=t==null?void 0:t.chapterInfos[we])==null?void 0:Be.isPublished)!=null&&Te[o])&&!((Le=(pe=t==null?void 0:t.chapterInfos[we])==null?void 0:pe.isPublished)!=null&&Le[e.appLanguage])){w("none");break}else if((!((Ge=(Pe=t==null?void 0:t.chapterInfos[1])==null?void 0:Pe.isTranslated)!=null&&Ge[o])||!((Ye=(Ve=t==null?void 0:t.chapterInfos[1])==null?void 0:Ve.isTranslated)!=null&&Ye[e.appLanguage]))&&((Qe=(Ze=t==null?void 0:t.chapterInfos[1])==null?void 0:Ze.isPublished)!=null&&Qe[o]||!((qe=(Xe=t==null?void 0:t.chapterInfos[1])==null?void 0:Xe.isPublished)!=null&&qe[e.appLanguage]))){w("one");break}}else!((et=(Je=t==null?void 0:t.chapterInfos[0])==null?void 0:Je.isTranslated)!=null&&et[o])&&!((at=(tt=t==null?void 0:t.chapterInfos[0])==null?void 0:tt.isTranslated)!=null&&at[e.appLanguage])||!((it=(nt=t==null?void 0:t.chapterInfos[0])==null?void 0:nt.isPublished)!=null&&it[o])&&!((st=(ot=t==null?void 0:t.chapterInfos[0])==null?void 0:ot.isPublished)!=null&&st[e.appLanguage])?w("none"):(!((rt=(lt=t==null?void 0:t.chapterInfos[1])==null?void 0:lt.isTranslated)!=null&&rt[o])||!((ct=(dt=t==null?void 0:t.chapterInfos[1])==null?void 0:dt.isTranslated)!=null&&ct[e.appLanguage]))&&((gt=(ut=t==null?void 0:t.chapterInfos[1])==null?void 0:ut.isPublished)!=null&&gt[o]||!((mt=(xt=t==null?void 0:t.chapterInfos[1])==null?void 0:xt.isPublished)!=null&&mt[e.appLanguage]))?w("one"):w("both")},[t]);const xe=l.useCallback(a=>{_(x=>!x),e.onDownload(a)},[]),m=()=>{var a,x;if(t!=null&&t.noChapter){const F=(a=t==null?void 0:t.chapterInfos[0])==null?void 0:a.isTranslated,M=(x=t==null?void 0:t.chapterInfos[0])==null?void 0:x.isPublished;!(F!=null&&F[o])&&!(F!=null&&F[e.appLanguage])||!(M!=null&&M[o])&&!(M!=null&&M[e.appLanguage])?ce.custom(I=>{var N,Z,se,fe,ke,he;return i.jsx(ue,{text:((se=(Z=(N=e.terms)==null?void 0:N.texts.find(re=>re.variable=="None Translated"))==null?void 0:Z.text)==null?void 0:se[e.appLanguage])||((he=(ke=(fe=e.terms)==null?void 0:fe.texts.find(re=>re.variable=="None Translated"))==null?void 0:ke.text)==null?void 0:he.en)||"",visible:I.visible})}):e.moveToReading(t==null?void 0:t.chapterInfos[0].chapterId,t.subBookId)}else E(!g),e.handleOpenedSubBook(e.subBookId)},b=(a,x)=>{x=="none"?ce.custom(F=>{var M,I,N;return i.jsx(ue,{text:((N=(I=(M=e.terms)==null?void 0:M.texts.find(Z=>Z.variable=="None Translated"))==null?void 0:I.text)==null?void 0:N[e.appLanguage])||"",visible:F.visible})}):e.moveToReading(a,t.subBookId)};return i.jsxs(Za,{id:e.id,children:[i.jsxs(Qa,{children:[i.jsxs(Xa,{progress:P,progresscolor:R,onClick:m,children:[(t==null?void 0:t.subBookNumber)!=0&&i.jsxs(qa,{istransliteration:((j=t==null?void 0:t.subBookTitle)==null?void 0:j[$e])!=null?"true":"false",translatestatus:$,children:[((U=t==null?void 0:t.subBookTitle)==null?void 0:U[$e])&&i.jsx(ge,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:H,language:bt,children:(t==null?void 0:t.subBookNumber)+". "+((V=t==null?void 0:t.subBookTitle)==null?void 0:V[$e])}),i.jsx(ge,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:H,language:bt,direction:"rtl",children:((Y=(oe=(ie=(J=e.subBookTerms)==null?void 0:J.texts)==null?void 0:ie.find(a=>{var x;return(a==null?void 0:a.variable)===((x=t==null?void 0:t.subBookTitle)==null?void 0:x.en)}))==null?void 0:oe.text)==null?void 0:Y.ar)||((me=t==null?void 0:t.subBookTitle)==null?void 0:me.ar)||((be=t==null?void 0:t.subBookTitle)==null?void 0:be.en)})]}),i.jsxs(Ja,{children:[i.jsxs(en,{translatestatus:$,children:[i.jsx(ge,{fontFamily:'"Baloo Da 2"',color:H,children:e.bookTitle.en==="Zabur"&&(t==null?void 0:t.subBookNumber)!=0?(((u=(c=(d=(K=e.subBookTerms)==null?void 0:K.texts)==null?void 0:d.find(a=>(a==null?void 0:a.variable)==="Psalm"))==null?void 0:c.text)==null?void 0:u[e.appLanguage||"en"])||"Psalm")+` ${t==null?void 0:t.subBookNumber}`:((D=(k=(p=(y=e.subBookTerms)==null?void 0:y.texts)==null?void 0:p.find(a=>{var x;return(a==null?void 0:a.variable)===((x=t==null?void 0:t.subBookTitle)==null?void 0:x.en)}))==null?void 0:k.text)==null?void 0:D[e.appLanguage||"en"])||((A=t==null?void 0:t.subBookTitle)==null?void 0:A.en)}),(t==null?void 0:t.subBookNumber)==0&&i.jsx(tn,{src:C.icon_intro})]}),e.currentUser&&P!==0&&!(t!=null&&t.noChapter)&&i.jsx(ge,{fontFamily:'"Baloo Da 2"',color:R,children:`${P}%`})]})]}),i.jsxs(an,{isdownloaded:S?"true":"false",children:[i.jsx(Et,{src:S?L==O.DEFAULT||L==O.EASY_OCEAN?C.download_cancel:C.download_cancel_white:L==O.DEFAULT||L==O.EASY_OCEAN?C.download:C.download_white,onClick:()=>xe(z)}),S&&i.jsx(Et,{src:L==O.DEFAULT||L==O.EASY_OCEAN?C.download_refresh:C.download_refresh_white,onClick:()=>e.onDownloadRefresh(z)})]})]}),g&&i.jsxs(nn,{style:{backgroundColor:T},children:[i.jsx(on,{children:i.jsx(ge,{fontFamily:"Inter",color:q,children:((ae=(te=(ee=e.terms)==null?void 0:ee.texts.find(a=>a.variable=="Chapter"))==null?void 0:te.text)==null?void 0:ae[e.appLanguage])||""})}),i.jsx(sn,{children:n==null?void 0:n.map((a,x)=>{var F,M,I,N,Z,se,fe,ke,he,re,ve,h,Ee,Ne,Oe,Ae;return a.chapterNumber==0?i.jsx(Nt,{translatestatus:!((F=a==null?void 0:a.isTranslated)!=null&&F[o])&&!((M=a==null?void 0:a.isTranslated)!=null&&M[e.appLanguage])||!((I=a==null?void 0:a.isPublished)!=null&&I[o])&&!((N=a==null?void 0:a.isPublished)!=null&&N[e.appLanguage])?"none":(!((Z=a==null?void 0:a.isTranslated)!=null&&Z[o])||!((se=a==null?void 0:a.isTranslated)!=null&&se[e.appLanguage]))&&((fe=a==null?void 0:a.isPublished)!=null&&fe[o]||!((ke=a==null?void 0:a.isPublished)!=null&&ke[e.appLanguage]))?"one":"both",readalready:G&&G.length>0&&G.includes(a.chapterId)?"true":"false",style:{backgroundColor:X,color:H},readbgcolor:R,readtextcolor:Q,onClick:()=>{var ye,Ce,Se,Be,Te,pe,Le,Pe;return b(a.chapterId,!((ye=a==null?void 0:a.isTranslated)!=null&&ye[o])&&!((Ce=a==null?void 0:a.isTranslated)!=null&&Ce[e.appLanguage])||!((Se=a==null?void 0:a.isPublished)!=null&&Se[o])&&!((Be=a==null?void 0:a.isPublished)!=null&&Be[e.appLanguage])?"none":(!((Te=a.isTranslated)!=null&&Te[o])||!((pe=a==null?void 0:a.isTranslated)!=null&&pe[e.appLanguage]))&&((Le=a==null?void 0:a.isPublished)!=null&&Le[o]||!((Pe=a==null?void 0:a.isPublished)!=null&&Pe[e.appLanguage]))?"one":"both")},children:i.jsx(ln,{src:C.icon_intro})},x):i.jsx(Nt,{translatestatus:!((he=a==null?void 0:a.isTranslated)!=null&&he[o])&&!((re=a==null?void 0:a.isTranslated)!=null&&re[e.appLanguage])||!((ve=a==null?void 0:a.isPublished)!=null&&ve[o])&&!((h=a==null?void 0:a.isPublished)!=null&&h[e.appLanguage])?"none":(!((Ee=a==null?void 0:a.isTranslated)!=null&&Ee[o])||!((Ne=a==null?void 0:a.isTranslated)!=null&&Ne[e.appLanguage]))&&((Oe=a==null?void 0:a.isPublished)!=null&&Oe[o]||!((Ae=a==null?void 0:a.isPublished)!=null&&Ae[e.appLanguage]))?"one":"both",readalready:G&&G.length>0&&G.includes(a.chapterId)?"true":"false",style:{backgroundColor:X,color:H},readbgcolor:R,readtextcolor:Q,onClick:()=>{var ye,Ce,Se,Be,Te,pe,Le,Pe;return b(a.chapterId,!((ye=a==null?void 0:a.isTranslated)!=null&&ye[o])&&!((Ce=a==null?void 0:a.isTranslated)!=null&&Ce[e.appLanguage])||!((Se=a==null?void 0:a.isPublished)!=null&&Se[o])&&!((Be=a==null?void 0:a.isPublished)!=null&&Be[e.appLanguage])?"none":(!((Te=a.isTranslated)!=null&&Te[o])||!((pe=a.isTranslated)!=null&&pe[e.appLanguage]))&&(!((Le=a==null?void 0:a.isPublished)!=null&&Le[o])||!((Pe=a==null?void 0:a.isPublished)!=null&&Pe[e.appLanguage]))?"one":"both")},children:i.jsx(ge,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:a.chapterNumber})},x)})})]})]})}function cn(e){const[n,s]=l.useState([]);return l.useEffect(()=>{let t=e.subBooks;t&&t.sort((f,g)=>f.subBookNumber-g.subBookNumber),s(t)},[e.subBooks]),i.jsx(i.Fragment,{children:n&&n.length>0&&n.map((t,f)=>i.jsx(dn,{id:`subbook-${t.subBookId}`,bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:n,subBookId:t.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,subBookTerms:e.subBookTerms,appLanguage:e.appLanguage,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},f))})}function un(e){const[n,s]=l.useState(""),[t,f]=l.useState([]),[g,E]=l.useState(1),[S,_]=l.useState([]),{theme:P,readingLanguage:B}=l.useContext(Ie),{backgroundColor:$,topTextColor:w,mainTextColor:L}=Re(P),o=Xt(e.deviceHeight),X=g*o,H=X-o,T=e.currentUser&&t.slice(H,X);l.useEffect(()=>{var m,b,j,U,V,J,ie,oe,Y,me;if(e.subBooks&&e.subBooks.length>0){const be=e.subBooks.map(K=>{var d;return{label:(d=K.subBookTitle)==null?void 0:d[B],value:K.subBookId}});be.unshift({label:((m=e.bookTitle)==null?void 0:m.en)=="Qur'an"||((b=e.bookTitle)==null?void 0:b.en)=="Zabur"?((U=(j=e.terms.texts.find(K=>K.variable=="All Chapters"))==null?void 0:j.text)==null?void 0:U[B])||((J=(V=e.terms.texts.find(K=>K.variable=="All Chapters"))==null?void 0:V.text)==null?void 0:J.en):((oe=(ie=e.terms.texts.find(K=>K.variable=="All SubBooks"))==null?void 0:ie.text)==null?void 0:oe[B])||((me=(Y=e.terms.texts.find(K=>K.variable=="All SubBooks"))==null?void 0:Y.text)==null?void 0:me.en),value:"all"}),_(be)}},[e.subBooks]),l.useEffect(()=>{S.length>0&&s(S[0].value)},[S]),l.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const m=e.bookmark.filter(b=>b.subBookId===n);f(n==="all"||n===""?e.bookmark:m)}else f([]),E(0);g>1&&T.length==1&&E(m=>m-1)},[e.bookmark]);const q=(m,b)=>{E(b)},R=l.useCallback(m=>{const b=m.target.value;s(b);const j=e.bookmark.filter(U=>U.subBookId===b);f(b==="all"?e.bookmark:j)},[e.bookmark]),Q=()=>{var m,b,j,U,V,J,ie,oe;return i.jsx(Ma,{style:{backgroundColor:$},children:i.jsx(Jt,{label:((b=(m=e.terms.texts.find(Y=>Y.variable=="Filter"))==null?void 0:m.text)==null?void 0:b[B])||((U=(j=e.terms.texts.find(Y=>Y.variable=="Filter"))==null?void 0:j.text)==null?void 0:U.en)||"",detail:i.jsxs($a,{children:[i.jsx(ge,{color:w,children:((J=(V=e.terms.texts.find(Y=>Y.variable=="Show"))==null?void 0:V.text)==null?void 0:J[B])||((oe=(ie=e.terms.texts.find(Y=>Y.variable=="Show"))==null?void 0:ie.text)==null?void 0:oe.en)||""}),i.jsx(ea,{label:"",options:S,value:n,backgroundColor:$,textColor:w,onChange:R})]})})})},G=()=>i.jsx(Ua,{children:(T==null?void 0:T.length)>0&&T.map((m,b)=>{var j,U,V,J,ie,oe,Y,me,be,K,d,c,u,y,p,k,D,A,ee,te,ae,a,x,F,M,I,N,Z,se,fe,ke,he,re,ve;return i.jsxs(v,{children:[i.jsxs(Fa,{children:[i.jsxs(Ha,{onClick:()=>e.moveToReadingFromBookmark(m._id),children:[i.jsx(ge,{color:L,children:((j=m.subBookTitle)==null?void 0:j[B])||((U=m.subBookTitle)==null?void 0:U.en)}),i.jsx(ge,{color:L,children:m.bookTitle.en=="Qur'an"||m.bookTitle.en=="Zabur"?m.chapterNumber>0?`${((J=(V=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:V.text)==null?void 0:J[B])||((oe=(ie=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:ie.text)==null?void 0:oe.en)} ${m.chapterNumber}, ${((me=(Y=e.terms.texts.find(h=>h.variable=="Aya"))==null?void 0:Y.text)==null?void 0:me[B])||((K=(be=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:be.text)==null?void 0:K.en)} ${m.verseNumber}`:`${((c=(d=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:d.text)==null?void 0:c[B])||((y=(u=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:u.text)==null?void 0:y.en)} _ , ${((k=(p=e.terms.texts.find(h=>h.variable=="Aya"))==null?void 0:p.text)==null?void 0:k[B])||((A=(D=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:D.text)==null?void 0:A.en)} ${m.verseNumber}`:m.chapterNumber>0?`${((te=(ee=e.terms.texts.find(h=>h.variable=="Chapter Bookmark"))==null?void 0:ee.text)==null?void 0:te[B])||((a=(ae=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:ae.text)==null?void 0:a.en)} ${m.chapterNumber}, ${((F=(x=e.terms.texts.find(h=>h.variable=="Aya"))==null?void 0:x.text)==null?void 0:F[B])||((I=(M=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:M.text)==null?void 0:I.en)} ${m.verseNumber}`:`${((Z=(N=e.terms.texts.find(h=>h.variable=="Chapter Bookmark"))==null?void 0:N.text)==null?void 0:Z[B])||((fe=(se=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:se.text)==null?void 0:fe.en)} _ , ${((he=(ke=e.terms.texts.find(h=>h.variable=="Aya"))==null?void 0:ke.text)==null?void 0:he[B])||((ve=(re=e.terms.texts.find(h=>h.variable=="Surah Bookmark"))==null?void 0:re.text)==null?void 0:ve.en)} ${m.verseNumber}`})]}),i.jsx(Ka,{src:P==O.DEFAULT||P==O.EASY_OCEAN||P==O.EASY_SUNRISE?C.black_bookmark:C.white_bookmark,onClick:()=>e.removeBookmark(m._id)})]}),i.jsx(za,{})]},b)})}),z=()=>i.jsx(Wa,{buttoncolor:L,children:i.jsx(ha,{count:e.currentUser?Math.ceil(t.length/o):0,page:g,hidePrevButton:!0,hideNextButton:!0,onChange:q})}),xe=()=>{var m,b,j,U;return i.jsxs(Ga,{style:{backgroundColor:$},children:[i.jsx(Va,{src:P==O.DEFAULT||P==O.BLACK_AND_WHITE?C.swipe:P==O.EASY_OCEAN?C.swipe_easyocean:C.swipe_white}),i.jsx(Ya,{style:{color:w},children:((b=(m=e.terms.texts.find(V=>V.variable=="Bookmark Help"))==null?void 0:m.text)==null?void 0:b[B])||((U=(j=e.terms.texts.find(V=>V.variable=="Bookmark Help"))==null?void 0:j.text)==null?void 0:U.en)})]})};return i.jsxs(Da,{children:[Q(),G(),z(),xe()]})}function gn(e){var B,$,w,L;const[n,s]=l.useState(le),{theme:t}=l.useContext(Ie),{mainBGColor:f,headerBGColor:g,buttonColor:E,buttonTextColor:S,mainTextColor:_}=Re(t),P=o=>{e.currentUser?s(o):ce.custom(X=>{var H,T,q,R;return i.jsx(ue,{text:((T=(H=e.terms.texts.find(Q=>Q.variable=="Bookmark Read Description"))==null?void 0:H.text)==null?void 0:T[e.appLanguage])||((R=(q=e.terms.texts.find(Q=>Q.variable=="Bookmark Read Description"))==null?void 0:q.text)==null?void 0:R.en)||"",visible:X.visible})})};return i.jsx(Aa,{style:{backgroundColor:g},children:i.jsxs(Ia,{style:{backgroundColor:f},children:[i.jsxs(Ra,{children:[i.jsxs(wt,{active:n==le?"true":"false",style:{backgroundColor:n==le?E:f},bordercolor:_,onClick:()=>P(le),children:[i.jsx(jt,{src:t==O.DEFAULT?C.index:t==O.EASY_OCEAN?n==le?C.index_active:C.index:n==le?C.index:C.index_active}),i.jsx(_t,{active:n==le?"true":"false",children:i.jsx(ge,{fontSize:16,fontWeight:"500",lineHeight:24,color:n==le?S:_,children:(($=(B=e.terms.texts.find(o=>o.variable=="Index"))==null?void 0:B.text)==null?void 0:$[e.appLanguage])||"Index"})})]}),i.jsxs(wt,{active:n==le?"false":"true",style:{backgroundColor:n==Ue?E:f},bordercolor:_,onClick:()=>P(Ue),children:[i.jsx(jt,{src:t==O.DEFAULT?C.bookmark2_default:t==O.EASY_OCEAN?n==le?C.bookmark2_default:C.bookmark2_white:n==le?C.bookmark2_white:C.bookmark2_default}),i.jsx(_t,{active:n==le?"false":"true",children:i.jsx(ge,{fontSize:16,fontWeight:"500",lineHeight:24,color:n==Ue?S:_,children:((L=(w=e.terms.texts.find(o=>o.variable=="Bookmarks"))==null?void 0:w.text)==null?void 0:L[e.appLanguage])||"Bookmarks"})})]})]}),n==le?i.jsx(cn,{bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,subBookTerms:e.subBookTerms,appLanguage:e.appLanguage,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):i.jsx(un,{bookTitle:e.bookTitle,subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark.filter(o=>o.bookId==e.bookId),deviceHeight:e.deviceHeight,terms:e.terms,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const xn=r(v)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function mn(e){var me,be,K;const[n,s]=l.useState(),[t,f]=l.useState(!1),[g,E]=l.useState(),[S,_]=l.useState(),[P,B]=l.useState(),[$,w]=l.useState(),[L,o]=l.useState(),[X,H]=l.useState(),T=Yt(),{height:q}=va(),{theme:R}=l.useContext(Ie),{mainBGColor:Q}=Re(R),G=l.useCallback(()=>{e.currentBook&&Ct.fetchBookInfo(e.currentBook).then(d=>{var c,u,y;if(e.dispatch({type:W.ADD_BOOKINFO,payload:{bookInfo:d}}),s(d),e.currentUser&&!e.userHistory.some(k=>k.bookId==e.currentBook)&&d.subBooks){const k=d.subBooks.find(ee=>ee.subBookNumber==0),D=(c=k==null?void 0:k.chapterInfos[0])==null?void 0:c.chapterId,A=k==null?void 0:k.subBookId;(y=(u=k==null?void 0:k.chapterInfos[0])==null?void 0:u.isTranslated)!=null&&y[e.appLanguage]?m(D,A):ce.custom(ee=>{var te,ae,a;return i.jsx(ue,{text:((a=(ae=(te=g==null?void 0:g.texts)==null?void 0:te.find(x=>x.variable=="None Translated"))==null?void 0:ae.text)==null?void 0:a[e.appLanguage])||"",type:De.BOOKMARK,visible:ee.visible})})}}).catch(d=>{ce.custom(c=>i.jsx(ue,{text:d,type:De.BOOKMARK,visible:c.visible}))}).finally(()=>{f(!1)})},[e.currentBook,e.dispatch,e.userHistory,e.currentUser]),z=l.useCallback(async d=>{var c,u,y;try{const p=await Ct.fetchSubBookInfo(d);e.dispatch({type:W.ADD_SUBBOOKINFO,payload:{subBookInfo:p}}),e.dispatch({type:W.ADD_SUBBOOK,payload:{subBook:p}}),Zt(p);const k=(c=e.bookInfos)==null?void 0:c.find(A=>(A==null?void 0:A.bookId)==e.currentBook),D=k&&((u=k==null?void 0:k.subBooks)==null?void 0:u.find(A=>(A==null?void 0:A.subBookId)==d));if(D){const A=(y=D==null?void 0:D.subBookTitle)==null?void 0:y.en;vt("Sub books","download_subbook",A)}f(!1)}catch(p){ce.custom(k=>i.jsx(ue,{text:p,visible:k.visible})),f(!1)}},[e.dispatch]);l.useEffect(()=>{var D,A,ee,te,ae,a;const d=e.terms.find(x=>x.pageTitle=="Index & Bookmark Page"),c=e.terms.find(x=>x.pageTitle=="Welcome Page"),u=e.terms.find(x=>x.pageTitle==="Origin Injil Sub-book Names"),y=e.terms.find(x=>x.pageTitle==="Origin Qur'an Surah Names"),p=e.terms.find(x=>x.pageTitle==="Origin Tawrat Sub-book Names"),k=e.terms.find(x=>x.pageTitle==="Origin Zabur Sub-book Names");(D=d==null?void 0:d.isPublished)!=null&&D[e.appLanguage]&&E(d),(A=c==null?void 0:c.isPublished)!=null&&A[e.appLanguage]&&_(c),(ee=u==null?void 0:u.isPublished)!=null&&ee[e.appLanguage]&&B(u),(te=y==null?void 0:y.isPublished)!=null&&te[e.appLanguage]&&w(y),(ae=p==null?void 0:p.isPublished)!=null&&ae[e.appLanguage]&&o(p),(a=k==null?void 0:k.isPublished)!=null&&a[e.appLanguage]&&H(k)},[e.terms,e.appLanguage]),l.useEffect(()=>{(async()=>{var c;f(!0),!((c=e.bookInfos)!=null&&c.length)||!e.bookInfos.some(u=>u.bookId===e.currentBook)?await G():(s(e.bookInfos.find(u=>u.bookId===e.currentBook)),f(!1))})(),e.currentUser&&St.fetchBookmarks().then(c=>{e.dispatch({type:W.SET_BOOKMARKS,payload:{bookmark:c}})}).catch(c=>{c.status===401&&c.response.data.message===ft&&(ce.custom(u=>i.jsx(ue,{text:c.response.data.message,visible:u.visible})),He.logout(),T("/login"))})},[e.currentBook,e.bookInfos,e.currentUser,e.dispatch]),l.useEffect(()=>{if(e.currentSubBook&&e.prevPage===Fe.READING){const c=setTimeout(()=>{const u=document.getElementById(`subbook-${e.currentSubBook}`);u&&u.scrollIntoView({behavior:"smooth"})},100);return()=>clearTimeout(c)}},[e.currentSubBook,e.prevPage]);const xe=()=>{ce.custom(d=>{var c,u,y;return i.jsx(ue,{text:((y=(u=(c=g==null?void 0:g.texts)==null?void 0:c.find(p=>p.variable=="Not Built Yet"))==null?void 0:u.text)==null?void 0:y[e.appLanguage])||"",visible:d.visible})})},m=(d,c)=>{var k,D,A,ee,te,ae;e.dispatch({type:W.SET_CURRENT_CHAPTER,payload:{currentChapter:d}}),e.dispatch({type:W.SET_CURRENT_SUBBOOK,payload:{currentSubBook:c}}),e.dispatch({type:W.SET_PREVIOUS_PAGE,payload:{prevPage:Fe.BOOKS}});const u=(k=e.bookInfos)==null?void 0:k.find(a=>(a==null?void 0:a.bookId)==e.currentBook),y=u&&((D=u==null?void 0:u.subBooks)==null?void 0:D.find(a=>(a==null?void 0:a.subBookId)==c)),p=(A=y==null?void 0:y.chapterInfos)==null?void 0:A.find(a=>(a==null?void 0:a.chapterId)==d);if(y){const a=(ee=y==null?void 0:y.subBookTitle)==null?void 0:ee.en,x=p==null?void 0:p.chapterNumber;vt("Chapter","read_chapter",((te=n==null?void 0:n.bookTitle)==null?void 0:te.en)=="Qur'an"||((ae=n==null?void 0:n.bookTitle)==null?void 0:ae.en)=="Zabur"?a:`${a}-${x==0?"Introduction":x}`)}T("/reading")},b=()=>{T("/library"),e.dispatch({type:W.SET_PREVIOUS_PAGE,payload:{prevPage:Fe.BOOKS}}),e.dispatch({type:W.SET_CURRENT_SUBBOOK,payload:{currentSubBook:""}})},j=l.useCallback(async d=>{f(!0),yt()<kt?await Qt(d)?(await ht(d),e.dispatch({type:W.REMOVE_SUBBOOKINFO,payload:{subBookId:d}})):await z(d):ce.custom(u=>{var y,p,k;return i.jsx(ue,{text:((k=(p=(y=g==null?void 0:g.texts)==null?void 0:y.find(D=>D.variable=="Not Enough Space"))==null?void 0:p.text)==null?void 0:k[e.appLanguage])||"Not enough space",visible:u.visible})}),f(!1)},[z,e.dispatch]),U=l.useCallback(async d=>{f(!0),await ht(d),e.dispatch({type:W.REMOVE_SUBBOOKINFO,payload:{subBookId:d}}),yt()<kt?await z(d):ce.custom(u=>{var y,p,k;return i.jsx(ue,{text:((k=(p=(y=g==null?void 0:g.texts)==null?void 0:y.find(D=>D.variable=="Not Enough Space"))==null?void 0:p.text)==null?void 0:k[e.appLanguage])||"Not enough space",visible:u.visible})}),f(!1)},[z,e.dispatch]),V=l.useCallback(d=>{if(f(!0),e.bookmark&&e.bookmark.length>0){const c=e.bookmark.find(u=>u._id===d);if(c){const{chapterId:u,subBookId:y,verseId:p}=c;e.dispatch({type:W.SET_CURRENT_SUBBOOK,payload:{currentSubBook:y}}),e.dispatch({type:W.SET_CURRENT_CHAPTER,payload:{currentChapter:u}}),e.dispatch({type:W.SET_CURRENT_VERSE,payload:{currentVerse:p}}),T("/reading"),f(!1)}}},[e.currentBook,T,e.bookmark]),J=l.useCallback(d=>{f(!0),St.deleteBookmark(d).then(c=>{e.dispatch({type:W.REMOVE_BOOKMARK,payload:{bookmarkId:d}}),ce.custom(u=>i.jsx(ue,{text:c.message,type:De.BOOKMARK,visible:u.visible})),f(!1)}).catch(c=>{c.status==401&&c.response.data.message==ft&&(ce.custom(u=>i.jsx(ue,{text:c.response.data.message,type:De.BOOKMARK,visible:u.visible})),He.logout(),T("/login")),f(!1)})},[e.dispatch]),ie=l.useCallback(d=>{e.dispatch({type:W.SET_CURRENT_SUBBOOK,payload:{currentSubBook:e.currentSubBook===d?"":d}})},[e.currentSubBook,e.dispatch]),oe=()=>{e.dispatch({type:W.RESET_USER}),e.dispatch({type:W.RESET_BOOK}),e.dispatch({type:W.RESET_PAGE_STATUS}),He.logout()},Y=()=>{T("/login")};return i.jsxs(xn,{style:{backgroundColor:Q},children:[i.jsx(rn,{markImg:n&&Ht+n.bookImage,markTitle:n==null?void 0:n.bookTitle,isLogIn:!!e.currentUser,terms:g||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},welcomePageTerms:S||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},appLanguage:e.appLanguage,onLogoClick:()=>T("/home"),onCloseClick:b,onLogin:e.currentUser?oe:Y,onSettings:()=>T("/settings"),onSearchClick:xe}),i.jsx(gn,{bookId:e.currentBook,bookTitle:n==null?void 0:n.bookTitle,bookImage:n==null?void 0:n.bookImage,subBooks:n==null?void 0:n.subBooks,deviceHeight:q,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.currentSubBook,terms:g||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},subBookTerms:(((me=n==null?void 0:n.bookTitle)==null?void 0:me.en)==="Injil"?P:((be=n==null?void 0:n.bookTitle)==null?void 0:be.en)==="Qur'an"?$:((K=n==null?void 0:n.bookTitle)==null?void 0:K.en)==="Zabur"?X:L)||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},appLanguage:e.appLanguage,moveToReading:m,moveToReadingFromBookmark:V,onDownload:j,onDownloadRefresh:U,removeBookmark:J,handleOpenedSubBook:ie}),t&&i.jsx(ta,{})]})}function bn(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,terms:e.terms.terms,currentBook:e.pageStatus.currentBook,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,currentSubBook:e.pageStatus.currentSubBook,prevPage:e.pageStatus.prevPage,currentUser:e.user.currentUser,appLanguage:e.user.appLanguage,readingLanguage:e.user.readingLanguage,activeChapterId:e.books.activeChapterId}}const jn=Vt(bn)(mn);export{jn as default};
