var T=Object.defineProperty;var I=(t,e,r)=>e in t?T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var _=(t,e,r)=>I(t,typeof e!="symbol"?e+"":e,r);import{b as m,j as o,au as L,a3 as y,ap as P,ay as k}from"./index-BlVR3GtE.js";import{s as n,B as l,S as C,g as S,c as R,u as v,d as w,k as M}from"./App-BXdxJk5y.js";import{L as F}from"./index-BNfifEIC.js";import{C as G}from"./index-l8TiX9lb.js";import{A as D}from"./index-DKUX1jrh.js";import{T as b,I as A}from"./index-BXFYU2Yo.js";import{d as z}from"./ArrowBack-DFfRKsio.js";import{a as N}from"./axios-upsvKRUO.js";import"./index-D78ZPMqG.js";const B=n("img")({width:"100%",marginTop:"20px"}),W=n(l)({width:"100%",height:"100%",padding:"0px 6px",position:"relative",overflowX:"hidden",scrollbarGutter:"stable both-edges"}),H=n(l)({width:"100%",marginTop:"20px","& .MuiAccordion-gutters":{width:"100%"},"& .MuiAccordion-root .MuiAccordionSummary-root .Mui-expanded":{margin:"12px 0px !important"}}),J=n(l)({width:"100%","& .MuiBox-root":{padding:"0px "}}),U=n(l)({width:"100%",margin:"20px 0px","& .MuiBox-root":{textWrap:"wrap"}}),O=n(l)({position:"fixed",zIndex:"3",bottom:"0px",width:"100%",height:"85px",overflow:"hidden"}),K=n("img")({width:"100%",position:"absolute",bottom:"0px","@media (min-width: 750px)":{top:"0px"},"@media (min-width: 1050px)":{top:"-10px"},"@media (min-width: 1450px)":{top:"-20px"}}),$=n(l)(({backgroundcolor:t})=>({display:"flex",width:"110px",justifyContent:"space-between",alignItems:"center",position:"relative",bottom:"-23px",left:"25px",boxSizing:"border-box",padding:"10px 20px",borderRadius:"30px",backgroundColor:t})),X=n(l)(({textcolor:t})=>({display:"flex",alignItems:"center","& svg":{fill:t}}));function q(t){var p;const{theme:e,textSize:r}=m.useContext(C),{mainBGColor:c,textColor:d}=S(e),s=(i,u)=>{var h,f;return i.image?o.jsx(B,{src:i.image.url,alt:i.image.alt},u):i.isCollapse?o.jsx(H,{children:o.jsx(D,{label:(h=i.title)==null?void 0:h[t.currentLanguage],outArrow:!0,detail:o.jsx(J,{children:i.content.map((a,x)=>!a.url&&!a.isTitle?o.jsx(b,{children:a==null?void 0:a[t.currentLanguage]},x):!a.url&&a.isTitle?o.jsx(b,{fontWeight:"bold",isTitle:!0,children:a==null?void 0:a[t.currentLanguage]},x):o.jsx(B,{src:a.url,alt:a.alt},x))})})},u):o.jsx(b,{fontFamily:"Inter",lineHeight:r+20,direction:t.currentLanguage===L?"rtl":"ltr",fontSize:i.title?r+2:r,fontWeight:i.title?"bold":"500",textAlign:i.title?"center":"left",children:(f=i.text)==null?void 0:f[t.currentLanguage]},u)};return o.jsx(U,{style:{backgroundColor:c,color:d},children:o.jsx(W,{children:(p=t.verses)==null?void 0:p.map((i,u)=>s(i,u))})})}function Q(t){const{theme:e}=m.useContext(C),{mainBGColor:r,altTextColor:c}=S(e),d=()=>o.jsx(K,{src:e==y.DEFAULT||e==y.DARK?A.bar_reading_subtract:e==y.BLACK_AND_WHITE?A.bar_reading_subtract_BAW:e==y.SAPPHIRE?A.bar_reading_subtract_sapphire:A.bar_reading_subtract_easyocean}),s=()=>o.jsxs($,{backgroundcolor:r,onClick:t.goBack,children:[o.jsx(X,{textcolor:c,children:o.jsx(z,{})}),o.jsx(b,{color:"#17637D",fontFamily:"Inter",fontWeight:"400",fontSize:16,lineHeight:24,children:"Back"})]});return o.jsxs(O,{children:[d(),s()]})}const Y=n(l)({width:"100%",display:"flex",flexDirection:"column"}),Z=n(l)({width:"100%",height:"calc(100dvh - 100px)",display:"flex",boxSizing:"border-box",padding:"20px"}),V=n(l)({width:"100%",display:"flex",boxSizing:"border-box"});class tt{constructor(){_(this,"fetchArticle",e=>new Promise((r,c)=>{const d=P+`/journey/${e}/article`;N.get(d).then(s=>{s.data?r(s.data):c(s.data.error)}).catch(s=>{c(this.getErrorMessage(s))})}))}getErrorMessage(e){let r=e.message;return e.response&&e.response.data&&e.response.data.message&&(r=e.response.data.message),r}}const et=new tt;function ot(t){const[e,r]=m.useState(!1),[c,d]=m.useState([]),s=v(),{theme:p,readingLanguage:i}=m.useContext(C),{mainBGColor:u}=S(p),h=()=>{t.dispatch({type:w.SET_PREVIOUS_PAGE,payload:{prevPage:k.READING}}),s("/journey")};m.useEffect(()=>{var j;r(!0);const x=(j=t.articleContent)==null?void 0:j.filter(g=>g.article===t.currentArticle);x&&x.length>0?(d(x),r(!1)):et.fetchArticle(t.currentArticle).then(g=>{t.dispatch({type:w.ADD_ARTICLE_CONTENT,payload:{articleContent:g.verses}}),d(g.verses),r(!1)}).catch(g=>{M.custom(E=>o.jsx(G,{text:g,offset:70,visible:E.visible})),r(!1)})},[]);const f=()=>o.jsx(Z,{children:o.jsx(q,{currentLanguage:i,verses:c})}),a=()=>o.jsx(V,{children:o.jsx(Q,{goBack:h})});return o.jsxs(Y,{style:{backgroundColor:u},children:[f(),a(),e&&o.jsx(F,{})]})}const rt=t=>({articleContent:t.journeys.articleContent,terms:t.terms.terms,currentArticle:t.journeys.currentArticle}),mt=R(rt)(ot);export{mt as default};
