var et=Object.defineProperty;var tt=(e,t,i)=>t in e?et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var Ee=(e,t,i)=>tt(e,typeof t!="symbol"?t+"":t,i);import{c as Se,_ as M,j as n,N as Z,b as u,a8 as ot,o as ee,J as nt,ac as pe,ai as fe,Q as B,aj as ke,ak as ye,M as F,al as ve,am as at,an as it,ao as be,ap as Ne,aq as De,af as st}from"./index-BPBmJKVk.js";import{w as qe,x as Ve,y as rt,z as me,s as r,A as lt,D as Xe,E as Ce,F as Qe,G as ct,B as b,J as dt,u as se,S as re,g as le,_ as W,c as ut,d as gt,e as q}from"./App-7bhsZKN9.js";import{I as m,T as U,g as xt,a as Pe}from"./images-ByRS9hOI.js";import{H as bt}from"./index-BF-kjbOk.js";import{C as G,L as ht}from"./index-DbSM9Sii.js";import{A as pt,b as Re}from"./bookmark.service-C5kOIFjd.js";import{S as ft}from"./index-C0Z_t78g.js";import{b as $e}from"./book.service-B2LodF4F.js";import{a as Be}from"./auth.service-D_94x3fL.js";import"./index-DMP1jv3V.js";import"./axios-BimPEqV4.js";function mt(e){return qe("MuiPagination",e)}Ve("MuiPagination",["root","ul","outlined","text"]);const kt=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function yt(e={}){const{boundaryCount:t=1,componentName:i="usePagination",count:o=1,defaultPage:l=1,disabled:y=!1,hideNextButton:s=!1,hidePrevButton:x=!1,onChange:k,page:p,showFirstButton:C=!1,showLastButton:S=!1,siblingCount:h=1}=e,f=Se(e,kt),[v,j]=rt({controlled:p,default:l,name:i,state:"page"}),R=(a,d)=>{p||j(d),k&&k(a,d)},O=(a,d)=>{const I=d-a+1;return Array.from({length:I},(H,Y)=>a+Y)},E=O(1,Math.min(t,o)),w=O(Math.max(o-t+1,t+1),o),z=Math.max(Math.min(v-h,o-t-h*2-1),t+2),N=Math.min(Math.max(v+h,t+h*2+2),w.length>0?w[0]-2:o-1),P=[...C?["first"]:[],...x?[]:["previous"],...E,...z>t+2?["start-ellipsis"]:t+1<o-t?[t+1]:[],...O(z,N),...N<o-t-1?["end-ellipsis"]:o-t>t?[o-t]:[],...w,...s?[]:["next"],...S?["last"]:[]],D=a=>{switch(a){case"first":return 1;case"previous":return v-1;case"next":return v+1;case"last":return o;default:return null}},c=P.map(a=>typeof a=="number"?{onClick:d=>{R(d,a)},type:"page",page:a,selected:a===v,disabled:y,"aria-current":a===v?"true":void 0}:{onClick:d=>{R(d,D(a))},type:a,page:D(a),selected:!1,disabled:y||a.indexOf("ellipsis")===-1&&(a==="next"||a==="last"?v>=o:v<=1)});return M({items:c},f)}function vt(e){return qe("MuiPaginationItem",e)}const K=Ve("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),Me=me(n.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Le=me(n.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Fe=me(n.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Ue=me(n.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Bt=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Je=(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],t[`size${ee(i.size)}`],i.variant==="text"&&t[`text${ee(i.color)}`],i.variant==="outlined"&&t[`outlined${ee(i.color)}`],i.shape==="rounded"&&t.rounded,i.type==="page"&&t.page,(i.type==="start-ellipsis"||i.type==="end-ellipsis")&&t.ellipsis,(i.type==="previous"||i.type==="next")&&t.previousNext,(i.type==="first"||i.type==="last")&&t.firstLast]},Ct=e=>{const{classes:t,color:i,disabled:o,selected:l,size:y,shape:s,type:x,variant:k}=e,p={root:["root",`size${ee(y)}`,k,s,i!=="standard"&&`color${ee(i)}`,i!=="standard"&&`${k}${ee(i)}`,o&&"disabled",l&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[x]],icon:["icon"]};return Qe(p,vt,t)},St=r("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Je})(({theme:e,ownerState:t})=>M({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${K.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),It=r(lt,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Je})(({theme:e,ownerState:t})=>M({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${K.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${K.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${K.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Z(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${K.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Z(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${K.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:t})=>M({},t.variant==="text"&&{[`&.${K.selected}`]:M({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}},[`&.${K.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}},{[`&.${K.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},t.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${K.selected}`]:M({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:Z(e.palette[t.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:Z(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Z(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${K.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Z(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${K.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),Tt=r("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})(({theme:e,ownerState:t})=>M({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(22)})),wt=u.forwardRef(function(t,i){const o=Xe({props:t,name:"MuiPaginationItem"}),{className:l,color:y="standard",component:s,components:x={},disabled:k=!1,page:p,selected:C=!1,shape:S="circular",size:h="medium",slots:f={},type:v="page",variant:j="text"}=o,R=Se(o,Bt),O=M({},o,{color:y,disabled:k,selected:C,shape:S,size:h,type:v,variant:j}),E=ot(),w=Ct(O),N=(E?{previous:f.next||x.next||Ue,next:f.previous||x.previous||Fe,last:f.first||x.first||Me,first:f.last||x.last||Le}:{previous:f.previous||x.previous||Fe,next:f.next||x.next||Ue,first:f.first||x.first||Me,last:f.last||x.last||Le})[v];return v==="start-ellipsis"||v==="end-ellipsis"?n.jsx(St,{ref:i,ownerState:O,className:Ce(w.root,l),children:"…"}):n.jsxs(It,M({ref:i,ownerState:O,component:s,disabled:k,className:Ce(w.root,l)},R,{children:[v==="page"&&p,N?n.jsx(Tt,{as:N,ownerState:O,className:w.icon}):null]}))}),jt=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],_t=e=>{const{classes:t,variant:i}=e;return Qe({root:["root",i],ul:["ul"]},mt,t)},At=r("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant]]}})({}),Ot=r("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function Et(e,t,i){return e==="page"?`${i?"":"Go to "}page ${t}`:`Go to ${e} page`}const Nt=u.forwardRef(function(t,i){const o=Xe({props:t,name:"MuiPagination"}),{boundaryCount:l=1,className:y,color:s="standard",count:x=1,defaultPage:k=1,disabled:p=!1,getItemAriaLabel:C=Et,hideNextButton:S=!1,hidePrevButton:h=!1,renderItem:f=c=>n.jsx(wt,M({},c)),shape:v="circular",showFirstButton:j=!1,showLastButton:R=!1,siblingCount:O=1,size:E="medium",variant:w="text"}=o,z=Se(o,jt),{items:N}=yt(M({},o,{componentName:"Pagination"})),P=M({},o,{boundaryCount:l,color:s,count:x,defaultPage:k,disabled:p,getItemAriaLabel:C,hideNextButton:S,hidePrevButton:h,renderItem:f,shape:v,showFirstButton:j,showLastButton:R,siblingCount:O,size:E,variant:w}),D=_t(P);return n.jsx(At,M({"aria-label":"pagination navigation",className:Ce(D.root,y),ownerState:P,ref:i},z,{children:n.jsx(Ot,{className:D.ul,ownerState:P,children:N.map((c,a)=>n.jsx("li",{children:f(M({},c,{color:s,"aria-label":C(c.type,c.page,c.selected),shape:v,size:E,variant:w}))},a))})}))});function Dt(e){return n.jsx(Nt,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function ze(){const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}function Pt(){const[e,t]=u.useState(ze());return u.useEffect(()=>{function i(){t(ze())}return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),e}var Ie={},Rt=nt;Object.defineProperty(Ie,"__esModule",{value:!0});var Ze=Ie.default=void 0,$t=Rt(ct()),Mt=n;Ze=Ie.default=(0,$t.default)((0,Mt.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const Lt=r(b)({display:"flex",position:"relative",width:"100%"}),Ft=r("img")({width:"100%",marginTop:"57px"}),Ut=r(b)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),zt=r(b)({display:"flex",alignItems:"baseline"}),Ht=r(b)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),Kt=r("img")({width:"100%",height:"100%"}),Wt=r(b)({margin:0,marginLeft:"12px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),Gt=r(b)(({hamburgercolor:e})=>({position:"absolute",top:"12px",right:"15px",width:"46px","& .hamburger-react":{width:"46px !important",color:e},"& .hamburger-react ~ .MuiBox-root ":{border:`1px solid ${e}`},"@media (max-height: 639px)":{top:"8px",right:"10px"},"@media screen and (orientation: landscape)":{right:"15px"}})),Yt=r("img")({cursor:"pointer","&:active":{opacity:"0.8"}}),qt=r(b)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),Vt=r("img")({width:"100%","&:active":{opacity:"0.8"}});r("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}});const Xt=r(b)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Qt=r(b)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Jt=r(b)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),He=r(b)(({active:e,bordercolor:t})=>({width:"50%",height:"37.9px",border:`1px solid ${t}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer",marginBottom:"20px"})),Ke=r("img")({}),We=r(b)(({active:e})=>({marginLeft:"5px"})),Zt=r(b)({width:"100%",display:"flex",flexDirection:"column"}),eo=r(b)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),to=r(b)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});r(b)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const oo=r(b)({display:"flex",flexDirection:"column"}),no=r(b)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),ao=r(b)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});r(b)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const io=r(b)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),so=r("img")({cursor:"pointer",marginRight:"15px"}),ro=r(dt)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),lo=r(b)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),co=r("img")({width:"63px"}),uo=r(b)({margin:"0px",marginLeft:"24px","@media (max-height: 600px)":{"& .MuiBox-root":{fontSize:"14px !important"}}}),go=r(b)({width:"100%",justifyContent:"space-between",alignItems:"center",margin:"10px 0px"}),xo=r(b)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"center",padding:"0px 7px"});r(Ze)({marginLeft:"-33px",color:"#17637D",height:"30px"});const bo=r(b)(({progress:e,progresscolor:t})=>({width:"calc(100% - 60px)",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",borderBottom:`1px solid ${t}`,"::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${e}%`,borderBottom:e!=0?`2px solid ${t}`:"none"}})),ho=r(b)(({istransliteration:e,translatestatus:t})=>({margin:"5px 0px 5px 0px",display:"flex",justifyContent:"space-between",opacity:t=="one"||t=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& .MuiBox-root:first-of-type":{width:"48%"},"& .MuiBox-root:last-child":{marginInlineEnd:"auto",width:e=="true"?"48%":"75%"}})),po=r(b)({display:"flex",justifyContent:"space-between"}),fo=r(b)(({translatestatus:e})=>({width:"80%",display:"flex",opacity:e=="one"||e=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}})),mo=r("img")({width:"20px",marginLeft:"10px"}),ko=r(b)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),Ge=r("img")({marginLeft:"3px",cursor:"pointer"}),yo=r(b)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),vo=r(b)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),Bo=r(b)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),Ye=r(b)(({style:e,translatestatus:t,readalready:i,readbgcolor:o,readtextcolor:l})=>({opacity:t=="one"||t=="none"?"0.5":"1",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:i=="true"?`${o} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:i=="true"?`${l} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:i=="true"?`${l} !important`:`${e.color} !important`}})),Co=r("img")({width:"50%",height:"50%"});function So(e){const[t,i]=u.useState(""),[o,l]=u.useState(""),{t:y}=se(),{theme:s}=u.useContext(re),{logoTextColor:x,headerBGColor:k}=le(s),p=localStorage.getItem(pe)||fe;return u.useEffect(()=>{var C;e.markTitle?i((C=e.markTitle)==null?void 0:C[p]):i(y("Default Book Title")),e.markImg?l(e.markImg):l(m.default_cover)},[e.markTitle,e.markImg]),n.jsxs(Lt,{children:[n.jsx(Ft,{src:s==B.DEFAULT||s==B.DARK?m.book_subtract:s==B.BLACK_AND_WHITE?m.book_subtract_BAW:s==B.SAPPHIRE?m.book_subtract_sapphire:m.book_subtract_easyocean}),n.jsxs(Ut,{children:[n.jsxs(zt,{children:[n.jsx(Ht,{onClick:e.onLogoClick,children:n.jsx(Kt,{src:o})}),n.jsx(Wt,{children:n.jsx(U,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:x,children:t})})]}),n.jsx(Yt,{src:s==B.EASY_OCEAN?m.search_easyocean:m.search,onClick:e.onSearchClick})]}),n.jsx(qt,{children:n.jsx(Vt,{src:s==B.DEFAULT||s==B.DARK?m.close2:s==B.BLACK_AND_WHITE?m.close2_BAW:s==B.SAPPHIRE?m.close2_sapphire:m.close2_easyocean,onClick:e.onCloseClick})}),n.jsx(Gt,{hamburgercolor:k,children:n.jsx(bt,{isLogin:e.isLogIn,textColor:x,itemBgColor:k,toggleColor:k,onLogin:e.onLogin,onSettings:e.onSettings})})]})}function Io(e){var H,Y,te,_,ce,de,ue,ge,Q,Te,we,je,_e;const[t,i]=u.useState([]),[o,l]=u.useState(),[y,s]=u.useState(!1),[x,k]=u.useState(!1),[p,C]=u.useState(0),{theme:S,referenceLanguage:h,readingLanguage:f}=u.useContext(re),{mainBGColor:v,altTextColor:j,backgroundColor:R,topTextColor:O,highlightColor:E,buttonColor:w,buttonTextColor:z}=le(S),{t:N}=se(),P=localStorage.getItem(pe)||fe,D=u.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const g=e.userHistory.filter(A=>A.bookId==e.bookId);if(g&&g.length>0)return g[0].readChapterIds}return[]},[e.userHistory]),c=e.subBookId;u.useEffect(()=>{e.openedSubBook==e.subBookId?s(!0):s(!1)},[e.openedSubBook]),u.useEffect(()=>{var T,V;const g=e.subBooks.filter($=>$.subBookId===c);let A=0;if(g&&g.length>0&&(A=(T=g[0].chapterInfos)==null?void 0:T.length,l(g[0])),e.currentUser){const $=e.userHistory.filter(L=>L.bookId==e.bookId);if($&&$.length>0){const L=$[0].subBooks.filter(J=>J.subBookId==c);L&&L.length>0&&C(Math.floor(((V=L[0])==null?void 0:V.readChapters)/A*100))}}if(e.subBooks&&e.subBooks.length>0){const $=e.subBooks.filter(L=>L.subBookId==c);if($&&$.length>0){let L=$[0].chapterInfos;L.sort((J,xe)=>J.chapterNumber-xe.chapterNumber),i(L)}}},[e.subBooks,e.userHistory]),u.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const g=e.subBookInfos.filter(A=>A.subBookId==c);g&&g.length>0?k(!0):k(!1)}},[]);const a=u.useCallback(g=>{k(A=>!A),e.onDownload(g)},[]),d=()=>{var g,A;if(o!=null&&o.noChapter){const T=o==null?void 0:o.chapterInfos[0].isTranslated;!(T!=null&&T[h])&&!(T!=null&&T[f])?W.custom(V=>n.jsx(G,{text:N("None Translated"),visible:V.visible})):e.moveToReading(o==null?void 0:o.chapterInfos[0].chapterId,(g=e.bookTitle)==null?void 0:g[P],(A=o.subBookTitle)==null?void 0:A[P],o.subBookId,!!(T!=null&&T[h]&&(T!=null&&T[f])))}else s(!y),e.handleOpenedSubBook(e.subBookId)},I=(g,A)=>{var T,V;A=="none"?W.custom($=>n.jsx(G,{text:N("None Translated"),visible:$.visible})):e.moveToReading(g,(T=e.bookTitle)==null?void 0:T[P],(V=o.subBookTitle)==null?void 0:V[P],o.subBookId,A=="both")};return n.jsxs(go,{children:[n.jsxs(xo,{children:[n.jsxs(bo,{progress:p,progresscolor:w,onClick:d,children:[(o==null?void 0:o.subBookNumber)!=0&&n.jsxs(ho,{istransliteration:((H=o==null?void 0:o.subBookTitle)==null?void 0:H[ke])!=null?"true":"false",translatestatus:(o==null?void 0:o.noChapter)&&(!((Y=o==null?void 0:o.chapterInfos[0].isTranslated)!=null&&Y[h])&&!((te=o==null?void 0:o.chapterInfos[0].isTranslated)!=null&&te[f])?"none":!((_=o==null?void 0:o.chapterInfos[0].isTranslated)!=null&&_[h])||!((ce=o==null?void 0:o.chapterInfos[0].isTranslated)!=null&&ce[f])?"one":"both"),children:[((de=o==null?void 0:o.subBookTitle)==null?void 0:de[ke])&&n.jsx(U,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:j,language:ye,children:(o==null?void 0:o.subBookNumber)+". "+((ue=o==null?void 0:o.subBookTitle)==null?void 0:ue[ke])}),n.jsx(U,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:j,language:ye,direction:"rtl",children:(ge=o==null?void 0:o.subBookTitle)==null?void 0:ge[ye]})]}),n.jsxs(po,{children:[n.jsxs(fo,{translatestatus:(o==null?void 0:o.noChapter)&&(!((Q=o==null?void 0:o.chapterInfos[0].isTranslated)!=null&&Q[h])&&!((Te=o==null?void 0:o.chapterInfos[0].isTranslated)!=null&&Te[f])?"none":!((we=o==null?void 0:o.chapterInfos[0].isTranslated)!=null&&we[h])||!((je=o==null?void 0:o.chapterInfos[0].isTranslated)!=null&&je[f])?"one":"both"),children:[n.jsx(U,{fontFamily:'"Baloo Da 2"',color:j,children:(_e=o==null?void 0:o.subBookTitle)==null?void 0:_e[P]}),(o==null?void 0:o.subBookNumber)==0&&n.jsx(mo,{src:m.icon_intro})]}),e.currentUser&&p!==0&&!(o!=null&&o.noChapter)&&n.jsx(U,{fontFamily:'"Baloo Da 2"',color:w,children:`${p}%`})]})]}),n.jsxs(ko,{isdownloaded:x?"true":"false",children:[n.jsx(Ge,{src:x?S==B.DEFAULT||S==B.EASY_OCEAN?m.download_cancel:m.download_cancel_white:S==B.DEFAULT||S==B.EASY_OCEAN?m.download:m.download_white,onClick:()=>a(c)}),x&&n.jsx(Ge,{src:S==B.DEFAULT||S==B.EASY_OCEAN?m.download_refresh:m.download_refresh_white,onClick:()=>e.onDownloadRefresh(c)})]})]}),y&&n.jsxs(yo,{style:{backgroundColor:R},children:[n.jsxs(vo,{children:[(e.bookTitle.en=="Qur'an"||e.bookTitle.en=="Zabur")&&n.jsx(U,{fontFamily:"Inter",color:O,children:N("Surah")}),n.jsx(U,{fontFamily:"Inter",color:E,children:N("Chapter")})]}),n.jsx(Bo,{children:t==null?void 0:t.map((g,A)=>{var T,V,$,L,J,xe,Ae,Oe;return g.chapterNumber==0?n.jsx(Ye,{translatestatus:!((T=g.isTranslated)!=null&&T[h])&&!((V=g.isTranslated)!=null&&V[f])?"none":!(($=g.isTranslated)!=null&&$[h])||!((L=g.isTranslated)!=null&&L[f])?"one":"both",readalready:D&&D.length>0&&D.includes(g.chapterId)?"true":"false",style:{backgroundColor:v,color:j},readbgcolor:w,readtextcolor:z,onClick:()=>{var oe,ne,ae,ie;return I(g.chapterId,!((oe=g.isTranslated)!=null&&oe[h])&&!((ne=g.isTranslated)!=null&&ne[f])?"none":!((ae=g.isTranslated)!=null&&ae[h])||!((ie=g.isTranslated)!=null&&ie[f])?"one":"both")},children:n.jsx(Co,{src:m.icon_intro})},A):n.jsx(Ye,{translatestatus:!((J=g.isTranslated)!=null&&J[h])&&!((xe=g.isTranslated)!=null&&xe[f])?"none":!((Ae=g.isTranslated)!=null&&Ae[h])||!((Oe=g.isTranslated)!=null&&Oe[f])?"one":"both",readalready:D&&D.length>0&&D.includes(g.chapterId)?"true":"false",style:{backgroundColor:v,color:j},readbgcolor:w,readtextcolor:z,onClick:()=>{var oe,ne,ae,ie;return I(g.chapterId,!((oe=g.isTranslated)!=null&&oe[h])&&!((ne=g.isTranslated)!=null&&ne[f])?"none":!((ae=g.isTranslated)!=null&&ae[h])||!((ie=g.isTranslated)!=null&&ie[f])?"one":"both")},children:n.jsx(U,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:g.chapterNumber})},A)})})]})]})}function To(e){const[t,i]=u.useState([]);return u.useEffect(()=>{let o=e.subBooks;o&&o.sort((l,y)=>l.subBookNumber-y.subBookNumber),i(o)},[e.subBooks]),n.jsx(n.Fragment,{children:t&&t.length>0&&t.map((o,l)=>n.jsx(Io,{bookId:e.bookId,bookTitle:e.bookTitle,subBooks:t,subBookId:o.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},l))})}function wo(e){const[t,i]=u.useState(""),[o,l]=u.useState([]),[y,s]=u.useState(1),[x,k]=u.useState([]),{t:p}=se(),{theme:C}=u.useContext(re),{backgroundColor:S,topTextColor:h,mainTextColor:f}=le(C),v=localStorage.getItem(pe)||fe,j=xt(e.deviceHeight),R=y*j,O=R-j,E=e.currentUser&&o.slice(O,R);u.useEffect(()=>{if(e.subBooks&&e.subBooks.length>0){const a=e.subBooks.map(d=>{var I;return{label:(I=d.subBookTitle)==null?void 0:I[v],value:d.subBookId}});a.unshift({label:p("All Books"),value:"all"}),k(a)}},[e.subBooks]),u.useEffect(()=>{x.length>0&&i(x[0].value)},[x]),u.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const a=e.bookmark.filter(d=>d.subBookId===t);l(t==="all"||t===""?e.bookmark:a)}else l([]),s(0);y>1&&E.length==1&&s(a=>a-1)},[e.bookmark]);const w=(a,d)=>{s(d)},z=u.useCallback(a=>{const d=a.target.value;i(d);const I=e.bookmark.filter(H=>H.subBookId===d);l(d==="all"?e.bookmark:I)},[e.bookmark]),N=()=>n.jsx(eo,{style:{backgroundColor:S},children:n.jsx(pt,{label:p("Filter"),detail:n.jsxs(to,{children:[n.jsx(U,{color:h,children:p("Show")}),n.jsx(ft,{label:"",options:x,value:t,backgroundColor:S,textColor:h,onChange:z})]})})}),P=()=>n.jsx(oo,{children:(E==null?void 0:E.length)>0&&E.map((a,d)=>{var I;return n.jsxs(b,{children:[n.jsxs(no,{children:[n.jsxs(ao,{onClick:()=>e.moveToReadingFromBookmark(a._id),children:[n.jsx(U,{color:f,children:(I=a.subBookTitle)==null?void 0:I[v]}),n.jsx(U,{color:f,children:a.bookTitle.en=="Qur’an"||a.bookTitle.en=="Zabur"?a.chapterNumber>0?`${p("Surah Bookmark")} ${a.chapterNumber}, ${p("Aya")} ${a.verseNumber}`:`${p("Surah Bookmark")} _ , ${p("Aya")} ${a.verseNumber}`:a.chapterNumber>0?`${p("Chapter Bookmark")} ${a.chapterNumber}, ${p("Aya")} ${a.verseNumber}`:`${p("Chapter Bookmark")} _ , ${p("Aya")} ${a.verseNumber}`})]}),n.jsx(so,{src:C==B.DEFAULT||C==B.EASY_OCEAN||C==B.EASY_SUNRISE?m.black_bookmark:m.white_bookmark,onClick:()=>e.removeBookmark(a._id)})]}),n.jsx(io,{})]},d)})}),D=()=>n.jsx(ro,{buttoncolor:f,children:n.jsx(Dt,{count:e.currentUser?Math.ceil(o.length/j):0,page:y,hidePrevButton:!0,hideNextButton:!0,onChange:w})}),c=()=>n.jsxs(lo,{style:{backgroundColor:S},children:[n.jsx(co,{src:C==B.DEFAULT||C==B.BLACK_AND_WHITE?m.swipe:C==B.EASY_OCEAN?m.swipe_easyocean:m.swipe_white}),n.jsx(uo,{style:{color:h},children:p("Bookmark Help")})]});return n.jsxs(Zt,{children:[N(),P(),D(),c()]})}function jo(e){const[t,i]=u.useState(F),{t:o}=se(),{theme:l}=u.useContext(re),{mainBGColor:y,headerBGColor:s,buttonColor:x,buttonTextColor:k,mainTextColor:p}=le(l),C=S=>{e.currentUser?i(S):W.custom(h=>n.jsx(G,{text:o("Bookmark Read Description"),visible:h.visible}))};return n.jsx(Xt,{style:{backgroundColor:s},children:n.jsxs(Qt,{style:{backgroundColor:y},children:[n.jsxs(Jt,{children:[n.jsxs(He,{active:t==F?"true":"false",style:{backgroundColor:t==F?x:y},bordercolor:p,onClick:()=>C(F),children:[n.jsx(Ke,{src:l==B.DEFAULT?m.index:l==B.EASY_OCEAN?t==F?m.index_active:m.index:t==F?m.index:m.index_active}),n.jsx(We,{active:t==F?"true":"false",children:n.jsx(U,{fontSize:16,fontWeight:"500",lineHeight:24,color:t==F?k:p,children:o("Index")})})]}),n.jsxs(He,{active:t==F?"false":"true",style:{backgroundColor:t==ve?x:y},bordercolor:p,onClick:()=>C(ve),children:[n.jsx(Ke,{src:l==B.DEFAULT?m.bookmark2_default:l==B.EASY_OCEAN?t==F?m.bookmark2_default:m.bookmark2_white:t==F?m.bookmark2_white:m.bookmark2_default}),n.jsx(We,{active:t==F?"false":"true",children:n.jsx(U,{fontSize:16,fontWeight:"500",lineHeight:24,color:t==ve?k:p,children:o("Bookmarks")})})]})]}),t==F?n.jsx(To,{bookId:e.bookId,bookTitle:e.bookTitle,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):n.jsx(wo,{subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark,deviceHeight:e.deviceHeight,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const _o=at,X=it,Ao=1;class Oo{constructor(){Ee(this,"db",null)}async initDB(){return new Promise((t,i)=>{const o=indexedDB.open(_o,Ao);o.onerror=()=>i(o.error),o.onsuccess=()=>{this.db=o.result,t()},o.onupgradeneeded=l=>{l.target.result.createObjectStore(X,{keyPath:"subBookId"})}})}async saveSubBookInfo(t){return this.db||await this.initDB(),new Promise((i,o)=>{const s=this.db.transaction([X],"readwrite").objectStore(X).put(t);s.onerror=()=>o(s.error),s.onsuccess=()=>i()})}async getSubBookInfo(t){return this.db||await this.initDB(),new Promise((i,o)=>{const s=this.db.transaction([X],"readonly").objectStore(X).get(t);s.onerror=()=>o(s.error),s.onsuccess=()=>i(s.result)})}async removeSubBookInfo(t){return this.db||await this.initDB(),new Promise((i,o)=>{const s=this.db.transaction([X],"readwrite").objectStore(X).delete(t);s.onerror=()=>o(s.error),s.onsuccess=()=>i()})}}const he=new Oo,Eo=r(b)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function No(e){const[t,i]=u.useState(),[o,l]=u.useState(!1),s=new URLSearchParams(window.location.search).get("id")||"",x=gt(),{t:k}=se(),{height:p}=Pt(),{theme:C}=u.useContext(re),{mainBGColor:S}=le(C),h=localStorage.getItem(pe)||fe,f=u.useCallback(()=>{s&&$e.fetchBookInfo(s).then(c=>{var a,d,I,H,Y;if(e.dispatch({type:q.ADD_BOOKINFO,payload:{bookInfo:c}}),i(c),e.currentUser&&!e.userHistory.some(_=>_.bookId==s)&&c.subBooks){const _=c.subBooks.find(Q=>Q.subBookNumber==0),ce=(a=_==null?void 0:_.chapterInfos[0])==null?void 0:a.chapterId,de=(d=c.bookTitle)==null?void 0:d[h],ue=(I=_==null?void 0:_.subBookTitle)==null?void 0:I[h],ge=_==null?void 0:_.subBookId;(Y=(H=_==null?void 0:_.chapterInfos[0])==null?void 0:H.isTranslated)!=null&&Y[h]?R(ce,de,ue,ge,!0):W.custom(Q=>n.jsx(G,{text:k("None Translated"),type:be.BOOKMARK,visible:Q.visible}))}}).catch(c=>{W.custom(a=>n.jsx(G,{text:k(c),type:be.BOOKMARK,visible:a.visible}))}).finally(()=>{l(!1)})},[s,e.dispatch,e.userHistory,e.currentUser]),v=u.useCallback(async c=>{try{const a=await $e.fetchSubBookInfo(c);e.dispatch({type:q.ADD_SUBBOOKINFO,payload:{subBookInfo:a}}),e.dispatch({type:q.ADD_SUBBOOK,payload:{subBook:a}}),await he.saveSubBookInfo(a),l(!1)}catch(a){W.custom(d=>n.jsx(G,{text:k(a),visible:d.visible})),l(!1)}},[e.dispatch]);u.useEffect(()=>{(async()=>{var a;l(!0),!((a=e.bookInfos)!=null&&a.length)||!e.bookInfos.some(d=>d.bookId===s)?await f():(i(e.bookInfos.find(d=>d.bookId===s)),l(!1))})(),e.currentUser&&Re.fetchBookmarks().then(a=>{e.dispatch({type:q.SET_BOOKMARKS,payload:{bookmark:a}})}).catch(a=>{a.status===401&&a.response.data.message===Ne&&(W.custom(d=>n.jsx(G,{text:k(a.response.data.message),visible:d.visible})),Be.logout(),x("/login"))})},[s,e.bookInfos,e.currentUser,e.dispatch]);const j=()=>{W.custom(c=>n.jsx(G,{text:k("Not Built Yet"),visible:c.visible}))},R=(c,a,d,I,H)=>{x(`/reading?chapterId=${c}&book=${a}&subBook=${d}&subBookId=${I}&bookId=${s}&bothTranslated=${H}`)},O=u.useCallback(async c=>{l(!0),Pe()<De?await he.getSubBookInfo(c)?(await he.removeSubBookInfo(c),e.dispatch({type:q.REMOVE_SUBBOOKINFO,payload:{subBookId:c}})):await v(c):W.custom(d=>n.jsx(G,{text:k("Not Enough Space"),visible:d.visible})),l(!1)},[v,e.dispatch]),E=u.useCallback(async c=>{l(!0),await he.removeSubBookInfo(c),e.dispatch({type:q.REMOVE_SUBBOOKINFO,payload:{subBookId:c}}),Pe()<De?await v(c):W.custom(d=>n.jsx(G,{text:k("Not Enough Space"),visible:d.visible})),l(!1)},[v,e.dispatch]),w=u.useCallback(c=>{if(l(!0),e.bookmark&&e.bookmark.length>0){const a=e.bookmark.find(d=>d._id===c);if(a){const{chapterId:d,bookTitle:I,subBookId:H,subBookTitle:Y,verseId:te}=a;x(`/reading?chapterId=${d}&book=${I==null?void 0:I[h]}&subBook=${Y==null?void 0:Y[h]}&subBookId=${H}&verseId=${te}&bookId=${s}`),l(!1)}}},[s,x,e.bookmark]),z=u.useCallback(c=>{l(!0),Re.deleteBookmark(c).then(a=>{e.dispatch({type:q.REMOVE_BOOKMARK,payload:{bookmarkId:c}}),W.custom(d=>n.jsx(G,{text:k(a.message),type:be.BOOKMARK,visible:d.visible})),l(!1)}).catch(a=>{a.status==401&&a.response.data.message==Ne&&(W.custom(d=>n.jsx(G,{text:k(a.response.data.message),type:be.BOOKMARK,visible:d.visible})),Be.logout(),x("/login")),l(!1)})},[e.dispatch]),N=u.useCallback(c=>{e.dispatch({type:q.SET_OPENED_SUBBOOK,payload:{openedSubBook:e.openedSubBook===c?"":c}})},[e.openedSubBook,e.dispatch]),P=()=>{e.dispatch({type:q.RESET_USER}),e.dispatch({type:q.RESET_BOOK}),e.dispatch({type:q.RESET_PAGE_STATUS}),Be.logout()},D=()=>{x("/login")};return n.jsxs(Eo,{style:{backgroundColor:S},children:[n.jsx(So,{markImg:t&&st+t.bookImage,markTitle:t==null?void 0:t.bookTitle,isLogIn:!!e.currentUser,onLogoClick:()=>x("/"),onCloseClick:()=>x("/library"),onLogin:e.currentUser?P:D,onSettings:()=>x("/settings"),onSearchClick:j}),n.jsx(jo,{bookId:s,bookTitle:t==null?void 0:t.bookTitle,subBooks:t==null?void 0:t.subBooks,deviceHeight:p,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.openedSubBook,moveToReading:R,moveToReadingFromBookmark:w,onDownload:O,onDownloadRefresh:E,removeBookmark:z,handleOpenedSubBook:N}),o&&n.jsx(ht,{})]})}function Do(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,openedSubBook:e.pageStatus.openedSubBook,currentUser:e.user.currentUser,activeChapterId:e.books.activeChapterId}}const Yo=ut(Do)(No);export{Yo as default};
