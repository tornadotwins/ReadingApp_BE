import{c as Ke,_ as le,j as i,b as r,ap as Ut,F as _e,$ as je,X as Ft,a3 as D,ax as $e,ay as mt,Z as ce,az as Ue,aA as De,aB as ft,aC as Fe,aD as ht,au as Ht}from"./index-Dj5rl3f-.js";import{a as It,b as At,F as zt,G as Me,d as Nt,s as d,e as ze,f as Rt,J as Kt,r as Wt,B as y,K as Gt,S as Ne,g as Re,V as ge,c as Vt,u as Yt,j as V,M as Zt,N as Qt,O as kt}from"./App-B09RLWGC.js";import{I as S,T as be,g as Xt,t as vt,a as yt}from"./index-CLXasytq.js";import{H as qt}from"./index-Cz680Gin.js";import{C as xe}from"./index-BamdOFDj.js";import{A as Jt}from"./index-DVjYIQDp.js";import{S as ea}from"./index-tHqtNeLN.js";import{L as ta}from"./index-CpzXr3fP.js";import{b as Ct}from"./book.service-2R9BPGam.js";import{b as St}from"./bookmark.service-CGwE6_c3.js";import{a as He}from"./auth.service-BY7_Kepk.js";import"./index-DE9FikYm.js";import"./index-C88pvD_q.js";function aa(e){return It("MuiPagination",e)}At("MuiPagination",["root","ul","outlined","text"]);const na=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function ia(e={}){const{boundaryCount:a=1,componentName:l="usePagination",count:t=1,defaultPage:m=1,disabled:g=!1,hideNextButton:R=!1,hidePrevButton:T=!1,onChange:I,page:_,showFirstButton:P=!1,showLastButton:z=!1,siblingCount:w=1}=e,B=Ke(e,na),[o,H]=zt({controlled:_,default:m,name:l,state:"page"}),U=(x,E)=>{_||H(E),I&&I(x,E)},A=(x,E)=>{const K=E-x+1;return Array.from({length:K},(Z,te)=>x+te)},X=A(1,Math.min(a,t)),p=A(Math.max(t-a+1,a+1),t),q=Math.max(Math.min(o-w,t-a-w*2-1),a+2),Y=Math.min(Math.max(o+w,a+w*2+2),p.length>0?p[0]-2:t-1),J=[...P?["first"]:[],...T?[]:["previous"],...X,...q>a+2?["start-ellipsis"]:a+1<t-a?[a+1]:[],...A(q,Y),...Y<t-a-1?["end-ellipsis"]:t-a>a?[t-a]:[],...p,...R?[]:["next"],...z?["last"]:[]],me=x=>{switch(x){case"first":return 1;case"previous":return o-1;case"next":return o+1;case"last":return t;default:return null}},c=J.map(x=>typeof x=="number"?{onClick:E=>{U(E,x)},type:"page",page:x,selected:x===o,disabled:g,"aria-current":x===o?"true":void 0}:{onClick:E=>{U(E,me(x))},type:x,page:me(x),selected:!1,disabled:g||x.indexOf("ellipsis")===-1&&(x==="next"||x==="last"?o>=t:o<=1)});return le({items:c},B)}function oa(e){return It("MuiPaginationItem",e)}const ue=At("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),Bt=Me(i.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Tt=Me(i.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Pt=Me(i.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Lt=Me(i.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),sa=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Dt=(e,a)=>{const{ownerState:l}=e;return[a.root,a[l.variant],a[`size${_e(l.size)}`],l.variant==="text"&&a[`text${_e(l.color)}`],l.variant==="outlined"&&a[`outlined${_e(l.color)}`],l.shape==="rounded"&&a.rounded,l.type==="page"&&a.page,(l.type==="start-ellipsis"||l.type==="end-ellipsis")&&a.ellipsis,(l.type==="previous"||l.type==="next")&&a.previousNext,(l.type==="first"||l.type==="last")&&a.firstLast]},la=e=>{const{classes:a,color:l,disabled:t,selected:m,size:g,shape:R,type:T,variant:I}=e,_={root:["root",`size${_e(g)}`,I,R,l!=="standard"&&`color${_e(l)}`,l!=="standard"&&`${I}${_e(l)}`,t&&"disabled",m&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[T]],icon:["icon"]};return Rt(_,oa,a)},ra=d("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Dt})(({theme:e,ownerState:a})=>le({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${ue.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},a.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),da=d(Kt,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Dt})(({theme:e,ownerState:a})=>le({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${ue.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${ue.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ue.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:je(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${ue.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:je(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${ue.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},a.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},a.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:a})=>le({},a.variant==="text"&&{[`&.${ue.selected}`]:le({},a.color!=="standard"&&{color:(e.vars||e).palette[a.color].contrastText,backgroundColor:(e.vars||e).palette[a.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[a.color].main}},[`&.${ue.focusVisible}`]:{backgroundColor:(e.vars||e).palette[a.color].dark}},{[`&.${ue.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},a.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${ue.selected}`]:le({},a.color!=="standard"&&{color:(e.vars||e).palette[a.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / 0.5)`:je(e.palette[a.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:je(e.palette[a.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:je(e.palette[a.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ue.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:je(e.palette[a.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${ue.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),ca=d("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,a)=>a.icon})(({theme:e,ownerState:a})=>le({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},a.size==="small"&&{fontSize:e.typography.pxToRem(18)},a.size==="large"&&{fontSize:e.typography.pxToRem(22)})),ua=r.forwardRef(function(a,l){const t=Nt({props:a,name:"MuiPaginationItem"}),{className:m,color:g="standard",component:R,components:T={},disabled:I=!1,page:_,selected:P=!1,shape:z="circular",size:w="medium",slots:B={},type:o="page",variant:H="text"}=t,U=Ke(t,sa),A=le({},t,{color:g,disabled:I,selected:P,shape:z,size:w,type:o,variant:H}),X=Ut(),p=la(A),Y=(X?{previous:B.next||T.next||Lt,next:B.previous||T.previous||Pt,last:B.first||T.first||Bt,first:B.last||T.last||Tt}:{previous:B.previous||T.previous||Pt,next:B.next||T.next||Lt,first:B.first||T.first||Bt,last:B.last||T.last||Tt})[o];return o==="start-ellipsis"||o==="end-ellipsis"?i.jsx(ra,{ref:l,ownerState:A,className:ze(p.root,m),children:"â€¦"}):i.jsxs(da,le({ref:l,ownerState:A,component:R,disabled:I,className:ze(p.root,m)},U,{children:[o==="page"&&_,Y?i.jsx(ca,{as:Y,ownerState:A,className:p.icon}):null]}))}),ga=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],xa=e=>{const{classes:a,variant:l}=e;return Rt({root:["root",l],ul:["ul"]},aa,a)},ba=d("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:l}=e;return[a.root,a[l.variant]]}})({}),ma=d("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,a)=>a.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function fa(e,a,l){return e==="page"?`${l?"":"Go to "}page ${a}`:`Go to ${e} page`}const ha=r.forwardRef(function(a,l){const t=Nt({props:a,name:"MuiPagination"}),{boundaryCount:m=1,className:g,color:R="standard",count:T=1,defaultPage:I=1,disabled:_=!1,getItemAriaLabel:P=fa,hideNextButton:z=!1,hidePrevButton:w=!1,renderItem:B=c=>i.jsx(ua,le({},c)),shape:o="circular",showFirstButton:H=!1,showLastButton:U=!1,siblingCount:A=1,size:X="medium",variant:p="text"}=t,q=Ke(t,ga),{items:Y}=ia(le({},t,{componentName:"Pagination"})),J=le({},t,{boundaryCount:m,color:R,count:T,defaultPage:I,disabled:_,getItemAriaLabel:P,hideNextButton:z,hidePrevButton:w,renderItem:B,shape:o,showFirstButton:H,showLastButton:U,siblingCount:A,size:X,variant:p}),me=xa(J);return i.jsx(ba,le({"aria-label":"pagination navigation",className:ze(me.root,g),ownerState:J,ref:l},q,{children:i.jsx(ma,{className:me.ul,ownerState:J,children:Y.map((c,x)=>i.jsx("li",{children:B(le({},c,{color:R,"aria-label":P(c.type,c.page,c.selected),shape:o,size:X,variant:p}))},x))})}))});function ka(e){return i.jsx(ha,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function pt(){const{innerWidth:e,innerHeight:a}=window;return{width:e,height:a}}function va(){const[e,a]=r.useState(pt());return r.useEffect(()=>{function l(){a(pt())}return window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),e}var We={},ya=Ft;Object.defineProperty(We,"__esModule",{value:!0});var Mt=We.default=void 0,Ca=ya(Wt()),Sa=i;Mt=We.default=(0,Ca.default)((0,Sa.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const Ba=d(y)({display:"flex",position:"relative",width:"100%"}),Ta=d("img")({width:"100%",marginTop:"57px"}),Pa=d(y)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),La=d(y)({display:"flex",alignItems:"baseline"}),pa=d(y)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),wa=d("img")({width:"100%",height:"100%"}),ja=d(y)({margin:0,position:"absolute",top:"50px",left:"75px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),_a=d(y)(({hamburgercolor:e})=>({position:"absolute",top:"12px",right:"15px",width:"46px","& .hamburger-react":{width:"46px !important",color:e},"& .hamburger-react ~ .MuiBox-root ":{border:`1px solid ${e}`},"@media (max-height: 639px)":{top:"8px",right:"10px"},"@media screen and (orientation: landscape)":{right:"15px"}})),Ea=d("img")({position:"absolute",top:"75px",right:"0px",cursor:"pointer","&:active":{opacity:"0.8"}}),Oa=d(y)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),Ia=d("img")({width:"100%","&:active":{opacity:"0.8"}});d("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}});const Aa=d(y)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Na=d(y)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Ra=d(y)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),wt=d(y)(({active:e,bordercolor:a})=>({width:"50%",height:"37.9px",border:`1px solid ${a}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer",marginBottom:"20px"})),jt=d("img")({}),_t=d(y)(({active:e})=>({marginLeft:"5px"})),Da=d(y)({width:"100%",display:"flex",flexDirection:"column"}),Ma=d(y)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),$a=d(y)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});d(y)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const Ua=d(y)({display:"flex",flexDirection:"column"}),Fa=d(y)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),Ha=d(y)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});d(y)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const za=d(y)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),Ka=d("img")({cursor:"pointer",marginRight:"15px"}),Wa=d(Gt)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),Ga=d(y)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),Va=d("img")({width:"63px"}),Ya=d(y)({margin:"0px",marginLeft:"24px","@media (max-height: 600px)":{"& .MuiBox-root":{fontSize:"14px !important"}}}),Za=d(y)({width:"100%",justifyContent:"space-between",alignItems:"center",margin:"10px 0px"}),Qa=d(y)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"center",padding:"0px 7px"});d(Mt)({marginLeft:"-33px",color:"#17637D",height:"30px"});const Xa=d(y)(({progress:e,progresscolor:a})=>({width:"calc(100% - 60px)",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",borderBottom:`1px solid ${a}`,"::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${e}%`,borderBottom:e!=0?`2px solid ${a}`:"none"}})),qa=d(y)(({istransliteration:e,translatestatus:a})=>({margin:"5px 0px 5px 0px",display:"flex",justifyContent:"space-between",opacity:a=="one"||a=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& .MuiBox-root:first-of-type":{width:"48%"},"& .MuiBox-root:last-child":{marginInlineEnd:"auto",width:e=="true"?"48%":"75%"}})),Ja=d(y)({display:"flex",justifyContent:"space-between"}),en=d(y)(({translatestatus:e})=>({width:"80%",display:"flex",opacity:e=="one"||e=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}})),tn=d("img")({width:"20px",marginLeft:"10px"}),an=d(y)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),Et=d("img")({marginLeft:"3px",cursor:"pointer"}),nn=d(y)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),on=d(y)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),sn=d(y)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),Ot=d(y)(({style:e,translatestatus:a,readalready:l,readbgcolor:t,readtextcolor:m})=>({opacity:a=="one"||a=="none"?"0.5":"1",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:l=="true"?`${t} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:l=="true"?`${m} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:l=="true"?`${m} !important`:`${e.color} !important`}})),ln=d("img")({width:"50%",height:"50%"});function rn(e){var I,_,P,z,w,B;const[a,l]=r.useState(""),[t,m]=r.useState(""),{theme:g}=r.useContext(Ne),{logoTextColor:R,headerBGColor:T}=Re(g);return r.useEffect(()=>{var o,H,U,A;e.markTitle?l((o=e.markTitle)==null?void 0:o[e.appLanguage||"en"]):l(((A=(U=(H=e.terms)==null?void 0:H.texts.find(X=>X.variable=="Default Book Title"))==null?void 0:U.text)==null?void 0:A[e.appLanguage||"en"])||"Title"),e.markImg?m(e.markImg):m(S.default_cover)},[e.markTitle,e.markImg]),i.jsxs(Ba,{children:[i.jsx(Ta,{src:g==D.DEFAULT||g==D.DARK?S.book_subtract:g==D.BLACK_AND_WHITE?S.book_subtract_BAW:g==D.SAPPHIRE?S.book_subtract_sapphire:S.book_subtract_easyocean}),i.jsxs(Pa,{children:[i.jsxs(La,{children:[i.jsx(pa,{onClick:e.onLogoClick,children:i.jsx(wa,{src:t})}),i.jsx(ja,{children:i.jsx(be,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:R,children:((P=(_=(I=e.bookNameTerms)==null?void 0:I.texts.find(o=>{var H;return(o==null?void 0:o.variable)==((H=e.markTitle)==null?void 0:H.en)}))==null?void 0:_.text)==null?void 0:P[e.appLanguage])||((B=(w=(z=e.bookNameTerms)==null?void 0:z.texts.find(o=>(o==null?void 0:o.variable)==a))==null?void 0:w.text)==null?void 0:B.en)||"Book Title"})})]}),i.jsx(Ea,{src:g==D.EASY_OCEAN?S.search_easyocean:S.search,onClick:e.onSearchClick})]}),i.jsx(Oa,{children:i.jsx(Ia,{src:g==D.DEFAULT||g==D.DARK?S.close2:g==D.BLACK_AND_WHITE?S.close2_BAW:g==D.SAPPHIRE?S.close2_sapphire:S.close2_easyocean,onClick:e.onCloseClick})}),i.jsx(_a,{hamburgercolor:T,children:i.jsx(qt,{isLogin:e.isLogIn,textColor:R,itemBgColor:T,toggleColor:T,terms:e.welcomePageTerms,appLanguage:e.appLanguage,onLogin:e.onLogin,onSettings:e.onSettings})})]})}function dn(e){var E,K,Z,te,re,de,Q,he,ke,G,fe,ve,b,u,s,C,L,h,M,$,ae;const[a,l]=r.useState([]),[t,m]=r.useState(),[g,R]=r.useState(!1),[T,I]=r.useState(!1),[_,P]=r.useState(0),[z,w]=r.useState("both"),{theme:B,referenceLanguage:o}=r.useContext(Ne),{mainBGColor:H,altTextColor:U,backgroundColor:A,topTextColor:X,buttonColor:p,buttonTextColor:q}=Re(B),Y=r.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const n=e.userHistory.filter(k=>k.bookId==e.bookId);if(n&&n.length>0)return n[0].readChapterIds}return[]},[e.userHistory]),J=e.subBookId;r.useEffect(()=>{e.bookTitle.en=="Qur'an"||e.bookTitle.en=="Zabur"?R(!1):e.openedSubBook==e.subBookId?R(!0):R(!1)},[e.openedSubBook]),r.useEffect(()=>{var f,j;const n=e.subBooks.filter(N=>N.subBookId===J);let k=0;if(n&&n.length>0&&(k=(f=n[0].chapterInfos)==null?void 0:f.length,m(n[0])),e.currentUser){const N=e.userHistory.filter(O=>O.bookId==e.bookId);if(N&&N.length>0){const O=N[0].subBooks.filter(W=>W.subBookId==J);O&&O.length>0&&P(Math.floor(((j=O[0])==null?void 0:j.readChapters)/k*100))}}if(e.subBooks&&e.subBooks.length>0){const N=e.subBooks.filter(O=>O.subBookId==J);if(N&&N.length>0){let O=N[0].chapterInfos;O.sort((W,ee)=>W.chapterNumber-ee.chapterNumber),l(O)}}},[e.subBooks,e.userHistory]),r.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const n=e.subBookInfos.filter(k=>k.subBookId==J);n&&n.length>0?I(!0):I(!1)}},[]),r.useEffect(()=>{var n,k,f,j,N,O,W,ee,ie,oe,se,ne,F,v,Ee,Oe,Ie,Ae,ye,Ce,Se,Be,Te,Pe,Le,pe,Ge,Ve,Ye,Ze,Qe,Xe,qe,Je,et,tt,at,nt,it,ot,st,lt,rt,dt,ct,ut,gt,xt,bt;if(t!=null&&t.noChapter)!((k=(n=t==null?void 0:t.chapterInfos[0])==null?void 0:n.isTranslated)!=null&&k[o])&&!((j=(f=t==null?void 0:t.chapterInfos[0])==null?void 0:f.isTranslated)!=null&&j[e.appLanguage])||!((O=(N=t==null?void 0:t.chapterInfos[0])==null?void 0:N.isPublished)!=null&&O[o])&&!((ee=(W=t==null?void 0:t.chapterInfos[0])==null?void 0:W.isPublished)!=null&&ee[e.appLanguage])?w("none"):(!((oe=(ie=t==null?void 0:t.chapterInfos[0])==null?void 0:ie.isTranslated)!=null&&oe[o])||!((ne=(se=t==null?void 0:t.chapterInfos[0])==null?void 0:se.isTranslated)!=null&&ne[e.appLanguage]))&&((v=(F=t==null?void 0:t.chapterInfos[0])==null?void 0:F.isPublished)!=null&&v[o]||!((Oe=(Ee=t==null?void 0:t.chapterInfos[0])==null?void 0:Ee.isPublished)!=null&&Oe[e.appLanguage]))?w("one"):w("both");else if((t==null?void 0:t.subBookNumber)!==0){const $t=(Ie=t==null?void 0:t.chapterInfos)==null?void 0:Ie.length;for(let we=1;we<$t-1;we++)if(!((ye=(Ae=t==null?void 0:t.chapterInfos[we])==null?void 0:Ae.isTranslated)!=null&&ye[o])&&!((Se=(Ce=t==null?void 0:t.chapterInfos[we])==null?void 0:Ce.isTranslated)!=null&&Se[e.appLanguage])||!((Te=(Be=t==null?void 0:t.chapterInfos[we])==null?void 0:Be.isPublished)!=null&&Te[o])&&!((Le=(Pe=t==null?void 0:t.chapterInfos[we])==null?void 0:Pe.isPublished)!=null&&Le[e.appLanguage])){w("none");break}else if((!((Ge=(pe=t==null?void 0:t.chapterInfos[1])==null?void 0:pe.isTranslated)!=null&&Ge[o])||!((Ye=(Ve=t==null?void 0:t.chapterInfos[1])==null?void 0:Ve.isTranslated)!=null&&Ye[e.appLanguage]))&&((Qe=(Ze=t==null?void 0:t.chapterInfos[1])==null?void 0:Ze.isPublished)!=null&&Qe[o]||!((qe=(Xe=t==null?void 0:t.chapterInfos[1])==null?void 0:Xe.isPublished)!=null&&qe[e.appLanguage]))){w("one");break}}else!((et=(Je=t==null?void 0:t.chapterInfos[0])==null?void 0:Je.isTranslated)!=null&&et[o])&&!((at=(tt=t==null?void 0:t.chapterInfos[0])==null?void 0:tt.isTranslated)!=null&&at[e.appLanguage])||!((it=(nt=t==null?void 0:t.chapterInfos[0])==null?void 0:nt.isPublished)!=null&&it[o])&&!((st=(ot=t==null?void 0:t.chapterInfos[0])==null?void 0:ot.isPublished)!=null&&st[e.appLanguage])?w("none"):(!((rt=(lt=t==null?void 0:t.chapterInfos[1])==null?void 0:lt.isTranslated)!=null&&rt[o])||!((ct=(dt=t==null?void 0:t.chapterInfos[1])==null?void 0:dt.isTranslated)!=null&&ct[e.appLanguage]))&&((gt=(ut=t==null?void 0:t.chapterInfos[1])==null?void 0:ut.isPublished)!=null&&gt[o]||!((bt=(xt=t==null?void 0:t.chapterInfos[1])==null?void 0:xt.isPublished)!=null&&bt[e.appLanguage]))?w("one"):w("both")},[t]);const me=r.useCallback(n=>{I(k=>!k),e.onDownload(n)},[]),c=()=>{var n,k;if(t!=null&&t.noChapter){const f=(n=t==null?void 0:t.chapterInfos[0])==null?void 0:n.isTranslated,j=(k=t==null?void 0:t.chapterInfos[0])==null?void 0:k.isPublished;!(f!=null&&f[o])&&!(f!=null&&f[e.appLanguage])||!(j!=null&&j[o])&&!(j!=null&&j[e.appLanguage])?ge.custom(N=>{var O,W,ee,ie,oe,se;return i.jsx(xe,{text:((ee=(W=(O=e.terms)==null?void 0:O.texts.find(ne=>ne.variable=="None Translated"))==null?void 0:W.text)==null?void 0:ee[e.appLanguage])||((se=(oe=(ie=e.terms)==null?void 0:ie.texts.find(ne=>ne.variable=="None Translated"))==null?void 0:oe.text)==null?void 0:se.en)||"",visible:N.visible})}):e.moveToReading(t==null?void 0:t.chapterInfos[0].chapterId,t.subBookId)}else R(!g),e.handleOpenedSubBook(e.subBookId)},x=(n,k)=>{k=="none"?ge.custom(f=>{var j,N,O;return i.jsx(xe,{text:((O=(N=(j=e.terms)==null?void 0:j.texts.find(W=>W.variable=="None Translated"))==null?void 0:N.text)==null?void 0:O[e.appLanguage])||"",visible:f.visible})}):e.moveToReading(n,t.subBookId)};return i.jsxs(Za,{id:e.id,children:[i.jsxs(Qa,{children:[i.jsxs(Xa,{progress:_,progresscolor:p,onClick:c,children:[(t==null?void 0:t.subBookNumber)!=0&&i.jsxs(qa,{istransliteration:((E=t==null?void 0:t.subBookTitle)==null?void 0:E[$e])!=null?"true":"false",translatestatus:z,children:[((K=t==null?void 0:t.subBookTitle)==null?void 0:K[$e])&&i.jsx(be,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:U,language:mt,children:(t==null?void 0:t.subBookNumber)+". "+((Z=t==null?void 0:t.subBookTitle)==null?void 0:Z[$e])}),i.jsx(be,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:U,language:mt,direction:"rtl",children:((Q=(de=(re=(te=e.subBookTerms)==null?void 0:te.texts)==null?void 0:re.find(n=>{var k;return(n==null?void 0:n.variable)===((k=t==null?void 0:t.subBookTitle)==null?void 0:k.en)}))==null?void 0:de.text)==null?void 0:Q.ar)||((he=t==null?void 0:t.subBookTitle)==null?void 0:he.ar)||((ke=t==null?void 0:t.subBookTitle)==null?void 0:ke.en)})]}),i.jsxs(Ja,{children:[i.jsxs(en,{translatestatus:z,children:[i.jsx(be,{fontFamily:'"Baloo Da 2"',color:U,children:e.bookTitle.en==="Zabur"&&(t==null?void 0:t.subBookNumber)!=0?(((b=(ve=(fe=(G=e.subBookTerms)==null?void 0:G.texts)==null?void 0:fe.find(n=>(n==null?void 0:n.variable)==="Psalm"))==null?void 0:ve.text)==null?void 0:b[e.appLanguage||"en"])||"Psalm")+` ${t==null?void 0:t.subBookNumber}`:((L=(C=(s=(u=e.subBookTerms)==null?void 0:u.texts)==null?void 0:s.find(n=>{var k;return(n==null?void 0:n.variable)===((k=t==null?void 0:t.subBookTitle)==null?void 0:k.en)}))==null?void 0:C.text)==null?void 0:L[e.appLanguage||"en"])||((h=t==null?void 0:t.subBookTitle)==null?void 0:h.en)}),(t==null?void 0:t.subBookNumber)==0&&i.jsx(tn,{src:S.icon_intro})]}),e.currentUser&&_!==0&&!(t!=null&&t.noChapter)&&i.jsx(be,{fontFamily:'"Baloo Da 2"',color:p,children:`${_}%`})]})]}),i.jsxs(an,{isdownloaded:T?"true":"false",children:[i.jsx(Et,{src:T?B==D.DEFAULT||B==D.EASY_OCEAN?S.download_cancel:S.download_cancel_white:B==D.DEFAULT||B==D.EASY_OCEAN?S.download:S.download_white,onClick:()=>me(J)}),T&&i.jsx(Et,{src:B==D.DEFAULT||B==D.EASY_OCEAN?S.download_refresh:S.download_refresh_white,onClick:()=>e.onDownloadRefresh(J)})]})]}),g&&i.jsxs(nn,{style:{backgroundColor:A},children:[i.jsx(on,{children:i.jsx(be,{fontFamily:"Inter",color:X,children:((ae=($=(M=e.terms)==null?void 0:M.texts.find(n=>n.variable=="Chapter"))==null?void 0:$.text)==null?void 0:ae[e.appLanguage])||""})}),i.jsx(sn,{children:a==null?void 0:a.map((n,k)=>{var f,j,N,O,W,ee,ie,oe,se,ne,F,v,Ee,Oe,Ie,Ae;return n.chapterNumber==0?i.jsx(Ot,{translatestatus:!((f=n==null?void 0:n.isTranslated)!=null&&f[o])&&!((j=n==null?void 0:n.isTranslated)!=null&&j[e.appLanguage])||!((N=n==null?void 0:n.isPublished)!=null&&N[o])&&!((O=n==null?void 0:n.isPublished)!=null&&O[e.appLanguage])?"none":(!((W=n==null?void 0:n.isTranslated)!=null&&W[o])||!((ee=n==null?void 0:n.isTranslated)!=null&&ee[e.appLanguage]))&&((ie=n==null?void 0:n.isPublished)!=null&&ie[o]||!((oe=n==null?void 0:n.isPublished)!=null&&oe[e.appLanguage]))?"one":"both",readalready:Y&&Y.length>0&&Y.includes(n.chapterId)?"true":"false",style:{backgroundColor:H,color:U},readbgcolor:p,readtextcolor:q,onClick:()=>{var ye,Ce,Se,Be,Te,Pe,Le,pe;return x(n.chapterId,!((ye=n==null?void 0:n.isTranslated)!=null&&ye[o])&&!((Ce=n==null?void 0:n.isTranslated)!=null&&Ce[e.appLanguage])||!((Se=n==null?void 0:n.isPublished)!=null&&Se[o])&&!((Be=n==null?void 0:n.isPublished)!=null&&Be[e.appLanguage])?"none":(!((Te=n.isTranslated)!=null&&Te[o])||!((Pe=n==null?void 0:n.isTranslated)!=null&&Pe[e.appLanguage]))&&((Le=n==null?void 0:n.isPublished)!=null&&Le[o]||!((pe=n==null?void 0:n.isPublished)!=null&&pe[e.appLanguage]))?"one":"both")},children:i.jsx(ln,{src:S.icon_intro})},k):i.jsx(Ot,{translatestatus:!((se=n==null?void 0:n.isTranslated)!=null&&se[o])&&!((ne=n==null?void 0:n.isTranslated)!=null&&ne[e.appLanguage])||!((F=n==null?void 0:n.isPublished)!=null&&F[o])&&!((v=n==null?void 0:n.isPublished)!=null&&v[e.appLanguage])?"none":(!((Ee=n==null?void 0:n.isTranslated)!=null&&Ee[o])||!((Oe=n==null?void 0:n.isTranslated)!=null&&Oe[e.appLanguage]))&&((Ie=n==null?void 0:n.isPublished)!=null&&Ie[o]||!((Ae=n==null?void 0:n.isPublished)!=null&&Ae[e.appLanguage]))?"one":"both",readalready:Y&&Y.length>0&&Y.includes(n.chapterId)?"true":"false",style:{backgroundColor:H,color:U},readbgcolor:p,readtextcolor:q,onClick:()=>{var ye,Ce,Se,Be,Te,Pe,Le,pe;return x(n.chapterId,!((ye=n==null?void 0:n.isTranslated)!=null&&ye[o])&&!((Ce=n==null?void 0:n.isTranslated)!=null&&Ce[e.appLanguage])||!((Se=n==null?void 0:n.isPublished)!=null&&Se[o])&&!((Be=n==null?void 0:n.isPublished)!=null&&Be[e.appLanguage])?"none":(!((Te=n.isTranslated)!=null&&Te[o])||!((Pe=n.isTranslated)!=null&&Pe[e.appLanguage]))&&(!((Le=n==null?void 0:n.isPublished)!=null&&Le[o])||!((pe=n==null?void 0:n.isPublished)!=null&&pe[e.appLanguage]))?"one":"both")},children:i.jsx(be,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:n.chapterNumber})},k)})})]})]})}function cn(e){const[a,l]=r.useState([]);return r.useEffect(()=>{let t=e.subBooks;t&&t.sort((m,g)=>m.subBookNumber-g.subBookNumber),l(t)},[e.subBooks]),i.jsx(i.Fragment,{children:a&&a.length>0&&a.map((t,m)=>i.jsx(dn,{id:`subbook-${t.subBookId}`,bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:a,subBookId:t.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,subBookTerms:e.subBookTerms,appLanguage:e.appLanguage,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},m))})}function un(e){const[a,l]=r.useState(""),[t,m]=r.useState([]),[g,R]=r.useState(1),[T,I]=r.useState([]),{theme:_,readingLanguage:P}=r.useContext(Ne),{backgroundColor:z,topTextColor:w,mainTextColor:B}=Re(_),o=Xt(e.deviceHeight),H=g*o,U=H-o,A=e.currentUser&&t.slice(U,H);r.useEffect(()=>{var c,x,E,K,Z,te,re,de,Q,he;if(e.subBooks&&e.subBooks.length>0){const ke=e.subBooks.map(G=>{var fe;return{label:(fe=G.subBookTitle)==null?void 0:fe[P],value:G.subBookId}});ke.unshift({label:((c=e.bookTitle)==null?void 0:c.en)=="Qur'an"||((x=e.bookTitle)==null?void 0:x.en)=="Zabur"?((K=(E=e.terms.texts.find(G=>G.variable=="All Chapters"))==null?void 0:E.text)==null?void 0:K[P])||((te=(Z=e.terms.texts.find(G=>G.variable=="All Chapters"))==null?void 0:Z.text)==null?void 0:te.en):((de=(re=e.terms.texts.find(G=>G.variable=="All SubBooks"))==null?void 0:re.text)==null?void 0:de[P])||((he=(Q=e.terms.texts.find(G=>G.variable=="All SubBooks"))==null?void 0:Q.text)==null?void 0:he.en),value:"all"}),I(ke)}},[e.subBooks]),r.useEffect(()=>{T.length>0&&l(T[0].value)},[T]),r.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const c=e.bookmark.filter(x=>x.subBookId===a);m(a==="all"||a===""?e.bookmark:c)}else m([]),R(0);g>1&&A.length==1&&R(c=>c-1)},[e.bookmark]);const X=(c,x)=>{R(x)},p=r.useCallback(c=>{const x=c.target.value;l(x);const E=e.bookmark.filter(K=>K.subBookId===x);m(x==="all"?e.bookmark:E)},[e.bookmark]),q=()=>{var c,x,E,K,Z,te,re,de;return i.jsx(Ma,{style:{backgroundColor:z},children:i.jsx(Jt,{label:((x=(c=e.terms.texts.find(Q=>Q.variable=="Filter"))==null?void 0:c.text)==null?void 0:x[P])||((K=(E=e.terms.texts.find(Q=>Q.variable=="Filter"))==null?void 0:E.text)==null?void 0:K.en)||"",detail:i.jsxs($a,{children:[i.jsx(be,{color:w,children:((te=(Z=e.terms.texts.find(Q=>Q.variable=="Show"))==null?void 0:Z.text)==null?void 0:te[P])||((de=(re=e.terms.texts.find(Q=>Q.variable=="Show"))==null?void 0:re.text)==null?void 0:de.en)||""}),i.jsx(ea,{label:"",options:T,value:a,backgroundColor:z,textColor:w,onChange:p})]})})})},Y=()=>i.jsx(Ua,{children:(A==null?void 0:A.length)>0&&A.map((c,x)=>{var E,K,Z,te,re,de,Q,he,ke,G,fe,ve,b,u,s,C,L,h,M,$,ae,n,k,f,j,N,O,W,ee,ie,oe,se,ne,F;return i.jsxs(y,{children:[i.jsxs(Fa,{children:[i.jsxs(Ha,{onClick:()=>e.moveToReadingFromBookmark(c._id),children:[i.jsx(be,{color:B,children:((E=c.subBookTitle)==null?void 0:E[P])||((K=c.subBookTitle)==null?void 0:K.en)}),i.jsx(be,{color:B,children:c.bookTitle.en=="Qur'an"||c.bookTitle.en=="Zabur"?c.chapterNumber>0?`${((te=(Z=e.terms.texts.find(v=>v.variable=="Surah Bookmark"))==null?void 0:Z.text)==null?void 0:te[P])||((de=(re=e.terms.texts.find(v=>v.variable=="Surah Bookmark"))==null?void 0:re.text)==null?void 0:de.en)} ${c.chapterNumber}, ${((he=(Q=e.terms.texts.find(v=>v.variable=="Aya"))==null?void 0:Q.text)==null?void 0:he[P])||((G=(ke=e.terms.texts.find(v=>v.variable=="Surah Bookmark"))==null?void 0:ke.text)==null?void 0:G.en)} ${c.verseNumber}`:`${((ve=(fe=e.terms.texts.find(v=>v.variable=="Surah Bookmark"))==null?void 0:fe.text)==null?void 0:ve[P])||((u=(b=e.terms.texts.find(v=>v.variable=="Surah Bookmark"))==null?void 0:b.text)==null?void 0:u.en)} _ , ${((C=(s=e.terms.texts.find(v=>v.variable=="Aya"))==null?void 0:s.text)==null?void 0:C[P])||((h=(L=e.terms.texts.find(v=>v.variable=="Surah Bookmark"))==null?void 0:L.text)==null?void 0:h.en)} ${c.verseNumber}`:c.chapterNumber>0?`${(($=(M=e.terms.texts.find(v=>v.variable=="Chapter Bookmark"))==null?void 0:M.text)==null?void 0:$[P])||((n=(ae=e.terms.texts.find(v=>v.variable=="Surah Bookmark"))==null?void 0:ae.text)==null?void 0:n.en)} ${c.chapterNumber}, ${((f=(k=e.terms.texts.find(v=>v.variable=="Aya"))==null?void 0:k.text)==null?void 0:f[P])||((N=(j=e.terms.texts.find(v=>v.variable=="Surah Bookmark"))==null?void 0:j.text)==null?void 0:N.en)} ${c.verseNumber}`:`${((W=(O=e.terms.texts.find(v=>v.variable=="Chapter Bookmark"))==null?void 0:O.text)==null?void 0:W[P])||((ie=(ee=e.terms.texts.find(v=>v.variable=="Surah Bookmark"))==null?void 0:ee.text)==null?void 0:ie.en)} _ , ${((se=(oe=e.terms.texts.find(v=>v.variable=="Aya"))==null?void 0:oe.text)==null?void 0:se[P])||((F=(ne=e.terms.texts.find(v=>v.variable=="Surah Bookmark"))==null?void 0:ne.text)==null?void 0:F.en)} ${c.verseNumber}`})]}),i.jsx(Ka,{src:_==D.DEFAULT||_==D.EASY_OCEAN||_==D.EASY_SUNRISE?S.black_bookmark:S.white_bookmark,onClick:()=>e.removeBookmark(c._id)})]}),i.jsx(za,{})]},x)})}),J=()=>i.jsx(Wa,{buttoncolor:B,children:i.jsx(ka,{count:e.currentUser?Math.ceil(t.length/o):0,page:g,hidePrevButton:!0,hideNextButton:!0,onChange:X})}),me=()=>{var c,x,E,K;return i.jsxs(Ga,{style:{backgroundColor:z},children:[i.jsx(Va,{src:_==D.DEFAULT||_==D.BLACK_AND_WHITE?S.swipe:_==D.EASY_OCEAN?S.swipe_easyocean:S.swipe_white}),i.jsx(Ya,{style:{color:w},children:((x=(c=e.terms.texts.find(Z=>Z.variable=="Bookmark Help"))==null?void 0:c.text)==null?void 0:x[P])||((K=(E=e.terms.texts.find(Z=>Z.variable=="Bookmark Help"))==null?void 0:E.text)==null?void 0:K.en)})]})};return i.jsxs(Da,{children:[q(),Y(),J(),me()]})}function gn(e){var P,z,w,B;const[a,l]=r.useState(ce),{theme:t}=r.useContext(Ne),{mainBGColor:m,headerBGColor:g,buttonColor:R,buttonTextColor:T,mainTextColor:I}=Re(t),_=o=>{e.currentUser?l(o):ge.custom(H=>{var U,A,X,p;return i.jsx(xe,{text:((A=(U=e.terms.texts.find(q=>q.variable=="Bookmark Read Description"))==null?void 0:U.text)==null?void 0:A[e.appLanguage])||((p=(X=e.terms.texts.find(q=>q.variable=="Bookmark Read Description"))==null?void 0:X.text)==null?void 0:p.en)||"",visible:H.visible})})};return i.jsx(Aa,{style:{backgroundColor:g},children:i.jsxs(Na,{style:{backgroundColor:m},children:[i.jsxs(Ra,{children:[i.jsxs(wt,{active:a==ce?"true":"false",style:{backgroundColor:a==ce?R:m},bordercolor:I,onClick:()=>_(ce),children:[i.jsx(jt,{src:t==D.DEFAULT?S.index:t==D.EASY_OCEAN?a==ce?S.index_active:S.index:a==ce?S.index:S.index_active}),i.jsx(_t,{active:a==ce?"true":"false",children:i.jsx(be,{fontSize:16,fontWeight:"500",lineHeight:24,color:a==ce?T:I,children:((z=(P=e.terms.texts.find(o=>o.variable=="Index"))==null?void 0:P.text)==null?void 0:z[e.appLanguage])||"Index"})})]}),i.jsxs(wt,{active:a==ce?"false":"true",style:{backgroundColor:a==Ue?R:m},bordercolor:I,onClick:()=>_(Ue),children:[i.jsx(jt,{src:t==D.DEFAULT?S.bookmark2_default:t==D.EASY_OCEAN?a==ce?S.bookmark2_default:S.bookmark2_white:a==ce?S.bookmark2_white:S.bookmark2_default}),i.jsx(_t,{active:a==ce?"false":"true",children:i.jsx(be,{fontSize:16,fontWeight:"500",lineHeight:24,color:a==Ue?T:I,children:((B=(w=e.terms.texts.find(o=>o.variable=="Bookmarks"))==null?void 0:w.text)==null?void 0:B[e.appLanguage])||"Bookmarks"})})]})]}),a==ce?i.jsx(cn,{bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,subBookTerms:e.subBookTerms,appLanguage:e.appLanguage,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):i.jsx(un,{bookTitle:e.bookTitle,subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark.filter(o=>o.bookId==e.bookId),deviceHeight:e.deviceHeight,terms:e.terms,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const xn=d(y)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function bn(e){var G,fe,ve;const[a,l]=r.useState(),[t,m]=r.useState(!1),[g,R]=r.useState(),[T,I]=r.useState(),[_,P]=r.useState(),[z,w]=r.useState(),[B,o]=r.useState(),[H,U]=r.useState(),[A,X]=r.useState(),p=Yt(),{height:q}=va(),{theme:Y}=r.useContext(Ne),{mainBGColor:J}=Re(Y),me=r.useCallback(()=>{e.currentBook&&Ct.fetchBookInfo(e.currentBook).then(b=>{var u,s,C;if(e.dispatch({type:V.ADD_BOOKINFO,payload:{bookInfo:b}}),l(b),e.currentUser&&!e.userHistory.some(h=>h.bookId==e.currentBook)&&b.subBooks){const h=b.subBooks.find(ae=>ae.subBookNumber==0),M=(u=h==null?void 0:h.chapterInfos[0])==null?void 0:u.chapterId,$=h==null?void 0:h.subBookId;(C=(s=h==null?void 0:h.chapterInfos[0])==null?void 0:s.isTranslated)!=null&&C[e.appLanguage]?E(M,$):ge.custom(ae=>{var n,k,f;return i.jsx(xe,{text:((f=(k=(n=g==null?void 0:g.texts)==null?void 0:n.find(j=>j.variable=="None Translated"))==null?void 0:k.text)==null?void 0:f[e.appLanguage])||"",type:De.BOOKMARK,visible:ae.visible})})}}).catch(b=>{ge.custom(u=>i.jsx(xe,{text:b,type:De.BOOKMARK,visible:u.visible}))}).finally(()=>{m(!1)})},[e.currentBook,e.dispatch,e.userHistory,e.currentUser]),c=r.useCallback(async b=>{var u,s,C;try{const L=await Ct.fetchSubBookInfo(b);e.dispatch({type:V.ADD_SUBBOOKINFO,payload:{subBookInfo:L}}),e.dispatch({type:V.ADD_SUBBOOK,payload:{subBook:L}}),Zt(L);const h=(u=e.bookInfos)==null?void 0:u.find($=>($==null?void 0:$.bookId)==e.currentBook),M=h&&((s=h==null?void 0:h.subBooks)==null?void 0:s.find($=>($==null?void 0:$.subBookId)==b));if(M){const $=(C=M==null?void 0:M.subBookTitle)==null?void 0:C.en;vt("Sub books","download_subbook",$)}m(!1)}catch(L){ge.custom(h=>i.jsx(xe,{text:L,visible:h.visible})),m(!1)}},[e.dispatch]);r.useEffect(()=>{var $,ae,n,k,f,j,N,O,W,ee,ie,oe,se,ne;const b=e.terms.find(F=>F.pageTitle=="Index & Bookmark Page"),u=e.terms.find(F=>F.pageTitle=="Welcome Page"),s=e.terms.find(F=>F.pageTitle==="Book Names"),C=e.terms.find(F=>F.pageTitle==="Origin Injil Sub-book Names"),L=e.terms.find(F=>F.pageTitle==="Origin Qur'an Surah Names"),h=e.terms.find(F=>F.pageTitle==="Origin Tawrat Sub-book Names"),M=e.terms.find(F=>F.pageTitle==="Origin Zabur Sub-book Names");(($=b==null?void 0:b.isPublished)!=null&&$[e.appLanguage]||(ae=s==null?void 0:s.isPublished)!=null&&ae.en)&&R(b),((n=u==null?void 0:u.isPublished)!=null&&n[e.appLanguage]||(k=s==null?void 0:s.isPublished)!=null&&k.en)&&I(u),((f=s==null?void 0:s.isPublished)!=null&&f[e.appLanguage]||(j=s==null?void 0:s.isPublished)!=null&&j.en)&&P(s),((N=C==null?void 0:C.isPublished)!=null&&N[e.appLanguage]||(O=s==null?void 0:s.isPublished)!=null&&O.en)&&w(C),((W=L==null?void 0:L.isPublished)!=null&&W[e.appLanguage]||(ee=s==null?void 0:s.isPublished)!=null&&ee.en)&&o(L),((ie=h==null?void 0:h.isPublished)!=null&&ie[e.appLanguage]||(oe=s==null?void 0:s.isPublished)!=null&&oe.en)&&U(h),((se=M==null?void 0:M.isPublished)!=null&&se[e.appLanguage]||(ne=s==null?void 0:s.isPublished)!=null&&ne.en)&&X(M)},[e.terms,e.appLanguage]),r.useEffect(()=>{(async()=>{var u;m(!0),!((u=e.bookInfos)!=null&&u.length)||!e.bookInfos.some(s=>s.bookId===e.currentBook)?await me():(l(e.bookInfos.find(s=>s.bookId===e.currentBook)),m(!1))})(),e.currentUser&&St.fetchBookmarks().then(u=>{e.dispatch({type:V.SET_BOOKMARKS,payload:{bookmark:u}})}).catch(u=>{u.status===401&&u.response.data.message===ft&&(ge.custom(s=>i.jsx(xe,{text:u.response.data.message,visible:s.visible})),He.logout(),p("/login"))})},[e.currentBook,e.bookInfos,e.currentUser,e.dispatch]),r.useEffect(()=>{if(e.currentSubBook&&e.prevPage===Fe.READING){const u=setTimeout(()=>{const s=document.getElementById(`subbook-${e.currentSubBook}`);s&&s.scrollIntoView({behavior:"smooth"})},100);return()=>clearTimeout(u)}},[e.currentSubBook,e.prevPage]);const x=()=>{ge.custom(b=>{var u,s,C;return i.jsx(xe,{text:((C=(s=(u=g==null?void 0:g.texts)==null?void 0:u.find(L=>L.variable=="Not Built Yet"))==null?void 0:s.text)==null?void 0:C[e.appLanguage])||"",visible:b.visible})})},E=(b,u)=>{var h,M,$,ae,n,k;e.dispatch({type:V.SET_CURRENT_CHAPTER,payload:{currentChapter:b}}),e.dispatch({type:V.SET_CURRENT_SUBBOOK,payload:{currentSubBook:u}}),e.dispatch({type:V.SET_PREVIOUS_PAGE,payload:{prevPage:Fe.BOOKS}});const s=(h=e.bookInfos)==null?void 0:h.find(f=>(f==null?void 0:f.bookId)==e.currentBook),C=s&&((M=s==null?void 0:s.subBooks)==null?void 0:M.find(f=>(f==null?void 0:f.subBookId)==u)),L=($=C==null?void 0:C.chapterInfos)==null?void 0:$.find(f=>(f==null?void 0:f.chapterId)==b);if(C){const f=(ae=C==null?void 0:C.subBookTitle)==null?void 0:ae.en,j=L==null?void 0:L.chapterNumber;vt("Chapter","read_chapter",((n=a==null?void 0:a.bookTitle)==null?void 0:n.en)=="Qur'an"||((k=a==null?void 0:a.bookTitle)==null?void 0:k.en)=="Zabur"?f:`${f}-${j==0?"Introduction":j}`)}p("/reading")},K=()=>{p("/library"),e.dispatch({type:V.SET_PREVIOUS_PAGE,payload:{prevPage:Fe.BOOKS}}),e.dispatch({type:V.SET_CURRENT_SUBBOOK,payload:{currentSubBook:""}})},Z=r.useCallback(async b=>{m(!0),yt()<ht?await Qt(b)?(await kt(b),e.dispatch({type:V.REMOVE_SUBBOOKINFO,payload:{subBookId:b}})):await c(b):ge.custom(s=>{var C,L,h;return i.jsx(xe,{text:((h=(L=(C=g==null?void 0:g.texts)==null?void 0:C.find(M=>M.variable=="Not Enough Space"))==null?void 0:L.text)==null?void 0:h[e.appLanguage])||"Not enough space",visible:s.visible})}),m(!1)},[c,e.dispatch]),te=r.useCallback(async b=>{m(!0),await kt(b),e.dispatch({type:V.REMOVE_SUBBOOKINFO,payload:{subBookId:b}}),yt()<ht?await c(b):ge.custom(s=>{var C,L,h;return i.jsx(xe,{text:((h=(L=(C=g==null?void 0:g.texts)==null?void 0:C.find(M=>M.variable=="Not Enough Space"))==null?void 0:L.text)==null?void 0:h[e.appLanguage])||"Not enough space",visible:s.visible})}),m(!1)},[c,e.dispatch]),re=r.useCallback(b=>{if(m(!0),e.bookmark&&e.bookmark.length>0){const u=e.bookmark.find(s=>s._id===b);if(u){const{chapterId:s,subBookId:C,verseId:L}=u;e.dispatch({type:V.SET_CURRENT_SUBBOOK,payload:{currentSubBook:C}}),e.dispatch({type:V.SET_CURRENT_CHAPTER,payload:{currentChapter:s}}),e.dispatch({type:V.SET_CURRENT_VERSE,payload:{currentVerse:L}}),p("/reading"),m(!1)}}},[e.currentBook,p,e.bookmark]),de=r.useCallback(b=>{m(!0),St.deleteBookmark(b).then(u=>{e.dispatch({type:V.REMOVE_BOOKMARK,payload:{bookmarkId:b}}),ge.custom(s=>i.jsx(xe,{text:u.message,type:De.BOOKMARK,visible:s.visible})),m(!1)}).catch(u=>{u.status==401&&u.response.data.message==ft&&(ge.custom(s=>i.jsx(xe,{text:u.response.data.message,type:De.BOOKMARK,visible:s.visible})),He.logout(),p("/login")),m(!1)})},[e.dispatch]),Q=r.useCallback(b=>{e.dispatch({type:V.SET_CURRENT_SUBBOOK,payload:{currentSubBook:e.currentSubBook===b?"":b}})},[e.currentSubBook,e.dispatch]),he=()=>{e.dispatch({type:V.RESET_USER}),e.dispatch({type:V.RESET_BOOK}),e.dispatch({type:V.RESET_PAGE_STATUS}),He.logout()},ke=()=>{p("/login")};return i.jsxs(xn,{style:{backgroundColor:J},children:[i.jsx(rn,{markImg:a&&Ht+a.bookImage,markTitle:a==null?void 0:a.bookTitle,isLogIn:!!e.currentUser,terms:g||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},welcomePageTerms:T||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},bookNameTerms:_||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},appLanguage:e.appLanguage,onLogoClick:()=>p("/home"),onCloseClick:K,onLogin:e.currentUser?he:ke,onSettings:()=>p("/settings"),onSearchClick:x}),i.jsx(gn,{bookId:e.currentBook,bookTitle:a==null?void 0:a.bookTitle,bookImage:a==null?void 0:a.bookImage,subBooks:a==null?void 0:a.subBooks,deviceHeight:q,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.currentSubBook,terms:g||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},subBookTerms:(((G=a==null?void 0:a.bookTitle)==null?void 0:G.en)==="Injil"?z:((fe=a==null?void 0:a.bookTitle)==null?void 0:fe.en)==="Qur'an"?B:((ve=a==null?void 0:a.bookTitle)==null?void 0:ve.en)==="Zabur"?A:H)||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},appLanguage:e.appLanguage,moveToReading:E,moveToReadingFromBookmark:re,onDownload:Z,onDownloadRefresh:te,removeBookmark:de,handleOpenedSubBook:Q}),t&&i.jsx(ta,{})]})}function mn(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,terms:e.terms.terms,currentBook:e.pageStatus.currentBook,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,currentSubBook:e.pageStatus.currentSubBook,prevPage:e.pageStatus.prevPage,currentUser:e.user.currentUser,appLanguage:e.user.appLanguage,readingLanguage:e.user.readingLanguage,activeChapterId:e.books.activeChapterId}}const jn=Vt(mn)(bn);export{jn as default};
