var io=Object.defineProperty;var ro=(e,o,a)=>o in e?io(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a;var Te=(e,o,a)=>ro(e,typeof o!="symbol"?o+"":o,a);import{_ as S,b as c,ag as lo,c as Z,j as t,N as ee,a7 as co,o as te,J as Ce,ab as be,ad as fe,Q as E,ah as Ae,ai as ke,M as H,aj as ye,ak as uo,al as po,am as ve,an as Re,ao as Ee,ac as go}from"./index-Dibo9daf.js";import{x as ne,y as ae,s as r,z as se,T as xo,A as bo,D as fo,E as ho,F as X,G as ie,J as _e,P as mo,K as Ve,M as ko,N as qe,O as he,Q as Be,S as re,g as le,R as yo,B as y,U as vo,u as ue,_ as q,c as Co,d as Bo,e as J}from"./App-CCrjiZsz.js";import{T as z,I as m,g as So,a as Pe}from"./images-D-1S3ESK.js";import{S as Io}from"./index-DYF8xLvl.js";import{C as Y,L as wo}from"./index-DvqQ0V9-.js";import{b as $e}from"./book.service-DMAE4z4a.js";import{b as Ne}from"./bookmark.service-DVfdhCbO.js";import{a as De}from"./auth.service-DyFIPSgW.js";import"./index-CCTNEZaq.js";import"./axios-BimPEqV4.js";function jo(e){return ne("MuiCollapse",e)}ae("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const To=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Ao=e=>{const{orientation:o,classes:a}=e,n={root:["root",`${o}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${o}`],wrapperInner:["wrapperInner",`${o}`]};return ie(n,jo,a)},Ro=r("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[o.root,o[a.orientation],a.state==="entered"&&o.entered,a.state==="exited"&&!a.in&&a.collapsedSize==="0px"&&o.hidden]}})(({theme:e,ownerState:o})=>S({height:0,overflow:"hidden",transition:e.transitions.create("height")},o.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},o.state==="entered"&&S({height:"auto",overflow:"visible"},o.orientation==="horizontal"&&{width:"auto"}),o.state==="exited"&&!o.in&&o.collapsedSize==="0px"&&{visibility:"hidden"})),Eo=r("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,o)=>o.wrapper})(({ownerState:e})=>S({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),_o=r("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,o)=>o.wrapperInner})(({ownerState:e})=>S({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),Ye=c.forwardRef(function(o,a){const n=se({props:o,name:"MuiCollapse"}),{addEndListener:s,children:g,className:l,collapsedSize:d="0px",component:x,easing:k,in:j,onEnter:T,onEntered:A,onEntering:v,onExit:C,onExited:N,onExiting:_,orientation:B="vertical",style:P,timeout:R=lo.standard,TransitionComponent:$=xo}=n,D=Z(n,To),i=S({},n,{orientation:B,collapsedSize:d}),p=Ao(i),b=bo(),u=fo(),f=c.useRef(null),I=c.useRef(),M=typeof d=="number"?`${d}px`:d,h=B==="horizontal",O=h?"width":"height",F=c.useRef(null),W=ho(a,F),L=w=>G=>{if(w){const V=F.current;G===void 0?w(V):w(V,G)}},U=()=>f.current?f.current[h?"clientWidth":"clientHeight"]:0,ce=L((w,G)=>{f.current&&h&&(f.current.style.position="absolute"),w.style[O]=M,T&&T(w,G)}),me=L((w,G)=>{const V=U();f.current&&h&&(f.current.style.position="");const{duration:de,easing:pe}=_e({style:P,timeout:R,easing:k},{mode:"enter"});if(R==="auto"){const je=b.transitions.getAutoHeightDuration(V);w.style.transitionDuration=`${je}ms`,I.current=je}else w.style.transitionDuration=typeof de=="string"?de:`${de}ms`;w.style[O]=`${V}px`,w.style.transitionTimingFunction=pe,v&&v(w,G)}),oo=L((w,G)=>{w.style[O]="auto",A&&A(w,G)}),to=L(w=>{w.style[O]=`${U()}px`,C&&C(w)}),no=L(N),ao=L(w=>{const G=U(),{duration:V,easing:de}=_e({style:P,timeout:R,easing:k},{mode:"exit"});if(R==="auto"){const pe=b.transitions.getAutoHeightDuration(G);w.style.transitionDuration=`${pe}ms`,I.current=pe}else w.style.transitionDuration=typeof V=="string"?V:`${V}ms`;w.style[O]=M,w.style.transitionTimingFunction=de,_&&_(w)}),so=w=>{R==="auto"&&u.start(I.current||0,w),s&&s(F.current,w)};return t.jsx($,S({in:j,onEnter:ce,onEntered:oo,onEntering:me,onExit:to,onExited:no,onExiting:ao,addEndListener:so,nodeRef:F,timeout:R==="auto"?null:R},D,{children:(w,G)=>t.jsx(Ro,S({as:x,className:X(p.root,l,{entered:p.entered,exited:!j&&M==="0px"&&p.hidden}[w]),style:S({[h?"minWidth":"minHeight"]:M},P),ref:W},G,{ownerState:S({},i,{state:w}),children:t.jsx(Eo,{ownerState:S({},i,{state:w}),className:p.wrapper,ref:f,children:t.jsx(_o,{ownerState:S({},i,{state:w}),className:p.wrapperInner,children:g})})}))}))});Ye.muiSupportAuto=!0;const Xe=c.createContext({});function Po(e){return ne("MuiAccordion",e)}const ge=ae("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),$o=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],No=e=>{const{classes:o,square:a,expanded:n,disabled:s,disableGutters:g}=e;return ie({root:["root",!a&&"rounded",n&&"expanded",s&&"disabled",!g&&"gutters"],region:["region"]},Po,o)},Do=r(mo,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[{[`& .${ge.region}`]:o.region},o.root,!a.square&&o.rounded,!a.disableGutters&&o.gutters]}})(({theme:e})=>{const o={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],o),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],o)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${ge.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${ge.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e})=>({variants:[{props:o=>!o.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:o=>!o.disableGutters,style:{[`&.${ge.expanded}`]:{margin:"16px 0"}}}]})),Oo=c.forwardRef(function(o,a){const n=se({props:o,name:"MuiAccordion"}),{children:s,className:g,defaultExpanded:l=!1,disabled:d=!1,disableGutters:x=!1,expanded:k,onChange:j,square:T=!1,slots:A={},slotProps:v={},TransitionComponent:C,TransitionProps:N}=n,_=Z(n,$o),[B,P]=Ve({controlled:k,default:l,name:"Accordion",state:"expanded"}),R=c.useCallback(h=>{P(!B),j&&j(h,!B)},[B,j,P]),[$,...D]=c.Children.toArray(s),i=c.useMemo(()=>({expanded:B,disabled:d,disableGutters:x,toggle:R}),[B,d,x,R]),p=S({},n,{square:T,disabled:d,disableGutters:x,expanded:B}),b=No(p),u=S({transition:C},A),f=S({transition:N},v),[I,M]=ko("transition",{elementType:Ye,externalForwardedProps:{slots:u,slotProps:f},ownerState:p});return t.jsxs(Do,S({className:X(b.root,g),ref:a,ownerState:p,square:T},_,{children:[t.jsx(Xe.Provider,{value:i,children:$}),t.jsx(I,S({in:B,timeout:"auto"},M,{children:t.jsx("div",{"aria-labelledby":$.props.id,id:$.props["aria-controls"],role:"region",className:b.region,children:D})}))]}))});function Mo(e){return ne("MuiAccordionDetails",e)}ae("MuiAccordionDetails",["root"]);const Lo=["className"],Fo=e=>{const{classes:o}=e;return ie({root:["root"]},Mo,o)},zo=r("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,o)=>o.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),Uo=c.forwardRef(function(o,a){const n=se({props:o,name:"MuiAccordionDetails"}),{className:s}=n,g=Z(n,Lo),l=n,d=Fo(l);return t.jsx(zo,S({className:X(d.root,s),ref:a,ownerState:l},g))});function Ho(e){return ne("MuiAccordionSummary",e)}const oe=ae("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Wo=["children","className","expandIcon","focusVisibleClassName","onClick"],Go=e=>{const{classes:o,expanded:a,disabled:n,disableGutters:s}=e;return ie({root:["root",a&&"expanded",n&&"disabled",!s&&"gutters"],focusVisible:["focusVisible"],content:["content",a&&"expanded",!s&&"contentGutters"],expandIconWrapper:["expandIconWrapper",a&&"expanded"]},Ho,o)},Ko=r(qe,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,o)=>o.root})(({theme:e})=>{const o={duration:e.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],o),[`&.${oe.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${oe.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${oe.disabled})`]:{cursor:"pointer"},variants:[{props:a=>!a.disableGutters,style:{[`&.${oe.expanded}`]:{minHeight:64}}}]}}),Vo=r("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,o)=>o.content})(({theme:e})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:o=>!o.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${oe.expanded}`]:{margin:"20px 0"}}}]})),qo=r("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,o)=>o.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${oe.expanded}`]:{transform:"rotate(180deg)"}})),Yo=c.forwardRef(function(o,a){const n=se({props:o,name:"MuiAccordionSummary"}),{children:s,className:g,expandIcon:l,focusVisibleClassName:d,onClick:x}=n,k=Z(n,Wo),{disabled:j=!1,disableGutters:T,expanded:A,toggle:v}=c.useContext(Xe),C=B=>{v&&v(B),x&&x(B)},N=S({},n,{expanded:A,disabled:j,disableGutters:T}),_=Go(N);return t.jsxs(Ko,S({focusRipple:!1,disableRipple:!0,disabled:j,component:"div","aria-expanded":A,className:X(_.root,g),focusVisibleClassName:X(_.focusVisible,d),onClick:C,ref:a,ownerState:N},k,{children:[t.jsx(Vo,{className:_.content,ownerState:N,children:s}),l&&t.jsx(qo,{className:_.expandIconWrapper,ownerState:N,children:l})]}))});function Xo(e){return ne("MuiPagination",e)}ae("MuiPagination",["root","ul","outlined","text"]);const Jo=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Qo(e={}){const{boundaryCount:o=1,componentName:a="usePagination",count:n=1,defaultPage:s=1,disabled:g=!1,hideNextButton:l=!1,hidePrevButton:d=!1,onChange:x,page:k,showFirstButton:j=!1,showLastButton:T=!1,siblingCount:A=1}=e,v=Z(e,Jo),[C,N]=Ve({controlled:k,default:s,name:a,state:"page"}),_=(u,f)=>{k||N(f),x&&x(u,f)},B=(u,f)=>{const I=f-u+1;return Array.from({length:I},(M,h)=>u+h)},P=B(1,Math.min(o,n)),R=B(Math.max(n-o+1,o+1),n),$=Math.max(Math.min(C-A,n-o-A*2-1),o+2),D=Math.min(Math.max(C+A,o+A*2+2),R.length>0?R[0]-2:n-1),i=[...j?["first"]:[],...d?[]:["previous"],...P,...$>o+2?["start-ellipsis"]:o+1<n-o?[o+1]:[],...B($,D),...D<n-o-1?["end-ellipsis"]:n-o>o?[n-o]:[],...R,...l?[]:["next"],...T?["last"]:[]],p=u=>{switch(u){case"first":return 1;case"previous":return C-1;case"next":return C+1;case"last":return n;default:return null}},b=i.map(u=>typeof u=="number"?{onClick:f=>{_(f,u)},type:"page",page:u,selected:u===C,disabled:g,"aria-current":u===C?"true":void 0}:{onClick:f=>{_(f,p(u))},type:u,page:p(u),selected:!1,disabled:g||u.indexOf("ellipsis")===-1&&(u==="next"||u==="last"?C>=n:C<=1)});return S({items:b},v)}function Zo(e){return ne("MuiPaginationItem",e)}const K=ae("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),Oe=he(t.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Me=he(t.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Le=he(t.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Fe=he(t.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),et=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Je=(e,o)=>{const{ownerState:a}=e;return[o.root,o[a.variant],o[`size${te(a.size)}`],a.variant==="text"&&o[`text${te(a.color)}`],a.variant==="outlined"&&o[`outlined${te(a.color)}`],a.shape==="rounded"&&o.rounded,a.type==="page"&&o.page,(a.type==="start-ellipsis"||a.type==="end-ellipsis")&&o.ellipsis,(a.type==="previous"||a.type==="next")&&o.previousNext,(a.type==="first"||a.type==="last")&&o.firstLast]},ot=e=>{const{classes:o,color:a,disabled:n,selected:s,size:g,shape:l,type:d,variant:x}=e,k={root:["root",`size${te(g)}`,x,l,a!=="standard"&&`color${te(a)}`,a!=="standard"&&`${x}${te(a)}`,n&&"disabled",s&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[d]],icon:["icon"]};return ie(k,Zo,o)},tt=r("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Je})(({theme:e,ownerState:o})=>S({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${K.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},o.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},o.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),nt=r(qe,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Je})(({theme:e,ownerState:o})=>S({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${K.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${K.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${K.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ee(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${K.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ee(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${K.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},o.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},o.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},o.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:o})=>S({},o.variant==="text"&&{[`&.${K.selected}`]:S({},o.color!=="standard"&&{color:(e.vars||e).palette[o.color].contrastText,backgroundColor:(e.vars||e).palette[o.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[o.color].main}},[`&.${K.focusVisible}`]:{backgroundColor:(e.vars||e).palette[o.color].dark}},{[`&.${K.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},o.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${K.selected}`]:S({},o.color!=="standard"&&{color:(e.vars||e).palette[o.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / 0.5)`:ee(e.palette[o.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:ee(e.palette[o.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ee(e.palette[o.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${K.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ee(e.palette[o.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${K.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),at=r("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,o)=>o.icon})(({theme:e,ownerState:o})=>S({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},o.size==="small"&&{fontSize:e.typography.pxToRem(18)},o.size==="large"&&{fontSize:e.typography.pxToRem(22)})),st=c.forwardRef(function(o,a){const n=se({props:o,name:"MuiPaginationItem"}),{className:s,color:g="standard",component:l,components:d={},disabled:x=!1,page:k,selected:j=!1,shape:T="circular",size:A="medium",slots:v={},type:C="page",variant:N="text"}=n,_=Z(n,et),B=S({},n,{color:g,disabled:x,selected:j,shape:T,size:A,type:C,variant:N}),P=co(),R=ot(B),D=(P?{previous:v.next||d.next||Fe,next:v.previous||d.previous||Le,last:v.first||d.first||Oe,first:v.last||d.last||Me}:{previous:v.previous||d.previous||Le,next:v.next||d.next||Fe,first:v.first||d.first||Oe,last:v.last||d.last||Me})[C];return C==="start-ellipsis"||C==="end-ellipsis"?t.jsx(tt,{ref:a,ownerState:B,className:X(R.root,s),children:"â€¦"}):t.jsxs(nt,S({ref:a,ownerState:B,component:l,disabled:x,className:X(R.root,s)},_,{children:[C==="page"&&k,D?t.jsx(at,{as:D,ownerState:B,className:R.icon}):null]}))}),it=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],rt=e=>{const{classes:o,variant:a}=e;return ie({root:["root",a],ul:["ul"]},Xo,o)},lt=r("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[o.root,o[a.variant]]}})({}),ct=r("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,o)=>o.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function dt(e,o,a){return e==="page"?`${a?"":"Go to "}page ${o}`:`Go to ${e} page`}const ut=c.forwardRef(function(o,a){const n=se({props:o,name:"MuiPagination"}),{boundaryCount:s=1,className:g,color:l="standard",count:d=1,defaultPage:x=1,disabled:k=!1,getItemAriaLabel:j=dt,hideNextButton:T=!1,hidePrevButton:A=!1,renderItem:v=b=>t.jsx(st,S({},b)),shape:C="circular",showFirstButton:N=!1,showLastButton:_=!1,siblingCount:B=1,size:P="medium",variant:R="text"}=n,$=Z(n,it),{items:D}=Qo(S({},n,{componentName:"Pagination"})),i=S({},n,{boundaryCount:s,color:l,count:d,defaultPage:x,disabled:k,getItemAriaLabel:j,hideNextButton:T,hidePrevButton:A,renderItem:v,shape:C,showFirstButton:N,showLastButton:_,siblingCount:B,size:P,variant:R}),p=rt(i);return t.jsx(lt,S({"aria-label":"pagination navigation",className:X(p.root,g),ownerState:i,ref:a},$,{children:t.jsx(ct,{className:p.ul,ownerState:i,children:D.map((b,u)=>t.jsx("li",{children:v(S({},b,{color:l,"aria-label":j(b.type,b.page,b.selected),shape:C,size:P,variant:R}))},u))})}))});var Se={},pt=Ce;Object.defineProperty(Se,"__esModule",{value:!0});var Qe=Se.default=void 0,gt=pt(Be()),xt=t;Qe=Se.default=(0,gt.default)((0,xt.jsx)("path",{d:"m10 17 5-5-5-5z"}),"ArrowRight");var Ie={},bt=Ce;Object.defineProperty(Ie,"__esModule",{value:!0});var Ze=Ie.default=void 0,ft=bt(Be()),ht=t;Ze=Ie.default=(0,ft.default)((0,ht.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp");function mt(e){const[o,a]=c.useState(!1),{theme:n}=c.useContext(re),{backgroundColor:s,topTextColor:g}=le(n),l=g;return t.jsx(yo,{iconcolor:l,children:t.jsxs(Oo,{onChange:()=>a(d=>!d),style:{backgroundColor:s},children:[t.jsx(Yo,{expandIcon:o?t.jsx(Ze,{}):t.jsx(Qe,{}),children:t.jsx(z,{color:g,fontWeight:"700",children:e.label})}),t.jsx(Uo,{children:e.detail})]})})}function kt(e){return t.jsx(ut,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function ze(){const{innerWidth:e,innerHeight:o}=window;return{width:e,height:o}}function yt(){const[e,o]=c.useState(ze());return c.useEffect(()=>{function a(){o(ze())}return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),e}var we={},vt=Ce;Object.defineProperty(we,"__esModule",{value:!0});var eo=we.default=void 0,Ct=vt(Be()),Bt=t;eo=we.default=(0,Ct.default)((0,Bt.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const St=r(y)({display:"flex",position:"relative",width:"100%"}),It=r("img")({width:"100%",marginTop:"57px"}),wt=r(y)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),jt=r(y)({display:"flex",alignItems:"baseline"}),Tt=r(y)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),At=r("img")({width:"100%",height:"100%"}),Rt=r(y)({margin:0,marginLeft:"12px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),Et=r("img")({cursor:"pointer","&:active":{opacity:"0.8"}}),_t=r(y)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),Pt=r("img")({width:"100%","&:active":{opacity:"0.8"}}),$t=r("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}}),Nt=r(y)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Dt=r(y)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Ot=r(y)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),Ue=r(y)(({active:e,bordercolor:o})=>({width:"50%",height:"37.9px",border:`1px solid ${o}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer",marginBottom:"20px"})),He=r("img")({}),We=r(y)(({active:e})=>({marginLeft:"5px"})),Mt=r(y)({width:"100%",display:"flex",flexDirection:"column"}),Lt=r(y)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),Ft=r(y)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});r(y)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const zt=r(y)({display:"flex",flexDirection:"column"}),Ut=r(y)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),Ht=r(y)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});r(y)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const Wt=r(y)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),Gt=r("img")({cursor:"pointer",marginRight:"15px"}),Kt=r(vo)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),Vt=r(y)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),qt=r("img")({width:"63px"}),Yt=r(y)({margin:"0px",marginLeft:"24px","@media (max-height: 600px)":{"& .MuiBox-root":{fontSize:"14px !important"}}}),Xt=r(y)({width:"100%",justifyContent:"space-between",alignItems:"center",margin:"10px 0px"}),Jt=r(y)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"center",padding:"0px 7px"});r(eo)({marginLeft:"-33px",color:"#17637D",height:"30px"});const Qt=r(y)(({progress:e,progresscolor:o})=>({width:"calc(100% - 60px)",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",borderBottom:`1px solid ${o}`,"::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${e}%`,borderBottom:e!=0?`2px solid ${o}`:"none"}})),Zt=r(y)({margin:"5px 0px 5px 0px",display:"flex",justifyContent:"space-between","& .MuiBox-root:last-child":{marginInlineEnd:"auto"}}),en=r(y)({display:"flex",justifyContent:"space-between"}),on=r(y)({width:"80%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",display:"flex"}),tn=r("img")({width:"20px",marginLeft:"10px"}),nn=r(y)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),Ge=r("img")({marginLeft:"3px",cursor:"pointer"}),an=r(y)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),sn=r(y)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),rn=r(y)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),Ke=r(y)(({style:e,disable:o,readalready:a,readbgcolor:n,readtextcolor:s})=>({opacity:o=="true"?.5:1,pointerEvents:o=="true"?"none":"initial",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:a=="true"?`${n} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:a=="true"?`${s} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:a=="true"?`${s} !important`:`${e.color} !important`}})),ln=r("img")({width:"50%",height:"50%"});function cn(e){var l,d;const{t:o}=ue(),{theme:a}=c.useContext(re),{buttonTextColor:n,logoTextColor:s}=le(a),g=localStorage.getItem(be)||fe;return t.jsxs(St,{children:[t.jsx(It,{src:a==E.DEFAULT||a==E.DARK?m.book_subtract:a==E.BLACK_AND_WHITE?m.book_subtract_BAW:a==E.SAPPHIRE?m.book_subtract_sapphire:m.book_subtract_easyocean}),t.jsxs(wt,{children:[t.jsxs(jt,{children:[t.jsxs(Tt,{onClick:e.onLogoClick,children:[t.jsx(At,{src:e.isLoading?m.default_cover:e.markImg||m.default_cover}),t.jsx(z,{fontFamily:"Kapakana",fontSize:25,lineHeight:24,fontWeight:"400",color:n,children:(l=e.markTitle)==null?void 0:l[g]})]}),t.jsx(Rt,{children:t.jsx(z,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:s,children:e.isLoading?o("Book Title"):(d=e.markTitle)==null?void 0:d[g]})})]}),t.jsx(Et,{src:a==E.EASY_OCEAN?m.search_easyocean:m.search,onClick:e.onSearchClick})]}),t.jsx(_t,{children:t.jsx(Pt,{src:a==E.DEFAULT||a==E.DARK?m.close2:a==E.BLACK_AND_WHITE?m.close2_BAW:a==E.SAPPHIRE?m.close2_sapphire:m.close2_easyocean,onClick:e.onCloseClick})}),t.jsx($t,{src:a==E.DEFAULT||a==E.EASY_OCEAN?m.setting:m.setting_white,onClick:e.onSettingClick})]})}function dn(e){var u,f,I,M;const[o,a]=c.useState([]),[n,s]=c.useState(),[g,l]=c.useState(!1),[d,x]=c.useState(!1),[k,j]=c.useState(0),{theme:T}=c.useContext(re),{mainBGColor:A,altTextColor:v,backgroundColor:C,topTextColor:N,highlightColor:_,buttonColor:B,buttonTextColor:P}=le(T),{t:R}=ue(),$=localStorage.getItem(be)||fe,D=c.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const h=e.userHistory.filter(O=>O.bookId==e.bookId);if(h&&h.length>0)return h[0].readChapterIds}return[]},[e.userHistory]),i=e.subBookId;c.useEffect(()=>{e.openedSubBook==e.subBookId?l(!0):l(!1)},[e.openedSubBook]),c.useEffect(()=>{var F,W;const h=e.subBooks.filter(L=>L.subBookId===i);let O=0;if(h&&h.length>0&&(O=(F=h[0].chapterInfos)==null?void 0:F.length,s(h[0])),e.currentUser){const L=e.userHistory.filter(U=>U.bookId==e.bookId);if(L&&L.length>0){const U=L[0].subBooks.filter(ce=>ce.subBookId==i);U&&U.length>0&&j(Math.floor(((W=U[0])==null?void 0:W.readChapters)/O*100))}}if(e.subBooks&&e.subBooks.length>0){const L=e.subBooks.filter(U=>U.subBookId==i);if(L&&L.length>0){let U=L[0].chapterInfos;U.sort((ce,me)=>ce.chapterNumber-me.chapterNumber),a(U)}}},[e.subBooks,e.userHistory]),c.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const h=e.subBookInfos.filter(O=>O.subBookId==i);h&&h.length>0?x(!0):x(!1)}},[]);const p=c.useCallback(h=>{x(O=>!O),e.onDownload(h)},[]),b=()=>{var h,O;n!=null&&n.noChapter?e.moveToReading(n==null?void 0:n.chapterInfos[0].chapterId,(h=e.bookTitle)==null?void 0:h[$],(O=n.subBookTitle)==null?void 0:O[$],n.subBookId):(l(!g),e.handleOpenedSubBook(e.subBookId))};return t.jsxs(Xt,{children:[t.jsxs(Jt,{children:[t.jsxs(Qt,{progress:k,progresscolor:B,onClick:b,children:[(n==null?void 0:n.subBookNumber)!=0&&t.jsxs(Zt,{children:[((u=n==null?void 0:n.subBookTitle)==null?void 0:u[Ae])&&t.jsx(z,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:v,language:ke,children:(n==null?void 0:n.subBookNumber)+". "+((f=n==null?void 0:n.subBookTitle)==null?void 0:f[Ae])}),t.jsx(z,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:v,language:ke,direction:"rtl",children:(I=n==null?void 0:n.subBookTitle)==null?void 0:I[ke]})]}),t.jsxs(en,{children:[t.jsxs(on,{children:[t.jsx(z,{fontFamily:'"Baloo Da 2"',color:v,children:(M=n==null?void 0:n.subBookTitle)==null?void 0:M[$]}),(n==null?void 0:n.subBookNumber)==0&&t.jsx(tn,{src:m.icon_intro})]}),e.currentUser&&k!==0&&!(n!=null&&n.noChapter)&&t.jsx(z,{fontFamily:'"Baloo Da 2"',color:B,children:`${k}%`})]})]}),t.jsxs(nn,{isdownloaded:d?"true":"false",children:[t.jsx(Ge,{src:d?T==E.DEFAULT||T==E.EASY_OCEAN?m.download_cancel:m.download_cancel_white:T==E.DEFAULT||T==E.EASY_OCEAN?m.download:m.download_white,onClick:()=>p(i)}),d&&t.jsx(Ge,{src:T==E.DEFAULT||T==E.EASY_OCEAN?m.download_refresh:m.download_refresh_white,onClick:()=>e.onDownloadRefresh(i)})]})]}),g&&t.jsxs(an,{style:{backgroundColor:C},children:[t.jsxs(sn,{children:[t.jsx(z,{fontFamily:"Inter",color:N,children:R("Surah")}),t.jsx(z,{fontFamily:"Inter",color:_,children:R("Chapter")})]}),t.jsx(rn,{children:o==null?void 0:o.map((h,O)=>h.chapterNumber==0?t.jsx(Ke,{disable:h.isTranslated?"false":"true",readalready:D&&D.length>0&&D.includes(h.chapterId)?"true":"false",style:{backgroundColor:A,color:v},readbgcolor:B,readtextcolor:P,onClick:()=>{var F,W;e.moveToReading(h.chapterId,(F=e.bookTitle)==null?void 0:F[$],(W=n.subBookTitle)==null?void 0:W[$],n.subBookId)},children:t.jsx(ln,{src:m.icon_intro})},O):t.jsx(Ke,{disable:h.isTranslated?"false":"true",readalready:D&&D.length>0&&D.includes(h.chapterId)?"true":"false",style:{backgroundColor:A,color:v},readbgcolor:B,readtextcolor:P,onClick:()=>{var F,W;e.moveToReading(h.chapterId,(F=e.bookTitle)==null?void 0:F[$],(W=n.subBookTitle)==null?void 0:W[$],n.subBookId)},children:t.jsx(z,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:h.chapterNumber})},O))})]})]})}function un(e){const[o,a]=c.useState([]);return c.useEffect(()=>{let n=e.subBooks;n&&n.sort((s,g)=>s.subBookNumber-g.subBookNumber),a(n)},[e.subBooks]),t.jsx(t.Fragment,{children:o&&o.length>0&&o.map((n,s)=>t.jsx(dn,{bookId:e.bookId,bookTitle:e.bookTitle,subBooks:o,subBookId:n.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},s))})}function pn(e){const[o,a]=c.useState(""),[n,s]=c.useState([]),[g,l]=c.useState(1),[d,x]=c.useState([]),{t:k}=ue(),{theme:j}=c.useContext(re),{backgroundColor:T,topTextColor:A,mainTextColor:v}=le(j),C=localStorage.getItem(be)||fe,N=So(e.deviceHeight),_=g*N,B=_-N,P=e.currentUser&&n.slice(B,_);c.useEffect(()=>{if(e.subBooks&&e.subBooks.length>0){const u=e.subBooks.map(f=>{var I;return{label:(I=f.subBookTitle)==null?void 0:I[C],value:f.subBookId}});u.unshift({label:k("All Books"),value:"all"}),x(u)}},[e.subBooks]),c.useEffect(()=>{d.length>0&&a(d[0].value)},[d]),c.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const u=e.bookmark.filter(f=>f.subBookId===o);s(o==="all"||o===""?e.bookmark:u)}else s([]),l(0);g>1&&P.length==1&&l(u=>u-1)},[e.bookmark]);const R=(u,f)=>{l(f)},$=c.useCallback(u=>{const f=u.target.value;a(f);const I=e.bookmark.filter(M=>M.subBookId===f);s(f==="all"?e.bookmark:I)},[e.bookmark]),D=()=>t.jsx(Lt,{style:{backgroundColor:T},children:t.jsx(mt,{label:k("Filter"),detail:t.jsxs(Ft,{children:[t.jsx(z,{color:A,children:k("Show")}),t.jsx(Io,{label:"",options:d,value:o,backgroundColor:T,textColor:A,onChange:$})]})})}),i=()=>t.jsx(zt,{children:(P==null?void 0:P.length)>0&&P.map((u,f)=>{var I;return t.jsxs(y,{children:[t.jsxs(Ut,{children:[t.jsxs(Ht,{onClick:()=>e.moveToReadingFromBookmark(u._id),children:[t.jsx(z,{color:v,children:(I=u.subBookTitle)==null?void 0:I[C]}),t.jsx(z,{color:v,children:u.chapterNumber>0?`${k("Surah Bookmark")} ${u.chapterNumber}, ${k("Aya")} ${u.verseNumber}`:`${k("Surah Bookmark")} _ , ${k("Aya")} ${u.verseNumber}`})]}),t.jsx(Gt,{src:j==E.DEFAULT||j==E.EASY_OCEAN||j==E.EASY_SUNRISE?m.black_bookmark:m.white_bookmark,onClick:()=>e.removeBookmark(u._id)})]}),t.jsx(Wt,{})]},f)})}),p=()=>t.jsx(Kt,{buttoncolor:v,children:t.jsx(kt,{count:e.currentUser?Math.ceil(n.length/N):0,page:g,hidePrevButton:!0,hideNextButton:!0,onChange:R})}),b=()=>t.jsxs(Vt,{style:{backgroundColor:T},children:[t.jsx(qt,{src:j==E.DEFAULT||j==E.BLACK_AND_WHITE?m.swipe:j==E.EASY_OCEAN?m.swipe_easyocean:m.swipe_white}),t.jsx(Yt,{style:{color:A},children:k("Bookmark Help")})]});return t.jsxs(Mt,{children:[D(),i(),p(),b()]})}function gn(e){const[o,a]=c.useState(H),{t:n}=ue(),{theme:s}=c.useContext(re),{mainBGColor:g,headerBGColor:l,buttonColor:d,buttonTextColor:x,mainTextColor:k}=le(s),j=T=>{e.currentUser?a(T):q.custom(A=>t.jsx(Y,{text:n("Bookmark Read Description"),visible:A.visible}))};return t.jsx(Nt,{style:{backgroundColor:l},children:t.jsxs(Dt,{style:{backgroundColor:g},children:[t.jsxs(Ot,{children:[t.jsxs(Ue,{active:o==H?"true":"false",style:{backgroundColor:o==H?d:g},bordercolor:k,onClick:()=>j(H),children:[t.jsx(He,{src:s==E.DEFAULT?m.index:s==E.EASY_OCEAN?o==H?m.index_active:m.index:o==H?m.index:m.index_active}),t.jsx(We,{active:o==H?"true":"false",children:t.jsx(z,{fontSize:16,fontWeight:"500",lineHeight:24,color:o==H?x:k,children:n("Index")})})]}),t.jsxs(Ue,{active:o==H?"false":"true",style:{backgroundColor:o==ye?d:g},bordercolor:k,onClick:()=>j(ye),children:[t.jsx(He,{src:s==E.DEFAULT?m.bookmark2_default:s==E.EASY_OCEAN?o==H?m.bookmark2_default:m.bookmark2_white:o==H?m.bookmark2_white:m.bookmark2_default}),t.jsx(We,{active:o==H?"false":"true",children:t.jsx(z,{fontSize:16,fontWeight:"500",lineHeight:24,color:o==ye?x:k,children:n("Bookmarks")})})]})]}),o==H?t.jsx(un,{bookId:e.bookId,bookTitle:e.bookTitle,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):t.jsx(pn,{subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark,deviceHeight:e.deviceHeight,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const xn=uo,Q=po,bn=1;class fn{constructor(){Te(this,"db",null)}async initDB(){return new Promise((o,a)=>{const n=indexedDB.open(xn,bn);n.onerror=()=>a(n.error),n.onsuccess=()=>{this.db=n.result,o()},n.onupgradeneeded=s=>{s.target.result.createObjectStore(Q,{keyPath:"subBookId"})}})}async saveSubBookInfo(o){return this.db||await this.initDB(),new Promise((a,n)=>{const l=this.db.transaction([Q],"readwrite").objectStore(Q).put(o);l.onerror=()=>n(l.error),l.onsuccess=()=>a()})}async getSubBookInfo(o){return this.db||await this.initDB(),new Promise((a,n)=>{const l=this.db.transaction([Q],"readonly").objectStore(Q).get(o);l.onerror=()=>n(l.error),l.onsuccess=()=>a(l.result)})}async removeSubBookInfo(o){return this.db||await this.initDB(),new Promise((a,n)=>{const l=this.db.transaction([Q],"readwrite").objectStore(Q).delete(o);l.onerror=()=>n(l.error),l.onsuccess=()=>a()})}}const xe=new fn,hn=r(y)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function mn(e){const[o,a]=c.useState(),[n,s]=c.useState(!1),l=new URLSearchParams(window.location.search).get("id")||"",d=Bo(),{t:x}=ue(),{height:k}=yt(),{theme:j}=c.useContext(re),{mainBGColor:T}=le(j),A=localStorage.getItem(be)||fe,v=c.useCallback(()=>{l&&$e.fetchBookInfo(l).then(i=>{var p,b,u;if(e.dispatch({type:J.ADD_BOOKINFO,payload:{bookInfo:i}}),s(!1),a(i),e.currentUser&&!e.userHistory.some(I=>I.bookId==l)&&i.subBooks){const I=i.subBooks.find(W=>W.subBookNumber==0),M=(p=I==null?void 0:I.chapterInfos[0])==null?void 0:p.chapterId,h=(b=i.bookTitle)==null?void 0:b[A],O=(u=I==null?void 0:I.subBookTitle)==null?void 0:u[A],F=I==null?void 0:I.subBookId;_(M,h,O,F)}}).catch(i=>{q.custom(p=>t.jsx(Y,{text:x(i),type:ve.BOOKMARK,visible:p.visible})),s(!1)})},[l,e.dispatch,x,e.userHistory,e.currentUser]),C=c.useCallback(async i=>{try{const p=await $e.fetchSubBookInfo(i);e.dispatch({type:J.ADD_SUBBOOKINFO,payload:{subBookInfo:p}}),await xe.saveSubBookInfo(p),s(!1)}catch(p){q.custom(b=>t.jsx(Y,{text:x(p),visible:b.visible})),s(!1)}},[e.dispatch,x]);c.useEffect(()=>{if(s(!0),!e.bookInfos||e.bookInfos.length===0)v();else{const i=e.bookInfos.filter(p=>p.bookId===l);i.length>0?(a(i[0]),s(!1)):v()}e.currentUser&&Ne.fetchBookmarks().then(i=>{e.dispatch({type:J.SET_BOOKMARKS,payload:{bookmark:i}})}).catch(i=>{i.status==401&&i.response.data.message==Re&&(q.custom(p=>t.jsx(Y,{text:x(i.response.data.message),visible:p.visible})),De.logout(),d("/login"))})},[l,e.bookInfos,e.currentUser,e.dispatch,x,e.userHistory]);const N=()=>{q.custom(i=>t.jsx(Y,{text:x("Not Built Yet"),visible:i.visible}))},_=(i,p,b,u)=>{d(`/reading?chapterId=${i}&book=${p}&subBook=${b}&subBookId=${u}&bookId=${l}`)},B=c.useCallback(async i=>{s(!0),Pe()<Ee?await xe.getSubBookInfo(i)?(await xe.removeSubBookInfo(i),e.dispatch({type:J.REMOVE_SUBBOOKINFO,payload:{subBookId:i}})):await C(i):q.custom(b=>t.jsx(Y,{text:x("Not Enough Space"),visible:b.visible})),s(!1)},[C,e.dispatch,x]),P=c.useCallback(async i=>{s(!0),await xe.removeSubBookInfo(i),e.dispatch({type:J.REMOVE_SUBBOOKINFO,payload:{subBookId:i}}),Pe()<Ee?await C(i):q.custom(b=>t.jsx(Y,{text:x("Not Enough Space"),visible:b.visible})),s(!1)},[C,e.dispatch,x]),R=c.useCallback(i=>{if(s(!0),e.bookmark&&e.bookmark.length>0){const p=e.bookmark.filter(b=>b._id===i);if(p&&p.length>0){const{chapterId:b,bookTitle:u,subBookId:f,subBookTitle:I,verseId:M}=p[0];d(`/reading?chapterId=${b}&book=${u.en}&subBook=${I.en}&subBookId=${f}&verseId=${M}&bookId=${l}`),s(!1)}}},[l,d,e.bookmark]),$=c.useCallback(i=>{s(!0),Ne.deleteBookmark(i).then(p=>{e.dispatch({type:J.REMOVE_BOOKMARK,payload:{bookmarkId:i}}),q.custom(b=>t.jsx(Y,{text:x(p.message),type:ve.BOOKMARK,visible:b.visible})),s(!1)}).catch(p=>{p.status==401&&p.response.data.message==Re&&(q.custom(b=>t.jsx(Y,{text:x(p.response.data.message),type:ve.BOOKMARK,visible:b.visible})),De.logout(),d("/login")),s(!1)})},[e.dispatch,x]),D=c.useCallback(i=>{e.dispatch({type:J.SET_OPENED_SUBBOOK,payload:{openedSubBook:e.openedSubBook===i?"":i}})},[e.openedSubBook,e.dispatch]);return t.jsxs(hn,{style:{backgroundColor:T},children:[t.jsx(cn,{markImg:o&&go+o.bookImage,markTitle:o==null?void 0:o.bookTitle,isLoading:n,onLogoClick:()=>d("/"),onCloseClick:()=>d("/library"),onSettingClick:()=>d("/settings"),onSearchClick:N}),t.jsx(gn,{bookId:l,bookTitle:o==null?void 0:o.bookTitle,subBooks:o==null?void 0:o.subBooks,deviceHeight:k,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.openedSubBook,moveToReading:_,moveToReadingFromBookmark:R,onDownload:B,onDownloadRefresh:P,removeBookmark:$,handleOpenedSubBook:D}),n&&t.jsx(wo,{})]})}function kn(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,openedSubBook:e.pageStatus.openedSubBook,currentUser:e.user.currentUser,activeChapterId:e.books.activeChapterId}}const En=Co(kn)(mn);export{En as default};
