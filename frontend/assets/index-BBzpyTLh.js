var it=Object.defineProperty;var rt=(e,t,a)=>t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var Re=(e,t,a)=>rt(e,typeof t!="symbol"?t+"":t,a);import{_ as S,b as l,ag as lt,c as ee,j as n,N as te,a7 as ct,o as ne,J as Se,ab as be,ad as he,Q as E,ah as ye,ai as ve,M as H,aj as Ce,ak as dt,al as ut,am as Be,an as Ee,ao as _e,ac as pt}from"./index-Dibo9daf.js";import{x as ae,y as se,s as i,z as ie,T as gt,A as xt,D as ft,E as bt,F as J,G as re,J as De,P as ht,K as qe,M as mt,N as Ye,O as me,Q as we,S as le,g as ce,R as kt,B as k,U as yt,u as pe,_ as Y,c as vt,d as Ct,e as Q}from"./App-OdTok9eR.js";import{T as F,I as h,g as Bt,a as Pe}from"./images-DnnUPU9h.js";import{S as St}from"./index-CtOr8J5A.js";import{C as X,L as wt}from"./index-czeODGXL.js";import{b as $e}from"./book.service-DMAE4z4a.js";import{b as Ne}from"./bookmark.service-DVfdhCbO.js";import{a as Oe}from"./auth.service-DyFIPSgW.js";import"./index-BKuUYryJ.js";import"./axios-BimPEqV4.js";function It(e){return ae("MuiCollapse",e)}se("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const jt=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Tt=e=>{const{orientation:t,classes:a}=e,o={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return re(o,It,a)},At=i("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.orientation],a.state==="entered"&&t.entered,a.state==="exited"&&!a.in&&a.collapsedSize==="0px"&&t.hidden]}})(({theme:e,ownerState:t})=>S({height:0,overflow:"hidden",transition:e.transitions.create("height")},t.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},t.state==="entered"&&S({height:"auto",overflow:"visible"},t.orientation==="horizontal"&&{width:"auto"}),t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&{visibility:"hidden"})),Rt=i("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>S({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),Et=i("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>S({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),Xe=l.forwardRef(function(t,a){const o=ie({props:t,name:"MuiCollapse"}),{addEndListener:s,children:x,className:r,collapsedSize:c="0px",component:f,easing:m,in:j,onEnter:T,onEntered:A,onEntering:v,onExit:y,onExited:$,onExiting:_,orientation:C="vertical",style:D,timeout:R=lt.standard,TransitionComponent:P=gt}=o,N=ee(o,jt),d=S({},o,{orientation:C,collapsedSize:c}),u=Tt(d),g=xt(),p=ft(),b=l.useRef(null),w=l.useRef(),M=typeof c=="number"?`${c}px`:c,z=C==="horizontal",B=z?"width":"height",O=l.useRef(null),W=bt(a,O),L=I=>K=>{if(I){const q=O.current;K===void 0?I(q):I(q,K)}},U=()=>b.current?b.current[z?"clientWidth":"clientHeight"]:0,G=L((I,K)=>{b.current&&z&&(b.current.style.position="absolute"),I.style[B]=M,T&&T(I,K)}),de=L((I,K)=>{const q=U();b.current&&z&&(b.current.style.position="");const{duration:ue,easing:ge}=De({style:D,timeout:R,easing:m},{mode:"enter"});if(R==="auto"){const Ae=g.transitions.getAutoHeightDuration(q);I.style.transitionDuration=`${Ae}ms`,w.current=Ae}else I.style.transitionDuration=typeof ue=="string"?ue:`${ue}ms`;I.style[B]=`${q}px`,I.style.transitionTimingFunction=ge,v&&v(I,K)}),ke=L((I,K)=>{I.style[B]="auto",A&&A(I,K)}),ot=L(I=>{I.style[B]=`${U()}px`,y&&y(I)}),nt=L($),at=L(I=>{const K=U(),{duration:q,easing:ue}=De({style:D,timeout:R,easing:m},{mode:"exit"});if(R==="auto"){const ge=g.transitions.getAutoHeightDuration(K);I.style.transitionDuration=`${ge}ms`,w.current=ge}else I.style.transitionDuration=typeof q=="string"?q:`${q}ms`;I.style[B]=M,I.style.transitionTimingFunction=ue,_&&_(I)}),st=I=>{R==="auto"&&p.start(w.current||0,I),s&&s(O.current,I)};return n.jsx(P,S({in:j,onEnter:G,onEntered:ke,onEntering:de,onExit:ot,onExited:nt,onExiting:at,addEndListener:st,nodeRef:O,timeout:R==="auto"?null:R},N,{children:(I,K)=>n.jsx(At,S({as:f,className:J(u.root,r,{entered:u.entered,exited:!j&&M==="0px"&&u.hidden}[I]),style:S({[z?"minWidth":"minHeight"]:M},D),ref:W},K,{ownerState:S({},d,{state:I}),children:n.jsx(Rt,{ownerState:S({},d,{state:I}),className:u.wrapper,ref:b,children:n.jsx(Et,{ownerState:S({},d,{state:I}),className:u.wrapperInner,children:x})})}))}))});Xe.muiSupportAuto=!0;const Je=l.createContext({});function _t(e){return ae("MuiAccordion",e)}const xe=se("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),Dt=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],Pt=e=>{const{classes:t,square:a,expanded:o,disabled:s,disableGutters:x}=e;return re({root:["root",!a&&"rounded",o&&"expanded",s&&"disabled",!x&&"gutters"],region:["region"]},_t,t)},$t=i(ht,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[{[`& .${xe.region}`]:t.region},t.root,!a.square&&t.rounded,!a.disableGutters&&t.gutters]}})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${xe.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${xe.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e})=>({variants:[{props:t=>!t.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:t=>!t.disableGutters,style:{[`&.${xe.expanded}`]:{margin:"16px 0"}}}]})),Nt=l.forwardRef(function(t,a){const o=ie({props:t,name:"MuiAccordion"}),{children:s,className:x,defaultExpanded:r=!1,disabled:c=!1,disableGutters:f=!1,expanded:m,onChange:j,square:T=!1,slots:A={},slotProps:v={},TransitionComponent:y,TransitionProps:$}=o,_=ee(o,Dt),[C,D]=qe({controlled:m,default:r,name:"Accordion",state:"expanded"}),R=l.useCallback(z=>{D(!C),j&&j(z,!C)},[C,j,D]),[P,...N]=l.Children.toArray(s),d=l.useMemo(()=>({expanded:C,disabled:c,disableGutters:f,toggle:R}),[C,c,f,R]),u=S({},o,{square:T,disabled:c,disableGutters:f,expanded:C}),g=Pt(u),p=S({transition:y},A),b=S({transition:$},v),[w,M]=mt("transition",{elementType:Xe,externalForwardedProps:{slots:p,slotProps:b},ownerState:u});return n.jsxs($t,S({className:J(g.root,x),ref:a,ownerState:u,square:T},_,{children:[n.jsx(Je.Provider,{value:d,children:P}),n.jsx(w,S({in:C,timeout:"auto"},M,{children:n.jsx("div",{"aria-labelledby":P.props.id,id:P.props["aria-controls"],role:"region",className:g.region,children:N})}))]}))});function Ot(e){return ae("MuiAccordionDetails",e)}se("MuiAccordionDetails",["root"]);const Mt=["className"],Lt=e=>{const{classes:t}=e;return re({root:["root"]},Ot,t)},Ft=i("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),zt=l.forwardRef(function(t,a){const o=ie({props:t,name:"MuiAccordionDetails"}),{className:s}=o,x=ee(o,Mt),r=o,c=Lt(r);return n.jsx(Ft,S({className:J(c.root,s),ref:a,ownerState:r},x))});function Ut(e){return ae("MuiAccordionSummary",e)}const oe=se("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Ht=["children","className","expandIcon","focusVisibleClassName","onClick"],Wt=e=>{const{classes:t,expanded:a,disabled:o,disableGutters:s}=e;return re({root:["root",a&&"expanded",o&&"disabled",!s&&"gutters"],focusVisible:["focusVisible"],content:["content",a&&"expanded",!s&&"contentGutters"],expandIconWrapper:["expandIconWrapper",a&&"expanded"]},Ut,t)},Gt=i(Ye,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${oe.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${oe.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${oe.disabled})`]:{cursor:"pointer"},variants:[{props:a=>!a.disableGutters,style:{[`&.${oe.expanded}`]:{minHeight:64}}}]}}),Kt=i("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:t=>!t.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${oe.expanded}`]:{margin:"20px 0"}}}]})),Vt=i("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${oe.expanded}`]:{transform:"rotate(180deg)"}})),qt=l.forwardRef(function(t,a){const o=ie({props:t,name:"MuiAccordionSummary"}),{children:s,className:x,expandIcon:r,focusVisibleClassName:c,onClick:f}=o,m=ee(o,Ht),{disabled:j=!1,disableGutters:T,expanded:A,toggle:v}=l.useContext(Je),y=C=>{v&&v(C),f&&f(C)},$=S({},o,{expanded:A,disabled:j,disableGutters:T}),_=Wt($);return n.jsxs(Gt,S({focusRipple:!1,disableRipple:!0,disabled:j,component:"div","aria-expanded":A,className:J(_.root,x),focusVisibleClassName:J(_.focusVisible,c),onClick:y,ref:a,ownerState:$},m,{children:[n.jsx(Kt,{className:_.content,ownerState:$,children:s}),r&&n.jsx(Vt,{className:_.expandIconWrapper,ownerState:$,children:r})]}))});function Yt(e){return ae("MuiPagination",e)}se("MuiPagination",["root","ul","outlined","text"]);const Xt=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Jt(e={}){const{boundaryCount:t=1,componentName:a="usePagination",count:o=1,defaultPage:s=1,disabled:x=!1,hideNextButton:r=!1,hidePrevButton:c=!1,onChange:f,page:m,showFirstButton:j=!1,showLastButton:T=!1,siblingCount:A=1}=e,v=ee(e,Xt),[y,$]=qe({controlled:m,default:s,name:a,state:"page"}),_=(p,b)=>{m||$(b),f&&f(p,b)},C=(p,b)=>{const w=b-p+1;return Array.from({length:w},(M,z)=>p+z)},D=C(1,Math.min(t,o)),R=C(Math.max(o-t+1,t+1),o),P=Math.max(Math.min(y-A,o-t-A*2-1),t+2),N=Math.min(Math.max(y+A,t+A*2+2),R.length>0?R[0]-2:o-1),d=[...j?["first"]:[],...c?[]:["previous"],...D,...P>t+2?["start-ellipsis"]:t+1<o-t?[t+1]:[],...C(P,N),...N<o-t-1?["end-ellipsis"]:o-t>t?[o-t]:[],...R,...r?[]:["next"],...T?["last"]:[]],u=p=>{switch(p){case"first":return 1;case"previous":return y-1;case"next":return y+1;case"last":return o;default:return null}},g=d.map(p=>typeof p=="number"?{onClick:b=>{_(b,p)},type:"page",page:p,selected:p===y,disabled:x,"aria-current":p===y?"true":void 0}:{onClick:b=>{_(b,u(p))},type:p,page:u(p),selected:!1,disabled:x||p.indexOf("ellipsis")===-1&&(p==="next"||p==="last"?y>=o:y<=1)});return S({items:g},v)}function Qt(e){return ae("MuiPaginationItem",e)}const V=se("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),Me=me(n.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Le=me(n.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Fe=me(n.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),ze=me(n.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Zt=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Qe=(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`size${ne(a.size)}`],a.variant==="text"&&t[`text${ne(a.color)}`],a.variant==="outlined"&&t[`outlined${ne(a.color)}`],a.shape==="rounded"&&t.rounded,a.type==="page"&&t.page,(a.type==="start-ellipsis"||a.type==="end-ellipsis")&&t.ellipsis,(a.type==="previous"||a.type==="next")&&t.previousNext,(a.type==="first"||a.type==="last")&&t.firstLast]},eo=e=>{const{classes:t,color:a,disabled:o,selected:s,size:x,shape:r,type:c,variant:f}=e,m={root:["root",`size${ne(x)}`,f,r,a!=="standard"&&`color${ne(a)}`,a!=="standard"&&`${f}${ne(a)}`,o&&"disabled",s&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[c]],icon:["icon"]};return re(m,Qt,t)},to=i("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Qe})(({theme:e,ownerState:t})=>S({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${V.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),oo=i(Ye,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Qe})(({theme:e,ownerState:t})=>S({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${V.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${V.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${V.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:te(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${V.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:te(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${V.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:t})=>S({},t.variant==="text"&&{[`&.${V.selected}`]:S({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}},[`&.${V.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}},{[`&.${V.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},t.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${V.selected}`]:S({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:te(e.palette[t.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:te(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:te(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${V.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:te(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${V.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),no=i("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})(({theme:e,ownerState:t})=>S({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(22)})),ao=l.forwardRef(function(t,a){const o=ie({props:t,name:"MuiPaginationItem"}),{className:s,color:x="standard",component:r,components:c={},disabled:f=!1,page:m,selected:j=!1,shape:T="circular",size:A="medium",slots:v={},type:y="page",variant:$="text"}=o,_=ee(o,Zt),C=S({},o,{color:x,disabled:f,selected:j,shape:T,size:A,type:y,variant:$}),D=ct(),R=eo(C),N=(D?{previous:v.next||c.next||ze,next:v.previous||c.previous||Fe,last:v.first||c.first||Me,first:v.last||c.last||Le}:{previous:v.previous||c.previous||Fe,next:v.next||c.next||ze,first:v.first||c.first||Me,last:v.last||c.last||Le})[y];return y==="start-ellipsis"||y==="end-ellipsis"?n.jsx(to,{ref:a,ownerState:C,className:J(R.root,s),children:"â€¦"}):n.jsxs(oo,S({ref:a,ownerState:C,component:r,disabled:f,className:J(R.root,s)},_,{children:[y==="page"&&m,N?n.jsx(no,{as:N,ownerState:C,className:R.icon}):null]}))}),so=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],io=e=>{const{classes:t,variant:a}=e;return re({root:["root",a],ul:["ul"]},Yt,t)},ro=i("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant]]}})({}),lo=i("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function co(e,t,a){return e==="page"?`${a?"":"Go to "}page ${t}`:`Go to ${e} page`}const uo=l.forwardRef(function(t,a){const o=ie({props:t,name:"MuiPagination"}),{boundaryCount:s=1,className:x,color:r="standard",count:c=1,defaultPage:f=1,disabled:m=!1,getItemAriaLabel:j=co,hideNextButton:T=!1,hidePrevButton:A=!1,renderItem:v=g=>n.jsx(ao,S({},g)),shape:y="circular",showFirstButton:$=!1,showLastButton:_=!1,siblingCount:C=1,size:D="medium",variant:R="text"}=o,P=ee(o,so),{items:N}=Jt(S({},o,{componentName:"Pagination"})),d=S({},o,{boundaryCount:s,color:r,count:c,defaultPage:f,disabled:m,getItemAriaLabel:j,hideNextButton:T,hidePrevButton:A,renderItem:v,shape:y,showFirstButton:$,showLastButton:_,siblingCount:C,size:D,variant:R}),u=io(d);return n.jsx(ro,S({"aria-label":"pagination navigation",className:J(u.root,x),ownerState:d,ref:a},P,{children:n.jsx(lo,{className:u.ul,ownerState:d,children:N.map((g,p)=>n.jsx("li",{children:v(S({},g,{color:r,"aria-label":j(g.type,g.page,g.selected),shape:y,size:D,variant:R}))},p))})}))});var Ie={},po=Se;Object.defineProperty(Ie,"__esModule",{value:!0});var Ze=Ie.default=void 0,go=po(we()),xo=n;Ze=Ie.default=(0,go.default)((0,xo.jsx)("path",{d:"m10 17 5-5-5-5z"}),"ArrowRight");var je={},fo=Se;Object.defineProperty(je,"__esModule",{value:!0});var et=je.default=void 0,bo=fo(we()),ho=n;et=je.default=(0,bo.default)((0,ho.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp");function mo(e){const[t,a]=l.useState(!1),{theme:o}=l.useContext(le),{backgroundColor:s,topTextColor:x}=ce(o),r=x;return n.jsx(kt,{iconcolor:r,children:n.jsxs(Nt,{onChange:()=>a(c=>!c),style:{backgroundColor:s},children:[n.jsx(qt,{expandIcon:t?n.jsx(et,{}):n.jsx(Ze,{}),children:n.jsx(F,{color:x,fontWeight:"700",children:e.label})}),n.jsx(zt,{children:e.detail})]})})}function ko(e){return n.jsx(uo,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function Ue(){const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}function yo(){const[e,t]=l.useState(Ue());return l.useEffect(()=>{function a(){t(Ue())}return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),e}var Te={},vo=Se;Object.defineProperty(Te,"__esModule",{value:!0});var tt=Te.default=void 0,Co=vo(we()),Bo=n;tt=Te.default=(0,Co.default)((0,Bo.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const So=i(k)({display:"flex",position:"relative",width:"100%"}),wo=i("img")({width:"100%",marginTop:"57px"}),Io=i(k)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),jo=i(k)({display:"flex",alignItems:"baseline"}),To=i(k)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),Ao=i("img")({width:"100%",height:"100%"}),Ro=i(k)({margin:0,marginLeft:"12px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),Eo=i("img")({cursor:"pointer","&:active":{opacity:"0.8"}}),_o=i(k)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),Do=i("img")({width:"100%","&:active":{opacity:"0.8"}}),Po=i("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}}),$o=i(k)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),No=i(k)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Oo=i(k)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),He=i(k)(({active:e,bordercolor:t})=>({width:"50%",height:"37.9px",border:`1px solid ${t}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer",marginBottom:"20px"})),We=i("img")({}),Ge=i(k)(({active:e})=>({marginLeft:"5px"})),Mo=i(k)({width:"100%",display:"flex",flexDirection:"column"}),Lo=i(k)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),Fo=i(k)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});i(k)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const zo=i(k)({display:"flex",flexDirection:"column"}),Uo=i(k)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),Ho=i(k)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});i(k)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const Wo=i(k)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),Go=i("img")({cursor:"pointer",marginRight:"15px"}),Ko=i(yt)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),Vo=i(k)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),qo=i("img")({width:"63px"}),Yo=i(k)({margin:"0px",marginLeft:"24px","@media (max-height: 600px)":{"& .MuiBox-root":{fontSize:"14px !important"}}}),Xo=i(k)({width:"100%",justifyContent:"space-between",alignItems:"center",margin:"10px 0px"}),Jo=i(k)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"center",padding:"0px 7px"});i(tt)({marginLeft:"-33px",color:"#17637D",height:"30px"});const Qo=i(k)(({progress:e,progresscolor:t})=>({width:"calc(100% - 60px)",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",borderBottom:`1px solid ${t}`,"::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${e}%`,borderBottom:e!=0?`2px solid ${t}`:"none"}})),Zo=i(k)(({istransliteration:e})=>({margin:"5px 0px 5px 0px",display:"flex",justifyContent:"space-between","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& .MuiBox-root:first-of-type":{width:"48%"},"& .MuiBox-root:last-child":{marginInlineEnd:"auto",width:e=="true"?"48%":"75%"}})),en=i(k)({display:"flex",justifyContent:"space-between"}),tn=i(k)({width:"80%",display:"flex","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}),on=i("img")({width:"20px",marginLeft:"10px"}),nn=i(k)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),Ke=i("img")({marginLeft:"3px",cursor:"pointer"}),an=i(k)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),sn=i(k)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),rn=i(k)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),Ve=i(k)(({style:e,disable:t,readalready:a,readbgcolor:o,readtextcolor:s})=>({opacity:t=="true"?.5:1,pointerEvents:t=="true"?"none":"initial",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:a=="true"?`${o} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:a=="true"?`${s} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:a=="true"?`${s} !important`:`${e.color} !important`}})),ln=i("img")({width:"50%",height:"50%"});function cn(e){var r,c;const{t}=pe(),{theme:a}=l.useContext(le),{buttonTextColor:o,logoTextColor:s}=ce(a),x=localStorage.getItem(be)||he;return n.jsxs(So,{children:[n.jsx(wo,{src:a==E.DEFAULT||a==E.DARK?h.book_subtract:a==E.BLACK_AND_WHITE?h.book_subtract_BAW:a==E.SAPPHIRE?h.book_subtract_sapphire:h.book_subtract_easyocean}),n.jsxs(Io,{children:[n.jsxs(jo,{children:[n.jsxs(To,{onClick:e.onLogoClick,children:[n.jsx(Ao,{src:e.isLoading?h.default_cover:e.markImg||h.default_cover}),n.jsx(F,{fontFamily:"Kapakana",fontSize:25,lineHeight:24,fontWeight:"400",color:o,children:(r=e.markTitle)==null?void 0:r[x]})]}),n.jsx(Ro,{children:n.jsx(F,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:s,children:e.isLoading?t("Book Title"):(c=e.markTitle)==null?void 0:c[x]})})]}),n.jsx(Eo,{src:a==E.EASY_OCEAN?h.search_easyocean:h.search,onClick:e.onSearchClick})]}),n.jsx(_o,{children:n.jsx(Do,{src:a==E.DEFAULT||a==E.DARK?h.close2:a==E.BLACK_AND_WHITE?h.close2_BAW:a==E.SAPPHIRE?h.close2_sapphire:h.close2_easyocean,onClick:e.onCloseClick})}),n.jsx(Po,{src:a==E.DEFAULT||a==E.EASY_OCEAN?h.setting:h.setting_white,onClick:e.onSettingClick})]})}function dn(e){var p,b,w,M,z;const[t,a]=l.useState([]),[o,s]=l.useState(),[x,r]=l.useState(!1),[c,f]=l.useState(!1),[m,j]=l.useState(0),{theme:T}=l.useContext(le),{mainBGColor:A,altTextColor:v,backgroundColor:y,topTextColor:$,highlightColor:_,buttonColor:C,buttonTextColor:D}=ce(T),{t:R}=pe(),P=localStorage.getItem(be)||he,N=l.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const B=e.userHistory.filter(O=>O.bookId==e.bookId);if(B&&B.length>0)return B[0].readChapterIds}return[]},[e.userHistory]),d=e.subBookId;l.useEffect(()=>{e.openedSubBook==e.subBookId?r(!0):r(!1)},[e.openedSubBook]),l.useEffect(()=>{var W,L;const B=e.subBooks.filter(U=>U.subBookId===d);let O=0;if(B&&B.length>0&&(O=(W=B[0].chapterInfos)==null?void 0:W.length,s(B[0])),e.currentUser){const U=e.userHistory.filter(G=>G.bookId==e.bookId);if(U&&U.length>0){const G=U[0].subBooks.filter(de=>de.subBookId==d);G&&G.length>0&&j(Math.floor(((L=G[0])==null?void 0:L.readChapters)/O*100))}}if(e.subBooks&&e.subBooks.length>0){const U=e.subBooks.filter(G=>G.subBookId==d);if(U&&U.length>0){let G=U[0].chapterInfos;G.sort((de,ke)=>de.chapterNumber-ke.chapterNumber),a(G)}}},[e.subBooks,e.userHistory]),l.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const B=e.subBookInfos.filter(O=>O.subBookId==d);B&&B.length>0?f(!0):f(!1)}},[]);const u=l.useCallback(B=>{f(O=>!O),e.onDownload(B)},[]),g=()=>{var B,O;o!=null&&o.noChapter?e.moveToReading(o==null?void 0:o.chapterInfos[0].chapterId,(B=e.bookTitle)==null?void 0:B[P],(O=o.subBookTitle)==null?void 0:O[P],o.subBookId):(r(!x),e.handleOpenedSubBook(e.subBookId))};return n.jsxs(Xo,{children:[n.jsxs(Jo,{children:[n.jsxs(Qo,{progress:m,progresscolor:C,onClick:g,children:[(o==null?void 0:o.subBookNumber)!=0&&n.jsxs(Zo,{istransliteration:((p=o==null?void 0:o.subBookTitle)==null?void 0:p[ye])!=null?"true":"false",children:[((b=o==null?void 0:o.subBookTitle)==null?void 0:b[ye])&&n.jsx(F,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:v,language:ve,children:(o==null?void 0:o.subBookNumber)+". "+((w=o==null?void 0:o.subBookTitle)==null?void 0:w[ye])}),n.jsx(F,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:v,language:ve,direction:"rtl",children:(M=o==null?void 0:o.subBookTitle)==null?void 0:M[ve]})]}),n.jsxs(en,{children:[n.jsxs(tn,{children:[n.jsx(F,{fontFamily:'"Baloo Da 2"',color:v,children:(z=o==null?void 0:o.subBookTitle)==null?void 0:z[P]}),(o==null?void 0:o.subBookNumber)==0&&n.jsx(on,{src:h.icon_intro})]}),e.currentUser&&m!==0&&!(o!=null&&o.noChapter)&&n.jsx(F,{fontFamily:'"Baloo Da 2"',color:C,children:`${m}%`})]})]}),n.jsxs(nn,{isdownloaded:c?"true":"false",children:[n.jsx(Ke,{src:c?T==E.DEFAULT||T==E.EASY_OCEAN?h.download_cancel:h.download_cancel_white:T==E.DEFAULT||T==E.EASY_OCEAN?h.download:h.download_white,onClick:()=>u(d)}),c&&n.jsx(Ke,{src:T==E.DEFAULT||T==E.EASY_OCEAN?h.download_refresh:h.download_refresh_white,onClick:()=>e.onDownloadRefresh(d)})]})]}),x&&n.jsxs(an,{style:{backgroundColor:y},children:[n.jsxs(sn,{children:[n.jsx(F,{fontFamily:"Inter",color:$,children:R("Surah")}),n.jsx(F,{fontFamily:"Inter",color:_,children:R("Chapter")})]}),n.jsx(rn,{children:t==null?void 0:t.map((B,O)=>B.chapterNumber==0?n.jsx(Ve,{disable:B.isTranslated?"false":"true",readalready:N&&N.length>0&&N.includes(B.chapterId)?"true":"false",style:{backgroundColor:A,color:v},readbgcolor:C,readtextcolor:D,onClick:()=>{var W,L;e.moveToReading(B.chapterId,(W=e.bookTitle)==null?void 0:W[P],(L=o.subBookTitle)==null?void 0:L[P],o.subBookId)},children:n.jsx(ln,{src:h.icon_intro})},O):n.jsx(Ve,{disable:B.isTranslated?"false":"true",readalready:N&&N.length>0&&N.includes(B.chapterId)?"true":"false",style:{backgroundColor:A,color:v},readbgcolor:C,readtextcolor:D,onClick:()=>{var W,L;e.moveToReading(B.chapterId,(W=e.bookTitle)==null?void 0:W[P],(L=o.subBookTitle)==null?void 0:L[P],o.subBookId)},children:n.jsx(F,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:B.chapterNumber})},O))})]})]})}function un(e){const[t,a]=l.useState([]);return l.useEffect(()=>{let o=e.subBooks;o&&o.sort((s,x)=>s.subBookNumber-x.subBookNumber),a(o)},[e.subBooks]),n.jsx(n.Fragment,{children:t&&t.length>0&&t.map((o,s)=>n.jsx(dn,{bookId:e.bookId,bookTitle:e.bookTitle,subBooks:t,subBookId:o.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},s))})}function pn(e){const[t,a]=l.useState(""),[o,s]=l.useState([]),[x,r]=l.useState(1),[c,f]=l.useState([]),{t:m}=pe(),{theme:j}=l.useContext(le),{backgroundColor:T,topTextColor:A,mainTextColor:v}=ce(j),y=localStorage.getItem(be)||he,$=Bt(e.deviceHeight),_=x*$,C=_-$,D=e.currentUser&&o.slice(C,_);l.useEffect(()=>{if(e.subBooks&&e.subBooks.length>0){const p=e.subBooks.map(b=>{var w;return{label:(w=b.subBookTitle)==null?void 0:w[y],value:b.subBookId}});p.unshift({label:m("All Books"),value:"all"}),f(p)}},[e.subBooks]),l.useEffect(()=>{c.length>0&&a(c[0].value)},[c]),l.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const p=e.bookmark.filter(b=>b.subBookId===t);s(t==="all"||t===""?e.bookmark:p)}else s([]),r(0);x>1&&D.length==1&&r(p=>p-1)},[e.bookmark]);const R=(p,b)=>{r(b)},P=l.useCallback(p=>{const b=p.target.value;a(b);const w=e.bookmark.filter(M=>M.subBookId===b);s(b==="all"?e.bookmark:w)},[e.bookmark]),N=()=>n.jsx(Lo,{style:{backgroundColor:T},children:n.jsx(mo,{label:m("Filter"),detail:n.jsxs(Fo,{children:[n.jsx(F,{color:A,children:m("Show")}),n.jsx(St,{label:"",options:c,value:t,backgroundColor:T,textColor:A,onChange:P})]})})}),d=()=>n.jsx(zo,{children:(D==null?void 0:D.length)>0&&D.map((p,b)=>{var w;return n.jsxs(k,{children:[n.jsxs(Uo,{children:[n.jsxs(Ho,{onClick:()=>e.moveToReadingFromBookmark(p._id),children:[n.jsx(F,{color:v,children:(w=p.subBookTitle)==null?void 0:w[y]}),n.jsx(F,{color:v,children:p.chapterNumber>0?`${m("Surah Bookmark")} ${p.chapterNumber}, ${m("Aya")} ${p.verseNumber}`:`${m("Surah Bookmark")} _ , ${m("Aya")} ${p.verseNumber}`})]}),n.jsx(Go,{src:j==E.DEFAULT||j==E.EASY_OCEAN||j==E.EASY_SUNRISE?h.black_bookmark:h.white_bookmark,onClick:()=>e.removeBookmark(p._id)})]}),n.jsx(Wo,{})]},b)})}),u=()=>n.jsx(Ko,{buttoncolor:v,children:n.jsx(ko,{count:e.currentUser?Math.ceil(o.length/$):0,page:x,hidePrevButton:!0,hideNextButton:!0,onChange:R})}),g=()=>n.jsxs(Vo,{style:{backgroundColor:T},children:[n.jsx(qo,{src:j==E.DEFAULT||j==E.BLACK_AND_WHITE?h.swipe:j==E.EASY_OCEAN?h.swipe_easyocean:h.swipe_white}),n.jsx(Yo,{style:{color:A},children:m("Bookmark Help")})]});return n.jsxs(Mo,{children:[N(),d(),u(),g()]})}function gn(e){const[t,a]=l.useState(H),{t:o}=pe(),{theme:s}=l.useContext(le),{mainBGColor:x,headerBGColor:r,buttonColor:c,buttonTextColor:f,mainTextColor:m}=ce(s),j=T=>{e.currentUser?a(T):Y.custom(A=>n.jsx(X,{text:o("Bookmark Read Description"),visible:A.visible}))};return n.jsx($o,{style:{backgroundColor:r},children:n.jsxs(No,{style:{backgroundColor:x},children:[n.jsxs(Oo,{children:[n.jsxs(He,{active:t==H?"true":"false",style:{backgroundColor:t==H?c:x},bordercolor:m,onClick:()=>j(H),children:[n.jsx(We,{src:s==E.DEFAULT?h.index:s==E.EASY_OCEAN?t==H?h.index_active:h.index:t==H?h.index:h.index_active}),n.jsx(Ge,{active:t==H?"true":"false",children:n.jsx(F,{fontSize:16,fontWeight:"500",lineHeight:24,color:t==H?f:m,children:o("Index")})})]}),n.jsxs(He,{active:t==H?"false":"true",style:{backgroundColor:t==Ce?c:x},bordercolor:m,onClick:()=>j(Ce),children:[n.jsx(We,{src:s==E.DEFAULT?h.bookmark2_default:s==E.EASY_OCEAN?t==H?h.bookmark2_default:h.bookmark2_white:t==H?h.bookmark2_white:h.bookmark2_default}),n.jsx(Ge,{active:t==H?"false":"true",children:n.jsx(F,{fontSize:16,fontWeight:"500",lineHeight:24,color:t==Ce?f:m,children:o("Bookmarks")})})]})]}),t==H?n.jsx(un,{bookId:e.bookId,bookTitle:e.bookTitle,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):n.jsx(pn,{subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark,deviceHeight:e.deviceHeight,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const xn=dt,Z=ut,fn=1;class bn{constructor(){Re(this,"db",null)}async initDB(){return new Promise((t,a)=>{const o=indexedDB.open(xn,fn);o.onerror=()=>a(o.error),o.onsuccess=()=>{this.db=o.result,t()},o.onupgradeneeded=s=>{s.target.result.createObjectStore(Z,{keyPath:"subBookId"})}})}async saveSubBookInfo(t){return this.db||await this.initDB(),new Promise((a,o)=>{const r=this.db.transaction([Z],"readwrite").objectStore(Z).put(t);r.onerror=()=>o(r.error),r.onsuccess=()=>a()})}async getSubBookInfo(t){return this.db||await this.initDB(),new Promise((a,o)=>{const r=this.db.transaction([Z],"readonly").objectStore(Z).get(t);r.onerror=()=>o(r.error),r.onsuccess=()=>a(r.result)})}async removeSubBookInfo(t){return this.db||await this.initDB(),new Promise((a,o)=>{const r=this.db.transaction([Z],"readwrite").objectStore(Z).delete(t);r.onerror=()=>o(r.error),r.onsuccess=()=>a()})}}const fe=new bn,hn=i(k)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function mn(e){const[t,a]=l.useState(),[o,s]=l.useState(!1),r=new URLSearchParams(window.location.search).get("id")||"",c=Ct(),{t:f}=pe(),{height:m}=yo(),{theme:j}=l.useContext(le),{mainBGColor:T}=ce(j),A=localStorage.getItem(be)||he,v=l.useCallback(()=>{r&&$e.fetchBookInfo(r).then(d=>{var u,g,p;if(e.dispatch({type:Q.ADD_BOOKINFO,payload:{bookInfo:d}}),s(!1),a(d),e.currentUser&&!e.userHistory.some(w=>w.bookId==r)&&d.subBooks){const w=d.subBooks.find(W=>W.subBookNumber==0),M=(u=w==null?void 0:w.chapterInfos[0])==null?void 0:u.chapterId,z=(g=d.bookTitle)==null?void 0:g[A],B=(p=w==null?void 0:w.subBookTitle)==null?void 0:p[A],O=w==null?void 0:w.subBookId;_(M,z,B,O)}}).catch(d=>{Y.custom(u=>n.jsx(X,{text:f(d),type:Be.BOOKMARK,visible:u.visible})),s(!1)})},[r,e.dispatch,f,e.userHistory,e.currentUser]),y=l.useCallback(async d=>{try{const u=await $e.fetchSubBookInfo(d);e.dispatch({type:Q.ADD_SUBBOOKINFO,payload:{subBookInfo:u}}),await fe.saveSubBookInfo(u),s(!1)}catch(u){Y.custom(g=>n.jsx(X,{text:f(u),visible:g.visible})),s(!1)}},[e.dispatch,f]);l.useEffect(()=>{(async()=>{var u;s(!0),!((u=e.bookInfos)!=null&&u.length)||!e.bookInfos.some(g=>g.bookId===r)?await v():(a(e.bookInfos.find(g=>g.bookId===r)),s(!1))})(),e.currentUser&&Ne.fetchBookmarks().then(u=>{e.dispatch({type:Q.SET_BOOKMARKS,payload:{bookmark:u}})}).catch(u=>{u.status===401&&u.response.data.message===Ee&&(Y.custom(g=>n.jsx(X,{text:f(u.response.data.message),visible:g.visible})),Oe.logout(),c("/login"))})},[r,e.bookInfos,e.currentUser,e.dispatch,f]);const $=()=>{Y.custom(d=>n.jsx(X,{text:f("Not Built Yet"),visible:d.visible}))},_=(d,u,g,p)=>{c(`/reading?chapterId=${d}&book=${u}&subBook=${g}&subBookId=${p}&bookId=${r}`)},C=l.useCallback(async d=>{s(!0),Pe()<_e?await fe.getSubBookInfo(d)?(await fe.removeSubBookInfo(d),e.dispatch({type:Q.REMOVE_SUBBOOKINFO,payload:{subBookId:d}})):await y(d):Y.custom(g=>n.jsx(X,{text:f("Not Enough Space"),visible:g.visible})),s(!1)},[y,e.dispatch,f]),D=l.useCallback(async d=>{s(!0),await fe.removeSubBookInfo(d),e.dispatch({type:Q.REMOVE_SUBBOOKINFO,payload:{subBookId:d}}),Pe()<_e?await y(d):Y.custom(g=>n.jsx(X,{text:f("Not Enough Space"),visible:g.visible})),s(!1)},[y,e.dispatch,f]),R=l.useCallback(d=>{if(s(!0),e.bookmark&&e.bookmark.length>0){const u=e.bookmark.filter(g=>g._id===d);if(u&&u.length>0){const{chapterId:g,bookTitle:p,subBookId:b,subBookTitle:w,verseId:M}=u[0];c(`/reading?chapterId=${g}&book=${p.en}&subBook=${w.en}&subBookId=${b}&verseId=${M}&bookId=${r}`),s(!1)}}},[r,c,e.bookmark]),P=l.useCallback(d=>{s(!0),Ne.deleteBookmark(d).then(u=>{e.dispatch({type:Q.REMOVE_BOOKMARK,payload:{bookmarkId:d}}),Y.custom(g=>n.jsx(X,{text:f(u.message),type:Be.BOOKMARK,visible:g.visible})),s(!1)}).catch(u=>{u.status==401&&u.response.data.message==Ee&&(Y.custom(g=>n.jsx(X,{text:f(u.response.data.message),type:Be.BOOKMARK,visible:g.visible})),Oe.logout(),c("/login")),s(!1)})},[e.dispatch,f]),N=l.useCallback(d=>{e.dispatch({type:Q.SET_OPENED_SUBBOOK,payload:{openedSubBook:e.openedSubBook===d?"":d}})},[e.openedSubBook,e.dispatch]);return n.jsxs(hn,{style:{backgroundColor:T},children:[n.jsx(cn,{markImg:t&&pt+t.bookImage,markTitle:t==null?void 0:t.bookTitle,isLoading:o,onLogoClick:()=>c("/"),onCloseClick:()=>c("/library"),onSettingClick:()=>c("/settings"),onSearchClick:$}),n.jsx(gn,{bookId:r,bookTitle:t==null?void 0:t.bookTitle,subBooks:t==null?void 0:t.subBooks,deviceHeight:m,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.openedSubBook,moveToReading:_,moveToReadingFromBookmark:R,onDownload:C,onDownloadRefresh:D,removeBookmark:P,handleOpenedSubBook:N}),o&&n.jsx(wt,{})]})}function kn(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,openedSubBook:e.pageStatus.openedSubBook,currentUser:e.user.currentUser,activeChapterId:e.books.activeChapterId}}const En=vt(kn)(mn);export{En as default};
