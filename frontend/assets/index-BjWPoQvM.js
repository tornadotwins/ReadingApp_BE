import{c as qe,_ as Y,j as n,$ as le,b as c,ap as Et,F as re,X as At,a3 as A,ax as Ge,ay as Ve,Z as Q,az as Ye,aA as Ke,aB as dt,aC as Ze,aD as ct,au as Ot}from"./index-DxDh7wOW.js";import{v as wt,w as It,x as Rt,y as We,s as d,z as Nt,A as Lt,D as Xe,E as Pt,F as Dt,B as h,G as Mt,S as ze,g as He,k as J,c as $t,u as Ut,a as M,J as Ft,K as zt,M as ut}from"./App-Cx9agqBq.js";import{I as B,T as te,g as Ht,t as gt,a as xt}from"./index-BN9BPm6P.js";import{H as Kt}from"./index-Bqbr5fKM.js";import{C as ee}from"./index-DtOeouuV.js";import{A as Wt}from"./index-CJLZe4nH.js";import{S as Gt}from"./index-BnxFECC5.js";import{L as Vt}from"./index-DtGGOycQ.js";import{b as bt}from"./book.service-B-RcBiF9.js";import{b as mt}from"./bookmark.service-DzQkFWQb.js";import{a as Qe}from"./auth.service-Bm0lVtX_.js";import"./index-CprAwUME.js";import"./axios-upsvKRUO.js";function Yt(e){return It("MuiPagination",e)}wt("MuiPagination",["root","ul","outlined","text"]);const Zt=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Qt(e={}){const{boundaryCount:a=1,componentName:r="usePagination",count:t=1,defaultPage:m=1,disabled:g=!1,hideNextButton:P=!1,hidePrevButton:S=!1,onChange:w,page:y,showFirstButton:T=!1,showLastButton:j=!1,siblingCount:u=1}=e,_=qe(e,Zt),[f,W]=Rt({controlled:y,default:m,name:r,state:"page"}),U=(i,s)=>{y||W(s),w&&w(i,s)},I=(i,s)=>{const l=s-i+1;return Array.from({length:l},(b,v)=>i+v)},F=I(1,Math.min(a,t)),O=I(Math.max(t-a+1,a+1),t),N=Math.max(Math.min(f-u,t-a-u*2-1),a+2),Z=Math.min(Math.max(f+u,a+u*2+2),O.length>0?O[0]-2:t-1),ae=[...T?["first"]:[],...S?[]:["previous"],...F,...N>a+2?["start-ellipsis"]:a+1<t-a?[a+1]:[],...I(N,Z),...Z<t-a-1?["end-ellipsis"]:t-a>a?[t-a]:[],...O,...P?[]:["next"],...j?["last"]:[]],X=i=>{switch(i){case"first":return 1;case"previous":return f-1;case"next":return f+1;case"last":return t;default:return null}},x=ae.map(i=>typeof i=="number"?{onClick:s=>{U(s,i)},type:"page",page:i,selected:i===f,disabled:g,"aria-current":i===f?"true":void 0}:{onClick:s=>{U(s,X(i))},type:i,page:X(i),selected:!1,disabled:g||i.indexOf("ellipsis")===-1&&(i==="next"||i==="last"?f>=t:f<=1)});return Y({items:x},_)}function Xt(e){return It("MuiPaginationItem",e)}const q=wt("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),ft=We(n.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),kt=We(n.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),vt=We(n.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),yt=We(n.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),qt=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],jt=(e,a)=>{const{ownerState:r}=e;return[a.root,a[r.variant],a[`size${re(r.size)}`],r.variant==="text"&&a[`text${re(r.color)}`],r.variant==="outlined"&&a[`outlined${re(r.color)}`],r.shape==="rounded"&&a.rounded,r.type==="page"&&a.page,(r.type==="start-ellipsis"||r.type==="end-ellipsis")&&a.ellipsis,(r.type==="previous"||r.type==="next")&&a.previousNext,(r.type==="first"||r.type==="last")&&a.firstLast]},Jt=e=>{const{classes:a,color:r,disabled:t,selected:m,size:g,shape:P,type:S,variant:w}=e,y={root:["root",`size${re(g)}`,w,P,r!=="standard"&&`color${re(r)}`,r!=="standard"&&`${w}${re(r)}`,t&&"disabled",m&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[S]],icon:["icon"]};return Pt(y,Xt,a)},ea=d("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:jt})(({theme:e,ownerState:a})=>Y({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${q.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},a.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),ta=d(Nt,{name:"MuiPaginationItem",slot:"Root",overridesResolver:jt})(({theme:e,ownerState:a})=>Y({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${q.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${q.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${q.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:le(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${q.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:le(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${q.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},a.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},a.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:a})=>Y({},a.variant==="text"&&{[`&.${q.selected}`]:Y({},a.color!=="standard"&&{color:(e.vars||e).palette[a.color].contrastText,backgroundColor:(e.vars||e).palette[a.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[a.color].main}},[`&.${q.focusVisible}`]:{backgroundColor:(e.vars||e).palette[a.color].dark}},{[`&.${q.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},a.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${q.selected}`]:Y({},a.color!=="standard"&&{color:(e.vars||e).palette[a.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / 0.5)`:le(e.palette[a.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:le(e.palette[a.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:le(e.palette[a.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${q.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:le(e.palette[a.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${q.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),aa=d("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,a)=>a.icon})(({theme:e,ownerState:a})=>Y({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},a.size==="small"&&{fontSize:e.typography.pxToRem(18)},a.size==="large"&&{fontSize:e.typography.pxToRem(22)})),oa=c.forwardRef(function(a,r){const t=Lt({props:a,name:"MuiPaginationItem"}),{className:m,color:g="standard",component:P,components:S={},disabled:w=!1,page:y,selected:T=!1,shape:j="circular",size:u="medium",slots:_={},type:f="page",variant:W="text"}=t,U=qe(t,qt),I=Y({},t,{color:g,disabled:w,selected:T,shape:j,size:u,type:f,variant:W}),F=Et(),O=Jt(I),Z=(F?{previous:_.next||S.next||yt,next:_.previous||S.previous||vt,last:_.first||S.first||ft,first:_.last||S.last||kt}:{previous:_.previous||S.previous||vt,next:_.next||S.next||yt,first:_.first||S.first||ft,last:_.last||S.last||kt})[f];return f==="start-ellipsis"||f==="end-ellipsis"?n.jsx(ea,{ref:r,ownerState:I,className:Xe(O.root,m),children:"â€¦"}):n.jsxs(ta,Y({ref:r,ownerState:I,component:P,disabled:w,className:Xe(O.root,m)},U,{children:[f==="page"&&y,Z?n.jsx(aa,{as:Z,ownerState:I,className:O.icon}):null]}))}),na=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],ia=e=>{const{classes:a,variant:r}=e;return Pt({root:["root",r],ul:["ul"]},Yt,a)},sa=d("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:r}=e;return[a.root,a[r.variant]]}})({}),la=d("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,a)=>a.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function ra(e,a,r){return e==="page"?`${r?"":"Go to "}page ${a}`:`Go to ${e} page`}const da=c.forwardRef(function(a,r){const t=Lt({props:a,name:"MuiPagination"}),{boundaryCount:m=1,className:g,color:P="standard",count:S=1,defaultPage:w=1,disabled:y=!1,getItemAriaLabel:T=ra,hideNextButton:j=!1,hidePrevButton:u=!1,renderItem:_=x=>n.jsx(oa,Y({},x)),shape:f="circular",showFirstButton:W=!1,showLastButton:U=!1,siblingCount:I=1,size:F="medium",variant:O="text"}=t,N=qe(t,na),{items:Z}=Qt(Y({},t,{componentName:"Pagination"})),ae=Y({},t,{boundaryCount:m,color:P,count:S,defaultPage:w,disabled:y,getItemAriaLabel:T,hideNextButton:j,hidePrevButton:u,renderItem:_,shape:f,showFirstButton:W,showLastButton:U,siblingCount:I,size:F,variant:O}),X=ia(ae);return n.jsx(sa,Y({"aria-label":"pagination navigation",className:Xe(X.root,g),ownerState:ae,ref:r},N,{children:n.jsx(la,{className:X.ul,ownerState:ae,children:Z.map((x,i)=>n.jsx("li",{children:_(Y({},x,{color:P,"aria-label":T(x.type,x.page,x.selected),shape:f,size:F,variant:O}))},i))})}))});function ca(e){return n.jsx(da,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function ht(){const{innerWidth:e,innerHeight:a}=window;return{width:e,height:a}}function ua(){const[e,a]=c.useState(ht());return c.useEffect(()=>{function r(){a(ht())}return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e}var Je={},ga=At;Object.defineProperty(Je,"__esModule",{value:!0});var _t=Je.default=void 0,xa=ga(Dt()),ba=n;_t=Je.default=(0,xa.default)((0,ba.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const ma=d(h)({display:"flex",position:"relative",width:"100%"}),fa=d("img")({width:"100%",marginTop:"57px"}),ka=d(h)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),va=d(h)({display:"flex",alignItems:"baseline"}),ya=d(h)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),ha=d("img")({width:"100%",height:"100%"}),Ca=d(h)({margin:0,marginLeft:"12px",position:"relative",top:"-20px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),Ba=d(h)(({hamburgercolor:e})=>({position:"absolute",top:"12px",right:"15px",width:"46px","& .hamburger-react":{width:"46px !important",color:e},"& .hamburger-react ~ .MuiBox-root ":{border:`1px solid ${e}`},"@media (max-height: 639px)":{top:"8px",right:"10px"},"@media screen and (orientation: landscape)":{right:"15px"}})),Sa=d("img")({position:"relative",top:"-20px",cursor:"pointer","&:active":{opacity:"0.8"}}),Ta=d(h)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),pa=d("img")({width:"100%","&:active":{opacity:"0.8"}});d("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}});const wa=d(h)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Ia=d(h)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),La=d(h)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),Ct=d(h)(({active:e,bordercolor:a})=>({width:"50%",height:"37.9px",border:`1px solid ${a}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer",marginBottom:"20px"})),Bt=d("img")({}),St=d(h)(({active:e})=>({marginLeft:"5px"})),Pa=d(h)({width:"100%",display:"flex",flexDirection:"column"}),ja=d(h)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),_a=d(h)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});d(h)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const Ea=d(h)({display:"flex",flexDirection:"column"}),Aa=d(h)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),Oa=d(h)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});d(h)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const Ra=d(h)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),Na=d("img")({cursor:"pointer",marginRight:"15px"}),Da=d(Mt)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),Ma=d(h)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),$a=d("img")({width:"63px"}),Ua=d(h)({margin:"0px",marginLeft:"24px","@media (max-height: 600px)":{"& .MuiBox-root":{fontSize:"14px !important"}}}),Fa=d(h)({width:"100%",justifyContent:"space-between",alignItems:"center",margin:"10px 0px"}),za=d(h)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"center",padding:"0px 7px"});d(_t)({marginLeft:"-33px",color:"#17637D",height:"30px"});const Ha=d(h)(({progress:e,progresscolor:a})=>({width:"calc(100% - 60px)",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",borderBottom:`1px solid ${a}`,"::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${e}%`,borderBottom:e!=0?`2px solid ${a}`:"none"}})),Ka=d(h)(({istransliteration:e,translatestatus:a})=>({margin:"5px 0px 5px 0px",display:"flex",justifyContent:"space-between",opacity:a=="one"||a=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& .MuiBox-root:first-of-type":{width:"48%"},"& .MuiBox-root:last-child":{marginInlineEnd:"auto",width:e=="true"?"48%":"75%"}})),Wa=d(h)({display:"flex",justifyContent:"space-between"}),Ga=d(h)(({translatestatus:e})=>({width:"80%",display:"flex",opacity:e=="one"||e=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}})),Va=d("img")({width:"20px",marginLeft:"10px"}),Ya=d(h)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),Tt=d("img")({marginLeft:"3px",cursor:"pointer"}),Za=d(h)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),Qa=d(h)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),Xa=d(h)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),pt=d(h)(({style:e,translatestatus:a,readalready:r,readbgcolor:t,readtextcolor:m})=>({opacity:a=="one"||a=="none"?"0.5":"1",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:r=="true"?`${t} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:r=="true"?`${m} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:r=="true"?`${m} !important`:`${e.color} !important`}})),qa=d("img")({width:"50%",height:"50%"});function Ja(e){const[a,r]=c.useState(""),[t,m]=c.useState(""),{theme:g}=c.useContext(ze),{logoTextColor:P,headerBGColor:S}=He(g);return c.useEffect(()=>{var w,y,T,j;e.markTitle?r((w=e.markTitle)==null?void 0:w[e.appLanguage||"en"]):r(((j=(T=(y=e.terms)==null?void 0:y.texts.find(u=>u.variable=="Default Book Title"))==null?void 0:T.text)==null?void 0:j[e.appLanguage||"en"])||"Title"),e.markImg?m(e.markImg):m(B.default_cover)},[e.markTitle,e.markImg]),n.jsxs(ma,{children:[n.jsx(fa,{src:g==A.DEFAULT||g==A.DARK?B.book_subtract:g==A.BLACK_AND_WHITE?B.book_subtract_BAW:g==A.SAPPHIRE?B.book_subtract_sapphire:B.book_subtract_easyocean}),n.jsxs(ka,{children:[n.jsxs(va,{children:[n.jsx(ya,{onClick:e.onLogoClick,children:n.jsx(ha,{src:t})}),n.jsx(Ca,{children:n.jsx(te,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:P,children:a})})]}),n.jsx(Sa,{src:g==A.EASY_OCEAN?B.search_easyocean:B.search,onClick:e.onSearchClick})]}),n.jsx(Ta,{children:n.jsx(pa,{src:g==A.DEFAULT||g==A.DARK?B.close2:g==A.BLACK_AND_WHITE?B.close2_BAW:g==A.SAPPHIRE?B.close2_sapphire:B.close2_easyocean,onClick:e.onCloseClick})}),n.jsx(Ba,{hamburgercolor:S,children:n.jsx(Kt,{isLogin:e.isLogIn,textColor:P,itemBgColor:S,toggleColor:S,terms:e.welcomePageTerms,onLogin:e.onLogin,onSettings:e.onSettings})})]})}function eo(e){var x,i,s,l,b,v,k,E,p,H,G,R,L,ne,de,ce,ue,ge,xe,be,me,fe,ke,ve,ye,he,Ce,Be,Se,Te,pe,we,Ie,Le,Pe,je,C,et,tt,at;const[a,r]=c.useState([]),[t,m]=c.useState(),[g,P]=c.useState(!1),[S,w]=c.useState(!1),[y,T]=c.useState(0),{theme:j,referenceLanguage:u}=c.useContext(ze),{mainBGColor:_,altTextColor:f,backgroundColor:W,topTextColor:U,buttonColor:I,buttonTextColor:F}=He(j),O=c.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const o=e.userHistory.filter(z=>z.bookId==e.bookId);if(o&&o.length>0)return o[0].readChapterIds}return[]},[e.userHistory]),N=e.subBookId;c.useEffect(()=>{e.bookTitle.en=="Qur'an"||e.bookTitle.en=="Zabur"?P(!1):e.openedSubBook==e.subBookId?P(!0):P(!1)},[e.openedSubBook]),c.useEffect(()=>{var V,K;const o=e.subBooks.filter($=>$.subBookId===N);let z=0;if(o&&o.length>0&&(z=(V=o[0].chapterInfos)==null?void 0:V.length,m(o[0])),e.currentUser){const $=e.userHistory.filter(D=>D.bookId==e.bookId);if($&&$.length>0){const D=$[0].subBooks.filter(oe=>oe.subBookId==N);D&&D.length>0&&T(Math.floor(((K=D[0])==null?void 0:K.readChapters)/z*100))}}if(e.subBooks&&e.subBooks.length>0){const $=e.subBooks.filter(D=>D.subBookId==N);if($&&$.length>0){let D=$[0].chapterInfos;D.sort((oe,ie)=>oe.chapterNumber-ie.chapterNumber),r(D)}}},[e.subBooks,e.userHistory]),c.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const o=e.subBookInfos.filter(z=>z.subBookId==N);o&&o.length>0?w(!0):w(!1)}},[]);const Z=c.useCallback(o=>{w(z=>!z),e.onDownload(o)},[]),ae=()=>{var o,z;if(t!=null&&t.noChapter){const V=(o=t==null?void 0:t.chapterInfos[0])==null?void 0:o.isTranslated,K=(z=t==null?void 0:t.chapterInfos[0])==null?void 0:z.isPublished;!(V!=null&&V[u])&&!(V!=null&&V[e.appLanguage])||!(K!=null&&K[u])&&!(K!=null&&K[e.appLanguage])?J.custom($=>{var D,oe,ie,_e,Ee,Ae;return n.jsx(ee,{text:((ie=(oe=(D=e.terms)==null?void 0:D.texts.find(se=>se.variable=="None Translated"))==null?void 0:oe.text)==null?void 0:ie[e.appLanguage])||((Ae=(Ee=(_e=e.terms)==null?void 0:_e.texts.find(se=>se.variable=="None Translated"))==null?void 0:Ee.text)==null?void 0:Ae.en)||"",visible:$.visible})}):e.moveToReading(t==null?void 0:t.chapterInfos[0].chapterId,t.subBookId)}else P(!g),e.handleOpenedSubBook(e.subBookId)},X=(o,z)=>{z=="none"?J.custom(V=>{var K,$,D;return n.jsx(ee,{text:((D=($=(K=e.terms)==null?void 0:K.texts.find(oe=>oe.variable=="None Translated"))==null?void 0:$.text)==null?void 0:D[e.appLanguage])||"",visible:V.visible})}):e.moveToReading(o,t.subBookId)};return n.jsxs(Fa,{id:e.id,children:[n.jsxs(za,{children:[n.jsxs(Ha,{progress:y,progresscolor:I,onClick:ae,children:[(t==null?void 0:t.subBookNumber)!=0&&n.jsxs(Ka,{istransliteration:((x=t==null?void 0:t.subBookTitle)==null?void 0:x[Ge])!=null?"true":"false",translatestatus:(t==null?void 0:t.noChapter)&&(!((s=(i=t==null?void 0:t.chapterInfos[0])==null?void 0:i.isTranslated)!=null&&s[u])&&!((b=(l=t==null?void 0:t.chapterInfos[0])==null?void 0:l.isTranslated)!=null&&b[e.appLanguage])||!((k=(v=t==null?void 0:t.chapterInfos[0])==null?void 0:v.isPublished)!=null&&k[u])&&!((p=(E=t==null?void 0:t.chapterInfos[0])==null?void 0:E.isPublished)!=null&&p[e.appLanguage])?"none":(!((G=(H=t==null?void 0:t.chapterInfos[0])==null?void 0:H.isTranslated)!=null&&G[u])||!((L=(R=t==null?void 0:t.chapterInfos[0])==null?void 0:R.isTranslated)!=null&&L[e.appLanguage]))&&((de=(ne=t==null?void 0:t.chapterInfos[0])==null?void 0:ne.isPublished)!=null&&de[u]||!((ue=(ce=t==null?void 0:t.chapterInfos[0])==null?void 0:ce.isPublished)!=null&&ue[e.appLanguage]))?"one":"both")||"",children:[((ge=t==null?void 0:t.subBookTitle)==null?void 0:ge[Ge])&&n.jsx(te,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:f,language:Ve,children:(t==null?void 0:t.subBookNumber)+". "+((xe=t==null?void 0:t.subBookTitle)==null?void 0:xe[Ge])}),n.jsx(te,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:f,language:Ve,direction:"rtl",children:(be=t==null?void 0:t.subBookTitle)==null?void 0:be[Ve]})]}),n.jsxs(Wa,{children:[n.jsxs(Ga,{translatestatus:t!=null&&t.noChapter&&(!((fe=(me=t==null?void 0:t.chapterInfos[0])==null?void 0:me.isTranslated)!=null&&fe[u])&&!((ve=(ke=t==null?void 0:t.chapterInfos[0])==null?void 0:ke.isTranslated)!=null&&ve[e.appLanguage])||!((he=(ye=t==null?void 0:t.chapterInfos[0])==null?void 0:ye.isPublished)!=null&&he[u])&&!((Be=(Ce=t==null?void 0:t.chapterInfos[0])==null?void 0:Ce.isPublished)!=null&&Be[e.appLanguage]))?"none":(!((Te=(Se=t==null?void 0:t.chapterInfos[0])==null?void 0:Se.isTranslated)!=null&&Te[u])||!((we=(pe=t==null?void 0:t.chapterInfos[0])==null?void 0:pe.isTranslated)!=null&&we[e.appLanguage]))&&((Le=(Ie=t==null?void 0:t.chapterInfos[0])==null?void 0:Ie.isPublished)!=null&&Le[u]||!((je=(Pe=t==null?void 0:t.chapterInfos[0])==null?void 0:Pe.isPublished)!=null&&je[e.appLanguage]))?"one":"both",children:[n.jsx(te,{fontFamily:'"Baloo Da 2"',color:f,children:(C=t==null?void 0:t.subBookTitle)==null?void 0:C[e.appLanguage||"en"]}),(t==null?void 0:t.subBookNumber)==0&&n.jsx(Va,{src:B.icon_intro})]}),e.currentUser&&y!==0&&!(t!=null&&t.noChapter)&&n.jsx(te,{fontFamily:'"Baloo Da 2"',color:I,children:`${y}%`})]})]}),n.jsxs(Ya,{isdownloaded:S?"true":"false",children:[n.jsx(Tt,{src:S?j==A.DEFAULT||j==A.EASY_OCEAN?B.download_cancel:B.download_cancel_white:j==A.DEFAULT||j==A.EASY_OCEAN?B.download:B.download_white,onClick:()=>Z(N)}),S&&n.jsx(Tt,{src:j==A.DEFAULT||j==A.EASY_OCEAN?B.download_refresh:B.download_refresh_white,onClick:()=>e.onDownloadRefresh(N)})]})]}),g&&n.jsxs(Za,{style:{backgroundColor:W},children:[n.jsx(Qa,{children:n.jsx(te,{fontFamily:"Inter",color:U,children:((at=(tt=(et=e.terms)==null?void 0:et.texts.find(o=>o.variable=="Chapter"))==null?void 0:tt.text)==null?void 0:at[e.appLanguage])||""})}),n.jsx(Xa,{children:a==null?void 0:a.map((o,z)=>{var V,K,$,D,oe,ie,_e,Ee,Ae,se,ot,nt,it,st,lt,rt;return o.chapterNumber==0?n.jsx(pt,{translatestatus:!((V=o==null?void 0:o.isTranslated)!=null&&V[u])&&!((K=o==null?void 0:o.isTranslated)!=null&&K[e.appLanguage])||!(($=o==null?void 0:o.isPublished)!=null&&$[u])&&!((D=o==null?void 0:o.isPublished)!=null&&D[e.appLanguage])?"none":(!((oe=o==null?void 0:o.isTranslated)!=null&&oe[u])||!((ie=o==null?void 0:o.isTranslated)!=null&&ie[e.appLanguage]))&&((_e=o==null?void 0:o.isPublished)!=null&&_e[u]||!((Ee=o==null?void 0:o.isPublished)!=null&&Ee[e.appLanguage]))?"one":"both",readalready:O&&O.length>0&&O.includes(o.chapterId)?"true":"false",style:{backgroundColor:_,color:f},readbgcolor:I,readtextcolor:F,onClick:()=>{var Oe,Re,Ne,De,Me,$e,Ue,Fe;return X(o.chapterId,!((Oe=o==null?void 0:o.isTranslated)!=null&&Oe[u])&&!((Re=o==null?void 0:o.isTranslated)!=null&&Re[e.appLanguage])||!((Ne=o==null?void 0:o.isPublished)!=null&&Ne[u])&&!((De=o==null?void 0:o.isPublished)!=null&&De[e.appLanguage])?"none":(!((Me=o.isTranslated)!=null&&Me[u])||!(($e=o==null?void 0:o.isTranslated)!=null&&$e[e.appLanguage]))&&((Ue=o==null?void 0:o.isPublished)!=null&&Ue[u]||!((Fe=o==null?void 0:o.isPublished)!=null&&Fe[e.appLanguage]))?"one":"both")},children:n.jsx(qa,{src:B.icon_intro})},z):n.jsx(pt,{translatestatus:!((Ae=o==null?void 0:o.isTranslated)!=null&&Ae[u])&&!((se=o==null?void 0:o.isTranslated)!=null&&se[e.appLanguage])||!((ot=o==null?void 0:o.isPublished)!=null&&ot[u])&&!((nt=o==null?void 0:o.isPublished)!=null&&nt[e.appLanguage])?"none":(!((it=o==null?void 0:o.isTranslated)!=null&&it[u])||!((st=o==null?void 0:o.isTranslated)!=null&&st[e.appLanguage]))&&((lt=o==null?void 0:o.isPublished)!=null&&lt[u]||!((rt=o==null?void 0:o.isPublished)!=null&&rt[e.appLanguage]))?"one":"both",readalready:O&&O.length>0&&O.includes(o.chapterId)?"true":"false",style:{backgroundColor:_,color:f},readbgcolor:I,readtextcolor:F,onClick:()=>{var Oe,Re,Ne,De,Me,$e,Ue,Fe;return X(o.chapterId,!((Oe=o==null?void 0:o.isTranslated)!=null&&Oe[u])&&!((Re=o==null?void 0:o.isTranslated)!=null&&Re[e.appLanguage])||!((Ne=o==null?void 0:o.isPublished)!=null&&Ne[u])&&!((De=o==null?void 0:o.isPublished)!=null&&De[e.appLanguage])?"none":(!((Me=o.isTranslated)!=null&&Me[u])||!(($e=o.isTranslated)!=null&&$e[e.appLanguage]))&&(!((Ue=o==null?void 0:o.isPublished)!=null&&Ue[u])||!((Fe=o==null?void 0:o.isPublished)!=null&&Fe[e.appLanguage]))?"one":"both")},children:n.jsx(te,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:o.chapterNumber})},z)})})]})]})}function to(e){const[a,r]=c.useState([]);return c.useEffect(()=>{let t=e.subBooks;t&&t.sort((m,g)=>m.subBookNumber-g.subBookNumber),r(t)},[e.subBooks]),n.jsx(n.Fragment,{children:a&&a.length>0&&a.map((t,m)=>n.jsx(eo,{id:`subbook-${t.subBookId}`,bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:a,subBookId:t.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,appLanguage:e.appLanguage,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},m))})}function ao(e){const[a,r]=c.useState(""),[t,m]=c.useState([]),[g,P]=c.useState(1),[S,w]=c.useState([]),{theme:y,readingLanguage:T}=c.useContext(ze),{backgroundColor:j,topTextColor:u,mainTextColor:_}=He(y),f=Ht(e.deviceHeight),W=g*f,U=W-f,I=e.currentUser&&t.slice(U,W);c.useEffect(()=>{var x,i,s,l,b,v,k,E,p,H;if(e.subBooks&&e.subBooks.length>0){const G=e.subBooks.map(R=>{var L;return{label:(L=R.subBookTitle)==null?void 0:L[T],value:R.subBookId}});G.unshift({label:((x=e.bookTitle)==null?void 0:x.en)=="Qur'an"||((i=e.bookTitle)==null?void 0:i.en)=="Zabur"?((l=(s=e.terms.texts.find(R=>R.variable=="All Chapters"))==null?void 0:s.text)==null?void 0:l[T])||((v=(b=e.terms.texts.find(R=>R.variable=="All Chapters"))==null?void 0:b.text)==null?void 0:v.en):((E=(k=e.terms.texts.find(R=>R.variable=="All SubBooks"))==null?void 0:k.text)==null?void 0:E[T])||((H=(p=e.terms.texts.find(R=>R.variable=="All SubBooks"))==null?void 0:p.text)==null?void 0:H.en),value:"all"}),w(G)}},[e.subBooks]),c.useEffect(()=>{S.length>0&&r(S[0].value)},[S]),c.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const x=e.bookmark.filter(i=>i.subBookId===a);m(a==="all"||a===""?e.bookmark:x)}else m([]),P(0);g>1&&I.length==1&&P(x=>x-1)},[e.bookmark]);const F=(x,i)=>{P(i)},O=c.useCallback(x=>{const i=x.target.value;r(i);const s=e.bookmark.filter(l=>l.subBookId===i);m(i==="all"?e.bookmark:s)},[e.bookmark]),N=()=>{var x,i,s,l,b,v,k,E;return n.jsx(ja,{style:{backgroundColor:j},children:n.jsx(Wt,{label:((i=(x=e.terms.texts.find(p=>p.variable=="Filter"))==null?void 0:x.text)==null?void 0:i[T])||((l=(s=e.terms.texts.find(p=>p.variable=="Filter"))==null?void 0:s.text)==null?void 0:l.en)||"",detail:n.jsxs(_a,{children:[n.jsx(te,{color:u,children:((v=(b=e.terms.texts.find(p=>p.variable=="Show"))==null?void 0:b.text)==null?void 0:v[T])||((E=(k=e.terms.texts.find(p=>p.variable=="Show"))==null?void 0:k.text)==null?void 0:E.en)||""}),n.jsx(Gt,{label:"",options:S,value:a,backgroundColor:j,textColor:u,onChange:O})]})})})},Z=()=>n.jsx(Ea,{children:(I==null?void 0:I.length)>0&&I.map((x,i)=>{var s,l,b,v,k,E,p,H,G,R,L,ne,de,ce,ue,ge,xe,be,me,fe,ke,ve,ye,he,Ce,Be,Se,Te,pe,we,Ie,Le,Pe,je;return n.jsxs(h,{children:[n.jsxs(Aa,{children:[n.jsxs(Oa,{onClick:()=>e.moveToReadingFromBookmark(x._id),children:[n.jsx(te,{color:_,children:((s=x.subBookTitle)==null?void 0:s[T])||((l=x.subBookTitle)==null?void 0:l.en)}),n.jsx(te,{color:_,children:x.bookTitle.en=="Qur'an"||x.bookTitle.en=="Zabur"?x.chapterNumber>0?`${((v=(b=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:b.text)==null?void 0:v[T])||((E=(k=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:k.text)==null?void 0:E.en)} ${x.chapterNumber}, ${((H=(p=e.terms.texts.find(C=>C.variable=="Aya"))==null?void 0:p.text)==null?void 0:H[T])||((R=(G=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:G.text)==null?void 0:R.en)} ${x.verseNumber}`:`${((ne=(L=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:L.text)==null?void 0:ne[T])||((ce=(de=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:de.text)==null?void 0:ce.en)} _ , ${((ge=(ue=e.terms.texts.find(C=>C.variable=="Aya"))==null?void 0:ue.text)==null?void 0:ge[T])||((be=(xe=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:xe.text)==null?void 0:be.en)} ${x.verseNumber}`:x.chapterNumber>0?`${((fe=(me=e.terms.texts.find(C=>C.variable=="Chapter Bookmark"))==null?void 0:me.text)==null?void 0:fe[T])||((ve=(ke=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:ke.text)==null?void 0:ve.en)} ${x.chapterNumber}, ${((he=(ye=e.terms.texts.find(C=>C.variable=="Aya"))==null?void 0:ye.text)==null?void 0:he[T])||((Be=(Ce=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:Ce.text)==null?void 0:Be.en)} ${x.verseNumber}`:`${((Te=(Se=e.terms.texts.find(C=>C.variable=="Chapter Bookmark"))==null?void 0:Se.text)==null?void 0:Te[T])||((we=(pe=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:pe.text)==null?void 0:we.en)} _ , ${((Le=(Ie=e.terms.texts.find(C=>C.variable=="Aya"))==null?void 0:Ie.text)==null?void 0:Le[T])||((je=(Pe=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:Pe.text)==null?void 0:je.en)} ${x.verseNumber}`})]}),n.jsx(Na,{src:y==A.DEFAULT||y==A.EASY_OCEAN||y==A.EASY_SUNRISE?B.black_bookmark:B.white_bookmark,onClick:()=>e.removeBookmark(x._id)})]}),n.jsx(Ra,{})]},i)})}),ae=()=>n.jsx(Da,{buttoncolor:_,children:n.jsx(ca,{count:e.currentUser?Math.ceil(t.length/f):0,page:g,hidePrevButton:!0,hideNextButton:!0,onChange:F})}),X=()=>{var x,i,s,l;return n.jsxs(Ma,{style:{backgroundColor:j},children:[n.jsx($a,{src:y==A.DEFAULT||y==A.BLACK_AND_WHITE?B.swipe:y==A.EASY_OCEAN?B.swipe_easyocean:B.swipe_white}),n.jsx(Ua,{style:{color:u},children:((i=(x=e.terms.texts.find(b=>b.variable=="Bookmark Help"))==null?void 0:x.text)==null?void 0:i[T])||((l=(s=e.terms.texts.find(b=>b.variable=="Bookmark Help"))==null?void 0:s.text)==null?void 0:l.en)})]})};return n.jsxs(Pa,{children:[N(),Z(),ae(),X()]})}function oo(e){var T,j,u,_;const[a,r]=c.useState(Q),{theme:t}=c.useContext(ze),{mainBGColor:m,headerBGColor:g,buttonColor:P,buttonTextColor:S,mainTextColor:w}=He(t),y=f=>{e.currentUser?r(f):J.custom(W=>{var U,I,F,O;return n.jsx(ee,{text:((I=(U=e.terms.texts.find(N=>N.variable=="Bookmark Read Description"))==null?void 0:U.text)==null?void 0:I[e.appLanguage])||((O=(F=e.terms.texts.find(N=>N.variable=="Bookmark Read Description"))==null?void 0:F.text)==null?void 0:O.en)||"",visible:W.visible})})};return n.jsx(wa,{style:{backgroundColor:g},children:n.jsxs(Ia,{style:{backgroundColor:m},children:[n.jsxs(La,{children:[n.jsxs(Ct,{active:a==Q?"true":"false",style:{backgroundColor:a==Q?P:m},bordercolor:w,onClick:()=>y(Q),children:[n.jsx(Bt,{src:t==A.DEFAULT?B.index:t==A.EASY_OCEAN?a==Q?B.index_active:B.index:a==Q?B.index:B.index_active}),n.jsx(St,{active:a==Q?"true":"false",children:n.jsx(te,{fontSize:16,fontWeight:"500",lineHeight:24,color:a==Q?S:w,children:((j=(T=e.terms.texts.find(f=>f.variable=="Index"))==null?void 0:T.text)==null?void 0:j[e.appLanguage])||"Index"})})]}),n.jsxs(Ct,{active:a==Q?"false":"true",style:{backgroundColor:a==Ye?P:m},bordercolor:w,onClick:()=>y(Ye),children:[n.jsx(Bt,{src:t==A.DEFAULT?B.bookmark2_default:t==A.EASY_OCEAN?a==Q?B.bookmark2_default:B.bookmark2_white:a==Q?B.bookmark2_white:B.bookmark2_default}),n.jsx(St,{active:a==Q?"false":"true",children:n.jsx(te,{fontSize:16,fontWeight:"500",lineHeight:24,color:a==Ye?S:w,children:((_=(u=e.terms.texts.find(f=>f.variable=="Bookmarks"))==null?void 0:u.text)==null?void 0:_[e.appLanguage])||"Bookmarks"})})]})]}),a==Q?n.jsx(to,{bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,appLanguage:e.appLanguage,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):n.jsx(ao,{bookTitle:e.bookTitle,subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark.filter(f=>f.bookId==e.bookId),deviceHeight:e.deviceHeight,terms:e.terms,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const no=d(h)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function io(e){const[a,r]=c.useState(),[t,m]=c.useState(!1),[g,P]=c.useState(),[S,w]=c.useState(),y=Ut(),{height:T}=ua(),{theme:j}=c.useContext(ze),{mainBGColor:u}=He(j),_=c.useCallback(()=>{e.currentBook&&bt.fetchBookInfo(e.currentBook).then(i=>{var s,l,b;if(e.dispatch({type:M.ADD_BOOKINFO,payload:{bookInfo:i}}),r(i),e.currentUser&&!e.userHistory.some(k=>k.bookId==e.currentBook)&&i.subBooks){const k=i.subBooks.find(H=>H.subBookNumber==0),E=(s=k==null?void 0:k.chapterInfos[0])==null?void 0:s.chapterId,p=k==null?void 0:k.subBookId;(b=(l=k==null?void 0:k.chapterInfos[0])==null?void 0:l.isTranslated)!=null&&b[e.appLanguage]?U(E,p):J.custom(H=>{var G,R,L;return n.jsx(ee,{text:((L=(R=(G=g==null?void 0:g.texts)==null?void 0:G.find(ne=>ne.variable=="None Translated"))==null?void 0:R.text)==null?void 0:L[e.appLanguage])||"",type:Ke.BOOKMARK,visible:H.visible})})}}).catch(i=>{J.custom(s=>n.jsx(ee,{text:i,type:Ke.BOOKMARK,visible:s.visible}))}).finally(()=>{m(!1)})},[e.currentBook,e.dispatch,e.userHistory,e.currentUser]),f=c.useCallback(async i=>{var s,l,b;try{const v=await bt.fetchSubBookInfo(i);e.dispatch({type:M.ADD_SUBBOOKINFO,payload:{subBookInfo:v}}),e.dispatch({type:M.ADD_SUBBOOK,payload:{subBook:v}}),Ft(v);const k=(s=e.bookInfos)==null?void 0:s.find(p=>(p==null?void 0:p.bookId)==e.currentBook),E=k&&((l=k==null?void 0:k.subBooks)==null?void 0:l.find(p=>(p==null?void 0:p.subBookId)==i));if(E){const p=(b=E==null?void 0:E.subBookTitle)==null?void 0:b.en;gt("Sub books","download_subbook",p)}m(!1)}catch(v){J.custom(k=>n.jsx(ee,{text:v,visible:k.visible})),m(!1)}},[e.dispatch]);c.useEffect(()=>{var l,b;const i=e.terms.find(v=>v.pageTitle=="Index & Bookmark Page"),s=e.terms.find(v=>v.pageTitle=="Welcome Page");(l=i==null?void 0:i.isPublished)!=null&&l[e.appLanguage]&&P(i),(b=s==null?void 0:s.isPublished)!=null&&b[e.appLanguage]&&w(s)},[e.terms]),c.useEffect(()=>{(async()=>{var s;m(!0),!((s=e.bookInfos)!=null&&s.length)||!e.bookInfos.some(l=>l.bookId===e.currentBook)?await _():(r(e.bookInfos.find(l=>l.bookId===e.currentBook)),m(!1))})(),e.currentUser&&mt.fetchBookmarks().then(s=>{e.dispatch({type:M.SET_BOOKMARKS,payload:{bookmark:s}})}).catch(s=>{s.status===401&&s.response.data.message===dt&&(J.custom(l=>n.jsx(ee,{text:s.response.data.message,visible:l.visible})),Qe.logout(),y("/login"))})},[e.currentBook,e.bookInfos,e.currentUser,e.dispatch]),c.useEffect(()=>{if(e.currentSubBook&&e.prevPage===Ze.READING){const s=setTimeout(()=>{const l=document.getElementById(`subbook-${e.currentSubBook}`);l&&l.scrollIntoView({behavior:"smooth"})},100);return()=>clearTimeout(s)}},[e.currentSubBook,e.prevPage]);const W=()=>{J.custom(i=>{var s,l,b;return n.jsx(ee,{text:((b=(l=(s=g==null?void 0:g.texts)==null?void 0:s.find(v=>v.variable=="Not Built Yet"))==null?void 0:l.text)==null?void 0:b[e.appLanguage])||"",visible:i.visible})})},U=(i,s)=>{var k,E,p,H,G,R;e.dispatch({type:M.SET_CURRENT_CHAPTER,payload:{currentChapter:i}}),e.dispatch({type:M.SET_CURRENT_SUBBOOK,payload:{currentSubBook:s}}),e.dispatch({type:M.SET_PREVIOUS_PAGE,payload:{prevPage:Ze.BOOKS}});const l=(k=e.bookInfos)==null?void 0:k.find(L=>(L==null?void 0:L.bookId)==e.currentBook),b=l&&((E=l==null?void 0:l.subBooks)==null?void 0:E.find(L=>(L==null?void 0:L.subBookId)==s)),v=(p=b==null?void 0:b.chapterInfos)==null?void 0:p.find(L=>(L==null?void 0:L.chapterId)==i);if(b){const L=(H=b==null?void 0:b.subBookTitle)==null?void 0:H.en,ne=v==null?void 0:v.chapterNumber;gt("Chapter","read_chapter",((G=a==null?void 0:a.bookTitle)==null?void 0:G.en)=="Qur'an"||((R=a==null?void 0:a.bookTitle)==null?void 0:R.en)=="Zabur"?L:`${L}-${ne==0?"Introduction":ne}`)}y("/reading")},I=()=>{y("/library"),e.dispatch({type:M.SET_PREVIOUS_PAGE,payload:{prevPage:Ze.BOOKS}}),e.dispatch({type:M.SET_CURRENT_SUBBOOK,payload:{currentSubBook:""}})},F=c.useCallback(async i=>{m(!0),xt()<ct?await zt(i)?(await ut(i),e.dispatch({type:M.REMOVE_SUBBOOKINFO,payload:{subBookId:i}})):await f(i):J.custom(l=>{var b,v,k;return n.jsx(ee,{text:((k=(v=(b=g==null?void 0:g.texts)==null?void 0:b.find(E=>E.variable=="Not Enough Space"))==null?void 0:v.text)==null?void 0:k[e.appLanguage])||"Not enough space",visible:l.visible})}),m(!1)},[f,e.dispatch]),O=c.useCallback(async i=>{m(!0),await ut(i),e.dispatch({type:M.REMOVE_SUBBOOKINFO,payload:{subBookId:i}}),xt()<ct?await f(i):J.custom(l=>{var b,v,k;return n.jsx(ee,{text:((k=(v=(b=g==null?void 0:g.texts)==null?void 0:b.find(E=>E.variable=="Not Enough Space"))==null?void 0:v.text)==null?void 0:k[e.appLanguage])||"Not enough space",visible:l.visible})}),m(!1)},[f,e.dispatch]),N=c.useCallback(i=>{if(m(!0),e.bookmark&&e.bookmark.length>0){const s=e.bookmark.find(l=>l._id===i);if(s){const{chapterId:l,subBookId:b,verseId:v}=s;e.dispatch({type:M.SET_CURRENT_SUBBOOK,payload:{currentSubBook:b}}),e.dispatch({type:M.SET_CURRENT_CHAPTER,payload:{currentChapter:l}}),e.dispatch({type:M.SET_CURRENT_VERSE,payload:{currentVerse:v}}),y("/reading"),m(!1)}}},[e.currentBook,y,e.bookmark]),Z=c.useCallback(i=>{m(!0),mt.deleteBookmark(i).then(s=>{e.dispatch({type:M.REMOVE_BOOKMARK,payload:{bookmarkId:i}}),J.custom(l=>n.jsx(ee,{text:s.message,type:Ke.BOOKMARK,visible:l.visible})),m(!1)}).catch(s=>{s.status==401&&s.response.data.message==dt&&(J.custom(l=>n.jsx(ee,{text:s.response.data.message,type:Ke.BOOKMARK,visible:l.visible})),Qe.logout(),y("/login")),m(!1)})},[e.dispatch]),ae=c.useCallback(i=>{e.dispatch({type:M.SET_CURRENT_SUBBOOK,payload:{currentSubBook:e.currentSubBook===i?"":i}})},[e.currentSubBook,e.dispatch]),X=()=>{e.dispatch({type:M.RESET_USER}),e.dispatch({type:M.RESET_BOOK}),e.dispatch({type:M.RESET_PAGE_STATUS}),Qe.logout()},x=()=>{y("/login")};return n.jsxs(no,{style:{backgroundColor:u},children:[n.jsx(Ja,{markImg:a&&Ot+a.bookImage,markTitle:a==null?void 0:a.bookTitle,isLogIn:!!e.currentUser,terms:g||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},welcomePageTerms:S||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},appLanguage:e.appLanguage,onLogoClick:()=>y("/"),onCloseClick:I,onLogin:e.currentUser?X:x,onSettings:()=>y("/settings"),onSearchClick:W}),n.jsx(oo,{bookId:e.currentBook,bookTitle:a==null?void 0:a.bookTitle,bookImage:a==null?void 0:a.bookImage,subBooks:a==null?void 0:a.subBooks,deviceHeight:T,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.currentSubBook,terms:g||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},appLanguage:e.appLanguage,moveToReading:U,moveToReadingFromBookmark:N,onDownload:F,onDownloadRefresh:O,removeBookmark:Z,handleOpenedSubBook:ae}),t&&n.jsx(Vt,{})]})}function so(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,terms:e.terms.terms,currentBook:e.pageStatus.currentBook,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,currentSubBook:e.pageStatus.currentSubBook,prevPage:e.pageStatus.prevPage,currentUser:e.user.currentUser,appLanguage:e.user.appLanguage,readingLanguage:e.user.readingLanguage,activeChapterId:e.books.activeChapterId}}const Co=$t(so)(io);export{Co as default};
