var Dt=Object.defineProperty;var Lt=(e,o,a)=>o in e?Dt(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a;var bt=(e,o,a)=>Lt(e,typeof o!="symbol"?o+"":o,a);import{c as Re,_ as G,j as i,N as xe,b as x,a8 as Mt,o as be,J as $t,ac as De,ai as Le,Q as P,aj as _e,ak as Ee,M as V,al as Ae,am as Ft,an as Ut,ao as we,ap as mt,aq as ft,af as zt}from"./index-Co3tk9z7.js";import{v as _t,w as Et,x as Ht,y as Pe,s as c,z as Kt,A as At,D as Ne,E as Ot,F as Wt,B as h,G as Gt,S as pe,g as Te,_ as K,c as Yt,u as Vt,d as z}from"./App-DLH-nwlH.js";import{I as v,T as X}from"./index-CcpxFU75.js";import{H as qt}from"./index-BZ-yiZWL.js";import{C as W}from"./index-BiufRMxk.js";import{A as Xt,b as kt}from"./bookmark.service-CTsPcBvN.js";import{S as Qt}from"./index-Dhv4rdfc.js";import{g as Zt,a as ht}from"./index-D5BBonUT.js";import{L as Jt}from"./index-D689cL0m.js";import{b as yt}from"./book.service-sRIfZPEb.js";import{a as Oe}from"./auth.service-DfPEAE7B.js";import"./index-DKZomuVW.js";import"./axios-BimPEqV4.js";function eo(e){return _t("MuiPagination",e)}Et("MuiPagination",["root","ul","outlined","text"]);const to=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function oo(e={}){const{boundaryCount:o=1,componentName:a="usePagination",count:t=1,defaultPage:g=1,disabled:u=!1,hideNextButton:y=!1,hidePrevButton:S=!1,onChange:w,page:k,showFirstButton:B=!1,showLastButton:j=!1,siblingCount:d=1}=e,l=Re(e,to),[C,_]=Ht({controlled:k,default:g,name:a,state:"page"}),$=(b,s)=>{k||_(s),w&&w(b,s)},E=(b,s)=>{const r=s-b+1;return Array.from({length:r},(m,T)=>b+T)},D=E(1,Math.min(o,t)),L=E(Math.max(t-o+1,o+1),t),H=Math.max(Math.min(C-d,t-o-d*2-1),o+2),M=Math.min(Math.max(C+d,o+d*2+2),L.length>0?L[0]-2:t-1),U=[...B?["first"]:[],...S?[]:["previous"],...D,...H>o+2?["start-ellipsis"]:o+1<t-o?[o+1]:[],...E(H,M),...M<t-o-1?["end-ellipsis"]:t-o>o?[t-o]:[],...L,...y?[]:["next"],...j?["last"]:[]],Q=b=>{switch(b){case"first":return 1;case"previous":return C-1;case"next":return C+1;case"last":return t;default:return null}},f=U.map(b=>typeof b=="number"?{onClick:s=>{$(s,b)},type:"page",page:b,selected:b===C,disabled:u,"aria-current":b===C?"true":void 0}:{onClick:s=>{$(s,Q(b))},type:b,page:Q(b),selected:!1,disabled:u||b.indexOf("ellipsis")===-1&&(b==="next"||b==="last"?C>=t:C<=1)});return G({items:f},l)}function no(e){return _t("MuiPaginationItem",e)}const q=Et("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),vt=Pe(i.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Ct=Pe(i.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Bt=Pe(i.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),St=Pe(i.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),io=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Nt=(e,o)=>{const{ownerState:a}=e;return[o.root,o[a.variant],o[`size${be(a.size)}`],a.variant==="text"&&o[`text${be(a.color)}`],a.variant==="outlined"&&o[`outlined${be(a.color)}`],a.shape==="rounded"&&o.rounded,a.type==="page"&&o.page,(a.type==="start-ellipsis"||a.type==="end-ellipsis")&&o.ellipsis,(a.type==="previous"||a.type==="next")&&o.previousNext,(a.type==="first"||a.type==="last")&&o.firstLast]},ao=e=>{const{classes:o,color:a,disabled:t,selected:g,size:u,shape:y,type:S,variant:w}=e,k={root:["root",`size${be(u)}`,w,y,a!=="standard"&&`color${be(a)}`,a!=="standard"&&`${w}${be(a)}`,t&&"disabled",g&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[S]],icon:["icon"]};return Ot(k,no,o)},so=c("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Nt})(({theme:e,ownerState:o})=>G({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${q.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},o.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},o.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),lo=c(Kt,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Nt})(({theme:e,ownerState:o})=>G({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${q.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${q.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${q.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:xe(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${q.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:xe(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${q.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},o.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},o.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},o.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:o})=>G({},o.variant==="text"&&{[`&.${q.selected}`]:G({},o.color!=="standard"&&{color:(e.vars||e).palette[o.color].contrastText,backgroundColor:(e.vars||e).palette[o.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[o.color].main}},[`&.${q.focusVisible}`]:{backgroundColor:(e.vars||e).palette[o.color].dark}},{[`&.${q.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},o.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${q.selected}`]:G({},o.color!=="standard"&&{color:(e.vars||e).palette[o.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / 0.5)`:xe(e.palette[o.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:xe(e.palette[o.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:xe(e.palette[o.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${q.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:xe(e.palette[o.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${q.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),ro=c("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,o)=>o.icon})(({theme:e,ownerState:o})=>G({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},o.size==="small"&&{fontSize:e.typography.pxToRem(18)},o.size==="large"&&{fontSize:e.typography.pxToRem(22)})),co=x.forwardRef(function(o,a){const t=At({props:o,name:"MuiPaginationItem"}),{className:g,color:u="standard",component:y,components:S={},disabled:w=!1,page:k,selected:B=!1,shape:j="circular",size:d="medium",slots:l={},type:C="page",variant:_="text"}=t,$=Re(t,io),E=G({},t,{color:u,disabled:w,selected:B,shape:j,size:d,type:C,variant:_}),D=Mt(),L=ao(E),M=(D?{previous:l.next||S.next||St,next:l.previous||S.previous||Bt,last:l.first||S.first||vt,first:l.last||S.last||Ct}:{previous:l.previous||S.previous||Bt,next:l.next||S.next||St,first:l.first||S.first||vt,last:l.last||S.last||Ct})[C];return C==="start-ellipsis"||C==="end-ellipsis"?i.jsx(so,{ref:a,ownerState:E,className:Ne(L.root,g),children:"â€¦"}):i.jsxs(lo,G({ref:a,ownerState:E,component:y,disabled:w,className:Ne(L.root,g)},$,{children:[C==="page"&&k,M?i.jsx(ro,{as:M,ownerState:E,className:L.icon}):null]}))}),uo=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],go=e=>{const{classes:o,variant:a}=e;return Ot({root:["root",a],ul:["ul"]},eo,o)},xo=c("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e;return[o.root,o[a.variant]]}})({}),bo=c("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,o)=>o.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function mo(e,o,a){return e==="page"?`${a?"":"Go to "}page ${o}`:`Go to ${e} page`}const fo=x.forwardRef(function(o,a){const t=At({props:o,name:"MuiPagination"}),{boundaryCount:g=1,className:u,color:y="standard",count:S=1,defaultPage:w=1,disabled:k=!1,getItemAriaLabel:B=mo,hideNextButton:j=!1,hidePrevButton:d=!1,renderItem:l=f=>i.jsx(co,G({},f)),shape:C="circular",showFirstButton:_=!1,showLastButton:$=!1,siblingCount:E=1,size:D="medium",variant:L="text"}=t,H=Re(t,uo),{items:M}=oo(G({},t,{componentName:"Pagination"})),U=G({},t,{boundaryCount:g,color:y,count:S,defaultPage:w,disabled:k,getItemAriaLabel:B,hideNextButton:j,hidePrevButton:d,renderItem:l,shape:C,showFirstButton:_,showLastButton:$,siblingCount:E,size:D,variant:L}),Q=go(U);return i.jsx(xo,G({"aria-label":"pagination navigation",className:Ne(Q.root,u),ownerState:U,ref:a},H,{children:i.jsx(bo,{className:Q.ul,ownerState:U,children:M.map((f,b)=>i.jsx("li",{children:l(G({},f,{color:y,"aria-label":B(f.type,f.page,f.selected),shape:C,size:D,variant:L}))},b))})}))});function ko(e){return i.jsx(fo,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function pt(){const{innerWidth:e,innerHeight:o}=window;return{width:e,height:o}}function ho(){const[e,o]=x.useState(pt());return x.useEffect(()=>{function a(){o(pt())}return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),e}var Me={},yo=$t;Object.defineProperty(Me,"__esModule",{value:!0});var Rt=Me.default=void 0,vo=yo(Wt()),Co=i;Rt=Me.default=(0,vo.default)((0,Co.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const Bo=c(h)({display:"flex",position:"relative",width:"100%"}),So=c("img")({width:"100%",marginTop:"57px"}),po=c(h)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),To=c(h)({display:"flex",alignItems:"baseline"}),Io=c(h)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),wo=c("img")({width:"100%",height:"100%"}),jo=c(h)({margin:0,marginLeft:"12px",position:"relative",top:"-20px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),Po=c(h)(({hamburgercolor:e})=>({position:"absolute",top:"12px",right:"15px",width:"46px","& .hamburger-react":{width:"46px !important",color:e},"& .hamburger-react ~ .MuiBox-root ":{border:`1px solid ${e}`},"@media (max-height: 639px)":{top:"8px",right:"10px"},"@media screen and (orientation: landscape)":{right:"15px"}})),_o=c("img")({position:"relative",top:"-20px",cursor:"pointer","&:active":{opacity:"0.8"}}),Eo=c(h)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),Ao=c("img")({width:"100%","&:active":{opacity:"0.8"}});c("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}});const Oo=c(h)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),No=c(h)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Ro=c(h)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),Tt=c(h)(({active:e,bordercolor:o})=>({width:"50%",height:"37.9px",border:`1px solid ${o}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer",marginBottom:"20px"})),It=c("img")({}),wt=c(h)(({active:e})=>({marginLeft:"5px"})),Do=c(h)({width:"100%",display:"flex",flexDirection:"column"}),Lo=c(h)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),Mo=c(h)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});c(h)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const $o=c(h)({display:"flex",flexDirection:"column"}),Fo=c(h)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),Uo=c(h)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});c(h)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const zo=c(h)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),Ho=c("img")({cursor:"pointer",marginRight:"15px"}),Ko=c(Gt)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),Wo=c(h)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),Go=c("img")({width:"63px"}),Yo=c(h)({margin:"0px",marginLeft:"24px","@media (max-height: 600px)":{"& .MuiBox-root":{fontSize:"14px !important"}}}),Vo=c(h)({width:"100%",justifyContent:"space-between",alignItems:"center",margin:"10px 0px"}),qo=c(h)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"center",padding:"0px 7px"});c(Rt)({marginLeft:"-33px",color:"#17637D",height:"30px"});const Xo=c(h)(({progress:e,progresscolor:o})=>({width:"calc(100% - 60px)",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",borderBottom:`1px solid ${o}`,"::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${e}%`,borderBottom:e!=0?`2px solid ${o}`:"none"}})),Qo=c(h)(({istransliteration:e,translatestatus:o})=>({margin:"5px 0px 5px 0px",display:"flex",justifyContent:"space-between",opacity:o=="one"||o=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& .MuiBox-root:first-of-type":{width:"48%"},"& .MuiBox-root:last-child":{marginInlineEnd:"auto",width:e=="true"?"48%":"75%"}})),Zo=c(h)({display:"flex",justifyContent:"space-between"}),Jo=c(h)(({translatestatus:e})=>({width:"80%",display:"flex",opacity:e=="one"||e=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}})),en=c("img")({width:"20px",marginLeft:"10px"}),tn=c(h)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),jt=c("img")({marginLeft:"3px",cursor:"pointer"}),on=c(h)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),nn=c(h)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),an=c(h)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),Pt=c(h)(({style:e,translatestatus:o,readalready:a,readbgcolor:t,readtextcolor:g})=>({opacity:o=="one"||o=="none"?"0.5":"1",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:a=="true"?`${t} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:a=="true"?`${g} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:a=="true"?`${g} !important`:`${e.color} !important`}})),sn=c("img")({width:"50%",height:"50%"});function ln(e){const[o,a]=x.useState(""),[t,g]=x.useState(""),{theme:u,readingLanguage:y}=x.useContext(pe),{logoTextColor:S,headerBGColor:w}=Te(u),k=localStorage.getItem(De)||Le;return x.useEffect(()=>{var B,j,d,l;e.markTitle?a((B=e.markTitle)==null?void 0:B[k]):a(((l=(d=(j=e.terms)==null?void 0:j.texts.find(C=>C.variable=="Default Book Title"))==null?void 0:d.text)==null?void 0:l[y])||""),e.markImg?g(e.markImg):g(v.default_cover)},[e.markTitle,e.markImg]),i.jsxs(Bo,{children:[i.jsx(So,{src:u==P.DEFAULT||u==P.DARK?v.book_subtract:u==P.BLACK_AND_WHITE?v.book_subtract_BAW:u==P.SAPPHIRE?v.book_subtract_sapphire:v.book_subtract_easyocean}),i.jsxs(po,{children:[i.jsxs(To,{children:[i.jsx(Io,{onClick:e.onLogoClick,children:i.jsx(wo,{src:t})}),i.jsx(jo,{children:i.jsx(X,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:S,children:o})})]}),i.jsx(_o,{src:u==P.EASY_OCEAN?v.search_easyocean:v.search,onClick:e.onSearchClick})]}),i.jsx(Eo,{children:i.jsx(Ao,{src:u==P.DEFAULT||u==P.DARK?v.close2:u==P.BLACK_AND_WHITE?v.close2_BAW:u==P.SAPPHIRE?v.close2_sapphire:v.close2_easyocean,onClick:e.onCloseClick})}),i.jsx(Po,{hamburgercolor:w,children:i.jsx(qt,{isLogin:e.isLogIn,textColor:S,itemBgColor:w,toggleColor:w,terms:e.welcomePageTerms,onLogin:e.onLogin,onSettings:e.onSettings})})]})}function rn(e){var s,r,m,T,p,O,Y,N,se,le,re,de,ce,oe,ne,ie,ae,R,$e,Fe,Ue,ze,He,Ke,We,Ge,Ye,Ve,qe,Xe,Qe,Ze,Je,et,tt,ot,nt,it,at,st;const[o,a]=x.useState([]),[t,g]=x.useState(),[u,y]=x.useState(!1),[S,w]=x.useState(!1),[k,B]=x.useState(0),{theme:j,referenceLanguage:d,readingLanguage:l}=x.useContext(pe),{mainBGColor:C,altTextColor:_,backgroundColor:$,topTextColor:E,buttonColor:D,buttonTextColor:L}=Te(j),H=localStorage.getItem(De)||Le,M=x.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const n=e.userHistory.filter(F=>F.bookId==e.bookId);if(n&&n.length>0)return n[0].readChapterIds}return[]},[e.userHistory]),U=e.subBookId;x.useEffect(()=>{e.openedSubBook==e.subBookId?y(!0):y(!1)},[e.openedSubBook]),x.useEffect(()=>{var Z,J;const n=e.subBooks.filter(I=>I.subBookId===U);let F=0;if(n&&n.length>0&&(F=(Z=n[0].chapterInfos)==null?void 0:Z.length,g(n[0])),e.currentUser){const I=e.userHistory.filter(A=>A.bookId==e.bookId);if(I&&I.length>0){const A=I[0].subBooks.filter(ee=>ee.subBookId==U);A&&A.length>0&&B(Math.floor(((J=A[0])==null?void 0:J.readChapters)/F*100))}}if(e.subBooks&&e.subBooks.length>0){const I=e.subBooks.filter(A=>A.subBookId==U);if(I&&I.length>0){let A=I[0].chapterInfos;A.sort((ee,te)=>ee.chapterNumber-te.chapterNumber),a(A)}}},[e.subBooks,e.userHistory]),x.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const n=e.subBookInfos.filter(F=>F.subBookId==U);n&&n.length>0?w(!0):w(!1)}},[]);const Q=x.useCallback(n=>{w(F=>!F),e.onDownload(n)},[]),f=()=>{var n,F,Z,J;if(t!=null&&t.noChapter){const I=(n=t==null?void 0:t.chapterInfos[0])==null?void 0:n.isTranslated,A=(F=t==null?void 0:t.chapterInfos[0])==null?void 0:F.isPublished;!(I!=null&&I[d])&&!(I!=null&&I[l])||!(A!=null&&A[d])&&!(A!=null&&A[l])?K.custom(ee=>{var te,ue,me;return i.jsx(W,{text:((me=(ue=(te=e.terms)==null?void 0:te.texts.find(Ie=>Ie.variable=="None Translated"))==null?void 0:ue.text)==null?void 0:me[l])||"",visible:ee.visible})}):e.moveToReading(t==null?void 0:t.chapterInfos[0].chapterId,(Z=e.bookTitle)==null?void 0:Z[H],e.bookImage,(J=t.subBookTitle)==null?void 0:J[H],t.subBookId,!!(I!=null&&I[d]&&(I!=null&&I[l])))}else y(!u),e.handleOpenedSubBook(e.subBookId)},b=(n,F)=>{var Z,J;F=="none"?K.custom(I=>{var A,ee,te;return i.jsx(W,{text:((te=(ee=(A=e.terms)==null?void 0:A.texts.find(ue=>ue.variable=="None Translated"))==null?void 0:ee.text)==null?void 0:te[l])||"",visible:I.visible})}):e.moveToReading(n,(Z=e.bookTitle)==null?void 0:Z[H],e.bookImage,(J=t.subBookTitle)==null?void 0:J[H],t.subBookId,F=="both")};return i.jsxs(Vo,{children:[i.jsxs(qo,{children:[i.jsxs(Xo,{progress:k,progresscolor:D,onClick:f,children:[(t==null?void 0:t.subBookNumber)!=0&&i.jsxs(Qo,{istransliteration:((s=t==null?void 0:t.subBookTitle)==null?void 0:s[_e])!=null?"true":"false",translatestatus:(t==null?void 0:t.noChapter)&&(!((m=(r=t==null?void 0:t.chapterInfos[0])==null?void 0:r.isTranslated)!=null&&m[d])&&!((p=(T=t==null?void 0:t.chapterInfos[0])==null?void 0:T.isTranslated)!=null&&p[l])||!((Y=(O=t==null?void 0:t.chapterInfos[0])==null?void 0:O.isPublished)!=null&&Y[d])&&!((se=(N=t==null?void 0:t.chapterInfos[0])==null?void 0:N.isPublished)!=null&&se[l])?"none":(!((re=(le=t==null?void 0:t.chapterInfos[0])==null?void 0:le.isTranslated)!=null&&re[d])||!((ce=(de=t==null?void 0:t.chapterInfos[0])==null?void 0:de.isTranslated)!=null&&ce[l]))&&((ne=(oe=t==null?void 0:t.chapterInfos[0])==null?void 0:oe.isPublished)!=null&&ne[d]||!((ae=(ie=t==null?void 0:t.chapterInfos[0])==null?void 0:ie.isPublished)!=null&&ae[l]))?"one":"both")||"",children:[((R=t==null?void 0:t.subBookTitle)==null?void 0:R[_e])&&i.jsx(X,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:_,language:Ee,children:(t==null?void 0:t.subBookNumber)+". "+(($e=t==null?void 0:t.subBookTitle)==null?void 0:$e[_e])}),i.jsx(X,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:_,language:Ee,direction:"rtl",children:(Fe=t==null?void 0:t.subBookTitle)==null?void 0:Fe[Ee]})]}),i.jsxs(Zo,{children:[i.jsxs(Jo,{translatestatus:t!=null&&t.noChapter&&(!((ze=(Ue=t==null?void 0:t.chapterInfos[0])==null?void 0:Ue.isTranslated)!=null&&ze[d])&&!((Ke=(He=t==null?void 0:t.chapterInfos[0])==null?void 0:He.isTranslated)!=null&&Ke[l])||!((Ge=(We=t==null?void 0:t.chapterInfos[0])==null?void 0:We.isPublished)!=null&&Ge[d])&&!((Ve=(Ye=t==null?void 0:t.chapterInfos[0])==null?void 0:Ye.isPublished)!=null&&Ve[l]))?"none":(!((Xe=(qe=t==null?void 0:t.chapterInfos[0])==null?void 0:qe.isTranslated)!=null&&Xe[d])||!((Ze=(Qe=t==null?void 0:t.chapterInfos[0])==null?void 0:Qe.isTranslated)!=null&&Ze[l]))&&((et=(Je=t==null?void 0:t.chapterInfos[0])==null?void 0:Je.isPublished)!=null&&et[d]||!((ot=(tt=t==null?void 0:t.chapterInfos[0])==null?void 0:tt.isPublished)!=null&&ot[l]))?"one":"both",children:[i.jsx(X,{fontFamily:'"Baloo Da 2"',color:_,children:(nt=t==null?void 0:t.subBookTitle)==null?void 0:nt[H]}),(t==null?void 0:t.subBookNumber)==0&&i.jsx(en,{src:v.icon_intro})]}),e.currentUser&&k!==0&&!(t!=null&&t.noChapter)&&i.jsx(X,{fontFamily:'"Baloo Da 2"',color:D,children:`${k}%`})]})]}),i.jsxs(tn,{isdownloaded:S?"true":"false",children:[i.jsx(jt,{src:S?j==P.DEFAULT||j==P.EASY_OCEAN?v.download_cancel:v.download_cancel_white:j==P.DEFAULT||j==P.EASY_OCEAN?v.download:v.download_white,onClick:()=>Q(U)}),S&&i.jsx(jt,{src:j==P.DEFAULT||j==P.EASY_OCEAN?v.download_refresh:v.download_refresh_white,onClick:()=>e.onDownloadRefresh(U)})]})]}),u&&i.jsxs(on,{style:{backgroundColor:$},children:[i.jsx(nn,{children:i.jsx(X,{fontFamily:"Inter",color:E,children:((st=(at=(it=e.terms)==null?void 0:it.texts.find(n=>n.variable=="Chapter"))==null?void 0:at.text)==null?void 0:st[l])||""})}),i.jsx(an,{children:o==null?void 0:o.map((n,F)=>{var Z,J,I,A,ee,te,ue,me,Ie,lt,rt,dt,ct,ut,gt,xt;return n.chapterNumber==0?i.jsx(Pt,{translatestatus:!((Z=n==null?void 0:n.isTranslated)!=null&&Z[d])&&!((J=n==null?void 0:n.isTranslated)!=null&&J[l])||!((I=n==null?void 0:n.isPublished)!=null&&I[d])&&!((A=n==null?void 0:n.isPublished)!=null&&A[l])?"none":(!((ee=n==null?void 0:n.isTranslated)!=null&&ee[d])||!((te=n==null?void 0:n.isTranslated)!=null&&te[l]))&&((ue=n==null?void 0:n.isPublished)!=null&&ue[d]||!((me=n==null?void 0:n.isPublished)!=null&&me[l]))?"one":"both",readalready:M&&M.length>0&&M.includes(n.chapterId)?"true":"false",style:{backgroundColor:C,color:_},readbgcolor:D,readtextcolor:L,onClick:()=>{var fe,ke,he,ye,ve,Ce,Be,Se;return b(n.chapterId,!((fe=n==null?void 0:n.isTranslated)!=null&&fe[d])&&!((ke=n==null?void 0:n.isTranslated)!=null&&ke[l])||!((he=n==null?void 0:n.isPublished)!=null&&he[d])&&!((ye=n==null?void 0:n.isPublished)!=null&&ye[l])?"none":(!((ve=n.isTranslated)!=null&&ve[d])||!((Ce=n==null?void 0:n.isTranslated)!=null&&Ce[l]))&&((Be=n==null?void 0:n.isPublished)!=null&&Be[d]||!((Se=n==null?void 0:n.isPublished)!=null&&Se[l]))?"one":"both")},children:i.jsx(sn,{src:v.icon_intro})},F):i.jsx(Pt,{translatestatus:!((Ie=n==null?void 0:n.isTranslated)!=null&&Ie[d])&&!((lt=n==null?void 0:n.isTranslated)!=null&&lt[l])||!((rt=n==null?void 0:n.isPublished)!=null&&rt[d])&&!((dt=n==null?void 0:n.isPublished)!=null&&dt[l])?"none":(!((ct=n==null?void 0:n.isTranslated)!=null&&ct[d])||!((ut=n==null?void 0:n.isTranslated)!=null&&ut[l]))&&((gt=n==null?void 0:n.isPublished)!=null&&gt[d]||!((xt=n==null?void 0:n.isPublished)!=null&&xt[l]))?"one":"both",readalready:M&&M.length>0&&M.includes(n.chapterId)?"true":"false",style:{backgroundColor:C,color:_},readbgcolor:D,readtextcolor:L,onClick:()=>{var fe,ke,he,ye,ve,Ce,Be,Se;return b(n.chapterId,!((fe=n==null?void 0:n.isTranslated)!=null&&fe[d])&&!((ke=n==null?void 0:n.isTranslated)!=null&&ke[l])||!((he=n==null?void 0:n.isPublished)!=null&&he[d])&&!((ye=n==null?void 0:n.isPublished)!=null&&ye[l])?"none":(!((ve=n.isTranslated)!=null&&ve[d])||!((Ce=n.isTranslated)!=null&&Ce[l]))&&(!((Be=n==null?void 0:n.isPublished)!=null&&Be[d])||!((Se=n==null?void 0:n.isPublished)!=null&&Se[l]))?"one":"both")},children:i.jsx(X,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:n.chapterNumber})},F)})})]})]})}function dn(e){const[o,a]=x.useState([]);return x.useEffect(()=>{let t=e.subBooks;t&&t.sort((g,u)=>g.subBookNumber-u.subBookNumber),a(t)},[e.subBooks]),i.jsx(i.Fragment,{children:o&&o.length>0&&o.map((t,g)=>i.jsx(rn,{bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:o,subBookId:t.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},g))})}function cn(e){const[o,a]=x.useState(""),[t,g]=x.useState([]),[u,y]=x.useState(1),[S,w]=x.useState([]),{theme:k,readingLanguage:B}=x.useContext(pe),{backgroundColor:j,topTextColor:d,mainTextColor:l}=Te(k),C=Zt(e.deviceHeight),_=u*C,$=_-C,E=e.currentUser&&t.slice($,_);x.useEffect(()=>{var f,b,s,r,m,T;if(e.subBooks&&e.subBooks.length>0){const p=e.subBooks.map(O=>{var Y;return{label:(Y=O.subBookTitle)==null?void 0:Y[B],value:O.subBookId}});p.unshift({label:((f=e.bookTitle)==null?void 0:f.en)=="Qur'an"||((b=e.bookTitle)==null?void 0:b.en)=="Zabur"?(r=(s=e.terms.texts.find(O=>O.variable=="All Chapters"))==null?void 0:s.text)==null?void 0:r[B]:(T=(m=e.terms.texts.find(O=>O.variable=="All SubBooks"))==null?void 0:m.text)==null?void 0:T[B],value:"all"}),w(p)}},[e.subBooks]),x.useEffect(()=>{S.length>0&&a(S[0].value)},[S]),x.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const f=e.bookmark.filter(b=>b.subBookId===o);g(o==="all"||o===""?e.bookmark:f)}else g([]),y(0);u>1&&E.length==1&&y(f=>f-1)},[e.bookmark]);const D=(f,b)=>{y(b)},L=x.useCallback(f=>{const b=f.target.value;a(b);const s=e.bookmark.filter(r=>r.subBookId===b);g(b==="all"?e.bookmark:s)},[e.bookmark]),H=()=>{var f,b,s,r;return i.jsx(Lo,{style:{backgroundColor:j},children:i.jsx(Xt,{label:((b=(f=e.terms.texts.find(m=>m.variable=="Filter"))==null?void 0:f.text)==null?void 0:b[B])||"",detail:i.jsxs(Mo,{children:[i.jsx(X,{color:d,children:(r=(s=e.terms.texts.find(m=>m.variable=="Show"))==null?void 0:s.text)==null?void 0:r[B]}),i.jsx(Qt,{label:"",options:S,value:o,backgroundColor:j,textColor:d,onChange:L})]})})})},M=()=>i.jsx($o,{children:(E==null?void 0:E.length)>0&&E.map((f,b)=>{var s,r,m,T,p,O,Y,N,se,le,re,de,ce,oe,ne,ie,ae;return i.jsxs(h,{children:[i.jsxs(Fo,{children:[i.jsxs(Uo,{onClick:()=>e.moveToReadingFromBookmark(f._id),children:[i.jsx(X,{color:l,children:(s=f.subBookTitle)==null?void 0:s[B]}),i.jsx(X,{color:l,children:f.bookTitle.en=="Qur'an"||f.bookTitle.en=="Zabur"?f.chapterNumber>0?`${(m=(r=e.terms.texts.find(R=>R.variable=="Surah Bookmark"))==null?void 0:r.text)==null?void 0:m[B]} ${f.chapterNumber}, ${(p=(T=e.terms.texts.find(R=>R.variable=="Aya"))==null?void 0:T.text)==null?void 0:p[B]} ${f.verseNumber}`:`${(Y=(O=e.terms.texts.find(R=>R.variable=="Surah Bookmark"))==null?void 0:O.text)==null?void 0:Y[B]} _ , ${(se=(N=e.terms.texts.find(R=>R.variable=="Aya"))==null?void 0:N.text)==null?void 0:se[B]} ${f.verseNumber}`:f.chapterNumber>0?`${(re=(le=e.terms.texts.find(R=>R.variable=="Chapter Bookmark"))==null?void 0:le.text)==null?void 0:re[B]} ${f.chapterNumber}, ${(ce=(de=e.terms.texts.find(R=>R.variable=="Aya"))==null?void 0:de.text)==null?void 0:ce[B]} ${f.verseNumber}`:`${(ne=(oe=e.terms.texts.find(R=>R.variable=="Chapter Bookmark"))==null?void 0:oe.text)==null?void 0:ne[B]} _ , ${(ae=(ie=e.terms.texts.find(R=>R.variable=="Aya"))==null?void 0:ie.text)==null?void 0:ae[B]} ${f.verseNumber}`})]}),i.jsx(Ho,{src:k==P.DEFAULT||k==P.EASY_OCEAN||k==P.EASY_SUNRISE?v.black_bookmark:v.white_bookmark,onClick:()=>e.removeBookmark(f._id)})]}),i.jsx(zo,{})]},b)})}),U=()=>i.jsx(Ko,{buttoncolor:l,children:i.jsx(ko,{count:e.currentUser?Math.ceil(t.length/C):0,page:u,hidePrevButton:!0,hideNextButton:!0,onChange:D})}),Q=()=>{var f,b;return i.jsxs(Wo,{style:{backgroundColor:j},children:[i.jsx(Go,{src:k==P.DEFAULT||k==P.BLACK_AND_WHITE?v.swipe:k==P.EASY_OCEAN?v.swipe_easyocean:v.swipe_white}),i.jsx(Yo,{style:{color:d},children:(b=(f=e.terms.texts.find(s=>s.variable=="Bookmark Help"))==null?void 0:f.text)==null?void 0:b[B]})]})};return i.jsxs(Do,{children:[H(),M(),U(),Q()]})}function un(e){var j,d,l,C;const[o,a]=x.useState(V),{theme:t,readingLanguage:g}=x.useContext(pe),{mainBGColor:u,headerBGColor:y,buttonColor:S,buttonTextColor:w,mainTextColor:k}=Te(t),B=_=>{e.currentUser?a(_):K.custom($=>{var E,D;return i.jsx(W,{text:((D=(E=e.terms.texts.find(L=>L.variable=="Bookmark Read Description"))==null?void 0:E.text)==null?void 0:D[g])||"",visible:$.visible})})};return i.jsx(Oo,{style:{backgroundColor:y},children:i.jsxs(No,{style:{backgroundColor:u},children:[i.jsxs(Ro,{children:[i.jsxs(Tt,{active:o==V?"true":"false",style:{backgroundColor:o==V?S:u},bordercolor:k,onClick:()=>B(V),children:[i.jsx(It,{src:t==P.DEFAULT?v.index:t==P.EASY_OCEAN?o==V?v.index_active:v.index:o==V?v.index:v.index_active}),i.jsx(wt,{active:o==V?"true":"false",children:i.jsx(X,{fontSize:16,fontWeight:"500",lineHeight:24,color:o==V?w:k,children:((d=(j=e.terms.texts.find(_=>_.variable=="Index"))==null?void 0:j.text)==null?void 0:d[g])||""})})]}),i.jsxs(Tt,{active:o==V?"false":"true",style:{backgroundColor:o==Ae?S:u},bordercolor:k,onClick:()=>B(Ae),children:[i.jsx(It,{src:t==P.DEFAULT?v.bookmark2_default:t==P.EASY_OCEAN?o==V?v.bookmark2_default:v.bookmark2_white:o==V?v.bookmark2_white:v.bookmark2_default}),i.jsx(wt,{active:o==V?"false":"true",children:i.jsx(X,{fontSize:16,fontWeight:"500",lineHeight:24,color:o==Ae?w:k,children:((C=(l=e.terms.texts.find(_=>_.variable=="Bookmarks"))==null?void 0:l.text)==null?void 0:C[g])||""})})]})]}),o==V?i.jsx(dn,{bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):i.jsx(cn,{bookTitle:e.bookTitle,subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark.filter(_=>_.bookId==e.bookId),deviceHeight:e.deviceHeight,terms:e.terms,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const gn=Ft,ge=Ut,xn=1;class bn{constructor(){bt(this,"db",null)}async initDB(){return new Promise((o,a)=>{const t=indexedDB.open(gn,xn);t.onerror=()=>a(t.error),t.onsuccess=()=>{this.db=t.result,o()},t.onupgradeneeded=g=>{g.target.result.createObjectStore(ge,{keyPath:"subBookId"})}})}async saveSubBookInfo(o){return this.db||await this.initDB(),new Promise((a,t)=>{const y=this.db.transaction([ge],"readwrite").objectStore(ge).put(o);y.onerror=()=>t(y.error),y.onsuccess=()=>a()})}async getSubBookInfo(o){return this.db||await this.initDB(),new Promise((a,t)=>{const y=this.db.transaction([ge],"readonly").objectStore(ge).get(o);y.onerror=()=>t(y.error),y.onsuccess=()=>a(y.result)})}async removeSubBookInfo(o){return this.db||await this.initDB(),new Promise((a,t)=>{const y=this.db.transaction([ge],"readwrite").objectStore(ge).delete(o);y.onerror=()=>t(y.error),y.onsuccess=()=>a()})}}const je=new bn,mn=c(h)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function fn(e){const[o,a]=x.useState(),[t,g]=x.useState(!1),[u,y]=x.useState(),[S,w]=x.useState(),k=Vt(),{height:B}=ho(),{theme:j,readingLanguage:d}=x.useContext(pe),{mainBGColor:l}=Te(j),C=localStorage.getItem(De)||Le,_=x.useCallback(()=>{e.currentBook&&yt.fetchBookInfo(e.currentBook).then(s=>{var r,m,T,p,O;if(e.dispatch({type:z.ADD_BOOKINFO,payload:{bookInfo:s}}),a(s),e.currentUser&&!e.userHistory.some(N=>N.bookId==e.currentBook)&&s.subBooks){const N=s.subBooks.find(oe=>oe.subBookNumber==0),se=(r=N==null?void 0:N.chapterInfos[0])==null?void 0:r.chapterId,le=(m=s.bookTitle)==null?void 0:m[C],re=s.bookImage||"",de=(T=N==null?void 0:N.subBookTitle)==null?void 0:T[C],ce=N==null?void 0:N.subBookId;(O=(p=N==null?void 0:N.chapterInfos[0])==null?void 0:p.isTranslated)!=null&&O[C]?D(se,le,re,de,ce):K.custom(oe=>{var ne,ie,ae;return i.jsx(W,{text:((ae=(ie=(ne=u==null?void 0:u.texts)==null?void 0:ne.find(R=>R.variable=="None Translated"))==null?void 0:ie.text)==null?void 0:ae[d])||"",type:we.BOOKMARK,visible:oe.visible})})}}).catch(s=>{K.custom(r=>i.jsx(W,{text:s,type:we.BOOKMARK,visible:r.visible}))}).finally(()=>{g(!1)})},[e.currentBook,e.dispatch,e.userHistory,e.currentUser]),$=x.useCallback(async s=>{try{const r=await yt.fetchSubBookInfo(s);console.log({subBookInfo:r}),e.dispatch({type:z.ADD_SUBBOOKINFO,payload:{subBookInfo:r}}),e.dispatch({type:z.ADD_SUBBOOK,payload:{subBook:r}}),await je.saveSubBookInfo(r),g(!1)}catch(r){K.custom(m=>i.jsx(W,{text:r,visible:m.visible})),g(!1)}},[e.dispatch]);x.useEffect(()=>{var m,T;const s=e.terms.find(p=>p.pageTitle=="Index & Bookmark Page"),r=e.terms.find(p=>p.pageTitle=="Welcome Page");(m=s==null?void 0:s.isPublished)!=null&&m[d]?y(s):K.custom(p=>i.jsx(W,{text:"The terminologies for this page are not published.",visible:p.visible})),(T=r==null?void 0:r.isPublished)!=null&&T[d]?w(r):K.custom(p=>i.jsx(W,{text:"The terminologies for hamburgur menu are not published.",visible:p.visible}))},[e.terms]),x.useEffect(()=>{(async()=>{var r;g(!0),!((r=e.bookInfos)!=null&&r.length)||!e.bookInfos.some(m=>m.bookId===e.currentBook)?await _():(a(e.bookInfos.find(m=>m.bookId===e.currentBook)),g(!1))})(),e.currentUser&&kt.fetchBookmarks().then(r=>{e.dispatch({type:z.SET_BOOKMARKS,payload:{bookmark:r}})}).catch(r=>{r.status===401&&r.response.data.message===mt&&(K.custom(m=>i.jsx(W,{text:r.response.data.message,visible:m.visible})),Oe.logout(),k("/login"))})},[e.currentBook,e.bookInfos,e.currentUser,e.dispatch]);const E=()=>{K.custom(s=>{var r,m,T;return i.jsx(W,{text:((T=(m=(r=u==null?void 0:u.texts)==null?void 0:r.find(p=>p.variable=="Not Built Yet"))==null?void 0:m.text)==null?void 0:T[d])||"",visible:s.visible})})},D=(s,r,m,T,p,O)=>{e.dispatch({type:z.SET_CURRENT_CHAPTER,payload:{currentChapter:s}}),e.dispatch({type:z.SET_OPENED_SUBBOOK,payload:{openedSubBook:p}}),k("/reading")},L=x.useCallback(async s=>{g(!0),ht()<ft?await je.getSubBookInfo(s)?(await je.removeSubBookInfo(s),e.dispatch({type:z.REMOVE_SUBBOOKINFO,payload:{subBookId:s}})):await $(s):K.custom(m=>{var T,p,O;return i.jsx(W,{text:((O=(p=(T=u==null?void 0:u.texts)==null?void 0:T.find(Y=>Y.variable=="Not Enough Space"))==null?void 0:p.text)==null?void 0:O[d])||"",visible:m.visible})}),g(!1)},[$,e.dispatch]),H=x.useCallback(async s=>{g(!0),await je.removeSubBookInfo(s),e.dispatch({type:z.REMOVE_SUBBOOKINFO,payload:{subBookId:s}}),ht()<ft?await $(s):K.custom(m=>{var T,p,O;return i.jsx(W,{text:((O=(p=(T=u==null?void 0:u.texts)==null?void 0:T.find(Y=>Y.variable=="Not Enough Space"))==null?void 0:p.text)==null?void 0:O[d])||"",visible:m.visible})}),g(!1)},[$,e.dispatch]),M=x.useCallback(s=>{if(g(!0),e.bookmark&&e.bookmark.length>0){const r=e.bookmark.find(m=>m._id===s);if(r){const{chapterId:m,subBookId:T,verseId:p}=r;e.dispatch({type:z.SET_OPENED_SUBBOOK,payload:{openedSubBook:T}}),e.dispatch({type:z.SET_CURRENT_CHAPTER,payload:{currentChapter:m}}),e.dispatch({type:z.SET_CURRENT_VERSE,payload:{currentVerse:p}}),k("/reading"),g(!1)}}},[e.currentBook,k,e.bookmark]),U=x.useCallback(s=>{g(!0),kt.deleteBookmark(s).then(r=>{e.dispatch({type:z.REMOVE_BOOKMARK,payload:{bookmarkId:s}}),K.custom(m=>i.jsx(W,{text:r.message,type:we.BOOKMARK,visible:m.visible})),g(!1)}).catch(r=>{r.status==401&&r.response.data.message==mt&&(K.custom(m=>i.jsx(W,{text:r.response.data.message,type:we.BOOKMARK,visible:m.visible})),Oe.logout(),k("/login")),g(!1)})},[e.dispatch]),Q=x.useCallback(s=>{e.dispatch({type:z.SET_OPENED_SUBBOOK,payload:{openedSubBook:e.openedSubBook===s?"":s}})},[e.openedSubBook,e.dispatch]),f=()=>{e.dispatch({type:z.RESET_USER}),e.dispatch({type:z.RESET_BOOK}),e.dispatch({type:z.RESET_PAGE_STATUS}),Oe.logout()},b=()=>{k("/login")};return i.jsxs(mn,{style:{backgroundColor:l},children:[i.jsx(ln,{markImg:o&&zt+o.bookImage,markTitle:o==null?void 0:o.bookTitle,isLogIn:!!e.currentUser,terms:u||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},welcomePageTerms:S||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},onLogoClick:()=>k("/"),onCloseClick:()=>k("/library"),onLogin:e.currentUser?f:b,onSettings:()=>k("/settings"),onSearchClick:E}),i.jsx(un,{bookId:e.currentBook,bookTitle:o==null?void 0:o.bookTitle,bookImage:o==null?void 0:o.bookImage,subBooks:o==null?void 0:o.subBooks,deviceHeight:B,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.openedSubBook,terms:u||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},moveToReading:D,moveToReadingFromBookmark:M,onDownload:L,onDownloadRefresh:H,removeBookmark:U,handleOpenedSubBook:Q}),t&&i.jsx(Jt,{})]})}function kn(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,terms:e.terms.terms,currentBook:e.pageStatus.currentBook,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,openedSubBook:e.pageStatus.openedSubBook,currentUser:e.user.currentUser,activeChapterId:e.books.activeChapterId}}const An=Yt(kn)(fn);export{An as default};
