import{b as a,j as n,Q as W,ah as fn,U as oe,ak as Ge,ax as vt,ay as $e,az as an,J as gn,X as xn,af as Be,$ as rt,ab as pt,Y as Ve,aA as Fe,aB as Ce,aC as kt,aD as mn,aE as vn,aF as Tt,ac as pn,ai as bn,ap as it,ao as We}from"./index-DH-c_rFj.js";import{S as fe,g as me,aw as Sn,ax as yn,ay as Cn,az as _n,s as C,B as k,aA as Je,F as wn,aB as En,_ as te,c as In,u as kn,d as Q}from"./App-18QLLKMc.js";import{I as V,T as X}from"./index-Dmlgjfnd.js";import{p as Tn}from"./index-tqzMerhZ.js";import{d as At,A as An,b as Bt}from"./bookmark.service-DaazbEgc.js";import{C as ne}from"./index-CvJtpuIx.js";import{c as Rt}from"./index-BBcM0dtj.js";import{L as Bn}from"./index-BvD-2T8g.js";import{a as ot}from"./auth.service-CGfWy4g4.js";import{b as qe}from"./book.service-mTnJ_pqv.js";import"./index-BcnQO5GJ.js";import"./axios-BimPEqV4.js";function Rn(e){const{theme:i}=a.useContext(fe),{buttonColor:o,buttonTextColor:u}=me(i);return n.jsx(Sn,{ref:e.refer,"data-id":e.dataId,backgroundColor:o,children:n.jsxs(yn,{progresscolor:u,children:[n.jsx(Cn,{variant:"determinate",value:e.progress,thickness:2}),n.jsx(_n,{src:i==W.EASY_OCEAN?V.bookmark2_white:V.bookmark2_default})]})})}var sn={};function Nn(e){if(e&&e.__esModule)return e;var i={};if(e!=null){for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};u.get||u.set?Object.defineProperty(i,o,u):i[o]=e[o]}}return i.default=e,i}var ln=Nn,de={},at,Nt;function Ln(){if(Nt)return at;Nt=1;function e(i){return i&&i.__esModule?i:{default:i}}return at=e,at}var Ue,Lt;function jn(){if(Lt)return Ue;Lt=1;function e(){return Ue=e=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(i[d]=u[d])}return i},e.apply(this,arguments)}return Ue=e,Ue}var st,jt;function Pn(){if(jt)return st;jt=1;function e(i,o){if(i==null)return{};var u={},d=Object.keys(i),g,A;for(A=0;A<d.length;A++)g=d[A],!(o.indexOf(g)>=0)&&(u[g]=i[g]);return u}return st=e,st}var lt,Pt;function On(){if(Pt)return lt;Pt=1;var e=Pn();function i(o,u){if(o==null)return{};var d=e(o,u),g,A;if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(o);for(A=0;A<S.length;A++)g=S[A],!(u.indexOf(g)>=0)&&Object.prototype.propertyIsEnumerable.call(o,g)&&(d[g]=o[g])}return d}return lt=i,lt}var ct,Ot;function Mn(){if(Ot)return ct;Ot=1;function e(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}return ct=e,ct}var ut,Mt;function Dn(){if(Mt)return ut;Mt=1;function e(o,u){for(var d=0;d<u.length;d++){var g=u[d];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(o,g.key,g)}}function i(o,u,d){return u&&e(o.prototype,u),d&&e(o,d),o}return ut=i,ut}var we,Dt;function Hn(){if(Dt)return we;Dt=1;function e(o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(d){return typeof d}:e=function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},e(o)}function i(o){return typeof Symbol=="function"&&e(Symbol.iterator)==="symbol"?we=i=function(d){return e(d)}:we=i=function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":e(d)},i(o)}return we=i,we}var dt,Ht;function Vn(){if(Ht)return dt;Ht=1;function e(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}return dt=e,dt}var ht,Vt;function Fn(){if(Vt)return ht;Vt=1;var e=Hn(),i=Vn();function o(u,d){return d&&(e(d)==="object"||typeof d=="function")?d:i(u)}return ht=o,ht}var Xe,Ft;function Wn(){if(Ft)return Xe;Ft=1;function e(i){return Xe=e=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},e(i)}return Xe=e,Xe}var ze,Wt;function qn(){if(Wt)return ze;Wt=1;function e(i,o){return ze=e=Object.setPrototypeOf||function(d,g){return d.__proto__=g,d},e(i,o)}return ze=e,ze}var ft,qt;function Un(){if(qt)return ft;qt=1;var e=qn();function i(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),u&&e(o,u)}return ft=i,ft}var gt,Ut;function cn(){if(Ut)return gt;Ut=1;var e=function(){};return gt=e,gt}var xt={},mt,Xt;function et(){if(Xt)return mt;Xt=1;function e(i){return i&&i.__esModule?i:{default:i}}return mt=e,mt}var Ee={},zt;function Xn(){if(zt)return Ee;zt=1;var e=et();Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.default=void 0;var i=e(a);e(cn());var o=function(g){g.index;var A=g.children;i.default.Children.count(A)},u=o;return Ee.default=u,Ee}var Ye={},Ie={},Yt;function un(){if(Yt)return Ie;Yt=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.default=void 0;var e={RESISTANCE_COEF:.6,UNCERTAINTY_THRESHOLD:3};return Ie.default=e,Ie}var Kt;function zn(){if(Kt)return Ye;Kt=1;var e=et();Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.default=u;var i=e(a),o=e(un());function u(d){var g=d.children,A=d.startIndex,S=d.startX,P=d.pageX,N=d.viewLength,w=d.resistance,T=i.default.Children.count(g)-1,v=A+(S-P)/N,j;return w?v<0?v=Math.exp(v*o.default.RESISTANCE_COEF)-1:v>T&&(v=T+1-Math.exp((T-v)*o.default.RESISTANCE_COEF)):v<0?(v=0,j=(v-A)*N+P):v>T&&(v=T,j=(v-A)*N+P),{index:v,startX:j}}return Ye}var ke={},Gt;function Yn(){if(Gt)return ke;Gt=1;var e=et();Object.defineProperty(ke,"__esModule",{value:!0}),ke.default=void 0;var i=e(a),o=function(g,A){var S=!1,P=function(_){return _?_.key:"empty"};if(g.children.length&&A.children.length){var N=i.default.Children.map(g.children,P),w=N[g.index];if(w!=null){var T=i.default.Children.map(A.children,P),v=T[A.index];w===v&&(S=!0)}}return S},u=o;return ke.default=u,ke}var Te={},$t;function Kn(){if($t)return Te;$t=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.default=void 0;function e(o,u){var d=o%u;return d<0?d+u:d}var i=e;return Te.default=i,Te}var Qt;function Gn(){return Qt||(Qt=1,function(e){var i=et();Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"checkIndexBounds",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"computeIndex",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"constant",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"getDisplaySameSlide",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"mod",{enumerable:!0,get:function(){return A.default}});var o=i(Xn()),u=i(zn()),d=i(un()),g=i(Yn()),A=i(Kn())}(xt)),xt}var Zt;function $n(){if(Zt)return de;Zt=1;var e=ln,i=Ln();Object.defineProperty(de,"__esModule",{value:!0}),de.getDomTreeShapes=F,de.findNativeHandler=J,de.default=de.SwipeableViewsContext=void 0;var o=i(jn()),u=i(On()),d=i(Mn()),g=i(Dn()),A=i(Fn()),S=i(Wn()),P=i(Un()),N=e(a);i(Tn),i(cn());var w=Gn();function T(x,L,p,t){return x.addEventListener(L,p,t),{remove:function(){x.removeEventListener(L,p,t)}}}var v={container:{direction:"ltr",display:"flex",willChange:"transform"},slide:{width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"}},j={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(L){return"translate(".concat(-L,"%, 0)")},"x-reverse":function(L){return"translate(".concat(L,"%, 0)")},y:function(L){return"translate(0, ".concat(-L,"%)")},"y-reverse":function(L){return"translate(0, ".concat(L,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function _(x,L){var p=L.duration,t=L.easeFunction,r=L.delay;return"".concat(x," ").concat(p," ").concat(t," ").concat(r)}function K(x,L){var p=j.rotationMatrix[L];return{pageX:p.x[0]*x.pageX+p.x[1]*x.pageY,pageY:p.y[0]*x.pageX+p.y[1]*x.pageY}}function s(x){return x.touches=[{pageX:x.pageX,pageY:x.pageY}],x}function F(x,L){for(var p=[];x&&x!==L&&x!==document.body&&!x.hasAttribute("data-swipeable");){var t=window.getComputedStyle(x);t.getPropertyValue("position")==="absolute"||t.getPropertyValue("overflow-x")==="hidden"?p=[]:(x.clientWidth>0&&x.scrollWidth>x.clientWidth||x.clientHeight>0&&x.scrollHeight>x.clientHeight)&&p.push({element:x,scrollWidth:x.scrollWidth,scrollHeight:x.scrollHeight,clientWidth:x.clientWidth,clientHeight:x.clientHeight,scrollLeft:x.scrollLeft,scrollTop:x.scrollTop}),x=x.parentNode}return p}var G=null;function J(x){var L=x.domTreeShapes,p=x.pageX,t=x.startX,r=x.axis;return L.some(function(y){var M=p>=t;(r==="x"||r==="y")&&(M=!M);var B=Math.round(y[j.scrollPosition[r]]),z=B>0,f=B+y[j.clientLength[r]]<y[j.scrollLength[r]];return M&&f||!M&&z?(G=y.element,!0):!1})}var O=N.createContext();de.SwipeableViewsContext=O;var R=function(x){(0,P.default)(L,x);function L(p){var t;return(0,d.default)(this,L),t=(0,A.default)(this,(0,S.default)(L).call(this,p)),t.rootNode=null,t.containerNode=null,t.ignoreNextScrollEvents=!1,t.viewLength=0,t.startX=0,t.lastX=0,t.vx=0,t.startY=0,t.isSwiping=void 0,t.started=!1,t.startIndex=0,t.transitionListener=null,t.touchMoveListener=null,t.activeSlide=null,t.indexCurrent=null,t.firstRenderTimeout=null,t.setRootNode=function(r){t.rootNode=r},t.setContainerNode=function(r){t.containerNode=r},t.setActiveSlide=function(r){t.activeSlide=r,t.updateHeight()},t.handleSwipeStart=function(r){var y=t.props.axis,M=K(r.touches[0],y);t.viewLength=t.rootNode.getBoundingClientRect()[j.length[y]],t.startX=M.pageX,t.lastX=M.pageX,t.vx=0,t.startY=M.pageY,t.isSwiping=void 0,t.started=!0;var B=window.getComputedStyle(t.containerNode),z=B.getPropertyValue("-webkit-transform")||B.getPropertyValue("transform");if(z&&z!=="none"){var f=z.split("(")[1].split(")")[0].split(","),h=window.getComputedStyle(t.rootNode),E=K({pageX:parseInt(f[4],10),pageY:parseInt(f[5],10)},y);t.startIndex=-E.pageX/(t.viewLength-parseInt(h.paddingLeft,10)-parseInt(h.paddingRight,10))||0}},t.handleSwipeMove=function(r){if(!t.started){t.handleTouchStart(r);return}if(!(G!==null&&G!==t.rootNode)){var y=t.props,M=y.axis,B=y.children,z=y.ignoreNativeScroll,f=y.onSwitching,h=y.resistance,E=K(r.touches[0],M);if(t.isSwiping===void 0){var U=Math.abs(E.pageX-t.startX),H=Math.abs(E.pageY-t.startY),ee=U>H&&U>w.constant.UNCERTAINTY_THRESHOLD;if(!h&&(M==="y"||M==="y-reverse")&&(t.indexCurrent===0&&t.startX<E.pageX||t.indexCurrent===N.Children.count(t.props.children)-1&&t.startX>E.pageX)){t.isSwiping=!1;return}if(U>H&&r.preventDefault(),ee===!0||H>w.constant.UNCERTAINTY_THRESHOLD){t.isSwiping=ee,t.startX=E.pageX;return}}if(t.isSwiping===!0){r.preventDefault(),t.vx=t.vx*.5+(E.pageX-t.lastX)*.5,t.lastX=E.pageX;var ae=(0,w.computeIndex)({children:B,resistance:h,pageX:E.pageX,startIndex:t.startIndex,startX:t.startX,viewLength:t.viewLength}),re=ae.index,ie=ae.startX;if(G===null&&!z){var se=F(r.target,t.rootNode),ge=J({domTreeShapes:se,startX:t.startX,pageX:E.pageX,axis:M});if(ge)return}ie?t.startX=ie:G===null&&(G=t.rootNode),t.setIndexCurrent(re);var xe=function(){f&&f(re,"move")};(t.state.displaySameSlide||!t.state.isDragging)&&t.setState({displaySameSlide:!1,isDragging:!0},xe),xe()}}},t.handleSwipeEnd=function(){if(G=null,!!t.started&&(t.started=!1,t.isSwiping===!0)){var r=t.state.indexLatest,y=t.indexCurrent,M=r-y,B;Math.abs(t.vx)>t.props.threshold?t.vx>0?B=Math.floor(y):B=Math.ceil(y):Math.abs(M)>t.props.hysteresis?B=M>0?Math.floor(y):Math.ceil(y):B=r;var z=N.Children.count(t.props.children)-1;B<0?B=0:B>z&&(B=z),t.setIndexCurrent(B),t.setState({indexLatest:B,isDragging:!1},function(){t.props.onSwitching&&t.props.onSwitching(B,"end"),t.props.onChangeIndex&&B!==r&&t.props.onChangeIndex(B,r,{reason:"swipe"}),y===r&&t.handleTransitionEnd()})}},t.handleTouchStart=function(r){t.props.onTouchStart&&t.props.onTouchStart(r),t.handleSwipeStart(r)},t.handleTouchEnd=function(r){t.props.onTouchEnd&&t.props.onTouchEnd(r),t.handleSwipeEnd(r)},t.handleMouseDown=function(r){t.props.onMouseDown&&t.props.onMouseDown(r),r.persist(),t.handleSwipeStart(s(r))},t.handleMouseUp=function(r){t.props.onMouseUp&&t.props.onMouseUp(r),t.handleSwipeEnd(s(r))},t.handleMouseLeave=function(r){t.props.onMouseLeave&&t.props.onMouseLeave(r),t.started&&t.handleSwipeEnd(s(r))},t.handleMouseMove=function(r){t.props.onMouseMove&&t.props.onMouseMove(r),t.started&&t.handleSwipeMove(s(r))},t.handleScroll=function(r){if(t.props.onScroll&&t.props.onScroll(r),r.target===t.rootNode){if(t.ignoreNextScrollEvents){t.ignoreNextScrollEvents=!1;return}var y=t.state.indexLatest,M=Math.ceil(r.target.scrollLeft/r.target.clientWidth)+y;t.ignoreNextScrollEvents=!0,r.target.scrollLeft=0,t.props.onChangeIndex&&M!==y&&t.props.onChangeIndex(M,y,{reason:"focus"})}},t.updateHeight=function(){if(t.activeSlide!==null){var r=t.activeSlide.children[0];r!==void 0&&r.offsetHeight!==void 0&&t.state.heightLatest!==r.offsetHeight&&t.setState({heightLatest:r.offsetHeight})}},t.state={indexLatest:p.index,isDragging:!1,renderOnlyActive:!p.disableLazyLoading,heightLatest:0,displaySameSlide:!0},t.setIndexCurrent(p.index),t}return(0,g.default)(L,[{key:"componentDidMount",value:function(){var t=this;this.transitionListener=T(this.containerNode,"transitionend",function(r){r.target===t.containerNode&&t.handleTransitionEnd()}),this.touchMoveListener=T(this.rootNode,"touchmove",function(r){t.props.disabled||t.handleSwipeMove(r)},{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout(function(){t.setState({renderOnlyActive:!1})},0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var r=t.index;typeof r=="number"&&r!==this.props.index&&(this.setIndexCurrent(r),this.setState({displaySameSlide:(0,w.getDisplaySameSlide)(this.props,t),indexLatest:r}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"getSwipeableViewsContext",value:function(){var t=this;return{slideUpdateHeight:function(){t.updateHeight()}}}},{key:"setIndexCurrent",value:function(t){if(!this.props.animateTransitions&&this.indexCurrent!==t&&this.handleTransitionEnd(),this.indexCurrent=t,this.containerNode){var r=this.props.axis,y=j.transform[r](t*100);this.containerNode.style.WebkitTransform=y,this.containerNode.style.transform=y}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var t=this,r=this.props;r.action;var y=r.animateHeight,M=r.animateTransitions,B=r.axis,z=r.children,f=r.containerStyle,h=r.disabled;r.disableLazyLoading;var E=r.enableMouseEvents;r.hysteresis,r.ignoreNativeScroll,r.index,r.onChangeIndex,r.onSwitching,r.onTransitionEnd,r.resistance;var U=r.slideStyle,H=r.slideClassName,ee=r.springConfig,ae=r.style;r.threshold;var re=(0,u.default)(r,["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"]),ie=this.state,se=ie.displaySameSlide,ge=ie.heightLatest,xe=ie.indexLatest,Re=ie.isDragging,Ne=ie.renderOnlyActive,_e=h?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},Le=!h&&E?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{},je=(0,o.default)({},v.slide,U),ve,pe;if(Re||!M||se)ve="all 0s ease 0s",pe="all 0s ease 0s";else if(ve=_("transform",ee),pe=_("-webkit-transform",ee),ge!==0){var Pe=", ".concat(_("height",ee));ve+=Pe,pe+=Pe}var be={height:null,WebkitFlexDirection:j.flexDirection[B],flexDirection:j.flexDirection[B],WebkitTransition:pe,transition:ve};if(!Ne){var Oe=j.transform[B](this.indexCurrent*100);be.WebkitTransform=Oe,be.transform=Oe}return y&&(be.height=ge),N.createElement(O.Provider,{value:this.getSwipeableViewsContext()},N.createElement("div",(0,o.default)({ref:this.setRootNode,style:(0,o.default)({},j.root[B],ae)},re,_e,Le,{onScroll:this.handleScroll}),N.createElement("div",{ref:this.setContainerNode,style:(0,o.default)({},be,v.container,f),className:"react-swipeable-view-container"},N.Children.map(z,function(tt,Me){if(Ne&&Me!==xe)return null;var De,He=!0;return Me===xe&&(He=!1,y&&(De=t.setActiveSlide,je.overflowY="hidden")),N.createElement("div",{ref:De,style:je,className:H,"aria-hidden":He,"data-swipeable":"true"},tt)}))))}}]),L}(N.Component);R.displayName="ReactSwipableView",R.propTypes={},R.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1};var Z=R;return de.default=Z,de}(function(e){var i=ln;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"SwipeableViewsContext",{enumerable:!0,get:function(){return o.SwipeableViewsContext}});var o=i($n())})(sn);const Qn=fn(sn),Zn=C(k)({width:"100%",margin:"0px"}),Jn=C(k)({margin:"0px",padding:"0px",position:"relative"}),er=C(k)({width:"100%",height:"100%",margin:"0px",padding:"0px",position:"relative"}),dn=C(Qn)(({scrollcolor:e})=>({width:"100%",height:"100%",marginBottom:"8px",padding:"14px 0px 20px 0px","::-webkit-scrollbar-thumb":{background:"red"},"::-webkit-scrollbar-thumb: hover":{backgroundColor:e,opacity:"1"},"& .react-swipeable-view-container":{height:"100%"}})),Qe=C(k)({width:"100%",padding:"0px 14px","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}}),hn=C(k)({height:"10px",width:"100%",position:"absolute",bottom:"0",display:"flex",justifyContent:"center","& :last-child":{marginRight:"0px"}}),Ze=C(k)(({active:e,linecolor:i})=>({borderTop:`1px solid ${i}`,width:e=="true"?"20px":e=="false"?"10px":"0px",color:"black",marginRight:"5px",marginTop:"5px"})),tr=C(k)(({scrollbarcolor:e})=>({width:"100%",height:"100%","::-webkit-scrollbar-thumb":{backgroundColor:"red"},"::-webkit-scrollbar-track":{backgroundColor:"transparent"},scrollbarWidth:"auto",scrollbarColor:`${e} transparent`})),Jt=C(k)({width:"100%",padding:"0px",margin:"0px"}),nr=C(k)({width:"100%",margin:"auto",padding:"20px 0px","& .MuiBox-root":{textWrap:"wrap"}}),rr=C(k)({width:"100%",height:"100%",position:"relative",overflowX:"hidden",padding:"0px 15px",scrollbarGutter:"stable both-edges"}),en=C("img")({width:"100%"}),ir=C(k)({width:"100%","& .MuiAccordion-gutters":{width:"100%"},"& .MuiAccordion-root .MuiAccordionSummary-root .Mui-expanded":{margin:"12px 0px !important"}}),or=C(k)({width:"100%","& .MuiBox-root":{padding:"0px "}}),ar=C(k)({width:"100%",overflow:"hidden",position:"relative",display:"flex",flexDirection:"column"}),sr=C(k)({width:"100%",padding:"20px 0px",position:"relative",display:"flex",zIndex:"2","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}}),lr=C(k)({width:"100%",margin:"0px",position:"relative",display:"flex",flexDirection:"column",zIndex:"2","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}});C(k)({width:"40px",height:"100%",backgroundColor:"#FFAA5D",justifyContent:"center",alignItems:"center"});C(k)({width:"20px",height:"50%",position:"relative"});function bt(e){var T,v;const[i,o]=a.useState(0),{theme:u,textSize:d,referenceLanguage:g,showQuranReferences:A,displayType:S}=a.useContext(fe),{topTextColor:P,backgroundColor:N}=me(u),w=e.verse.verseReference.ref;return S==oe.VERSE_BY_VERSE?n.jsxs(Jn,{children:[n.jsxs(dn,{style:{backgroundColor:N},scrollcolor:P,enableMouseEvents:!0,disabled:!A,onSwitching:j=>o(j),children:[n.jsx(Qe,{children:n.jsx(Jt,{"data-id":e.verse.verseId,"data-index":e.index,ref:e.refer,children:n.jsx(X,{fontFamily:"Inter",fontSize:d,lineHeight:d+20,fontWeight:"700",color:P,dataIndex:e.index.toString(),language:g,direction:g==Ge?"rtl":"ltr",children:(T=e.verse.verseText)==null?void 0:T[g]})})}),n.jsx(Qe,{children:w&&w.map((j,_)=>n.jsx(X,{fontFamily:"Inter",fontWeight:"700",fontSize:d,lineHeight:d+20,color:P,children:j},_))})]}),w&&w.length>0&&A&&n.jsxs(hn,{children:[n.jsx(Ze,{active:i==0?"true":"false",linecolor:P}),n.jsx(Ze,{active:i==1?"true":"false",linecolor:P})]})]}):n.jsx(Jt,{"data-id":e.verse.verseId,"data-index":e.index,ref:e.refer,style:{backgroundColor:N},children:n.jsx(X,{fontFamily:"Inter",fontSize:d,lineHeight:d+20,fontWeight:"700",color:P,dataIndex:e.index.toString(),language:g,direction:g==Ge?"rtl":"ltr",onTouchStart:()=>e.onTouchStart&&e.onTouchStart(e.verse.verseReference.ref),onMouseDown:()=>e.onMouseDown&&e.onMouseDown(e.verse.verseReference.ref),children:(v=e.verse.verseText)==null?void 0:v[g]})})}function cr(e){var G,J;const[i,o]=a.useState([]),[u,d]=a.useState(0),{scrollTopVerseIndex:g,setScrollTopVerseIndex:A,setHiddenTopVersePercentage:S,activeScroll:P,setActiveScroll:N}=a.useContext(Je),w=a.useRef([]);w.current=(G=e.verses)==null?void 0:G.map((O,R)=>w.current[R]??a.createRef());const{theme:T,textSize:v,showQuranReferences:j,displayType:_}=a.useContext(fe),{backgroundColor:K,topTextColor:s}=me(T);a.useEffect(()=>{var O;if(((O=e.verses)==null?void 0:O.length)>0){const R=w.current[g-1];R!=null&&R.current&&R.current.scrollIntoView(),A(0),S(0)}},[e.verses]),a.useEffect(()=>{var O;if(_==oe.SPLIT_PANEL&&g>=0&&(P==vt||P==$e)){const R=w.current[Number(g)];(O=R==null?void 0:R.current)==null||O.scrollIntoView()}},[g,_]);const F=O=>{if(_==oe.SPLIT_PANEL){N(an);const R=O.currentTarget.getBoundingClientRect().top,Z=O.currentTarget.clientHeight;let x=-1,L=1/0;if(w.current.forEach((p,t)=>{if(p.current){const r=p.current.getBoundingClientRect().top,y=p.current.getBoundingClientRect().bottom,M=r-R;y>R&&r<R+Z&&Math.abs(M)<L&&(L=Math.abs(M),x=t)}}),x!==-1){A(x);const p=w.current[x];if(p.current){const t=p.current.getBoundingClientRect().top,r=p.current.clientHeight,y=Math.max(0,Math.min(100,(R-t)/r*100));S(y)}}}};return n.jsx(Zn,{style:{height:e.height},children:_===oe.SPLIT_PANEL?n.jsxs(er,{children:[n.jsxs(dn,{style:{backgroundColor:K},scrollcolor:s,enableMouseEvents:!0,disabled:!j,onScrollCapture:P!=vt?O=>F(O):()=>{},onSwitching:O=>d(O),children:[n.jsx(Qe,{children:(J=e.verses)==null?void 0:J.map((O,R)=>n.jsx(bt,{refer:w.current[R],verse:O,index:R,onMouseDown:o,onTouchStart:o},R))}),n.jsx(Qe,{children:i&&i.map((O,R)=>n.jsx(X,{fontFamily:"Inter",fontWeight:"700",fontSize:v-2,color:s,children:O},R))})]}),j&&n.jsxs(hn,{style:{background:K,bottom:"5px"},children:[n.jsx(Ze,{active:u===0?"true":"false",linecolor:s}),n.jsx(Ze,{active:u===1?"true":"false",linecolor:s})]})]}):n.jsx(tr,{style:{backgroundColor:K},scrollbarcolor:s,children:e.verses.map((O,R)=>n.jsx(bt,{refer:w.current[R],verse:O,index:R},R))})})}var Ct={},ur=gn;Object.defineProperty(Ct,"__esModule",{value:!0});var St=Ct.default=void 0,dr=ur(wn()),hr=n;St=Ct.default=(0,dr.default)((0,hr.jsx)("path",{d:"m14 7-5 5 5 5z"}),"ArrowLeft");const fr=C(k)({position:"fixed",zIndex:"3",bottom:"0px",width:"100%",height:"150px",overflow:"hidden"}),gr=C(k)({position:"relative",display:"flex",justifyContent:"center","& .MuiBox-root":{alignContent:"center"}}),xr=C("img")({width:"100%",position:"absolute",top:"20px"}),mr=C(k)({width:"100%",maxWidth:"700px",padding:"0px 20px",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",zIndex:"1",paddingTop:"20px",alignContent:"center","@media (min-width: 600px)":{paddingTop:"25px"}}),vr=C(k)({position:"relative",bottom:"-75px",height:"100px",display:"flex",alignItems:"center",justifyContent:"space-between"}),pr=C("img")({width:"100%",position:"absolute"});C(k)(({readingcontrol:e})=>({height:"100px",width:"100%",maxWidth:"700px",margin:"auto",display:"flex",flexDirection:e==xn.LEFT_HANDED?"row":"row-reverse",justifyContent:"space-between",alignItems:"center",padding:"0px 15px","@media (min-width: 1075px)":{width:"80%",margin:"auto"}}));const br=C(k)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginBottom:"5px"}),Sr=C(k)({backgroundColor:"#FFF",borderRadius:"20px",padding:"5px 10px",display:"flex",justifyContent:"center",alignItems:"center",zIndex:2,height:"40px","& .MuiBox-root":{width:"70px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),tn=C("img")({width:"15px",marginRight:"10px"}),yr=C(k)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginBottom:"5px"}),Cr=C(k)({display:"flex",justifyContent:"center",alignItems:"center",zIndex:"2",backgroundColor:"#FFF",borderRadius:"20px",padding:"5px",height:"40px"}),Ke=C(k)({width:"24px",height:"24px",cursor:"pointer"}),_r=C(k)({}),wr=C(k)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginBottom:"5px",minWidth:"200px",maxWidth:"350px"}),Er=C(k)({display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:"2",backgroundColor:"#FFF",borderRadius:"20px",padding:"5px",height:"40px",width:"100%","& :nth-of-type(3)":{marginRight:"10px"}}),Ir=C(k)({minWidth:"170px",maxWidth:"320px",display:"flex",justifyContent:"space-between",alignItems:"center"}),kr=C(k)({display:"flex",alignItems:"center",width:"150px",marginLeft:"10px","& .MuiBox-root":{width:"100px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),Tr=C(k)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginBottom:"5px","& :nth-of-type(2)":{marginRight:"10px"}}),Ar=C(k)({display:"flex",justifyContent:"center",alignItems:"center",zIndex:"2",backgroundColor:"#FFF",borderRadius:"20px",marginRight:"10px",padding:"5px 20px",width:"50px",height:"40px"});C(k)({width:"90px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px","@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}});const Br=C(k)({display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"10px",marginBottom:"20px","@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}}),Ae=C("img")({width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",zIndex:"1"});C(k)(({underlinecolor:e})=>({width:"90px",textDecoration:"underline",textDecorationColor:e,textUnderlineOffset:"3px",zIndex:"1",cursor:"pointer",marginBottom:"20px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}}));const Rr=C(k)({width:"100%",height:"60px",overflow:"hidden",padding:"0 10px"}),Nr=C(En)(({barcolor:e})=>({color:e,opacity:"1",height:"5px","& .MuiSlider-thumb":{width:"13.25px",height:"14px",color:e,transition:"0.3s cubic-bezier(.47,1.64,.41,.8)","&::before":{boxShadow:"0 2px 12px 0 rgba(0,0,0,0.4)"},"&:hover, &.Mui-focusVisible":{boxShadow:"0px 0px 0px 8px rgb(0 0 0 / 16%)"},"&.Mui-active":{width:20,height:20}}})),Lr=C(k)({display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"-20px"});function jr(e){const{duration:i,currentTime:o,onTimeChange:u}=e,[d,g]=a.useState(o),{theme:A}=a.useContext(fe),{buttonTextColor:S}=me(A);a.useEffect(()=>{g(o)},[o]);const P=(N,w)=>{g(w),u(w)};return n.jsxs(Rr,{children:[n.jsx(Nr,{"aria-label":"time-indicator",value:d,min:0,max:Math.floor(i),step:1,barcolor:S,onChange:P}),n.jsxs(Lr,{children:[n.jsx(X,{color:S,children:nn(d)}),n.jsx(X,{color:S,children:"-"+nn(Math.floor(i-d))})]})]})}function nn(e){const i=Math.floor(e/60),o=Math.floor(e%60);return`${i}:${o<10?`0${o}`:o}`}function Pr(e){const[i,o]=a.useState(!1),[u,d]=a.useState(0),[g,A]=a.useState(0),[S,P]=a.useState(0),N=a.useRef(new Audio),{setScrollTopVerseIndex:w,setActiveScroll:T}=a.useContext(Je),{autoScrollText:v,volume:j,audioLanguage:_,pageControl:K,theme:s,readingLanguage:F}=a.useContext(fe);a.useEffect(()=>{const f=N.current;e.src&&(f.src=Be+e.src[_||rt.TRANSLATION]);const h=()=>{A(f.duration)},E=()=>{d(Math.floor(f.currentTime))};return f.addEventListener("loadedmetadata",h),f.addEventListener("timeupdate",E),()=>{f.removeEventListener("loadedmetadata",h),f.removeEventListener("timeupdate",E)}},[e.src]),a.useEffect(()=>{var f;if(N.current.ended)x();else if(v){const h=(f=e.verses)==null?void 0:f.findIndex((E,U)=>{var ae,re,ie;const H=(ae=E.verseAudioStart)==null?void 0:ae[_||rt.TRANSLATION],ee=(ie=(re=e.verses[U+1])==null?void 0:re.verseAudioStart)==null?void 0:ie[_||rt.TRANSLATION];return u>=H&&u<ee});h!==-1&&(h!==S||h==0)&&(w(h),P(h),T($e))}},[u,e.verses,_,v,i]),a.useEffect(()=>{N.current.volume=j/100},[j]);const G=()=>{const f=N.current;T($e),f.readyState>=2?(o(!0),f.play().catch(h=>te.custom(E=>{var U,H;return n.jsx(ne,{text:((H=(U=e.terms.texts.find(ee=>ee.variable=="Audio Play Error"))==null?void 0:U.text)==null?void 0:H[F])||"",offset:125,visible:E.visible})}))):te.custom(h=>{var E,U;return n.jsx(ne,{text:((U=(E=e.terms.texts.find(H=>H.variable=="Audio Not Ready"))==null?void 0:E.text)==null?void 0:U[F])||"",offset:125,visible:h.visible})})},J=()=>{o(!1),N.current.pause(),T(pt)},O=()=>{J(),e.moveToSoundSettingPage()},R=()=>{J(),e.setAudioSeekBarStatus(!1)},Z=f=>{N.current.currentTime=f,d(f)},x=()=>{d(0),o(!1),w(0),T(pt)},L=()=>n.jsxs(gr,{children:[n.jsx(xr,{src:s==W.DEFAULT||s==W.DARK?V.bar_reading_audio_subtract:s==W.BLACK_AND_WHITE?V.bar_reading_audio_subtract_BAW:s==W.SAPPHIRE?V.bar_reading_audio_subtract_sapphire:V.bar_reading_audio_subtract_easyocean}),n.jsxs(mr,{children:[n.jsx(Ae,{src:s==W.DEFAULT||s==W.DARK?V.btn_sound_setting:s==W.BLACK_AND_WHITE?V.btn_sound_setting_BAW:s==W.SAPPHIRE?V.btn_sound_setting_sapphire:V.btn_sound_setting_easyocean,onClick:O}),n.jsx(jr,{duration:g,currentTime:u,onTimeChange:Z}),n.jsx(Ae,{src:s==W.DEFAULT||s==W.DARK?V.btn_close:s==W.BLACK_AND_WHITE?V.btn_close_BAW:s==W.SAPPHIRE?V.btn_close_sapphire:V.btn_close_easyocean,onClick:R})]})]}),p=()=>n.jsx(pr,{src:s==W.DEFAULT||s==W.DARK?V.bar_reading_subtract:s==W.BLACK_AND_WHITE?V.bar_reading_subtract_BAW:s==W.SAPPHIRE?V.bar_reading_subtract_sapphire:V.bar_reading_subtract_easyocean}),t=()=>!e.isIntro&&n.jsx(Br,{children:e.showAudioSeekBar?i?n.jsx(Ae,{src:s==W.DEFAULT||s==W.DARK?V.btn_pause:s==W.BLACK_AND_WHITE?V.btn_pause_BAW:s==W.SAPPHIRE?V.btn_pause_sapphire:V.btn_pause_easyocean,onClick:J}):n.jsx(Ae,{src:s==W.DEFAULT||s==W.DARK?V.btn_play:s==W.BLACK_AND_WHITE?V.btn_play_BAW:s==W.SAPPHIRE?V.btn_play_sapphire:V.btn_play_easyocean,onClick:G}):n.jsx(Ae,{src:s==W.DEFAULT||s==W.DARK?V.btn_sound:s==W.BLACK_AND_WHITE?V.btn_sound_BAW:s==W.SAPPHIRE?V.btn_sound_sapphire:V.btn_sound_easyocean,onClick:()=>e.setAudioSeekBarStatus(!0)})}),r=()=>e.bookTitle!="Qur'an"&&n.jsxs(br,{children:[n.jsxs(Sr,{onClick:e.moveToIndexPage,children:[n.jsx(tn,{src:Be+e.bookImage}),n.jsx(X,{fontFamily:'"Baloo Da 2"',color:"#093C54",children:e.bookTitle=="Zabur"?"Psalm":e.subBookTitle})]}),n.jsx(X,{fontFamily:'"Baloo Da 2"',color:"#FFF",fontSize:9,lineHeight:16,children:"Sub book"})]}),y=()=>e.bookTitle!="Qur'an"&&n.jsxs(yr,{children:[n.jsxs(Cr,{children:[n.jsx(Ke,{onClick:()=>e.handleNavigateBtn(K==Ve.LEFT_TO_RIGHT?Fe:Ce),children:n.jsx(St,{})}),n.jsx(_r,{onClick:e.moveToIndexPage,children:n.jsx(X,{fontFamily:'"Baloo Da 2"',color:"#093C54",children:e.bookTitle=="Zabur"?e.subBookNumber.toString():e.chapterNumber.toString()})}),n.jsx(Ke,{onClick:()=>e.handleNavigateBtn(K==Ve.LEFT_TO_RIGHT?Ce:Fe),children:n.jsx(At,{})})]}),n.jsx(X,{fontFamily:'"Baloo Da 2"',color:"#FFF",fontSize:9,lineHeight:16,children:"Chapter"})]}),M=()=>e.bookTitle=="Qur'an"&&n.jsxs(wr,{children:[n.jsxs(Er,{children:[n.jsx(Ke,{onClick:()=>e.handleNavigateBtn(K==Ve.LEFT_TO_RIGHT?Fe:Ce),children:n.jsx(St,{})}),n.jsxs(Ir,{onClick:e.moveToIndexPage,children:[n.jsxs(kr,{children:[n.jsx(tn,{src:Be+e.bookImage}),n.jsx(X,{fontFamily:'"Baloo Da 2"',color:"#093C54",children:e.subBookTitle})]}),n.jsx(X,{fontFamily:'"Baloo Da 2"',color:"#093C54",children:e.subBookNumber.toString()})]}),n.jsx(Ke,{onClick:()=>e.handleNavigateBtn(K==Ve.LEFT_TO_RIGHT?Ce:Fe),children:n.jsx(At,{})})]}),n.jsx(X,{fontFamily:'"Baloo Da 2"',color:"#FFF",fontSize:9,lineHeight:16,children:"Surah"})]}),B=()=>{var f;return n.jsxs(Tr,{children:[n.jsx(Ar,{onClick:e.moveToSubBookExplorer,children:n.jsx(X,{fontFamily:'"Baloo Da 2"',color:"#093C54",children:(f=e.topVerseIndex)==null?void 0:f.toString()})}),n.jsx(X,{fontFamily:'"Baloo Da 2"',color:"#FFF",fontSize:9,lineHeight:16,children:"Aya"})]})},z=()=>n.jsxs(vr,{children:[p(),t(),r(),y(),M(),B()]});return n.jsxs(fr,{children:[e.showAudioSeekBar&&L(),z()]})}function yt(e){const[i,o]=a.useState(e.isExistingInBookmark?100:0),[u,d]=a.useState(null),[g,A]=a.useState(!1),[S,P]=a.useState(0),[N,w]=a.useState(0),{textSize:T,theme:v,readingLanguage:j}=a.useContext(fe),{mainBGColor:_}=me(v),K=a.useRef(null),s=a.useRef(i),F=e.refer,G=a.useRef(),J=window.matchMedia("(orientation: portrait)").matches;a.useEffect(()=>{s.current=i},[i]),a.useEffect(()=>{if(K.current&&F.current&&("verseHeader"in e.verse&&(K.current.style.height=`${F.current.getBoundingClientRect().height-4}px`,K.current.style.bottom="2px",K.current.style.alignSelf="self-end"),F.current.offsetHeight>0&&F.current.offsetHeight<=24)){const t=K.current.children[0];t.style.width="20px",t.style.height="20px",t.children[1].style.width="10px",t.children[1].style.height="10px"}},[e.verse,e.translatePanelHeight,J]);const O=a.useCallback(t=>{if(t>0&&t<kt){const r=t/kt*100,y=e.isExistingInBookmark?100-r:r;o(y),s.current=y}else if(t>0){const r=e.isExistingInBookmark?0:100;o(r),s.current=r}else{const r=e.isExistingInBookmark?100:0;o(r),s.current=r}},[e.isExistingInBookmark]),R=a.useCallback(()=>{if(F.current){const t=Math.max(0,Math.min(N,vn));F.current.style.transform=`translateX(${t}px)`,O(t-mn)}g&&(G.current=requestAnimationFrame(R))},[g,N,O]);a.useEffect(()=>(g?G.current=requestAnimationFrame(R):cancelAnimationFrame(G.current),()=>cancelAnimationFrame(G.current)),[g,R]);const Z=t=>{var y;!e.language&&A(!0),P(t);const r=(y=F.current)==null?void 0:y.getAttribute("data-id");r&&d(r)},x=t=>{if(!g)return;const r=Math.max(0,t-S);e.isLoggedIn&&r>Tt&&w(r-Tt)},L=()=>{A(!1),F.current&&(!e.isExistingInBookmark&&s.current==100||e.isExistingInBookmark&&s.current==0?u&&e.handleBookmark(u):e.isExistingInBookmark?(o(100),s.current=100):(o(0),s.current=0),F.current.style.transition="transform 0.3s ease-out",F.current.style.transform="translateX(0)",setTimeout(()=>{F.current&&(F.current.style.transition="")},300)),w(0)};a.useEffect(()=>{const t=F.current;if(t){const r=h=>{h.preventDefault(),Z(h.clientX)},y=h=>{h.preventDefault(),x(h.clientX)},M=h=>{h.preventDefault(),L()},B=h=>{Z(h.touches[0].clientX)},z=h=>{x(h.touches[0].clientX)},f=h=>{L()};return t.addEventListener("mousedown",r),document.addEventListener("mousemove",y),document.addEventListener("mouseup",M),t.addEventListener("touchstart",B),t.addEventListener("touchmove",z),t.addEventListener("touchend",f),()=>{t.removeEventListener("mousedown",r),document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",M),t.removeEventListener("touchstart",B),t.removeEventListener("touchmove",z),t.removeEventListener("touchend",f)}}},[F,O,e.handleBookmark,S]);const p=t=>{for(var r in t)if(t[r]!==null&&t[r]!=="")return!0;return!1};return n.jsxs(ar,{children:["verseHeader"in e.verse&&p(e.verse.verseHeader)&&n.jsx(sr,{"data-id":e.verse.verseId,"data-index":e.index,style:{backgroundColor:_},children:n.jsx(X,{fontFamily:"Inter",fontWeight:"700",backgroundColor:_,fontSize:T,lineHeight:T+15,direction:e.language||j===Ge?"rtl":"ltr",children:e.verse.verseHeader[e.language||j]})}),!e.language&&n.jsx(Rn,{progress:i,refer:K,backgroundColor:_}),n.jsx(lr,{"data-id":"verseId"in e.verse?e.verse.verseId:e.verse.id,"data-index":e.index,ref:e.refer,children:n.jsx(X,{fontFamily:"Inter",fontSize:T,backgroundColor:_,dataIndex:e.language?"":e.index.toString(),lineHeight:T+20,direction:j===Ge?"rtl":"ltr",children:"verseText"in e.verse?e.verse.verseText[e.language||j]:e.verse.text[e.language||j]})})]})}function rn(e){var O,R,Z,x,L,p,t,r,y,M,B,z;const[i,o]=a.useState([]),[u,d]=a.useState([]),{scrollTopVerseIndex:g,setScrollTopVerseIndex:A,setHiddenTopVersePercentage:S,activeScroll:P,setActiveScroll:N}=a.useContext(Je),w=a.useRef(null),T=a.useRef([]);T.current=(O=e.verses)==null?void 0:O.map((f,h)=>T.current[h]??a.createRef());const{theme:v,displayType:j}=a.useContext(fe),{mainBGColor:_,textColor:K}=me(v),s=localStorage.getItem(pn)||bn,F=a.useCallback(()=>{var h;let f=[];return(h=T.current)==null||h.forEach(E=>{E.current&&E.current.children[0]&&f.push(E.current.children[0].offsetHeight)}),f},[T]);a.useEffect(()=>{var f;if(((f=e.verses)==null?void 0:f.length)>0){const h=T.current[g-1];h!=null&&h.current&&h.current.scrollIntoView(),A(0),S(0)}},[e.verses]),a.useEffect(()=>{const f=F();o(f);const h=f.reduce((E,U,H)=>(E[H]=(E[H-1]||0)+U,E),[]);d(h)},[e.verses,F]);const G=a.useCallback(()=>{if(!w.current)return;const f=w.current.scrollTop;N(vt);let h=0,E=u.length-1;for(;h<=E;){const se=Math.floor((h+E)/2);u[se]>f?E=se-1:h=se+1}const U=h-1;A(U);const H=U>0?u[U-1]:0,ee=i[U],re=(f-H)/ee*100,ie=Math.min(Math.max(re,0),100);S(ie)},[u,i,A]);a.useEffect(()=>{const f=w.current;if(f)return f.addEventListener("scroll",G),f.addEventListener("scrollend",()=>N(pt)),()=>{f.removeEventListener("scroll",G)}}),a.useEffect(()=>{var f;if((j===oe.SPLIT_PANEL||j===oe.ONLY_TRNSLATION)&&g>=0&&(P==an||P==$e)){const h=T.current[Number(g)];(f=h==null?void 0:h.current)==null||f.scrollIntoView()}},[g,j]);const J=(f,h)=>{var E,U;return f.image?n.jsx(en,{src:Be+"/images/"+f.image,alt:((E=f.title)==null?void 0:E.en)||"Intro Image"},h):f.isCollapse?n.jsx(ir,{children:n.jsx(An,{label:(U=f.title)==null?void 0:U[s],outArrow:!0,detail:n.jsx(or,{children:f.content.map((H,ee)=>{var ae;return H.image?n.jsx(en,{src:Be+"/images/"+H.image,alt:((ae=f.title)==null?void 0:ae.en)||"Intro Image"},ee):n.jsx(X,{children:H==null?void 0:H[s]},ee)})})})},h):n.jsx(yt,{refer:T.current[h],verse:f,index:h,language:s,isExistingInBookmark:e.bookmarks.some(H=>H.id===f.id),isLoggedIn:e.isLoggedIn,translatePanelHeight:e.height,handleBookmark:e.handleBookmark},h)};return n.jsx(nr,{style:{backgroundColor:_,color:K,height:e.height},children:n.jsxs(rr,{ref:w,children:[!e.isIntro&&!e.isSpecialBook&&n.jsxs(n.Fragment,{children:[n.jsx(X,{textAlign:"center",fontSize:16,fontFamily:"Inter",fontWeight:"700",lineHeight:24,children:(Z=(R=e.subBookInfo)==null?void 0:R.subBookTitle)==null?void 0:Z.ar}),n.jsx(X,{textAlign:"center",fontSize:16,fontFamily:"Inter",fontWeight:"700",lineHeight:24,children:(L=(x=e.subBookInfo)==null?void 0:x.subBookTitle)==null?void 0:L.origin}),n.jsx(X,{textAlign:"center",fontSize:16,fontFamily:"Inter",fontWeight:"700",lineHeight:24,children:`The ${Rt(e.chapterNumber||1)} Chapter`}),n.jsx(X,{})]}),!e.isIntro&&e.isSpecialBook&&n.jsxs(n.Fragment,{children:[n.jsx(X,{textAlign:"center",fontSize:16,fontFamily:"Inter",fontWeight:"700",lineHeight:24,children:(t=(p=e.subBookInfo)==null?void 0:p.subBookTitle)==null?void 0:t.ar}),n.jsx(X,{textAlign:"center",fontSize:16,fontFamily:"Inter",fontWeight:"700",lineHeight:24,children:(y=(r=e.subBookInfo)==null?void 0:r.subBookTitle)==null?void 0:y.transliteration}),n.jsx(X,{textAlign:"center",fontSize:16,fontFamily:"Inter",fontWeight:"700",lineHeight:24,children:`The ${Rt(((M=e.subBookInfo)==null?void 0:M.subBookNumber)||1)} Surah`}),n.jsx(X,{})]}),!e.isIntro&&((B=e.verses)==null?void 0:B.map((f,h)=>n.jsx(yt,{refer:T.current[h],verse:f,index:h,isExistingInBookmark:e.bookmarks.some(E=>E.verseId===f.verseId),isLoggedIn:e.isLoggedIn,translatePanelHeight:e.height,handleBookmark:e.handleBookmark},h))),e.isIntro&&((z=e.verses)==null?void 0:z.map((f,h)=>J(f,h)))]})})}const Or=C(k)({margin:"0px",height:"100dvh"}),on=C(k)(({showaudioseekbar:e})=>({width:"100%",padding:"20px",height:e=="true"?"calc(100dvh - 150px)":"calc(100dvh - 100px)"})),Mr=C(k)({width:"45px",height:"8px",margin:"auto",marginTop:"-4px",position:"relative",zIndex:"2",cursor:"grab","&:active":{cursor:"grabbing"}}),Dr=C(k)({width:"100%",height:"100%",overflowX:"hidden",overflowY:"auto",margin:"0px",paddingBottom:"0px"}),Hr=C(k)({width:"100%",padding:"15px"});function Vr(e){const i=window.matchMedia("(orientation: portrait)").matches,[o,u]=a.useState([]),[d,g]=a.useState(null),[A,S]=a.useState(!1),[P,N]=a.useState(i?200:120),[w,T]=a.useState(!1),[v,j]=a.useState(),[_,K]=a.useState(),[s,F]=a.useState(),[G,J]=a.useState(),[O,R]=a.useState(0),[Z,x]=a.useState(0),{theme:L,displayType:p,readingLanguage:t,referenceLanguage:r}=a.useContext(fe),{mainBGColor:y,topTextColor:M}=me(L),{scrollTopVerseIndex:B,setScrollTopVerseIndex:z}=a.useContext(Je),f=a.useRef([]),h=a.useRef([]);f.current=o==null?void 0:o.map((l,c)=>(f==null?void 0:f.current[c])??a.createRef()),h.current=o==null?void 0:o.map((l,c)=>(h==null?void 0:h.current[c])??a.createRef());const E=100,U=100;window.matchMedia("(orientation: portrait)").addEventListener("change",l=>{const c=l.matches;N(c?200:120)});const[H,ee]=a.useState(typeof window<"u"?window.innerHeight:1e3),ae=e.showAudioSeekBar?H-150-P:H-100-P,re=kn(),ie=a.useCallback(l=>{qe.fetchVerses(l).then(c=>{u(c.verses),c&&c.length>0&&g(c.chapterAudio),e.dispatch({type:Q.ADD_CHAPTERINFO,payload:{chapterInfo:c}}),S(!1)}).catch(c=>{S(!1),te.custom(b=>n.jsx(ne,{text:c,offset:70,visible:b.visible}))})},[e.currentChapter]),se=a.useCallback((l,c)=>{var b;if(T(c),(b=e.chapterInfos)!=null&&b.length){const m=e.chapterInfos.find(I=>I.chapterId===l);m?(T(m.chapterNumber==0),u(m.verses),g(m.chapterAudio)):c?ge(l):ie(l),S(!1)}else c?ge(l):ie(l)},[e.currentChapter]),ge=a.useCallback(l=>{qe.fetchIntroVerses(l).then(c=>{u(c.verses),e.dispatch({type:Q.ADD_CHAPTERINFO,payload:{chapterInfo:c}})}).catch(c=>{te.custom(b=>n.jsx(ne,{text:c,offset:70,visible:b.visible}))}).finally(()=>{S(!1)})},[]),xe=a.useCallback(async l=>{try{const c=await qe.fetchSubBookInfo(l);e.dispatch({type:Q.ADD_SUBBOOK,payload:{subBook:c}}),F(c)}catch(c){te.custom(b=>n.jsx(ne,{text:c,visible:b.visible}))}finally{S(!1)}},[e.subBooks,e.currentSubBook]),Re=a.useCallback(l=>{for(const c of e.bookInfos)for(const b of c.subBooks){const m=b.chapterInfos.find(I=>I.chapterId==l);if(m)return m}},[]),Ne=a.useCallback(l=>{for(const c of e.subBooks){const b=c.chapterInfos.find(m=>m.chapterId==l);if(b)return b}},[]);a.useEffect(()=>{const l=e.bookInfos.find(c=>c.bookId==e.currentBook);K(l)},[]),a.useEffect(()=>{var b;const l=(b=e.chapterInfos)==null?void 0:b.find(m=>m.chapterId==e.currentChapter),c=(l==null?void 0:l.chapterNumber)||0;J(l),x(c)},[e.chapterInfos]),a.useEffect(()=>{var c;const l=e.terms.find(b=>b.pageTitle=="Reading Page");(c=l==null?void 0:l.isPublished)!=null&&c[t]?j(l):te.custom(b=>n.jsx(ne,{text:"The terminologies for this page are not published.",visible:b.visible}))},[e.terms]),a.useEffect(()=>{const l=e.subBooks.find(c=>c.subBookId==e.currentSubBook);!l&&e.currentSubBook?xe(e.currentSubBook):l&&e.currentSubBook&&F(l)},[e.subBooks,e.currentSubBook]),a.useEffect(()=>{var c;const l=(c=s==null?void 0:s.chapterInfos)==null?void 0:c.find(b=>b.chapterId==e.currentChapter);J(l)},[e.currentChapter]),a.useEffect(()=>{var l,c,b;if(S(!0),e.currentVerse){const m=o.find(I=>I.verseId==e.currentVerse);m&&(z(((l=m[0])==null?void 0:l.verseNumber)-1),p==oe.VERSE_BY_VERSE&&((c=h.current[m[0].verseNumber-1].current)==null||c.scrollIntoView()))}if(e.currentChapter){const m=Re(e.currentChapter);if(((b=e.subBookInfos)==null?void 0:b.length)>=0){const I=e.subBookInfos.find(D=>D.subBookId===e.currentSubBook);if(I){const D=I.chapterInfos.find(le=>le.chapterId===e.currentChapter);D?(T(D.chapterNumber==0),u(D.verses),g(D.chapterAudio)):(T(!!m),se(e.currentChapter,(m==null?void 0:m.chapterNumber)==0))}else T(!!m),se(e.currentChapter,(m==null?void 0:m.chapterNumber)==0)}else T(!!m),se(e.currentChapter,(m==null?void 0:m.chapterNumber)==0)}S(!1)},[w,e.currentVerse,e.currentChapter,p]),a.useEffect(()=>{const l=()=>ee(window.innerHeight);return window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),a.useEffect(()=>{var m,I;const l=(m=s==null?void 0:s.chapterInfos)==null?void 0:m.find(D=>D.chapterId==e.currentChapter),c=(I=l==null?void 0:l.verses)==null?void 0:I.find(D=>D.verseId==e.currentVerse),b=c==null?void 0:c.verseNumber;R(b||0),z(b||1)},[e.currentVerse,e.currentChapter,s]),a.useEffect(()=>{S(!0);let l=!1;if(e.userHistory&&e.userHistory.length>0&&e.userHistory.forEach(c=>{if(c.readChapterIds.includes(e.currentChapter)){l=!0,S(!1);return}}),!l){const c={chapterId:e.currentChapter};qe.saveHistory(c).then(b=>{e.dispatch({type:Q.SET_USER_HISTORY,payload:{userHistories:b}}),S(!1)}).catch(b=>{b.status==401&&b.response.data.message==it&&(te.custom(m=>n.jsx(ne,{text:b.response.data.message,visible:m.visible})),ot.logout(),re("/login")),S(!1)})}},[]),a.useEffect(()=>{(p==oe.ONLY_TRNSLATION||w)&&N(0),p!=oe.ONLY_TRNSLATION&&!w&&N(i?200:120)},[p,w]),a.useEffect(()=>{var l,c;p==oe.VERSE_BY_VERSE&&B>=0&&((c=(l=h.current[B])==null?void 0:l.current)==null||c.scrollIntoView())},[B,p,h,o]),a.useEffect(()=>{var l,c;p==oe.VERSE_BY_VERSE&&B>=0&&((c=(l=h.current[0])==null?void 0:l.current)==null||c.scrollIntoView(),z(0))},[p,o,h]);const _e=a.useCallback(l=>{var m;S(!0);const c=(m=e.bookmark)==null?void 0:m.find(I=>I.verseId===l),b={verseId:l};try{if(!c)Bt.saveBookmark(b).then(I=>{e.dispatch({type:Q.ADD_BOOKMARK,payload:{bookmark:I.bookmark}}),S(!1),te.custom(D=>{var le,he;return n.jsx(ne,{text:((he=(le=v==null?void 0:v.texts.find(Se=>Se.variable=="Bookmark Saved"))==null?void 0:le.text)==null?void 0:he[t])||"",type:We.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:D.visible})})}).catch(I=>{S(!1),I.status==401&&I.response.data.message==it&&(te.custom(D=>n.jsx(ne,{text:I.response.data.message,offset:e.showAudioSeekBar?125:70,visible:D.visible})),ot.logout(),re("/login"))});else{const I=e.bookmark.filter(D=>D.verseId==l);I&&I.length>0&&Bt.deleteBookmark(I[0]._id).then(()=>{e.dispatch({type:Q.REMOVE_BOOKMARK,payload:{bookmarkId:c._id}}),S(!1),te.custom(D=>{var le,he;return n.jsx(ne,{text:((he=(le=v==null?void 0:v.texts.find(Se=>Se.variable=="Bookmark Deleted"))==null?void 0:le.text)==null?void 0:he[t])||"",type:We.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:D.visible})})}).catch(D=>{S(!1),D.status==401&&D.response.data.message==it&&(te.custom(le=>n.jsx(ne,{text:D.response.data.message,type:We.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:le.visible})),ot.logout(),re("/login"))})}}catch(I){S(!1),te.custom(D=>n.jsx(ne,{text:I,type:We.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:D.visible}))}},[e]),Le=a.useCallback((l,c,b)=>{let m=c+(b-l),I=H-150-m;m<E?(m=E,I=H-150-E):I<U&&(m=H-150-U),N(m)},[H]),je=l=>{const c=l.clientY,b=P,m=D=>Le(c,b,D.clientY),I=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",I)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",I)},ve=l=>{const c=l.touches[0].clientY,b=P,m=D=>Le(c,b,D.touches[0].clientY),I=()=>{document.removeEventListener("touchmove",m),document.removeEventListener("touchend",I)};document.addEventListener("touchmove",m),document.addEventListener("touchend",I)},pe=l=>{e.dispatch({type:Q.SET_AUDIO_SEEK_BAR_STATUS,payload:{showAudioSeekBar:l}})},Pe=()=>{re("/sound-settings")},be=()=>{var b;e.dispatch({type:Q.SET_CURRENT_CHAPTER,payload:{currentChapter:""}}),e.dispatch({type:Q.SET_CURRENT_VERSE,payload:{currentVerse:""}});const l=(b=e.subBooks)==null?void 0:b.find(m=>m.subBookTitle.en==e.currentSubBook),c=l==null?void 0:l.subBookId;l!=null&&l.noChapter||e.dispatch({type:Q.SET_OPENED_SUBBOOK,payload:{openedSubBook:c}}),e.dispatch({type:Q.SET_BOOK_CURRENT_OPEN_TAB,payload:{currentBookPageOpenTab:c}}),re(`/book?id=${e.currentBook}`)},Oe=()=>{var b,m;const l=(b=s==null?void 0:s.chapterInfos)==null?void 0:b.find(I=>I.chapterNumber==Z),c=(m=l==null?void 0:l.verses)==null?void 0:m.find(I=>I.verseNumber==B+1);e.dispatch({type:Q.SET_OPENED_SUBBOOK,payload:{openedSubBook:s==null?void 0:s.subBookId}}),e.dispatch({type:Q.SET_CURRENT_CHAPTER,payload:{currentChapter:l==null?void 0:l.chapterId}}),e.dispatch({type:Q.SET_CURRENT_VERSE,payload:{currentVerse:c==null?void 0:c.verseId}}),re("/subbookexplorer")},tt=a.useCallback(l=>{var I,D,le,he,Se,_t,wt,Et;const c=ce=>{var q;const $=(q=s==null?void 0:s.chapterInfos)==null?void 0:q.find(Y=>Y.chapterNumber==ce);$&&(e.dispatch({type:Q.SET_CURRENT_CHAPTER,payload:{currentChapter:$.chapterId}}),$.chapterNumber==0?T(!0):T(!1),J($),x($.chapterNumber),u($.verses),S(!1))},b=(ce,$)=>{if(ce&&ce.chapterInfos&&ce.chapterInfos.length>0){const q=ce.chapterInfos[0].chapterId;e.dispatch({type:Q.SET_CURRENT_CHAPTER,payload:{currentChapter:q}}),e.dispatch({type:Q.SET_OPENED_SUBBOOK,payload:{openedSubBook:ce.subBookId}});const Y=Ne(q);F(ce),se(q,(Y==null?void 0:Y.chapterNumber)==0)}else te.custom(q=>{var Y,ue,ye,It;return n.jsx(ne,{text:$?((ue=(Y=v==null?void 0:v.texts.find(nt=>nt.variable=="Last Chapter"))==null?void 0:Y.text)==null?void 0:ue[t])||"":((It=(ye=v==null?void 0:v.texts.find(nt=>nt.variable=="First Chapter"))==null?void 0:ye.text)==null?void 0:It[t])||"",offset:e.showAudioSeekBar?125:70,visible:q.visible})}),S(!1)};if(((I=_==null?void 0:_.bookTitle)==null?void 0:I.en)=="Qur'an"||((D=_==null?void 0:_.bookTitle)==null?void 0:D.en)=="Zabur"){const ce=((le=_==null?void 0:_.subBooks)==null?void 0:le.length)||1,$=(s==null?void 0:s.subBookNumber)||1;if(l==Ce)if($+1<ce){const q=_.subBooks.find(Y=>Y.subBookNumber==$+1);e.dispatch({type:Q.SET_CURRENT_VERSE,payload:{currentVerse:""}}),q&&b(q,!0)}else te.custom(q=>{var Y,ue;return n.jsx(ne,{text:((ue=(Y=v==null?void 0:v.texts.find(ye=>ye.variable=="Last Chapter"))==null?void 0:Y.text)==null?void 0:ue[t])||"",offset:70,visible:q.visible})});else if($-1>0){const q=_.subBooks.find(Y=>Y.subBookNumber==$-1);e.dispatch({type:Q.SET_CURRENT_VERSE,payload:{currentVerse:""}}),q&&b(q,!1)}else te.custom(q=>{var Y,ue;return n.jsx(ne,{text:((ue=(Y=v==null?void 0:v.texts.find(ye=>ye.variable=="First Chapter"))==null?void 0:Y.text)==null?void 0:ue[t])||"",offset:70,visible:q.visible})})}else{const ce=((he=s==null?void 0:s.chapterInfos)==null?void 0:he.length)||1;if(l==Ce)if(Z+1<ce){const $=((_t=(Se=s==null?void 0:s.chapterInfos)==null?void 0:Se.find(q=>q.chapterNumber==Z+1))==null?void 0:_t.chapterNumber)||2;e.dispatch({type:Q.SET_CURRENT_VERSE,payload:{currentVerse:""}}),c($)}else te.custom($=>{var q,Y;return n.jsx(ne,{text:((Y=(q=v==null?void 0:v.texts.find(ue=>ue.variable=="Last Chapter"))==null?void 0:q.text)==null?void 0:Y[t])||"",offset:70,visible:$.visible})});else if(Z-1>0){const $=((Et=(wt=s==null?void 0:s.chapterInfos)==null?void 0:wt.find(q=>q.chapterNumber==Z-1))==null?void 0:Et.chapterNumber)||1;e.dispatch({type:Q.SET_CURRENT_VERSE,payload:{currentVerse:""}}),c($)}else te.custom($=>{var q,Y;return n.jsx(ne,{text:((Y=(q=v==null?void 0:v.texts.find(ue=>ue.variable=="First Chapter"))==null?void 0:q.text)==null?void 0:Y[t])||"",offset:70,visible:$.visible})})}},[e.subBooks,s,Z]),Me=()=>w&&n.jsx(on,{showaudioseekbar:"false",children:n.jsx(rn,{verses:o,topVerseNumber:O,height:ae,originPanelHeight:P,bookmarks:e.bookmark,isLoggedIn:!!e.currentUser,isIntro:w,handleBookmark:_e})}),De=()=>{var l,c;return!w&&n.jsxs(on,{showaudioseekbar:e.showAudioSeekBar?"true":"false",children:[p==oe.SPLIT_PANEL&&n.jsxs(n.Fragment,{children:[n.jsx(cr,{verses:o,topVerseNumber:O,height:P}),n.jsx(Mr,{style:{backgroundColor:M},onMouseDown:je,onTouchStart:ve})]}),(p==oe.ONLY_TRNSLATION||p==oe.SPLIT_PANEL)&&n.jsx(rn,{subBookInfo:s,chapterNumber:Z,verses:o,topVerseNumber:O,height:ae,originPanelHeight:P,bookmarks:e.bookmark,isLoggedIn:!!e.currentUser,isIntro:w,isSpecialBook:((l=_==null?void 0:_.bookTitle)==null?void 0:l.en)=="Qur'an"||((c=_==null?void 0:_.bookTitle)==null?void 0:c.en)=="Zabur",handleBookmark:_e}),p==oe.VERSE_BY_VERSE&&n.jsx(Dr,{children:o.map((b,m)=>{var I;return n.jsxs(Hr,{ref:h.current[m],children:[n.jsx(bt,{verse:b,refer:f.current[m],index:m}),n.jsx(yt,{refer:f.current[m],verse:b,index:m,isLoggedIn:!!e.currentUser,handleBookmark:_e,isExistingInBookmark:((I=e.bookmark.filter(D=>D.verseId==b.verseId))==null?void 0:I.length)>0})]},m)})})]})},He=()=>n.jsx(Pr,{src:d,bookTitle:(_==null?void 0:_.bookTitle.en)||"",bookImage:(_==null?void 0:_.bookImage)||"",subBookTitle:(s==null?void 0:s.subBookTitle.en)||"",subBookNumber:(s==null?void 0:s.subBookNumber)||0,chapterNumber:Z,showAudioSeekBar:e.showAudioSeekBar,verses:o,isIntro:w,terms:v||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},topVerseIndex:B>0?B:1,setAudioSeekBarStatus:pe,moveToSoundSettingPage:Pe,moveToIndexPage:be,moveToSubBookExplorer:Oe,handleNavigateBtn:tt});return n.jsxs(Or,{style:{backgroundColor:y},children:[Me(),De(),He(),A&&n.jsx(Bn,{})]})}const Fr=e=>({bookmark:e.books.bookmark,bookInfos:e.books.bookInfos,currentBook:e.pageStatus.currentBook,subBooks:e.books.subBooks,subBookInfos:e.books.subBookInfos,chapterInfos:e.books.chapterInfos,currentSubBook:e.pageStatus.openedSubBook,currentChapter:e.pageStatus.currentChapter,currentVerse:e.pageStatus.currentVerse,userHistory:e.books.userHistory,currentUser:e.user.currentUser,showAudioSeekBar:e.pageStatus.showAudioSeekBar,terms:e.terms.terms}),ei=In(Fr)(Vr);export{ei as default};
