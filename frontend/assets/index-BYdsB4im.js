import{c as qe,_ as J,j as i,$ as de,b,ap as Dt,F as ce,X as Lt,at as Je,ax as et,a3 as A,ay as Ge,az as Ve,Z as te,aA as Ye,aB as Ke,aC as xt,aD as Ze,aE as bt,au as Mt}from"./index-COOOq_Rz.js";import{x as Et,y as _t,z as $t,A as We,s as d,D as Ut,E as At,F as Xe,G as Ot,J as Ft,B as C,K as zt,S as ze,g as He,k as X,c as Ht,u as Kt,d as K,M as Wt,N as Gt,O as mt}from"./App-DaqOXMMZ.js";import{I as S,T as ne,g as Vt,t as ft,a as kt}from"./index-DiYC73pO.js";import{H as Yt}from"./index-DET3kY5D.js";import{C as q}from"./index-qrw5EXMH.js";import{A as Zt}from"./index-BacMvSDI.js";import{S as Qt}from"./index-BWaXO0FI.js";import{L as Xt}from"./index-CwRKnxJu.js";import{b as vt}from"./book.service-D4OMAJ6z.js";import{b as ht}from"./bookmark.service-BnW8NJWJ.js";import{a as Qe}from"./auth.service-C1pRUb7T.js";import"./index-BNFour3S.js";import"./axios-upsvKRUO.js";function qt(e){return _t("MuiPagination",e)}Et("MuiPagination",["root","ul","outlined","text"]);const Jt=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function eo(e={}){const{boundaryCount:o=1,componentName:r="usePagination",count:t=1,defaultPage:k=1,disabled:x=!1,hideNextButton:O=!1,hidePrevButton:I=!1,onChange:E,page:y,showFirstButton:T=!1,showLastButton:_=!1,siblingCount:c=1}=e,l=qe(e,Jt),[w,L]=$t({controlled:y,default:k,name:r,state:"page"}),$=(g,p)=>{y||L(p),E&&E(g,p)},j=(g,p)=>{const a=p-g+1;return Array.from({length:a},(s,u)=>g+u)},F=j(1,Math.min(o,t)),P=j(Math.max(t-o+1,o+1),t),ee=Math.max(Math.min(w-c,t-o-c*2-1),o+2),U=Math.min(Math.max(w+c,o+c*2+2),P.length>0?P[0]-2:t-1),z=[...T?["first"]:[],...I?[]:["previous"],...F,...ee>o+2?["start-ellipsis"]:o+1<t-o?[o+1]:[],...j(ee,U),...U<t-o-1?["end-ellipsis"]:t-o>o?[t-o]:[],...P,...O?[]:["next"],..._?["last"]:[]],Y=g=>{switch(g){case"first":return 1;case"previous":return w-1;case"next":return w+1;case"last":return t;default:return null}},m=z.map(g=>typeof g=="number"?{onClick:p=>{$(p,g)},type:"page",page:g,selected:g===w,disabled:x,"aria-current":g===w?"true":void 0}:{onClick:p=>{$(p,Y(g))},type:g,page:Y(g),selected:!1,disabled:x||g.indexOf("ellipsis")===-1&&(g==="next"||g==="last"?w>=t:w<=1)});return J({items:m},l)}function to(e){return _t("MuiPaginationItem",e)}const oe=Et("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),yt=We(i.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Ct=We(i.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Bt=We(i.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),St=We(i.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),oo=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Rt=(e,o)=>{const{ownerState:r}=e;return[o.root,o[r.variant],o[`size${ce(r.size)}`],r.variant==="text"&&o[`text${ce(r.color)}`],r.variant==="outlined"&&o[`outlined${ce(r.color)}`],r.shape==="rounded"&&o.rounded,r.type==="page"&&o.page,(r.type==="start-ellipsis"||r.type==="end-ellipsis")&&o.ellipsis,(r.type==="previous"||r.type==="next")&&o.previousNext,(r.type==="first"||r.type==="last")&&o.firstLast]},no=e=>{const{classes:o,color:r,disabled:t,selected:k,size:x,shape:O,type:I,variant:E}=e,y={root:["root",`size${ce(x)}`,E,O,r!=="standard"&&`color${ce(r)}`,r!=="standard"&&`${E}${ce(r)}`,t&&"disabled",k&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[I]],icon:["icon"]};return Ot(y,to,o)},io=d("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Rt})(({theme:e,ownerState:o})=>J({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${oe.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},o.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},o.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),ao=d(Ut,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Rt})(({theme:e,ownerState:o})=>J({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${oe.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${oe.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${oe.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:de(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${oe.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:de(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${oe.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},o.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},o.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},o.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:o})=>J({},o.variant==="text"&&{[`&.${oe.selected}`]:J({},o.color!=="standard"&&{color:(e.vars||e).palette[o.color].contrastText,backgroundColor:(e.vars||e).palette[o.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[o.color].main}},[`&.${oe.focusVisible}`]:{backgroundColor:(e.vars||e).palette[o.color].dark}},{[`&.${oe.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},o.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${oe.selected}`]:J({},o.color!=="standard"&&{color:(e.vars||e).palette[o.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / 0.5)`:de(e.palette[o.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:de(e.palette[o.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:de(e.palette[o.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${oe.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:de(e.palette[o.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${oe.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),so=d("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,o)=>o.icon})(({theme:e,ownerState:o})=>J({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},o.size==="small"&&{fontSize:e.typography.pxToRem(18)},o.size==="large"&&{fontSize:e.typography.pxToRem(22)})),lo=b.forwardRef(function(o,r){const t=At({props:o,name:"MuiPaginationItem"}),{className:k,color:x="standard",component:O,components:I={},disabled:E=!1,page:y,selected:T=!1,shape:_="circular",size:c="medium",slots:l={},type:w="page",variant:L="text"}=t,$=qe(t,oo),j=J({},t,{color:x,disabled:E,selected:T,shape:_,size:c,type:w,variant:L}),F=Dt(),P=no(j),U=(F?{previous:l.next||I.next||St,next:l.previous||I.previous||Bt,last:l.first||I.first||yt,first:l.last||I.last||Ct}:{previous:l.previous||I.previous||Bt,next:l.next||I.next||St,first:l.first||I.first||yt,last:l.last||I.last||Ct})[w];return w==="start-ellipsis"||w==="end-ellipsis"?i.jsx(io,{ref:r,ownerState:j,className:Xe(P.root,k),children:"â€¦"}):i.jsxs(ao,J({ref:r,ownerState:j,component:O,disabled:E,className:Xe(P.root,k)},$,{children:[w==="page"&&y,U?i.jsx(so,{as:U,ownerState:j,className:P.icon}):null]}))}),ro=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],co=e=>{const{classes:o,variant:r}=e;return Ot({root:["root",r],ul:["ul"]},qt,o)},uo=d("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[o.root,o[r.variant]]}})({}),go=d("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,o)=>o.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function xo(e,o,r){return e==="page"?`${r?"":"Go to "}page ${o}`:`Go to ${e} page`}const bo=b.forwardRef(function(o,r){const t=At({props:o,name:"MuiPagination"}),{boundaryCount:k=1,className:x,color:O="standard",count:I=1,defaultPage:E=1,disabled:y=!1,getItemAriaLabel:T=xo,hideNextButton:_=!1,hidePrevButton:c=!1,renderItem:l=m=>i.jsx(lo,J({},m)),shape:w="circular",showFirstButton:L=!1,showLastButton:$=!1,siblingCount:j=1,size:F="medium",variant:P="text"}=t,ee=qe(t,ro),{items:U}=eo(J({},t,{componentName:"Pagination"})),z=J({},t,{boundaryCount:k,color:O,count:I,defaultPage:E,disabled:y,getItemAriaLabel:T,hideNextButton:_,hidePrevButton:c,renderItem:l,shape:w,showFirstButton:L,showLastButton:$,siblingCount:j,size:F,variant:P}),Y=co(z);return i.jsx(uo,J({"aria-label":"pagination navigation",className:Xe(Y.root,x),ownerState:z,ref:r},ee,{children:i.jsx(go,{className:Y.ul,ownerState:z,children:U.map((m,g)=>i.jsx("li",{children:l(J({},m,{color:O,"aria-label":T(m.type,m.page,m.selected),shape:w,size:F,variant:P}))},g))})}))});function mo(e){return i.jsx(bo,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function Tt(){const{innerWidth:e,innerHeight:o}=window;return{width:e,height:o}}function fo(){const[e,o]=b.useState(Tt());return b.useEffect(()=>{function r(){o(Tt())}return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e}var tt={},ko=Lt;Object.defineProperty(tt,"__esModule",{value:!0});var Nt=tt.default=void 0,vo=ko(Ft()),ho=i;Nt=tt.default=(0,vo.default)((0,ho.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const yo=d(C)({display:"flex",position:"relative",width:"100%"}),Co=d("img")({width:"100%",marginTop:"57px"}),Bo=d(C)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),So=d(C)({display:"flex",alignItems:"baseline"}),To=d(C)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),wo=d("img")({width:"100%",height:"100%"}),Io=d(C)({margin:0,marginLeft:"12px",position:"relative",top:"-20px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),Po=d(C)(({hamburgercolor:e})=>({position:"absolute",top:"12px",right:"15px",width:"46px","& .hamburger-react":{width:"46px !important",color:e},"& .hamburger-react ~ .MuiBox-root ":{border:`1px solid ${e}`},"@media (max-height: 639px)":{top:"8px",right:"10px"},"@media screen and (orientation: landscape)":{right:"15px"}})),jo=d("img")({position:"relative",top:"-20px",cursor:"pointer","&:active":{opacity:"0.8"}}),po=d(C)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),Eo=d("img")({width:"100%","&:active":{opacity:"0.8"}});d("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}});const _o=d(C)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Ao=d(C)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Oo=d(C)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),wt=d(C)(({active:e,bordercolor:o})=>({width:"50%",height:"37.9px",border:`1px solid ${o}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer",marginBottom:"20px"})),It=d("img")({}),Pt=d(C)(({active:e})=>({marginLeft:"5px"})),Ro=d(C)({width:"100%",display:"flex",flexDirection:"column"}),No=d(C)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),Do=d(C)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});d(C)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const Lo=d(C)({display:"flex",flexDirection:"column"}),Mo=d(C)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),$o=d(C)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});d(C)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const Uo=d(C)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),Fo=d("img")({cursor:"pointer",marginRight:"15px"}),zo=d(zt)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),Ho=d(C)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),Ko=d("img")({width:"63px"}),Wo=d(C)({margin:"0px",marginLeft:"24px","@media (max-height: 600px)":{"& .MuiBox-root":{fontSize:"14px !important"}}}),Go=d(C)({width:"100%",justifyContent:"space-between",alignItems:"center",margin:"10px 0px"}),Vo=d(C)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"center",padding:"0px 7px"});d(Nt)({marginLeft:"-33px",color:"#17637D",height:"30px"});const Yo=d(C)(({progress:e,progresscolor:o})=>({width:"calc(100% - 60px)",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",borderBottom:`1px solid ${o}`,"::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${e}%`,borderBottom:e!=0?`2px solid ${o}`:"none"}})),Zo=d(C)(({istransliteration:e,translatestatus:o})=>({margin:"5px 0px 5px 0px",display:"flex",justifyContent:"space-between",opacity:o=="one"||o=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& .MuiBox-root:first-of-type":{width:"48%"},"& .MuiBox-root:last-child":{marginInlineEnd:"auto",width:e=="true"?"48%":"75%"}})),Qo=d(C)({display:"flex",justifyContent:"space-between"}),Xo=d(C)(({translatestatus:e})=>({width:"80%",display:"flex",opacity:e=="one"||e=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}})),qo=d("img")({width:"20px",marginLeft:"10px"}),Jo=d(C)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),jt=d("img")({marginLeft:"3px",cursor:"pointer"}),en=d(C)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),tn=d(C)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),on=d(C)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),pt=d(C)(({style:e,translatestatus:o,readalready:r,readbgcolor:t,readtextcolor:k})=>({opacity:o=="one"||o=="none"?"0.5":"1",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:r=="true"?`${t} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:r=="true"?`${k} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:r=="true"?`${k} !important`:`${e.color} !important`}})),nn=d("img")({width:"50%",height:"50%"});function an(e){const[o,r]=b.useState(""),[t,k]=b.useState(""),{theme:x,readingLanguage:O}=b.useContext(ze),{logoTextColor:I,headerBGColor:E}=He(x),y=localStorage.getItem(Je)||et;return b.useEffect(()=>{var T,_,c,l,w,L,$;e.markTitle?r((T=e.markTitle)==null?void 0:T[y]):r(((l=(c=(_=e.terms)==null?void 0:_.texts.find(j=>j.variable=="Default Book Title"))==null?void 0:c.text)==null?void 0:l[O])||(($=(L=(w=e.terms)==null?void 0:w.texts.find(j=>j.variable=="Default Book Title"))==null?void 0:L.text)==null?void 0:$.en)||""),e.markImg?k(e.markImg):k(S.default_cover)},[e.markTitle,e.markImg]),i.jsxs(yo,{children:[i.jsx(Co,{src:x==A.DEFAULT||x==A.DARK?S.book_subtract:x==A.BLACK_AND_WHITE?S.book_subtract_BAW:x==A.SAPPHIRE?S.book_subtract_sapphire:S.book_subtract_easyocean}),i.jsxs(Bo,{children:[i.jsxs(So,{children:[i.jsx(To,{onClick:e.onLogoClick,children:i.jsx(wo,{src:t})}),i.jsx(Io,{children:i.jsx(ne,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:I,children:o})})]}),i.jsx(jo,{src:x==A.EASY_OCEAN?S.search_easyocean:S.search,onClick:e.onSearchClick})]}),i.jsx(po,{children:i.jsx(Eo,{src:x==A.DEFAULT||x==A.DARK?S.close2:x==A.BLACK_AND_WHITE?S.close2_BAW:x==A.SAPPHIRE?S.close2_sapphire:S.close2_easyocean,onClick:e.onCloseClick})}),i.jsx(Po,{hamburgercolor:E,children:i.jsx(Yt,{isLogin:e.isLogIn,textColor:I,itemBgColor:E,toggleColor:E,terms:e.welcomePageTerms,onLogin:e.onLogin,onSettings:e.onSettings})})]})}function sn(e){var p,a,s,u,h,v,f,M,R,N,Z,ie,D,se,ue,ge,xe,be,me,fe,ke,ve,he,ye,Ce,Be,Se,Te,we,Ie,Pe,je,pe,Ee,B,ot,nt,it,at,st;const[o,r]=b.useState([]),[t,k]=b.useState(),[x,O]=b.useState(!1),[I,E]=b.useState(!1),[y,T]=b.useState(0),{theme:_,referenceLanguage:c,readingLanguage:l}=b.useContext(ze),{mainBGColor:w,altTextColor:L,backgroundColor:$,topTextColor:j,buttonColor:F,buttonTextColor:P}=He(_),ee=localStorage.getItem(Je)||et,U=b.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const n=e.userHistory.filter(G=>G.bookId==e.bookId);if(n&&n.length>0)return n[0].readChapterIds}return[]},[e.userHistory]),z=e.subBookId;b.useEffect(()=>{e.bookTitle.en=="Qur'an"||e.bookTitle.en=="Zabur"?O(!1):e.openedSubBook==e.subBookId?O(!0):O(!1)},[e.openedSubBook]),b.useEffect(()=>{var Q,V;const n=e.subBooks.filter(W=>W.subBookId===z);let G=0;if(n&&n.length>0&&(G=(Q=n[0].chapterInfos)==null?void 0:Q.length,k(n[0])),e.currentUser){const W=e.userHistory.filter(H=>H.bookId==e.bookId);if(W&&W.length>0){const H=W[0].subBooks.filter(ae=>ae.subBookId==z);H&&H.length>0&&T(Math.floor(((V=H[0])==null?void 0:V.readChapters)/G*100))}}if(e.subBooks&&e.subBooks.length>0){const W=e.subBooks.filter(H=>H.subBookId==z);if(W&&W.length>0){let H=W[0].chapterInfos;H.sort((ae,le)=>ae.chapterNumber-le.chapterNumber),r(H)}}},[e.subBooks,e.userHistory]),b.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const n=e.subBookInfos.filter(G=>G.subBookId==z);n&&n.length>0?E(!0):E(!1)}},[]);const Y=b.useCallback(n=>{E(G=>!G),e.onDownload(n)},[]),m=()=>{var n,G;if(t!=null&&t.noChapter){const Q=(n=t==null?void 0:t.chapterInfos[0])==null?void 0:n.isTranslated,V=(G=t==null?void 0:t.chapterInfos[0])==null?void 0:G.isPublished;!(Q!=null&&Q[c])&&!(Q!=null&&Q[l])||!(V!=null&&V[c])&&!(V!=null&&V[l])?X.custom(W=>{var H,ae,le,_e,Ae,Oe;return i.jsx(q,{text:((le=(ae=(H=e.terms)==null?void 0:H.texts.find(re=>re.variable=="None Translated"))==null?void 0:ae.text)==null?void 0:le[l])||((Oe=(Ae=(_e=e.terms)==null?void 0:_e.texts.find(re=>re.variable=="None Translated"))==null?void 0:Ae.text)==null?void 0:Oe.en)||"",visible:W.visible})}):e.moveToReading(t==null?void 0:t.chapterInfos[0].chapterId,t.subBookId)}else O(!x),e.handleOpenedSubBook(e.subBookId)},g=(n,G)=>{G=="none"?X.custom(Q=>{var V,W,H;return i.jsx(q,{text:((H=(W=(V=e.terms)==null?void 0:V.texts.find(ae=>ae.variable=="None Translated"))==null?void 0:W.text)==null?void 0:H[l])||"",visible:Q.visible})}):e.moveToReading(n,t.subBookId)};return i.jsxs(Go,{id:e.id,children:[i.jsxs(Vo,{children:[i.jsxs(Yo,{progress:y,progresscolor:F,onClick:m,children:[(t==null?void 0:t.subBookNumber)!=0&&i.jsxs(Zo,{istransliteration:((p=t==null?void 0:t.subBookTitle)==null?void 0:p[Ge])!=null?"true":"false",translatestatus:(t==null?void 0:t.noChapter)&&(!((s=(a=t==null?void 0:t.chapterInfos[0])==null?void 0:a.isTranslated)!=null&&s[c])&&!((h=(u=t==null?void 0:t.chapterInfos[0])==null?void 0:u.isTranslated)!=null&&h[l])||!((f=(v=t==null?void 0:t.chapterInfos[0])==null?void 0:v.isPublished)!=null&&f[c])&&!((R=(M=t==null?void 0:t.chapterInfos[0])==null?void 0:M.isPublished)!=null&&R[l])?"none":(!((Z=(N=t==null?void 0:t.chapterInfos[0])==null?void 0:N.isTranslated)!=null&&Z[c])||!((D=(ie=t==null?void 0:t.chapterInfos[0])==null?void 0:ie.isTranslated)!=null&&D[l]))&&((ue=(se=t==null?void 0:t.chapterInfos[0])==null?void 0:se.isPublished)!=null&&ue[c]||!((xe=(ge=t==null?void 0:t.chapterInfos[0])==null?void 0:ge.isPublished)!=null&&xe[l]))?"one":"both")||"",children:[((be=t==null?void 0:t.subBookTitle)==null?void 0:be[Ge])&&i.jsx(ne,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:L,language:Ve,children:(t==null?void 0:t.subBookNumber)+". "+((me=t==null?void 0:t.subBookTitle)==null?void 0:me[Ge])}),i.jsx(ne,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:L,language:Ve,direction:"rtl",children:(fe=t==null?void 0:t.subBookTitle)==null?void 0:fe[Ve]})]}),i.jsxs(Qo,{children:[i.jsxs(Xo,{translatestatus:t!=null&&t.noChapter&&(!((ve=(ke=t==null?void 0:t.chapterInfos[0])==null?void 0:ke.isTranslated)!=null&&ve[c])&&!((ye=(he=t==null?void 0:t.chapterInfos[0])==null?void 0:he.isTranslated)!=null&&ye[l])||!((Be=(Ce=t==null?void 0:t.chapterInfos[0])==null?void 0:Ce.isPublished)!=null&&Be[c])&&!((Te=(Se=t==null?void 0:t.chapterInfos[0])==null?void 0:Se.isPublished)!=null&&Te[l]))?"none":(!((Ie=(we=t==null?void 0:t.chapterInfos[0])==null?void 0:we.isTranslated)!=null&&Ie[c])||!((je=(Pe=t==null?void 0:t.chapterInfos[0])==null?void 0:Pe.isTranslated)!=null&&je[l]))&&((Ee=(pe=t==null?void 0:t.chapterInfos[0])==null?void 0:pe.isPublished)!=null&&Ee[c]||!((ot=(B=t==null?void 0:t.chapterInfos[0])==null?void 0:B.isPublished)!=null&&ot[l]))?"one":"both",children:[i.jsx(ne,{fontFamily:'"Baloo Da 2"',color:L,children:(nt=t==null?void 0:t.subBookTitle)==null?void 0:nt[ee]}),(t==null?void 0:t.subBookNumber)==0&&i.jsx(qo,{src:S.icon_intro})]}),e.currentUser&&y!==0&&!(t!=null&&t.noChapter)&&i.jsx(ne,{fontFamily:'"Baloo Da 2"',color:F,children:`${y}%`})]})]}),i.jsxs(Jo,{isdownloaded:I?"true":"false",children:[i.jsx(jt,{src:I?_==A.DEFAULT||_==A.EASY_OCEAN?S.download_cancel:S.download_cancel_white:_==A.DEFAULT||_==A.EASY_OCEAN?S.download:S.download_white,onClick:()=>Y(z)}),I&&i.jsx(jt,{src:_==A.DEFAULT||_==A.EASY_OCEAN?S.download_refresh:S.download_refresh_white,onClick:()=>e.onDownloadRefresh(z)})]})]}),x&&i.jsxs(en,{style:{backgroundColor:$},children:[i.jsx(tn,{children:i.jsx(ne,{fontFamily:"Inter",color:j,children:((st=(at=(it=e.terms)==null?void 0:it.texts.find(n=>n.variable=="Chapter"))==null?void 0:at.text)==null?void 0:st[l])||""})}),i.jsx(on,{children:o==null?void 0:o.map((n,G)=>{var Q,V,W,H,ae,le,_e,Ae,Oe,re,lt,rt,dt,ct,ut,gt;return n.chapterNumber==0?i.jsx(pt,{translatestatus:!((Q=n==null?void 0:n.isTranslated)!=null&&Q[c])&&!((V=n==null?void 0:n.isTranslated)!=null&&V[l])||!((W=n==null?void 0:n.isPublished)!=null&&W[c])&&!((H=n==null?void 0:n.isPublished)!=null&&H[l])?"none":(!((ae=n==null?void 0:n.isTranslated)!=null&&ae[c])||!((le=n==null?void 0:n.isTranslated)!=null&&le[l]))&&((_e=n==null?void 0:n.isPublished)!=null&&_e[c]||!((Ae=n==null?void 0:n.isPublished)!=null&&Ae[l]))?"one":"both",readalready:U&&U.length>0&&U.includes(n.chapterId)?"true":"false",style:{backgroundColor:w,color:L},readbgcolor:F,readtextcolor:P,onClick:()=>{var Re,Ne,De,Le,Me,$e,Ue,Fe;return g(n.chapterId,!((Re=n==null?void 0:n.isTranslated)!=null&&Re[c])&&!((Ne=n==null?void 0:n.isTranslated)!=null&&Ne[l])||!((De=n==null?void 0:n.isPublished)!=null&&De[c])&&!((Le=n==null?void 0:n.isPublished)!=null&&Le[l])?"none":(!((Me=n.isTranslated)!=null&&Me[c])||!(($e=n==null?void 0:n.isTranslated)!=null&&$e[l]))&&((Ue=n==null?void 0:n.isPublished)!=null&&Ue[c]||!((Fe=n==null?void 0:n.isPublished)!=null&&Fe[l]))?"one":"both")},children:i.jsx(nn,{src:S.icon_intro})},G):i.jsx(pt,{translatestatus:!((Oe=n==null?void 0:n.isTranslated)!=null&&Oe[c])&&!((re=n==null?void 0:n.isTranslated)!=null&&re[l])||!((lt=n==null?void 0:n.isPublished)!=null&&lt[c])&&!((rt=n==null?void 0:n.isPublished)!=null&&rt[l])?"none":(!((dt=n==null?void 0:n.isTranslated)!=null&&dt[c])||!((ct=n==null?void 0:n.isTranslated)!=null&&ct[l]))&&((ut=n==null?void 0:n.isPublished)!=null&&ut[c]||!((gt=n==null?void 0:n.isPublished)!=null&&gt[l]))?"one":"both",readalready:U&&U.length>0&&U.includes(n.chapterId)?"true":"false",style:{backgroundColor:w,color:L},readbgcolor:F,readtextcolor:P,onClick:()=>{var Re,Ne,De,Le,Me,$e,Ue,Fe;return g(n.chapterId,!((Re=n==null?void 0:n.isTranslated)!=null&&Re[c])&&!((Ne=n==null?void 0:n.isTranslated)!=null&&Ne[l])||!((De=n==null?void 0:n.isPublished)!=null&&De[c])&&!((Le=n==null?void 0:n.isPublished)!=null&&Le[l])?"none":(!((Me=n.isTranslated)!=null&&Me[c])||!(($e=n.isTranslated)!=null&&$e[l]))&&(!((Ue=n==null?void 0:n.isPublished)!=null&&Ue[c])||!((Fe=n==null?void 0:n.isPublished)!=null&&Fe[l]))?"one":"both")},children:i.jsx(ne,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:n.chapterNumber})},G)})})]})]})}function ln(e){const[o,r]=b.useState([]);return b.useEffect(()=>{let t=e.subBooks;t&&t.sort((k,x)=>k.subBookNumber-x.subBookNumber),r(t)},[e.subBooks]),i.jsx(i.Fragment,{children:o&&o.length>0&&o.map((t,k)=>i.jsx(sn,{id:`subbook-${t.subBookId}`,bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:o,subBookId:t.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},k))})}function rn(e){const[o,r]=b.useState(""),[t,k]=b.useState([]),[x,O]=b.useState(1),[I,E]=b.useState([]),{theme:y,readingLanguage:T}=b.useContext(ze),{backgroundColor:_,topTextColor:c,mainTextColor:l}=He(y),w=Vt(e.deviceHeight),L=x*w,$=L-w,j=e.currentUser&&t.slice($,L);b.useEffect(()=>{var m,g,p,a,s,u,h,v,f,M;if(e.subBooks&&e.subBooks.length>0){const R=e.subBooks.map(N=>{var Z;return{label:(Z=N.subBookTitle)==null?void 0:Z[T],value:N.subBookId}});R.unshift({label:((m=e.bookTitle)==null?void 0:m.en)=="Qur'an"||((g=e.bookTitle)==null?void 0:g.en)=="Zabur"?((a=(p=e.terms.texts.find(N=>N.variable=="All Chapters"))==null?void 0:p.text)==null?void 0:a[T])||((u=(s=e.terms.texts.find(N=>N.variable=="All Chapters"))==null?void 0:s.text)==null?void 0:u.en):((v=(h=e.terms.texts.find(N=>N.variable=="All SubBooks"))==null?void 0:h.text)==null?void 0:v[T])||((M=(f=e.terms.texts.find(N=>N.variable=="All SubBooks"))==null?void 0:f.text)==null?void 0:M.en),value:"all"}),E(R)}},[e.subBooks]),b.useEffect(()=>{I.length>0&&r(I[0].value)},[I]),b.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const m=e.bookmark.filter(g=>g.subBookId===o);k(o==="all"||o===""?e.bookmark:m)}else k([]),O(0);x>1&&j.length==1&&O(m=>m-1)},[e.bookmark]);const F=(m,g)=>{O(g)},P=b.useCallback(m=>{const g=m.target.value;r(g);const p=e.bookmark.filter(a=>a.subBookId===g);k(g==="all"?e.bookmark:p)},[e.bookmark]),ee=()=>{var m,g,p,a,s,u,h,v;return i.jsx(No,{style:{backgroundColor:_},children:i.jsx(Zt,{label:((g=(m=e.terms.texts.find(f=>f.variable=="Filter"))==null?void 0:m.text)==null?void 0:g[T])||((a=(p=e.terms.texts.find(f=>f.variable=="Filter"))==null?void 0:p.text)==null?void 0:a.en)||"",detail:i.jsxs(Do,{children:[i.jsx(ne,{color:c,children:((u=(s=e.terms.texts.find(f=>f.variable=="Show"))==null?void 0:s.text)==null?void 0:u[T])||((v=(h=e.terms.texts.find(f=>f.variable=="Show"))==null?void 0:h.text)==null?void 0:v.en)||""}),i.jsx(Qt,{label:"",options:I,value:o,backgroundColor:_,textColor:c,onChange:P})]})})})},U=()=>i.jsx(Lo,{children:(j==null?void 0:j.length)>0&&j.map((m,g)=>{var p,a,s,u,h,v,f,M,R,N,Z,ie,D,se,ue,ge,xe,be,me,fe,ke,ve,he,ye,Ce,Be,Se,Te,we,Ie,Pe,je,pe,Ee;return i.jsxs(C,{children:[i.jsxs(Mo,{children:[i.jsxs($o,{onClick:()=>e.moveToReadingFromBookmark(m._id),children:[i.jsx(ne,{color:l,children:((p=m.subBookTitle)==null?void 0:p[T])||((a=m.subBookTitle)==null?void 0:a.en)}),i.jsx(ne,{color:l,children:m.bookTitle.en=="Qur'an"||m.bookTitle.en=="Zabur"?m.chapterNumber>0?`${((u=(s=e.terms.texts.find(B=>B.variable=="Surah Bookmark"))==null?void 0:s.text)==null?void 0:u[T])||((v=(h=e.terms.texts.find(B=>B.variable=="Surah Bookmark"))==null?void 0:h.text)==null?void 0:v.en)} ${m.chapterNumber}, ${((M=(f=e.terms.texts.find(B=>B.variable=="Aya"))==null?void 0:f.text)==null?void 0:M[T])||((N=(R=e.terms.texts.find(B=>B.variable=="Surah Bookmark"))==null?void 0:R.text)==null?void 0:N.en)} ${m.verseNumber}`:`${((ie=(Z=e.terms.texts.find(B=>B.variable=="Surah Bookmark"))==null?void 0:Z.text)==null?void 0:ie[T])||((se=(D=e.terms.texts.find(B=>B.variable=="Surah Bookmark"))==null?void 0:D.text)==null?void 0:se.en)} _ , ${((ge=(ue=e.terms.texts.find(B=>B.variable=="Aya"))==null?void 0:ue.text)==null?void 0:ge[T])||((be=(xe=e.terms.texts.find(B=>B.variable=="Surah Bookmark"))==null?void 0:xe.text)==null?void 0:be.en)} ${m.verseNumber}`:m.chapterNumber>0?`${((fe=(me=e.terms.texts.find(B=>B.variable=="Chapter Bookmark"))==null?void 0:me.text)==null?void 0:fe[T])||((ve=(ke=e.terms.texts.find(B=>B.variable=="Surah Bookmark"))==null?void 0:ke.text)==null?void 0:ve.en)} ${m.chapterNumber}, ${((ye=(he=e.terms.texts.find(B=>B.variable=="Aya"))==null?void 0:he.text)==null?void 0:ye[T])||((Be=(Ce=e.terms.texts.find(B=>B.variable=="Surah Bookmark"))==null?void 0:Ce.text)==null?void 0:Be.en)} ${m.verseNumber}`:`${((Te=(Se=e.terms.texts.find(B=>B.variable=="Chapter Bookmark"))==null?void 0:Se.text)==null?void 0:Te[T])||((Ie=(we=e.terms.texts.find(B=>B.variable=="Surah Bookmark"))==null?void 0:we.text)==null?void 0:Ie.en)} _ , ${((je=(Pe=e.terms.texts.find(B=>B.variable=="Aya"))==null?void 0:Pe.text)==null?void 0:je[T])||((Ee=(pe=e.terms.texts.find(B=>B.variable=="Surah Bookmark"))==null?void 0:pe.text)==null?void 0:Ee.en)} ${m.verseNumber}`})]}),i.jsx(Fo,{src:y==A.DEFAULT||y==A.EASY_OCEAN||y==A.EASY_SUNRISE?S.black_bookmark:S.white_bookmark,onClick:()=>e.removeBookmark(m._id)})]}),i.jsx(Uo,{})]},g)})}),z=()=>i.jsx(zo,{buttoncolor:l,children:i.jsx(mo,{count:e.currentUser?Math.ceil(t.length/w):0,page:x,hidePrevButton:!0,hideNextButton:!0,onChange:F})}),Y=()=>{var m,g,p,a;return i.jsxs(Ho,{style:{backgroundColor:_},children:[i.jsx(Ko,{src:y==A.DEFAULT||y==A.BLACK_AND_WHITE?S.swipe:y==A.EASY_OCEAN?S.swipe_easyocean:S.swipe_white}),i.jsx(Wo,{style:{color:c},children:((g=(m=e.terms.texts.find(s=>s.variable=="Bookmark Help"))==null?void 0:m.text)==null?void 0:g[T])||((a=(p=e.terms.texts.find(s=>s.variable=="Bookmark Help"))==null?void 0:p.text)==null?void 0:a.en)})]})};return i.jsxs(Ro,{children:[ee(),U(),z(),Y()]})}function dn(e){var _,c,l,w,L,$,j,F;const[o,r]=b.useState(te),{theme:t,readingLanguage:k}=b.useContext(ze),{mainBGColor:x,headerBGColor:O,buttonColor:I,buttonTextColor:E,mainTextColor:y}=He(t),T=P=>{e.currentUser?r(P):X.custom(ee=>{var U,z,Y,m;return i.jsx(q,{text:((z=(U=e.terms.texts.find(g=>g.variable=="Bookmark Read Description"))==null?void 0:U.text)==null?void 0:z[k])||((m=(Y=e.terms.texts.find(g=>g.variable=="Bookmark Read Description"))==null?void 0:Y.text)==null?void 0:m.en)||"",visible:ee.visible})})};return i.jsx(_o,{style:{backgroundColor:O},children:i.jsxs(Ao,{style:{backgroundColor:x},children:[i.jsxs(Oo,{children:[i.jsxs(wt,{active:o==te?"true":"false",style:{backgroundColor:o==te?I:x},bordercolor:y,onClick:()=>T(te),children:[i.jsx(It,{src:t==A.DEFAULT?S.index:t==A.EASY_OCEAN?o==te?S.index_active:S.index:o==te?S.index:S.index_active}),i.jsx(Pt,{active:o==te?"true":"false",children:i.jsx(ne,{fontSize:16,fontWeight:"500",lineHeight:24,color:o==te?E:y,children:((c=(_=e.terms.texts.find(P=>P.variable=="Index"))==null?void 0:_.text)==null?void 0:c[k])||((w=(l=e.terms.texts.find(P=>P.variable=="Index"))==null?void 0:l.text)==null?void 0:w.en)||""})})]}),i.jsxs(wt,{active:o==te?"false":"true",style:{backgroundColor:o==Ye?I:x},bordercolor:y,onClick:()=>T(Ye),children:[i.jsx(It,{src:t==A.DEFAULT?S.bookmark2_default:t==A.EASY_OCEAN?o==te?S.bookmark2_default:S.bookmark2_white:o==te?S.bookmark2_white:S.bookmark2_default}),i.jsx(Pt,{active:o==te?"false":"true",children:i.jsx(ne,{fontSize:16,fontWeight:"500",lineHeight:24,color:o==Ye?E:y,children:(($=(L=e.terms.texts.find(P=>P.variable=="Bookmarks"))==null?void 0:L.text)==null?void 0:$[k])||((F=(j=e.terms.texts.find(P=>P.variable=="Bookmarks"))==null?void 0:j.text)==null?void 0:F.en)||""})})]})]}),o==te?i.jsx(ln,{bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):i.jsx(rn,{bookTitle:e.bookTitle,subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark.filter(P=>P.bookId==e.bookId),deviceHeight:e.deviceHeight,terms:e.terms,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const cn=d(C)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function un(e){const[o,r]=b.useState(),[t,k]=b.useState(!1),[x,O]=b.useState(),[I,E]=b.useState(),y=Kt(),{height:T}=fo(),{theme:_,readingLanguage:c}=b.useContext(ze),{mainBGColor:l}=He(_),w=localStorage.getItem(Je)||et,L=b.useCallback(()=>{e.currentBook&&vt.fetchBookInfo(e.currentBook).then(a=>{var s,u,h;if(e.dispatch({type:K.ADD_BOOKINFO,payload:{bookInfo:a}}),r(a),e.currentUser&&!e.userHistory.some(f=>f.bookId==e.currentBook)&&a.subBooks){const f=a.subBooks.find(N=>N.subBookNumber==0),M=(s=f==null?void 0:f.chapterInfos[0])==null?void 0:s.chapterId,R=f==null?void 0:f.subBookId;(h=(u=f==null?void 0:f.chapterInfos[0])==null?void 0:u.isTranslated)!=null&&h[w]?F(M,R):X.custom(N=>{var Z,ie,D;return i.jsx(q,{text:((D=(ie=(Z=x==null?void 0:x.texts)==null?void 0:Z.find(se=>se.variable=="None Translated"))==null?void 0:ie.text)==null?void 0:D[c])||"",type:Ke.BOOKMARK,visible:N.visible})})}}).catch(a=>{X.custom(s=>i.jsx(q,{text:a,type:Ke.BOOKMARK,visible:s.visible}))}).finally(()=>{k(!1)})},[e.currentBook,e.dispatch,e.userHistory,e.currentUser]),$=b.useCallback(async a=>{var s,u,h;try{const v=await vt.fetchSubBookInfo(a);e.dispatch({type:K.ADD_SUBBOOKINFO,payload:{subBookInfo:v}}),e.dispatch({type:K.ADD_SUBBOOK,payload:{subBook:v}}),Wt(v);const f=(s=e.bookInfos)==null?void 0:s.find(R=>(R==null?void 0:R.bookId)==e.currentBook),M=f&&((u=f==null?void 0:f.subBooks)==null?void 0:u.find(R=>(R==null?void 0:R.subBookId)==a));if(M){const R=(h=M==null?void 0:M.subBookTitle)==null?void 0:h.en;ft("Sub books","download_subbook",R)}k(!1)}catch(v){X.custom(f=>i.jsx(q,{text:v,visible:f.visible})),k(!1)}},[e.dispatch]);b.useEffect(()=>{var u,h;const a=e.terms.find(v=>v.pageTitle=="Index & Bookmark Page"),s=e.terms.find(v=>v.pageTitle=="Welcome Page");(u=a==null?void 0:a.isPublished)!=null&&u[c]?O(a):X.custom(v=>i.jsx(q,{text:"The terminologies for this page are not published.",visible:v.visible})),(h=s==null?void 0:s.isPublished)!=null&&h[c]?E(s):X.custom(v=>i.jsx(q,{text:"The terminologies for hamburgur menu are not published.",visible:v.visible}))},[e.terms]),b.useEffect(()=>{(async()=>{var s;k(!0),!((s=e.bookInfos)!=null&&s.length)||!e.bookInfos.some(u=>u.bookId===e.currentBook)?await L():(r(e.bookInfos.find(u=>u.bookId===e.currentBook)),k(!1))})(),e.currentUser&&ht.fetchBookmarks().then(s=>{e.dispatch({type:K.SET_BOOKMARKS,payload:{bookmark:s}})}).catch(s=>{s.status===401&&s.response.data.message===xt&&(X.custom(u=>i.jsx(q,{text:s.response.data.message,visible:u.visible})),Qe.logout(),y("/login"))})},[e.currentBook,e.bookInfos,e.currentUser,e.dispatch]),b.useEffect(()=>{if(e.currentSubBook&&e.prevPage===Ze.READING){const s=setTimeout(()=>{const u=document.getElementById(`subbook-${e.currentSubBook}`);u&&u.scrollIntoView({behavior:"smooth"})},100);return()=>clearTimeout(s)}},[e.currentSubBook,e.prevPage]);const j=()=>{X.custom(a=>{var s,u,h;return i.jsx(q,{text:((h=(u=(s=x==null?void 0:x.texts)==null?void 0:s.find(v=>v.variable=="Not Built Yet"))==null?void 0:u.text)==null?void 0:h[c])||"",visible:a.visible})})},F=(a,s)=>{var f,M,R,N,Z,ie;e.dispatch({type:K.SET_CURRENT_CHAPTER,payload:{currentChapter:a}}),e.dispatch({type:K.SET_CURRENT_SUBBOOK,payload:{currentSubBook:s}}),e.dispatch({type:K.SET_PREVIOUS_PAGE,payload:{prevPage:Ze.BOOKS}});const u=(f=e.bookInfos)==null?void 0:f.find(D=>(D==null?void 0:D.bookId)==e.currentBook),h=u&&((M=u==null?void 0:u.subBooks)==null?void 0:M.find(D=>(D==null?void 0:D.subBookId)==s)),v=(R=h==null?void 0:h.chapterInfos)==null?void 0:R.find(D=>(D==null?void 0:D.chapterId)==a);if(h){const D=(N=h==null?void 0:h.subBookTitle)==null?void 0:N.en,se=v==null?void 0:v.chapterNumber;ft("Chapter","read_chapter",((Z=o==null?void 0:o.bookTitle)==null?void 0:Z.en)=="Qur'an"||((ie=o==null?void 0:o.bookTitle)==null?void 0:ie.en)=="Zabur"?D:`${D}-${se==0?"Introduction":se}`)}y("/reading")},P=()=>{y("/library"),e.dispatch({type:K.SET_PREVIOUS_PAGE,payload:{prevPage:Ze.BOOKS}}),e.dispatch({type:K.SET_CURRENT_SUBBOOK,payload:{currentSubBook:""}})},ee=b.useCallback(async a=>{k(!0),kt()<bt?await Gt(a)?(await mt(a),e.dispatch({type:K.REMOVE_SUBBOOKINFO,payload:{subBookId:a}})):await $(a):X.custom(u=>{var h,v,f;return i.jsx(q,{text:((f=(v=(h=x==null?void 0:x.texts)==null?void 0:h.find(M=>M.variable=="Not Enough Space"))==null?void 0:v.text)==null?void 0:f[c])||"Not enough space",visible:u.visible})}),k(!1)},[$,e.dispatch]),U=b.useCallback(async a=>{k(!0),await mt(a),e.dispatch({type:K.REMOVE_SUBBOOKINFO,payload:{subBookId:a}}),kt()<bt?await $(a):X.custom(u=>{var h,v,f;return i.jsx(q,{text:((f=(v=(h=x==null?void 0:x.texts)==null?void 0:h.find(M=>M.variable=="Not Enough Space"))==null?void 0:v.text)==null?void 0:f[c])||"Not enough space",visible:u.visible})}),k(!1)},[$,e.dispatch]),z=b.useCallback(a=>{if(k(!0),e.bookmark&&e.bookmark.length>0){const s=e.bookmark.find(u=>u._id===a);if(s){const{chapterId:u,subBookId:h,verseId:v}=s;e.dispatch({type:K.SET_CURRENT_SUBBOOK,payload:{currentSubBook:h}}),e.dispatch({type:K.SET_CURRENT_CHAPTER,payload:{currentChapter:u}}),e.dispatch({type:K.SET_CURRENT_VERSE,payload:{currentVerse:v}}),y("/reading"),k(!1)}}},[e.currentBook,y,e.bookmark]),Y=b.useCallback(a=>{k(!0),ht.deleteBookmark(a).then(s=>{e.dispatch({type:K.REMOVE_BOOKMARK,payload:{bookmarkId:a}}),X.custom(u=>i.jsx(q,{text:s.message,type:Ke.BOOKMARK,visible:u.visible})),k(!1)}).catch(s=>{s.status==401&&s.response.data.message==xt&&(X.custom(u=>i.jsx(q,{text:s.response.data.message,type:Ke.BOOKMARK,visible:u.visible})),Qe.logout(),y("/login")),k(!1)})},[e.dispatch]),m=b.useCallback(a=>{e.dispatch({type:K.SET_CURRENT_SUBBOOK,payload:{currentSubBook:e.currentSubBook===a?"":a}})},[e.currentSubBook,e.dispatch]),g=()=>{e.dispatch({type:K.RESET_USER}),e.dispatch({type:K.RESET_BOOK}),e.dispatch({type:K.RESET_PAGE_STATUS}),Qe.logout()},p=()=>{y("/login")};return i.jsxs(cn,{style:{backgroundColor:l},children:[i.jsx(an,{markImg:o&&Mt+o.bookImage,markTitle:o==null?void 0:o.bookTitle,isLogIn:!!e.currentUser,terms:x||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},welcomePageTerms:I||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},onLogoClick:()=>y("/"),onCloseClick:P,onLogin:e.currentUser?g:p,onSettings:()=>y("/settings"),onSearchClick:j}),i.jsx(dn,{bookId:e.currentBook,bookTitle:o==null?void 0:o.bookTitle,bookImage:o==null?void 0:o.bookImage,subBooks:o==null?void 0:o.subBooks,deviceHeight:T,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.currentSubBook,terms:x||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},moveToReading:F,moveToReadingFromBookmark:z,onDownload:ee,onDownloadRefresh:U,removeBookmark:Y,handleOpenedSubBook:m}),t&&i.jsx(Xt,{})]})}function gn(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,terms:e.terms.terms,currentBook:e.pageStatus.currentBook,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,currentSubBook:e.pageStatus.currentSubBook,prevPage:e.pageStatus.prevPage,currentUser:e.user.currentUser,activeChapterId:e.books.activeChapterId}}const In=Ht(gn)(un);export{In as default};
