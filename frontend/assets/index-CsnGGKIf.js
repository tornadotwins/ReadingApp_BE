var Y=Object.defineProperty;var D=(e,t,a)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var F=(e,t,a)=>D(e,typeof t!="symbol"?t+"":t,a);import{b as l,j as s,a3 as G,at as O,au as q}from"./index-COOOq_Rz.js";import{S as E,g as L,a as J,b as Q,s as y,B as V,c as X,u as Z,d as T,k as W}from"./App-DaqOXMMZ.js";import{u as $}from"./useOrientation-CDhsNngX.js";import{B as ee,S as te,L as ae,T as se,H as ne,a as z,b as oe,c as ie}from"./styled-DWIuzoEf.js";import{T as p,I as v}from"./index-DiYC73pO.js";import{H as re}from"./index-DET3kY5D.js";import{B as le}from"./Button-BPY51J_-.js";import{L as ce}from"./index-C8r-w1JA.js";import{S as ge}from"./index-BWaXO0FI.js";import{C as K}from"./index-qrw5EXMH.js";import{a as ue}from"./auth.service-C1pRUb7T.js";import{a as me}from"./axios-upsvKRUO.js";import"./index-BNFour3S.js";function de({label:e,checked:t,onChange:a}){const{theme:g}=l.useContext(E),{altTextColor:i}=L(g);return s.jsx(J,{control:s.jsx(Q,{checked:t,bordercolor:i,onChange:a}),label:s.jsx(p,{color:i,children:e}),style:{color:i},bordercolor:i})}const xe=y(V)({display:"flex"}),fe=y(xe)({justifyContent:"center",alignItems:"center"}),he=y(fe)({width:"100dvw",height:"100dvh"});function be(e){const{theme:t,readingLanguage:a}=l.useContext(E),{headerBGColor:g,logoTextColor:i}=L(t),[f,u]=l.useState(""),[S,h]=l.useState("");return l.useEffect(()=>{var m,b,c,r,d,x;if(e.isHeaven){const o=(m=e.pageTerms)==null?void 0:m.texts.find(C=>C.variable=="Welcome Heavenly");u(((b=o==null?void 0:o.text)==null?void 0:b[a])||((c=o==null?void 0:o.text)==null?void 0:c.en)||"")}else{const o=(r=e.pageTerms)==null?void 0:r.texts.find(C=>C.variable=="Welcome");u(((d=o==null?void 0:o.text)==null?void 0:d[a])||((x=o==null?void 0:o.text)==null?void 0:x.en)||"")}},[e.isHeaven,e.pageTerms,a]),l.useEffect(()=>{const m=e.isHeaven?t==G.EASY_OCEAN?v.main_logo_heaven_easyocean:v.main_logo_heaven:t==G.EASY_OCEAN?v.main_logo_easyocean:v.main_logo;h(m)},[e.isHeaven,t]),s.jsxs(ee,{style:{backgroundColor:g},children:[s.jsx(te,{children:s.jsx(re,{isLogin:e.isLoggedIn,textColor:i,itemBgColor:g,terms:e.pageTerms,onLogin:e.onLogin,onSettings:e.onSettings})}),s.jsx(ae,{src:S}),s.jsx(se,{children:s.jsx(p,{color:i,fontFamily:"Buenard",fontWeight:"700",textAlign:"center",fontSize:36,lineHeight:47,children:f})})]})}function Ce(e){var d,x,o,C,B,_,k,A,H,I,R,U,P,M,w,N;const{theme:t,readingLanguage:a,setReadingLanguage:g}=l.useContext(E),{mainBGColor:i,altTextColor:f}=L(t),u=[{value:"en",label:"English"},{value:"ar",label:"Arabic"},{value:"tlg",label:"Tagalog"}],[S,h]=l.useState(u[0].value),[m,b]=l.useState(!1);l.useEffect(()=>{const n=localStorage.getItem(O);n&&n.length>0&&h(n)},[]);const c=n=>{const j=n.target.value;h(j),g(j),localStorage.setItem(O,j)},r=n=>{b(n.target.checked)};return s.jsxs(ne,{style:{backgroundColor:i},children:[s.jsx(p,{color:f,children:((x=(d=e.pageTerms.texts.find(n=>n.variable=="Reading Language"))==null?void 0:d.text)==null?void 0:x[a])||((C=(o=e.pageTerms.texts.find(n=>n.variable=="Reading Language"))==null?void 0:o.text)==null?void 0:C.en)}),s.jsx(z,{children:s.jsx(ge,{label:"",options:u,value:S,textColor:f,backgroundColor:i,onChange:c})}),s.jsx(z,{children:s.jsx(de,{label:((_=(B=e.pageTerms.texts.find(n=>n.variable=="Keep App"))==null?void 0:B.text)==null?void 0:_[a])||((A=(k=e.pageTerms.texts.find(n=>n.variable=="Keep App"))==null?void 0:k.text)==null?void 0:A.en)||"",checked:m,onChange:r})}),s.jsx(oe,{children:s.jsx(le,{label:((I=(H=e.pageTerms.texts.find(n=>n.variable=="Start"))==null?void 0:H.text)==null?void 0:I[a])||((U=(R=e.pageTerms.texts.find(n=>n.variable=="Start"))==null?void 0:R.text)==null?void 0:U.en)||"",onClick:e.onStartClicked,size:"medium"})}),s.jsx(ie,{children:s.jsx(ce,{label:((M=(P=e.pageTerms.texts.find(n=>n.variable=="Save App"))==null?void 0:P.text)==null?void 0:M[a])||((N=(w=e.pageTerms.texts.find(n=>n.variable=="Save App"))==null?void 0:w.text)==null?void 0:N.en)||""})})]})}class Se{constructor(){F(this,"getAllTerms",()=>new Promise((t,a)=>{const g=q+"/translator/appTexts";me.get(g).then(i=>{t(i.data)}).catch(i=>{a(this.getErrorMessage(i))})}))}getErrorMessage(t){let a=t.message;return t.response&&t.response.data&&t.response.data.message&&(a=t.response.data.message),a}}const Te=new Se;function ve(e){const t=$(),a=Z(),[g,i]=l.useState(!1),[f,u]=l.useState(),{readingLanguage:S}=l.useContext(E);l.useEffect(()=>{Te.getAllTerms().then(c=>{var d,x;e.dispatch({type:T.SET_TERMS,payload:{terms:c}});const r=c.find(o=>o.pageTitle="Welcome Page");(d=r==null?void 0:r.isPublished)!=null&&d[S]||(x=r==null?void 0:r.isPublished)!=null&&x.en?u(r):W.custom(o=>s.jsx(K,{text:"The terminologies for this page is not published.",visible:o.visible}))}).catch(c=>{W.custom(r=>s.jsx(K,{text:c,visible:r.visible}))})},[]),l.useEffect(()=>{window.location.href.includes("holy")?i(!1):i(!0)},[]),l.useEffect(()=>{const c=e.terms.find(r=>r.pageTitle="Welcome Page");u(c)},[e.terms]);const h=()=>{a("/login")},m=()=>{e.dispatch({type:T.RESET_USER}),e.dispatch({type:T.RESET_BOOK}),e.dispatch({type:T.RESET_PAGE_STATUS}),ue.logout()},b=()=>{a("/library")};return s.jsxs(he,{flexDirection:t?"column":"row",children:[s.jsx(be,{isLoggedIn:e.currentUser!=null,isHeaven:g,pageTerms:f||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},onLogin:e.currentUser?m:h,onSettings:()=>a("/settings")}),s.jsx(Ce,{pageTerms:f||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},onStartClicked:b})]})}function Ee(e){return{currentUser:e.user.currentUser,terms:e.terms.terms}}const we=X(Ee)(ve);export{we as default};
