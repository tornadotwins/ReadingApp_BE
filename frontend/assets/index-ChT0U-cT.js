import{u as wt,b as v,j as m,ab as j,ac as It,ad as mt,Q as xt,ae as U,af as Et}from"./index-CDMXNg3a.js";import{f as Mt,h as _t,S as D,g as B,B as pt,i as Pt,j as Rt,I as Lt,k as Ot,u as q,l as kt,m as At,n as Wt,o as jt,p as Dt,H as Bt,q as Vt,L as Ft,r as Nt,C as Gt,t as Ut,v as $t,s as tt,c as Ht,d as zt,e as A,_ as Yt}from"./App-CCHOtcAG.js";import{T as H,I as J}from"./images-CjevRs9d.js";import{S as Xt}from"./index-Bh4V_8Sm.js";import{C as Kt,L as Qt}from"./index-C8rIq1WU.js";import{u as Jt}from"./useOrientation-BjwuokjX.js";import{b as ht}from"./book.service-BN6ptQUU.js";import{a as Zt}from"./auth.service-Bknov-0C.js";import"./index-B0rNSSQo.js";import"./axios-BimPEqV4.js";function qt(o,i,t,e,n){const[s,a]=v.useState(()=>n&&t?t(o).matches:e?e(o).matches:i);return _t(()=>{let r=!0;if(!t)return;const l=t(o),h=()=>{r&&a(l.matches)};return h(),l.addListener(h),()=>{r=!1,l.removeListener(h)}},[o,t]),s}const gt=v.useSyncExternalStore;function te(o,i,t,e,n){const s=v.useCallback(()=>i,[i]),a=v.useMemo(()=>{if(n&&t)return()=>t(o).matches;if(e!==null){const{matches:u}=e(o);return()=>u}return s},[s,o,e,n,t]),[r,l]=v.useMemo(()=>{if(t===null)return[s,()=>()=>{}];const u=t(o);return[()=>u.matches,d=>(u.addListener(d),()=>{u.removeListener(d)})]},[s,t,o]);return gt(l,r,a)}function ee(o,i={}){const t=wt(),e=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:n=!1,matchMedia:s=e?window.matchMedia:null,ssrMatchMedia:a=null,noSsr:r=!1}=Mt({name:"MuiUseMediaQuery",props:i,theme:t});let l=o;return l=l.replace(/^@media( ?)/m,""),(gt!==void 0?te:qt)(l,n,s,a,r)}function ie({label:o,onClick:i,size:t="medium",style:e,progress:n}){const{theme:s}=v.useContext(D),{buttonColor:a,buttonTextColor:r}=B(s);return m.jsxs(pt,{children:[m.jsx(Pt,{size:t,onClick:i,style:{...e,backgroundColor:a},textcolor:r,isprogressbutton:"true",children:m.jsx(H,{color:r,children:o})}),m.jsx(Rt,{variant:"determinate",value:n,backgroundcolor:a,bordercolor:r})]})}const oe=o=>{var n;const{theme:i}=v.useContext(D),{buttonTextColor:t}=B(i),e=localStorage.getItem(j);return m.jsxs(Lt,{children:[m.jsx(Ot,{src:It+o.coverImg||J.default_cover,alt:o.imageText}),m.jsx(H,{fontSize:o.fontSize,fontFamily:o.fontFamily,fontWeight:o.fontWeight,lineHeight:47,className:"imageText",color:t,children:(n=o.title)==null?void 0:n[e||"en"]})]})};function ne(o){var h;const[i,t]=v.useState(0),e=o.book,{t:n}=q(),{theme:s}=v.useContext(D),{mainTextColor:a,backgroundColor:r}=B(s),l=localStorage.getItem(j)||mt;return v.useEffect(()=>{var u;if(o.userHistory&&((u=o.userHistory)==null?void 0:u.length)>0){const d=o.userHistory.filter(c=>c.bookId==e._id);if(d.length>0){const c=d[0].totalChapterCount,f=d[0].readChapters;t(Math.floor(f/c*100))}}}),m.jsx(kt,{children:m.jsx(At,{style:{backgroundColor:r},children:m.jsxs(Wt,{children:[m.jsx(oe,{coverImg:e.coverImage,title:e.title,imageText:e.imageText,fontFamily:'"Buenard"',fontSize:24,fontWeight:"400"}),m.jsx(jt,{children:m.jsx(H,{fontFamily:'"Buenard"',fontWeight:"700",lineHeight:47,fontSize:31,textAlign:"center",color:a,children:(h=e.title)==null?void 0:h[l]})}),m.jsx(Dt,{children:m.jsx(ie,{label:n("Open"),onClick:()=>o.moveToBook(e._id),size:"large",progress:i})})]})})})}function re(o){const{t:i,i18n:t}=q(),{theme:e}=v.useContext(D),{headerBGColor:n,logoTextColor:s}=B(e),a=[{value:"en",label:i("English")},{value:"ar",label:i("Arabic")}],[r,l]=v.useState(a[0].value);v.useEffect(()=>{const u=localStorage.getItem(j);u&&u.length>0&&l(u)},[]);const h=u=>{const d=u.target.value;l(d),t.changeLanguage(d),localStorage.setItem(j,d)};return m.jsxs(Bt,{style:{backgroundColor:n},children:[m.jsx(Vt,{onClick:o.onLoginClicked,style:{color:s},children:o.isLoggedIn?i("Log Out"):i("Log In")}),m.jsx(Ft,{src:e==xt.EASY_OCEAN?J.main_logo_easyocean:J.main_logo,onClick:o.onLogoClicked}),m.jsx(Nt,{children:m.jsx(Xt,{label:"",options:a,value:r,backgroundColor:s,textColor:n,onChange:h})})]})}var et={},it={},g={},z={};(function(o){function i(a,r,l){var h=r.slidesToShow,u=r.currentSlide;return l.length>2*h?a+2*h:u>=l.length?l.length+a:a}function t(a,r){if(r.length>2*a){for(var l={},h=r.length-2*a,u=r.length-h,d=h,c=0;c<u;c++)l[c]=d,d++;var f=r.length+u,p=f+r.slice(0,2*a).length,S=0;for(c=f;c<=p;c++)l[c]=S,S++;var w=f,I=0;for(c=u;c<w;c++)l[c]=I,I++;return l}l={};var x=3*r.length,y=0;for(c=0;c<x;c++)l[c]=y,++y===r.length&&(y=0);return l}function e(a,r){return r.length<a?r:r.length>2*a?r.slice(r.length-2*a,r.length).concat(r,r.slice(0,2*a)):r.concat(r,r)}function n(a,r){return r.length>2*a?2*a:r.length}function s(a,r,l){var h,u=a.currentSlide,d=a.slidesToShow,c=a.itemWidth,f=a.totalItems,p=0,S=0,w=u===0,I=r.length-(r.length-2*d);return r.length<d?(S=p=0,w=h=!1):r.length>2*d?((h=u>=I+r.length)&&(S=-c*(p=u-r.length)),w&&(S=-c*(p=I+(r.length-2*d)))):((h=u>=2*r.length)&&(S=-c*(p=u-r.length)),w&&(S=l.showDots?-c*(p=r.length):-c*(p=f/3))),{isReachingTheEnd:h,isReachingTheStart:w,nextSlide:p,nextPosition:S}}Object.defineProperty(o,"__esModule",{value:!0}),o.getOriginalCounterPart=i,o.getOriginalIndexLookupTableByClones=t,o.getClones=e,o.getInitialSlideInInfiniteMode=n,o.checkClonesPosition=s})(z);var O={};Object.defineProperty(O,"__esModule",{value:!0});function se(o,i,t,e){var n=0,s=e||t;return i&&s&&(n=o[s].partialVisibilityGutter||o[s].paritialVisibilityGutter),n}function ae(o,i){var t;return i[o]&&(t=(100/i[o].items).toFixed(1)),t}function le(o,i,t){return Math.round(t/(i+(o.centerMode?1:0)))}O.getPartialVisibilityGutter=se,O.getWidthFromDeviceType=ae,O.getItemClientSideWidth=le;var b={};Object.defineProperty(b,"__esModule",{value:!0});var Z=O;function ot(o){var i=o.slidesToShow;return o.totalItems<i}function ue(o,i){var t,e=o.domLoaded,n=o.slidesToShow,s=o.containerWidth,a=o.itemWidth,r=i.deviceType,l=i.responsive,h=i.ssr,u=i.partialVisbile,d=i.partialVisible,c=!!(e&&n&&s&&a);h&&r&&!c&&(t=Z.getWidthFromDeviceType(r,l));var f=!!(h&&r&&!c&&t);return{shouldRenderOnSSR:f,flexBisis:t,domFullyLoaded:c,partialVisibilityGutter:Z.getPartialVisibilityGutter(l,u||d,r,o.deviceType),shouldRenderAtAll:f||c}}function he(o,i){var t=i.currentSlide,e=i.slidesToShow;return t<=o&&o<t+e}function vt(o,i,t){var e=t||o.transform;return!i.infinite&&o.currentSlide===0||ot(o)?e:e+o.itemWidth/2}function de(o){return!(0<o.currentSlide)}function St(o){var i=o.currentSlide,t=o.totalItems;return!(i+o.slidesToShow<t)}function yt(o,i,t,e){i===void 0&&(i=0);var n=o.currentSlide,s=o.slidesToShow,a=St(o),r=!t.infinite&&a,l=e||o.transform;if(ot(o))return l;var h=l+n*i;return r?h+(o.containerWidth-(o.itemWidth-i)*s):h}function Tt(o,i){return o.rtl?-1*i:i}function ce(o,i,t){var e=i.partialVisbile,n=i.partialVisible,s=i.responsive,a=i.deviceType,r=i.centerMode,l=t||o.transform,h=Z.getPartialVisibilityGutter(s,e||n,a,o.deviceType);return Tt(i,n||e?yt(o,h,i,t):r?vt(o,i,t):l)}function fe(o,i){var t=o.domLoaded,e=o.slidesToShow,n=o.containerWidth,s=o.itemWidth,a=i.deviceType,r=i.responsive,l=i.slidesToSlide||1,h=!!(t&&e&&n&&s);return i.ssr&&i.deviceType&&!h&&Object.keys(r).forEach(function(u){var d=r[u].slidesToSlide;a===u&&d&&(l=d)}),h&&Object.keys(r).forEach(function(u){var d=r[u],c=d.breakpoint,f=d.slidesToSlide,p=c.max,S=c.min;f&&window.innerWidth>=S&&window.innerWidth<=p&&(l=f)}),l}b.notEnoughChildren=ot,b.getInitialState=ue,b.getIfSlideIsVisbile=he,b.getTransformForCenterMode=vt,b.isInLeftEnd=de,b.isInRightEnd=St,b.getTransformForPartialVsibile=yt,b.parsePosition=Tt,b.getTransform=ce,b.getSlidesToSlide=fe;var nt={};Object.defineProperty(nt,"__esModule",{value:!0});var me=function(o,i,t){var e;return function(){var n=arguments;e||(o.apply(this,n),e=!0,typeof t=="function"&&t(!0),setTimeout(function(){e=!1,typeof t=="function"&&t(!1)},i))}};nt.default=me;var bt={};(function(o){function i(t,e){var n=e.partialVisbile,s=e.partialVisible,a=e.centerMode,r=e.ssr,l=e.responsive;if((n||s)&&a)throw new Error("center mode can not be used at the same time with partialVisible");if(!l)throw r?new Error("ssr mode need to be used in conjunction with responsive prop"):new Error("Responsive prop is needed for deciding the amount of items to show on the screen");if(l&&typeof l!="object")throw new Error("responsive prop must be an object")}Object.defineProperty(o,"__esModule",{value:!0}),o.default=i})(bt);var rt={};Object.defineProperty(rt,"__esModule",{value:!0});var pe=b;function ge(o,i,t){t===void 0&&(t=0);var e,n,s=o.slidesToShow,a=o.currentSlide,r=o.itemWidth,l=o.totalItems,h=pe.getSlidesToSlide(o,i),u=a+1+t+s+(0<t?0:h);return n=u<=l?-r*(e=a+t+(0<t?0:h)):l<u&&a!==l-s?-r*(e=l-s):e=void 0,{nextSlides:e,nextPosition:n}}rt.populateNextSlides=ge;var st={};Object.defineProperty(st,"__esModule",{value:!0});var ve=v,Se=b,ye=b;function Te(o,i,t){t===void 0&&(t=0);var e,n,s=o.currentSlide,a=o.itemWidth,r=o.slidesToShow,l=i.children,h=i.showDots,u=i.infinite,d=Se.getSlidesToSlide(o,i),c=s-t-(0<t?0:d),f=(ve.Children.toArray(l).length-r)%d;return n=0<=c?(e=c,h&&!u&&0<f&&ye.isInRightEnd(o)&&(e=s-f),-a*e):e=c<0&&s!==0?0:void 0,{nextSlides:e,nextPosition:n}}st.populatePreviousSlides=Te;var Ct={};(function(o){function i(t,e,n,s,a,r){var l,h,u=t.itemWidth,d=t.slidesToShow,c=t.totalItems,f=t.currentSlide,p=e.infinite,S=!1,w=Math.round((n-s)/u),I=Math.round((s-n)/u),x=n<a;if(a<n&&w<=d){l="right";var y=Math.abs(-u*(c-d)),M=r-(s-a),E=f===c-d;(Math.abs(M)<=y||E&&p)&&(h=M,S=!0)}return x&&I<=d&&(l="left",((M=r+(a-s))<=0||f===0&&p)&&(S=!0,h=M)),{direction:l,nextPosition:h,canContinue:S}}Object.defineProperty(o,"__esModule",{value:!0}),o.populateSlidesOnMouseTouchMove=i})(Ct);Object.defineProperty(g,"__esModule",{value:!0});var F=z;g.getOriginalCounterPart=F.getOriginalCounterPart,g.getClones=F.getClones,g.checkClonesPosition=F.checkClonesPosition,g.getInitialSlideInInfiniteMode=F.getInitialSlideInInfiniteMode;var K=O;g.getWidthFromDeviceType=K.getWidthFromDeviceType,g.getPartialVisibilityGutter=K.getPartialVisibilityGutter,g.getItemClientSideWidth=K.getItemClientSideWidth;var P=b;g.getInitialState=P.getInitialState,g.getIfSlideIsVisbile=P.getIfSlideIsVisbile,g.getTransformForCenterMode=P.getTransformForCenterMode,g.getTransformForPartialVsibile=P.getTransformForPartialVsibile,g.isInLeftEnd=P.isInLeftEnd,g.isInRightEnd=P.isInRightEnd,g.notEnoughChildren=P.notEnoughChildren,g.getSlidesToSlide=P.getSlidesToSlide;var be=nt;g.throttle=be.default;var Ce=bt;g.throwError=Ce.default;var we=rt;g.populateNextSlides=we.populateNextSlides;var Ie=st;g.populatePreviousSlides=Ie.populatePreviousSlides;var xe=Ct;g.populateSlidesOnMouseTouchMove=xe.populateSlidesOnMouseTouchMove;var Y={},Ee=U&&U.__extends||function(){var o=function(i,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])})(i,t)};return function(i,t){function e(){this.constructor=i}o(i,t),i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();Object.defineProperty(Y,"__esModule",{value:!0});var Me=v;function _e(o){return"clientY"in o}Y.isMouseMoveEvent=_e;var Pe=function(o){function i(){return o!==null&&o.apply(this,arguments)||this}return Ee(i,o),i}(Me.Component);Y.default=Pe;var at={},lt={};Object.defineProperty(lt,"__esModule",{value:!0});var Re=z,Le=b;function Oe(o,i,t,e){var n={},s=Le.getSlidesToSlide(i,t);return Array(o).fill(0).forEach(function(a,r){var l=Re.getOriginalCounterPart(r,i,e);if(r===0)n[0]=l;else{var h=n[r-1]+s;n[r]=h}}),n}lt.getLookupTableForNextSlides=Oe;Object.defineProperty(at,"__esModule",{value:!0});var W=v,ke=z,Ae=lt,dt=b,We=function(o){var i=o.props,t=o.state,e=o.goToSlide,n=o.getState,s=i.showDots,a=i.customDot,r=i.dotListClass,l=i.infinite,h=i.children;if(!s||dt.notEnoughChildren(t))return null;var u,d=t.currentSlide,c=t.slidesToShow,f=dt.getSlidesToSlide(t,i),p=W.Children.toArray(h);u=l?Math.ceil(p.length/f):Math.ceil((p.length-c)/f)+1;var S=Ae.getLookupTableForNextSlides(u,t,i,p),w=ke.getOriginalIndexLookupTableByClones(c,p),I=w[d];return W.createElement("ul",{className:"react-multi-carousel-dot-list "+r},Array(u).fill(0).map(function(x,y){var M,E;if(l){E=S[y];var L=w[E];M=I===L||L<=I&&I<L+f}else{var k=p.length-c,V=y*f;M=(E=k<V?k:V)===d||E<d&&d<E+f&&d<p.length-c}return a?W.cloneElement(a,{index:y,active:M,key:y,onClick:function(){return e(E)},carouselState:n()}):W.createElement("li",{"data-index":y,key:y,className:"react-multi-carousel-dot "+(M?"react-multi-carousel-dot--active":"")},W.createElement("button",{"aria-label":"Go to slide "+(y+1),onClick:function(){return e(E)}}))}))};at.default=We;var X={};Object.defineProperty(X,"__esModule",{value:!0});var $=v,je=function(o){var i=o.customLeftArrow,t=o.getState,e=o.previous,n=o.disabled,s=o.rtl;if(i)return $.cloneElement(i,{onClick:function(){return e()},carouselState:t(),disabled:n,rtl:s});var a=s?"rtl":"";return $.createElement("button",{"aria-label":"Go to previous slide",className:"react-multiple-carousel__arrow react-multiple-carousel__arrow--left "+a,onClick:function(){return e()},type:"button",disabled:n})};X.LeftArrow=je;var De=function(o){var i=o.customRightArrow,t=o.getState,e=o.next,n=o.disabled,s=o.rtl;if(i)return $.cloneElement(i,{onClick:function(){return e()},carouselState:t(),disabled:n,rtl:s});var a=s?"rtl":"";return $.createElement("button",{"aria-label":"Go to next slide",className:"react-multiple-carousel__arrow react-multiple-carousel__arrow--right "+a,onClick:function(){return e()},type:"button",disabled:n})};X.RightArrow=De;var ut={};Object.defineProperty(ut,"__esModule",{value:!0});var N=v,Q=g,Be=function(o){var i=o.props,t=o.state,e=o.goToSlide,n=o.clones,s=o.notEnoughChildren,a=t.itemWidth,r=i.children,l=i.infinite,h=i.itemClass,u=i.itemAriaLabel,d=i.partialVisbile,c=i.partialVisible,f=Q.getInitialState(t,i),p=f.flexBisis,S=f.shouldRenderOnSSR,w=f.domFullyLoaded,I=f.partialVisibilityGutter;return f.shouldRenderAtAll?(d&&console.warn('WARNING: Please correct props name: "partialVisible" as old typo will be removed in future versions!'),N.createElement(N.Fragment,null,(l?n:N.Children.toArray(r)).map(function(x,y){return N.createElement("li",{key:y,"data-index":y,onClick:function(){i.focusOnSelect&&e(y)},"aria-hidden":Q.getIfSlideIsVisbile(y,t)?"false":"true","aria-label":u||(x.props.ariaLabel?x.props.ariaLabel:null),style:{flex:S?"1 0 "+p+"%":"auto",position:"relative",width:w?((d||c)&&I&&!s?a-I:a)+"px":"auto"},className:"react-multi-carousel-item "+(Q.getIfSlideIsVisbile(y,t)?"react-multi-carousel-item--active":"")+" "+h},x)}))):null};ut.default=Be;var Ve=U&&U.__extends||function(){var o=function(i,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])})(i,t)};return function(i,t){function e(){this.constructor=i}o(i,t),i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();Object.defineProperty(it,"__esModule",{value:!0});var C=v,T=g,R=Y,Fe=at,ct=X,Ne=ut,G=b,_=400,ft="transform 400ms ease-in-out",Ge=function(o){function i(t){var e=o.call(this,t)||this;return e.containerRef=C.createRef(),e.listRef=C.createRef(),e.state={itemWidth:0,slidesToShow:0,currentSlide:0,totalItems:C.Children.count(t.children),deviceType:"",domLoaded:!1,transform:0,containerWidth:0},e.onResize=e.onResize.bind(e),e.handleDown=e.handleDown.bind(e),e.handleMove=e.handleMove.bind(e),e.handleOut=e.handleOut.bind(e),e.onKeyUp=e.onKeyUp.bind(e),e.handleEnter=e.handleEnter.bind(e),e.setIsInThrottle=e.setIsInThrottle.bind(e),e.next=T.throttle(e.next.bind(e),t.transitionDuration||_,e.setIsInThrottle),e.previous=T.throttle(e.previous.bind(e),t.transitionDuration||_,e.setIsInThrottle),e.goToSlide=T.throttle(e.goToSlide.bind(e),t.transitionDuration||_,e.setIsInThrottle),e.onMove=!1,e.initialX=0,e.lastX=0,e.isAnimationAllowed=!1,e.direction="",e.initialY=0,e.isInThrottle=!1,e.transformPlaceHolder=0,e}return Ve(i,o),i.prototype.resetTotalItems=function(){var t=this,e=C.Children.count(this.props.children),n=T.notEnoughChildren(this.state)?0:Math.max(0,Math.min(this.state.currentSlide,e));this.setState({totalItems:e,currentSlide:n},function(){t.setContainerAndItemWidth(t.state.slidesToShow,!0)})},i.prototype.setIsInThrottle=function(t){t===void 0&&(t=!1),this.isInThrottle=t},i.prototype.setTransformDirectly=function(t,e){var n=this.props.additionalTransfrom;this.transformPlaceHolder=t;var s=G.getTransform(this.state,this.props,this.transformPlaceHolder);this.listRef&&this.listRef.current&&(this.setAnimationDirectly(e),this.listRef.current.style.transform="translate3d("+(s+n)+"px,0,0)")},i.prototype.setAnimationDirectly=function(t){this.listRef&&this.listRef.current&&(this.listRef.current.style.transition=t?this.props.customTransition||ft:"none")},i.prototype.componentDidMount=function(){this.setState({domLoaded:!0}),this.setItemsToShow(),window.addEventListener("resize",this.onResize),this.onResize(!0),this.props.keyBoardControl&&window.addEventListener("keyup",this.onKeyUp),this.props.autoPlay&&(this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed))},i.prototype.setClones=function(t,e,n,s){var a=this;s===void 0&&(s=!1),this.isAnimationAllowed=!1;var r=C.Children.toArray(this.props.children),l=T.getInitialSlideInInfiniteMode(t||this.state.slidesToShow,r),h=T.getClones(this.state.slidesToShow,r),u=r.length<this.state.slidesToShow?0:this.state.currentSlide;this.setState({totalItems:h.length,currentSlide:n&&!s?u:l},function(){a.correctItemsPosition(e||a.state.itemWidth)})},i.prototype.setItemsToShow=function(t,e){var n=this,s=this.props.responsive;Object.keys(s).forEach(function(a){var r=s[a],l=r.breakpoint,h=r.items,u=l.max,d=l.min,c=[window.innerWidth];window.screen&&window.screen.width&&c.push(window.screen.width);var f=Math.min.apply(Math,c);d<=f&&f<=u&&(n.setState({slidesToShow:h,deviceType:a}),n.setContainerAndItemWidth(h,t,e))})},i.prototype.setContainerAndItemWidth=function(t,e,n){var s=this;if(this.containerRef&&this.containerRef.current){var a=this.containerRef.current.offsetWidth,r=T.getItemClientSideWidth(this.props,t,a);this.setState({containerWidth:a,itemWidth:r},function(){s.props.infinite&&s.setClones(t,r,e,n)}),e&&this.correctItemsPosition(r)}},i.prototype.correctItemsPosition=function(t,e,n){e&&(this.isAnimationAllowed=!0),!e&&this.isAnimationAllowed&&(this.isAnimationAllowed=!1);var s=this.state.totalItems<this.state.slidesToShow?0:-t*this.state.currentSlide;n&&this.setTransformDirectly(s,!0),this.setState({transform:s})},i.prototype.onResize=function(t){var e;e=!!this.props.infinite&&(typeof t!="boolean"||!t),this.setItemsToShow(e)},i.prototype.componentDidUpdate=function(t,e){var n=this,s=t.keyBoardControl,a=t.autoPlay,r=t.children,l=e.containerWidth,h=e.domLoaded,u=e.currentSlide;if(this.containerRef&&this.containerRef.current&&this.containerRef.current.offsetWidth!==l&&(this.itemsToShowTimeout&&clearTimeout(this.itemsToShowTimeout),this.itemsToShowTimeout=setTimeout(function(){n.setItemsToShow(!0)},this.props.transitionDuration||_)),s&&!this.props.keyBoardControl&&window.removeEventListener("keyup",this.onKeyUp),!s&&this.props.keyBoardControl&&window.addEventListener("keyup",this.onKeyUp),a&&!this.props.autoPlay&&this.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=void 0),a||!this.props.autoPlay||this.autoPlay||(this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed)),r.length!==this.props.children.length?i.clonesTimeout=setTimeout(function(){n.props.infinite?n.setClones(n.state.slidesToShow,n.state.itemWidth,!0,!0):n.resetTotalItems()},this.props.transitionDuration||_):this.props.infinite&&this.state.currentSlide!==u&&this.correctClonesPosition({domLoaded:h}),this.transformPlaceHolder!==this.state.transform&&(this.transformPlaceHolder=this.state.transform),this.props.autoPlay&&this.props.rewind&&!this.props.infinite&&T.isInRightEnd(this.state)){var d=this.props.transitionDuration||_;i.isInThrottleTimeout=setTimeout(function(){n.setIsInThrottle(!1),n.resetAutoplayInterval(),n.goToSlide(0,void 0,!!n.props.rewindWithAnimation)},d+this.props.autoPlaySpeed)}},i.prototype.correctClonesPosition=function(t){var e=this,n=t.domLoaded,s=C.Children.toArray(this.props.children),a=T.checkClonesPosition(this.state,s,this.props),r=a.isReachingTheEnd,l=a.isReachingTheStart,h=a.nextSlide,u=a.nextPosition;this.state.domLoaded&&n&&(r||l)&&(this.isAnimationAllowed=!1,i.transformTimeout=setTimeout(function(){e.setState({transform:u,currentSlide:h})},this.props.transitionDuration||_))},i.prototype.next=function(t){var e=this;t===void 0&&(t=0);var n=this.props,s=n.afterChange,a=n.beforeChange;if(!T.notEnoughChildren(this.state)){var r=T.populateNextSlides(this.state,this.props,t),l=r.nextSlides,h=r.nextPosition,u=this.state.currentSlide;l!==void 0&&h!==void 0&&(typeof a=="function"&&a(l,this.getState()),this.isAnimationAllowed=!0,this.props.shouldResetAutoplay&&this.resetAutoplayInterval(),this.setState({transform:h,currentSlide:l},function(){typeof s=="function"&&(i.afterChangeTimeout=setTimeout(function(){s(u,e.getState())},e.props.transitionDuration||_))}))}},i.prototype.previous=function(t){var e=this;t===void 0&&(t=0);var n=this.props,s=n.afterChange,a=n.beforeChange;if(!T.notEnoughChildren(this.state)){var r=T.populatePreviousSlides(this.state,this.props,t),l=r.nextSlides,h=r.nextPosition;if(l!==void 0&&h!==void 0){var u=this.state.currentSlide;typeof a=="function"&&a(l,this.getState()),this.isAnimationAllowed=!0,this.props.shouldResetAutoplay&&this.resetAutoplayInterval(),this.setState({transform:h,currentSlide:l},function(){typeof s=="function"&&(i.afterChangeTimeout2=setTimeout(function(){s(u,e.getState())},e.props.transitionDuration||_))})}}},i.prototype.resetAutoplayInterval=function(){this.props.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed))},i.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize),this.props.keyBoardControl&&window.removeEventListener("keyup",this.onKeyUp),this.props.autoPlay&&this.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=void 0),this.itemsToShowTimeout&&clearTimeout(this.itemsToShowTimeout),i.clonesTimeout&&clearTimeout(i.clonesTimeout),i.isInThrottleTimeout&&clearTimeout(i.isInThrottleTimeout),i.transformTimeout&&clearTimeout(i.transformTimeout),i.afterChangeTimeout&&clearTimeout(i.afterChangeTimeout),i.afterChangeTimeout2&&clearTimeout(i.afterChangeTimeout2),i.afterChangeTimeout3&&clearTimeout(i.afterChangeTimeout3)},i.prototype.resetMoveStatus=function(){this.onMove=!1,this.initialX=0,this.lastX=0,this.direction="",this.initialY=0},i.prototype.getCords=function(t){var e=t.clientX,n=t.clientY;return{clientX:G.parsePosition(this.props,e),clientY:G.parsePosition(this.props,n)}},i.prototype.handleDown=function(t){if(!(!R.isMouseMoveEvent(t)&&!this.props.swipeable||R.isMouseMoveEvent(t)&&!this.props.draggable||this.isInThrottle)){var e=this.getCords(R.isMouseMoveEvent(t)?t:t.touches[0]),n=e.clientX,s=e.clientY;this.onMove=!0,this.initialX=n,this.initialY=s,this.lastX=n,this.isAnimationAllowed=!1}},i.prototype.handleMove=function(t){if(!(!R.isMouseMoveEvent(t)&&!this.props.swipeable||R.isMouseMoveEvent(t)&&!this.props.draggable||T.notEnoughChildren(this.state))){var e=this.getCords(R.isMouseMoveEvent(t)?t:t.touches[0]),n=e.clientX,s=e.clientY,a=this.initialX-n,r=this.initialY-s;if(this.onMove){if(!(Math.abs(a)>Math.abs(r)))return;var l=T.populateSlidesOnMouseTouchMove(this.state,this.props,this.initialX,this.lastX,n,this.transformPlaceHolder),h=l.direction,u=l.nextPosition,d=l.canContinue;h&&(this.direction=h,d&&u!==void 0&&this.setTransformDirectly(u)),this.lastX=n}}},i.prototype.handleOut=function(t){this.props.autoPlay&&!this.autoPlay&&(this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed));var e=t.type==="touchend"&&!this.props.swipeable,n=(t.type==="mouseleave"||t.type==="mouseup")&&!this.props.draggable;if(!e&&!n&&this.onMove){if(this.setAnimationDirectly(!0),this.direction==="right")if(this.initialX-this.lastX>=this.props.minimumTouchDrag){var s=Math.round((this.initialX-this.lastX)/this.state.itemWidth);this.next(s)}else this.correctItemsPosition(this.state.itemWidth,!0,!0);this.direction==="left"&&(this.lastX-this.initialX>this.props.minimumTouchDrag?(s=Math.round((this.lastX-this.initialX)/this.state.itemWidth),this.previous(s)):this.correctItemsPosition(this.state.itemWidth,!0,!0)),this.resetMoveStatus()}},i.prototype.isInViewport=function(t){var e=t.getBoundingClientRect(),n=e.top,s=n===void 0?0:n,a=e.left,r=a===void 0?0:a,l=e.bottom,h=l===void 0?0:l,u=e.right,d=u===void 0?0:u;return 0<=s&&0<=r&&h<=(window.innerHeight||document.documentElement.clientHeight)&&d<=(window.innerWidth||document.documentElement.clientWidth)},i.prototype.isChildOfCarousel=function(t){return!!(t instanceof Element&&this.listRef&&this.listRef.current)&&this.listRef.current.contains(t)},i.prototype.onKeyUp=function(t){var e=t.target;switch(t.keyCode){case 37:if(this.isChildOfCarousel(e))return this.previous();break;case 39:if(this.isChildOfCarousel(e))return this.next();break;case 9:if(this.isChildOfCarousel(e)&&e instanceof HTMLInputElement&&this.isInViewport(e))return this.next()}},i.prototype.handleEnter=function(t){R.isMouseMoveEvent(t)&&this.autoPlay&&this.props.autoPlay&&this.props.pauseOnHover&&(clearInterval(this.autoPlay),this.autoPlay=void 0)},i.prototype.goToSlide=function(t,e,n){var s=this;if(n===void 0&&(n=!0),!this.isInThrottle){var a=this.state.itemWidth,r=this.props,l=r.afterChange,h=r.beforeChange,u=this.state.currentSlide;typeof h!="function"||e&&(typeof e!="object"||e.skipBeforeChange)||h(t,this.getState()),this.isAnimationAllowed=n,this.props.shouldResetAutoplay&&this.resetAutoplayInterval(),this.setState({currentSlide:t,transform:-a*t},function(){s.props.infinite&&s.correctClonesPosition({domLoaded:!0}),typeof l!="function"||e&&(typeof e!="object"||e.skipAfterChange)||(i.afterChangeTimeout3=setTimeout(function(){l(u,s.getState())},s.props.transitionDuration||_))})}},i.prototype.getState=function(){return this.state},i.prototype.renderLeftArrow=function(t){var e=this,n=this.props,s=n.customLeftArrow,a=n.rtl;return C.createElement(ct.LeftArrow,{customLeftArrow:s,getState:function(){return e.getState()},previous:this.previous,disabled:t,rtl:a})},i.prototype.renderRightArrow=function(t){var e=this,n=this.props,s=n.customRightArrow,a=n.rtl;return C.createElement(ct.RightArrow,{customRightArrow:s,getState:function(){return e.getState()},next:this.next,disabled:t,rtl:a})},i.prototype.renderButtonGroups=function(){var t=this,e=this.props.customButtonGroup;return e?C.cloneElement(e,{previous:function(){return t.previous()},next:function(){return t.next()},goToSlide:function(n,s){return t.goToSlide(n,s)},carouselState:this.getState()}):null},i.prototype.renderDotsList=function(){var t=this;return C.createElement(Fe.default,{state:this.state,props:this.props,goToSlide:this.goToSlide,getState:function(){return t.getState()}})},i.prototype.renderCarouselItems=function(){var t=[];if(this.props.infinite){var e=C.Children.toArray(this.props.children);t=T.getClones(this.state.slidesToShow,e)}return C.createElement(Ne.default,{clones:t,goToSlide:this.goToSlide,state:this.state,notEnoughChildren:T.notEnoughChildren(this.state),props:this.props})},i.prototype.render=function(){var t=this.props,e=t.deviceType,n=t.arrows,s=t.renderArrowsWhenDisabled,a=t.removeArrowOnDeviceType,r=t.infinite,l=t.containerClass,h=t.sliderClass,u=t.customTransition,d=t.additionalTransfrom,c=t.renderDotsOutside,f=t.renderButtonGroupOutside,p=t.className,S=t.rtl,w=T.getInitialState(this.state,this.props),I=w.shouldRenderOnSSR,x=w.shouldRenderAtAll,y=T.isInLeftEnd(this.state),M=T.isInRightEnd(this.state),E=n&&!(a&&(e&&-1<a.indexOf(e)||this.state.deviceType&&-1<a.indexOf(this.state.deviceType)))&&!T.notEnoughChildren(this.state)&&x,L=!r&&y,k=!r&&M,V=G.getTransform(this.state,this.props);return C.createElement(C.Fragment,null,C.createElement("div",{className:"react-multi-carousel-list "+l+" "+p,dir:S?"rtl":"ltr",ref:this.containerRef},C.createElement("ul",{ref:this.listRef,className:"react-multi-carousel-track "+h,style:{transition:this.isAnimationAllowed?u||ft:"none",overflow:I?"hidden":"unset",transform:"translate3d("+(V+d)+"px,0,0)"},onMouseMove:this.handleMove,onMouseDown:this.handleDown,onMouseUp:this.handleOut,onMouseEnter:this.handleEnter,onMouseLeave:this.handleOut,onTouchStart:this.handleDown,onTouchMove:this.handleMove,onTouchEnd:this.handleOut},this.renderCarouselItems()),E&&(!L||s)&&this.renderLeftArrow(L),E&&(!k||s)&&this.renderRightArrow(k),x&&!f&&this.renderButtonGroups(),x&&!c&&this.renderDotsList()),x&&c&&this.renderDotsList(),x&&f&&this.renderButtonGroups())},i.defaultProps={slidesToSlide:1,infinite:!1,draggable:!0,swipeable:!0,arrows:!0,renderArrowsWhenDisabled:!1,containerClass:"",sliderClass:"",itemClass:"",keyBoardControl:!0,autoPlaySpeed:3e3,showDots:!1,renderDotsOutside:!1,renderButtonGroupOutside:!1,minimumTouchDrag:80,className:"",dotListClass:"",focusOnSelect:!1,centerMode:!1,additionalTransfrom:0,pauseOnHover:!0,shouldResetAutoplay:!0,rewind:!1,rtl:!1,rewindWithAnimation:!1},i}(C.Component);it.default=Ge;Object.defineProperty(et,"__esModule",{value:!0});var Ue=it;et.default=Ue.default;var $e=et;const He=Et($e);function ze(o){const i=ee("(orientation: landscape)"),{theme:t}=v.useContext(D),{mainBGColor:e,altTextColor:n}=B(t),s={superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:5},desktop:{breakpoint:{max:3e3,min:1024},items:3},tablet:{breakpoint:{max:1024,min:464},items:i?1:2},mobile:{breakpoint:{max:464,min:0},items:1}},a=localStorage.getItem(j)||mt;return m.jsx(Gt,{style:{backgroundColor:e},children:o.slides.map((r,l)=>{var h;return m.jsxs(Ut,{children:[m.jsx(H,{fontSize:24,textAlign:"left",fontFamily:'"Buenard"',fontWeight:"700",lineHeight:47,color:n,className:"carouselTitle",children:(h=r.library.title)==null?void 0:h[a]}),m.jsx($t,{children:m.jsx(He,{responsive:s,showDots:!1,removeArrowOnDeviceType:["tablet","mobile"],children:r.books.map((u,d)=>m.jsx(ne,{book:u,userHistory:o.userHistory,moveToBook:o.moveToBook},d))})})]},l)})})}const Ye=tt(pt)({display:"flex"}),Xe=tt(Ye)({justifyContent:"center",alignItems:"center"}),Ke=tt(Xe)({width:"100vw",height:"100dvh"});function Qe(o){const[i,t]=v.useState(!1),e=Jt(),n=zt(),{t:s}=q();v.useEffect(()=>{var u;(!o.books||o.books.length==0)&&(t(!0),ht.fetchLibrary().then(d=>{o.dispatch({type:A.SET_BOOKS,payload:{books:d}}),t(!1)}).catch(d=>{Yt.custom(c=>m.jsx(Kt,{text:s(d),visible:c.visible})),t(!1)})),o.currentUser&&((u=o.userHistory)==null?void 0:u.length)==0&&(t(!0),ht.fetchHistories(o.currentUser._id).then(d=>{o.dispatch({type:A.SET_USER_HISTORY,payload:{userHistories:d}}),t(!1)}).catch(d=>{t(!1)}))},[]);const a=()=>{n("/")},r=u=>{n(`/book?id=${u}`)},l=()=>{o.dispatch({type:A.RESET_USER}),o.dispatch({type:A.RESET_BOOK}),o.dispatch({type:A.RESET_PAGE_STATUS}),Zt.logout(),n("/")},h=()=>{n("/login")};return m.jsxs(Ke,{flexDirection:e?"column":"row",children:[m.jsx(re,{isLoggedIn:o.currentUser!=null,onLogoClicked:a,onLoginClicked:o.currentUser?l:h}),m.jsx(ze,{slides:o.books,userHistory:o.userHistory,moveToBook:r}),i&&m.jsx(Qt,{})]})}function Je(o){return{currentUser:o.user.currentUser,userHistory:o.books.userHistory,books:o.books.books}}const li=Ht(Je)(Qe);export{li as default};
