var no=Object.defineProperty;var ao=(e,o,t)=>o in e?no(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var Ie=(e,o,t)=>ao(e,typeof o!="symbol"?o+"":o,t);import{_ as y,b as d,ag as so,c as X,j as n,N as Q,a7 as io,o as ee,J as he,ab as me,ad as ke,Q as E,M as F,ah as xe,ai as ro,aj as lo,ak as be,al as we,am as je,ac as co}from"./index-CDMXNg3a.js";import{w as oe,x as te,s as r,y as ne,T as uo,z as po,A as go,D as fo,E as q,F as ae,G as Ae,P as xo,J as Ue,K as bo,M as He,N as pe,O as ye,S as se,g as ie,Q as ho,B,R as mo,u as le,_ as K,c as ko,d as yo,U as vo,e as V}from"./App-Dsa24REC.js";import{T as z,I as h,g as Co,a as Re}from"./images-DYrpb_iJ.js";import{S as Bo}from"./index-DXOiE9Un.js";import{C as G,L as So}from"./index-kXc-j-7b.js";import{b as Ee}from"./book.service-BN6ptQUU.js";import{b as Te}from"./bookmark.service-CssgXO9h.js";import{a as _e}from"./auth.service-Bknov-0C.js";import"./index-BZTIZTm1.js";import"./axios-BimPEqV4.js";function Io(e){return oe("MuiCollapse",e)}te("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const wo=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],jo=e=>{const{orientation:o,classes:t}=e,a={root:["root",`${o}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${o}`],wrapperInner:["wrapperInner",`${o}`]};return ae(a,Io,t)},Ao=r("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,o[t.orientation],t.state==="entered"&&o.entered,t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&o.hidden]}})(({theme:e,ownerState:o})=>y({height:0,overflow:"hidden",transition:e.transitions.create("height")},o.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},o.state==="entered"&&y({height:"auto",overflow:"visible"},o.orientation==="horizontal"&&{width:"auto"}),o.state==="exited"&&!o.in&&o.collapsedSize==="0px"&&{visibility:"hidden"})),Ro=r("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,o)=>o.wrapper})(({ownerState:e})=>y({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),Eo=r("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,o)=>o.wrapperInner})(({ownerState:e})=>y({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),We=d.forwardRef(function(o,t){const a=ne({props:o,name:"MuiCollapse"}),{addEndListener:s,children:x,className:i,collapsedSize:c="0px",component:f,easing:m,in:S,onEnter:w,onEntered:j,onEntering:k,onExit:I,onExited:P,onExiting:T,orientation:v="vertical",style:_,timeout:A=so.standard,TransitionComponent:O=uo}=a,l=X(a,wo),p=y({},a,{orientation:v,collapsedSize:c}),b=jo(p),D=po(),g=go(),u=d.useRef(null),R=d.useRef(),$=typeof c=="number"?`${c}px`:c,N=v==="horizontal",M=N?"width":"height",L=d.useRef(null),ge=fo(t,L),J=C=>U=>{if(C){const W=L.current;U===void 0?C(W):C(W,U)}},fe=()=>u.current?u.current[N?"clientWidth":"clientHeight"]:0,Xe=J((C,U)=>{u.current&&N&&(u.current.style.position="absolute"),C.style[M]=$,w&&w(C,U)}),Je=J((C,U)=>{const W=fe();u.current&&N&&(u.current.style.position="");const{duration:re,easing:ce}=Ae({style:_,timeout:A,easing:m},{mode:"enter"});if(A==="auto"){const Se=D.transitions.getAutoHeightDuration(W);C.style.transitionDuration=`${Se}ms`,R.current=Se}else C.style.transitionDuration=typeof re=="string"?re:`${re}ms`;C.style[M]=`${W}px`,C.style.transitionTimingFunction=ce,k&&k(C,U)}),Qe=J((C,U)=>{C.style[M]="auto",j&&j(C,U)}),Ze=J(C=>{C.style[M]=`${fe()}px`,I&&I(C)}),eo=J(P),oo=J(C=>{const U=fe(),{duration:W,easing:re}=Ae({style:_,timeout:A,easing:m},{mode:"exit"});if(A==="auto"){const ce=D.transitions.getAutoHeightDuration(U);C.style.transitionDuration=`${ce}ms`,R.current=ce}else C.style.transitionDuration=typeof W=="string"?W:`${W}ms`;C.style[M]=$,C.style.transitionTimingFunction=re,T&&T(C)}),to=C=>{A==="auto"&&g.start(R.current||0,C),s&&s(L.current,C)};return n.jsx(O,y({in:S,onEnter:Xe,onEntered:Qe,onEntering:Je,onExit:Ze,onExited:eo,onExiting:oo,addEndListener:to,nodeRef:L,timeout:A==="auto"?null:A},l,{children:(C,U)=>n.jsx(Ao,y({as:f,className:q(b.root,i,{entered:b.entered,exited:!S&&$==="0px"&&b.hidden}[C]),style:y({[N?"minWidth":"minHeight"]:$},_),ref:ge},U,{ownerState:y({},p,{state:C}),children:n.jsx(Ro,{ownerState:y({},p,{state:C}),className:b.wrapper,ref:u,children:n.jsx(Eo,{ownerState:y({},p,{state:C}),className:b.wrapperInner,children:x})})}))}))});We.muiSupportAuto=!0;const Ke=d.createContext({});function To(e){return oe("MuiAccordion",e)}const de=te("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),_o=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],Po=e=>{const{classes:o,square:t,expanded:a,disabled:s,disableGutters:x}=e;return ae({root:["root",!t&&"rounded",a&&"expanded",s&&"disabled",!x&&"gutters"],region:["region"]},To,o)},Do=r(xo,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[{[`& .${de.region}`]:o.region},o.root,!t.square&&o.rounded,!t.disableGutters&&o.gutters]}})(({theme:e})=>{const o={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],o),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],o)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${de.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${de.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e})=>({variants:[{props:o=>!o.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:o=>!o.disableGutters,style:{[`&.${de.expanded}`]:{margin:"16px 0"}}}]})),Oo=d.forwardRef(function(o,t){const a=ne({props:o,name:"MuiAccordion"}),{children:s,className:x,defaultExpanded:i=!1,disabled:c=!1,disableGutters:f=!1,expanded:m,onChange:S,square:w=!1,slots:j={},slotProps:k={},TransitionComponent:I,TransitionProps:P}=a,T=X(a,_o),[v,_]=Ue({controlled:m,default:i,name:"Accordion",state:"expanded"}),A=d.useCallback(N=>{_(!v),S&&S(N,!v)},[v,S,_]),[O,...l]=d.Children.toArray(s),p=d.useMemo(()=>({expanded:v,disabled:c,disableGutters:f,toggle:A}),[v,c,f,A]),b=y({},a,{square:w,disabled:c,disableGutters:f,expanded:v}),D=Po(b),g=y({transition:I},j),u=y({transition:P},k),[R,$]=bo("transition",{elementType:We,externalForwardedProps:{slots:g,slotProps:u},ownerState:b});return n.jsxs(Do,y({className:q(D.root,x),ref:t,ownerState:b,square:w},T,{children:[n.jsx(Ke.Provider,{value:p,children:O}),n.jsx(R,y({in:v,timeout:"auto"},$,{children:n.jsx("div",{"aria-labelledby":O.props.id,id:O.props["aria-controls"],role:"region",className:D.region,children:l})}))]}))});function $o(e){return oe("MuiAccordionDetails",e)}te("MuiAccordionDetails",["root"]);const No=["className"],Mo=e=>{const{classes:o}=e;return ae({root:["root"]},$o,o)},Lo=r("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,o)=>o.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),Fo=d.forwardRef(function(o,t){const a=ne({props:o,name:"MuiAccordionDetails"}),{className:s}=a,x=X(a,No),i=a,c=Mo(i);return n.jsx(Lo,y({className:q(c.root,s),ref:t,ownerState:i},x))});function zo(e){return oe("MuiAccordionSummary",e)}const Z=te("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Uo=["children","className","expandIcon","focusVisibleClassName","onClick"],Ho=e=>{const{classes:o,expanded:t,disabled:a,disableGutters:s}=e;return ae({root:["root",t&&"expanded",a&&"disabled",!s&&"gutters"],focusVisible:["focusVisible"],content:["content",t&&"expanded",!s&&"contentGutters"],expandIconWrapper:["expandIconWrapper",t&&"expanded"]},zo,o)},Wo=r(He,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,o)=>o.root})(({theme:e})=>{const o={duration:e.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],o),[`&.${Z.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Z.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${Z.disabled})`]:{cursor:"pointer"},variants:[{props:t=>!t.disableGutters,style:{[`&.${Z.expanded}`]:{minHeight:64}}}]}}),Ko=r("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,o)=>o.content})(({theme:e})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:o=>!o.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${Z.expanded}`]:{margin:"20px 0"}}}]})),Go=r("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,o)=>o.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${Z.expanded}`]:{transform:"rotate(180deg)"}})),Vo=d.forwardRef(function(o,t){const a=ne({props:o,name:"MuiAccordionSummary"}),{children:s,className:x,expandIcon:i,focusVisibleClassName:c,onClick:f}=a,m=X(a,Uo),{disabled:S=!1,disableGutters:w,expanded:j,toggle:k}=d.useContext(Ke),I=v=>{k&&k(v),f&&f(v)},P=y({},a,{expanded:j,disabled:S,disableGutters:w}),T=Ho(P);return n.jsxs(Wo,y({focusRipple:!1,disableRipple:!0,disabled:S,component:"div","aria-expanded":j,className:q(T.root,x),focusVisibleClassName:q(T.focusVisible,c),onClick:I,ref:t,ownerState:P},m,{children:[n.jsx(Ko,{className:T.content,ownerState:P,children:s}),i&&n.jsx(Go,{className:T.expandIconWrapper,ownerState:P,children:i})]}))});function qo(e){return oe("MuiPagination",e)}te("MuiPagination",["root","ul","outlined","text"]);const Yo=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Xo(e={}){const{boundaryCount:o=1,componentName:t="usePagination",count:a=1,defaultPage:s=1,disabled:x=!1,hideNextButton:i=!1,hidePrevButton:c=!1,onChange:f,page:m,showFirstButton:S=!1,showLastButton:w=!1,siblingCount:j=1}=e,k=X(e,Yo),[I,P]=Ue({controlled:m,default:s,name:t,state:"page"}),T=(g,u)=>{m||P(u),f&&f(g,u)},v=(g,u)=>{const R=u-g+1;return Array.from({length:R},($,N)=>g+N)},_=v(1,Math.min(o,a)),A=v(Math.max(a-o+1,o+1),a),O=Math.max(Math.min(I-j,a-o-j*2-1),o+2),l=Math.min(Math.max(I+j,o+j*2+2),A.length>0?A[0]-2:a-1),p=[...S?["first"]:[],...c?[]:["previous"],..._,...O>o+2?["start-ellipsis"]:o+1<a-o?[o+1]:[],...v(O,l),...l<a-o-1?["end-ellipsis"]:a-o>o?[a-o]:[],...A,...i?[]:["next"],...w?["last"]:[]],b=g=>{switch(g){case"first":return 1;case"previous":return I-1;case"next":return I+1;case"last":return a;default:return null}},D=p.map(g=>typeof g=="number"?{onClick:u=>{T(u,g)},type:"page",page:g,selected:g===I,disabled:x,"aria-current":g===I?"true":void 0}:{onClick:u=>{T(u,b(g))},type:g,page:b(g),selected:!1,disabled:x||g.indexOf("ellipsis")===-1&&(g==="next"||g==="last"?I>=a:I<=1)});return y({items:D},k)}function Jo(e){return oe("MuiPaginationItem",e)}const H=te("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),Pe=pe(n.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),De=pe(n.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Oe=pe(n.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),$e=pe(n.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Qo=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Ge=(e,o)=>{const{ownerState:t}=e;return[o.root,o[t.variant],o[`size${ee(t.size)}`],t.variant==="text"&&o[`text${ee(t.color)}`],t.variant==="outlined"&&o[`outlined${ee(t.color)}`],t.shape==="rounded"&&o.rounded,t.type==="page"&&o.page,(t.type==="start-ellipsis"||t.type==="end-ellipsis")&&o.ellipsis,(t.type==="previous"||t.type==="next")&&o.previousNext,(t.type==="first"||t.type==="last")&&o.firstLast]},Zo=e=>{const{classes:o,color:t,disabled:a,selected:s,size:x,shape:i,type:c,variant:f}=e,m={root:["root",`size${ee(x)}`,f,i,t!=="standard"&&`color${ee(t)}`,t!=="standard"&&`${f}${ee(t)}`,a&&"disabled",s&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[c]],icon:["icon"]};return ae(m,Jo,o)},et=r("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Ge})(({theme:e,ownerState:o})=>y({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${H.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},o.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},o.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),ot=r(He,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Ge})(({theme:e,ownerState:o})=>y({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${H.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${H.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${H.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Q(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${H.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Q(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${H.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},o.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},o.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},o.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:o})=>y({},o.variant==="text"&&{[`&.${H.selected}`]:y({},o.color!=="standard"&&{color:(e.vars||e).palette[o.color].contrastText,backgroundColor:(e.vars||e).palette[o.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[o.color].main}},[`&.${H.focusVisible}`]:{backgroundColor:(e.vars||e).palette[o.color].dark}},{[`&.${H.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},o.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${H.selected}`]:y({},o.color!=="standard"&&{color:(e.vars||e).palette[o.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / 0.5)`:Q(e.palette[o.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:Q(e.palette[o.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Q(e.palette[o.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${H.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Q(e.palette[o.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${H.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),tt=r("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,o)=>o.icon})(({theme:e,ownerState:o})=>y({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},o.size==="small"&&{fontSize:e.typography.pxToRem(18)},o.size==="large"&&{fontSize:e.typography.pxToRem(22)})),nt=d.forwardRef(function(o,t){const a=ne({props:o,name:"MuiPaginationItem"}),{className:s,color:x="standard",component:i,components:c={},disabled:f=!1,page:m,selected:S=!1,shape:w="circular",size:j="medium",slots:k={},type:I="page",variant:P="text"}=a,T=X(a,Qo),v=y({},a,{color:x,disabled:f,selected:S,shape:w,size:j,type:I,variant:P}),_=io(),A=Zo(v),l=(_?{previous:k.next||c.next||$e,next:k.previous||c.previous||Oe,last:k.first||c.first||Pe,first:k.last||c.last||De}:{previous:k.previous||c.previous||Oe,next:k.next||c.next||$e,first:k.first||c.first||Pe,last:k.last||c.last||De})[I];return I==="start-ellipsis"||I==="end-ellipsis"?n.jsx(et,{ref:t,ownerState:v,className:q(A.root,s),children:"…"}):n.jsxs(ot,y({ref:t,ownerState:v,component:i,disabled:f,className:q(A.root,s)},T,{children:[I==="page"&&m,l?n.jsx(tt,{as:l,ownerState:v,className:A.icon}):null]}))}),at=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],st=e=>{const{classes:o,variant:t}=e;return ae({root:["root",t],ul:["ul"]},qo,o)},it=r("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,o[t.variant]]}})({}),rt=r("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,o)=>o.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function lt(e,o,t){return e==="page"?`${t?"":"Go to "}page ${o}`:`Go to ${e} page`}const ct=d.forwardRef(function(o,t){const a=ne({props:o,name:"MuiPagination"}),{boundaryCount:s=1,className:x,color:i="standard",count:c=1,defaultPage:f=1,disabled:m=!1,getItemAriaLabel:S=lt,hideNextButton:w=!1,hidePrevButton:j=!1,renderItem:k=D=>n.jsx(nt,y({},D)),shape:I="circular",showFirstButton:P=!1,showLastButton:T=!1,siblingCount:v=1,size:_="medium",variant:A="text"}=a,O=X(a,at),{items:l}=Xo(y({},a,{componentName:"Pagination"})),p=y({},a,{boundaryCount:s,color:i,count:c,defaultPage:f,disabled:m,getItemAriaLabel:S,hideNextButton:w,hidePrevButton:j,renderItem:k,shape:I,showFirstButton:P,showLastButton:T,siblingCount:v,size:_,variant:A}),b=st(p);return n.jsx(it,y({"aria-label":"pagination navigation",className:q(b.root,x),ownerState:p,ref:t},O,{children:n.jsx(rt,{className:b.ul,ownerState:p,children:l.map((D,g)=>n.jsx("li",{children:k(y({},D,{color:i,"aria-label":S(D.type,D.page,D.selected),shape:I,size:_,variant:A}))},g))})}))});var ve={},dt=he;Object.defineProperty(ve,"__esModule",{value:!0});var Ve=ve.default=void 0,ut=dt(ye()),pt=n;Ve=ve.default=(0,ut.default)((0,pt.jsx)("path",{d:"m10 17 5-5-5-5z"}),"ArrowRight");var Ce={},gt=he;Object.defineProperty(Ce,"__esModule",{value:!0});var qe=Ce.default=void 0,ft=gt(ye()),xt=n;qe=Ce.default=(0,ft.default)((0,xt.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp");function bt(e){const[o,t]=d.useState(!1),{theme:a}=d.useContext(se),{backgroundColor:s,topTextColor:x}=ie(a),i=x;return n.jsx(ho,{iconcolor:i,children:n.jsxs(Oo,{onChange:()=>t(c=>!c),style:{backgroundColor:s},children:[n.jsx(Vo,{expandIcon:o?n.jsx(qe,{}):n.jsx(Ve,{}),children:n.jsx(z,{color:x,fontWeight:"700",children:e.label})}),n.jsx(Fo,{children:e.detail})]})})}function ht(e){return n.jsx(ct,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function Ne(){const{innerWidth:e,innerHeight:o}=window;return{width:e,height:o}}function mt(){const[e,o]=d.useState(Ne());return d.useEffect(()=>{function t(){o(Ne())}return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),e}var Be={},kt=he;Object.defineProperty(Be,"__esModule",{value:!0});var Ye=Be.default=void 0,yt=kt(ye()),vt=n;Ye=Be.default=(0,yt.default)((0,vt.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const Ct=r(B)({display:"flex",position:"relative",width:"100%"}),Bt=r("img")({width:"100%",marginTop:"57px"}),St=r(B)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),It=r(B)({display:"flex",alignItems:"baseline"}),wt=r(B)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),jt=r("img")({width:"100%",height:"100%"}),At=r(B)({margin:0,marginLeft:"12px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),Rt=r("img")({cursor:"pointer","&:active":{opacity:"0.8"}}),Et=r(B)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),Tt=r("img")({width:"100%","&:active":{opacity:"0.8"}}),_t=r("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}}),Pt=r(B)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Dt=r(B)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Ot=r(B)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),Me=r(B)(({active:e,bordercolor:o})=>({width:"50%",height:"37.9px",border:`1px solid ${o}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer"})),Le=r("img")({}),Fe=r(B)(({active:e})=>({marginLeft:"5px"})),$t=r(B)({width:"100%",display:"flex",flexDirection:"column"}),Nt=r(B)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),Mt=r(B)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});r(B)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const Lt=r(B)({display:"flex",flexDirection:"column"}),Ft=r(B)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),zt=r(B)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});r(B)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const Ut=r(B)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),Ht=r("img")({cursor:"pointer",marginRight:"15px"}),Wt=r(mo)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),Kt=r(B)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),Gt=r("img")({width:"63px"}),Vt=r(B)({margin:"0px",marginLeft:"24px",fontFamily:"Inter",fontWeight:"400",fontSize:"16px",lineHeight:"24px","@media (max-height: 600px)":{fontSize:"14px"}}),qt=r(B)({width:"100%",justifyContent:"space-between",alignItems:"center",marginTop:"15px"}),Yt=r(B)({width:"100%",height:"30px",justifyContent:"space-between",alignItems:"center",display:"flex",padding:"0px 7px"});r(Ye)({marginLeft:"-33px",color:"#17637D",height:"30px"});const Xt=r(B)(({underline:e,progress:o,progresscolor:t})=>({width:"calc(100% - 60px)",height:"30px",display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer","& div:first-of-type":{width:"80%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},borderBottom:e=="true"?`1px solid ${t}80`:"none","::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${o}%`,borderBottom:e=="true"?`2px solid ${t}`:"none"}})),Jt=r(B)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),ze=r("img")({marginLeft:"3px",cursor:"pointer"}),Qt=r(B)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),Zt=r(B)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),en=r(B)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),on=r(B)(({style:e,disable:o,readalready:t,readbgcolor:a,readtextcolor:s})=>({opacity:o=="true"?.5:1,pointerEvents:o=="true"?"none":"initial",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:t=="true"?`${a} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:t=="true"?`${s} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:t=="true"?`${s} !important`:`${e.color} !important`}}));function tn(e){var i,c;const{t:o}=le(),{theme:t}=d.useContext(se),{buttonTextColor:a,logoTextColor:s}=ie(t),x=localStorage.getItem(me)||ke;return n.jsxs(Ct,{children:[n.jsx(Bt,{src:t==E.DEFAULT||t==E.DARK?h.book_subtract:t==E.BLACK_AND_WHITE?h.book_subtract_BAW:t==E.SAPPHIRE?h.book_subtract_sapphire:h.book_subtract_easyocean}),n.jsxs(St,{children:[n.jsxs(It,{children:[n.jsxs(wt,{onClick:e.onLogoClick,children:[n.jsx(jt,{src:e.isLoading?h.default_cover:e.markImg||h.default_cover}),n.jsx(z,{fontFamily:"Kapakana",fontSize:25,lineHeight:24,fontWeight:"400",color:a,children:(i=e.markTitle)==null?void 0:i[x]})]}),n.jsx(At,{children:n.jsx(z,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:s,children:e.isLoading?o("Book Title"):(c=e.markTitle)==null?void 0:c[x]})})]}),n.jsx(Rt,{src:t==E.EASY_OCEAN?h.search_easyocean:h.search,onClick:e.onSearchClick})]}),n.jsx(Et,{children:n.jsx(Tt,{src:t==E.DEFAULT||t==E.DARK?h.close2:t==E.BLACK_AND_WHITE?h.close2_BAW:t==E.SAPPHIRE?h.close2_sapphire:h.close2_easyocean,onClick:e.onCloseClick})}),n.jsx(_t,{src:t==E.DEFAULT||t==E.EASY_OCEAN?h.setting:h.setting_white,onClick:e.onSettingClick})]})}function nn(e){var g;const[o,t]=d.useState([]),[a,s]=d.useState(),[x,i]=d.useState(!1),[c,f]=d.useState(!1),[m,S]=d.useState(0),{theme:w}=d.useContext(se),{mainBGColor:j,altTextColor:k,backgroundColor:I,topTextColor:P,highlightColor:T,buttonColor:v,buttonTextColor:_}=ie(w),{t:A}=le(),O=localStorage.getItem(me)||ke,l=d.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const u=e.userHistory.filter(R=>R.bookId==e.bookId);if(u&&u.length>0)return u[0].readChapterIds}return[]},[e.userHistory]),p=e.subBookId;d.useEffect(()=>{e.openedSubBook==e.subBookId?i(!0):i(!1)},[e.openedSubBook]),d.useEffect(()=>{var $,N;const u=e.subBooks.filter(M=>M.subBookId===p);let R=0;if(u&&u.length>0&&(R=($=u[0].chapterInfos)==null?void 0:$.length,s(u[0])),e.currentUser){const M=e.userHistory.filter(L=>L.bookId==e.bookId);if(M&&M.length>0){const L=M[0].subBooks.filter(ge=>ge.subBookId==p);L&&L.length>0&&S(Math.floor(((N=L[0])==null?void 0:N.readChapters)/R*100))}}if(e.subBooks&&e.subBooks.length>0){const M=e.subBooks.filter(L=>L.subBookId==p);if(M&&M.length>0){const L=M[0].chapterInfos;t(L)}}},[e.subBooks,e.userHistory]),d.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const u=e.subBookInfos.filter(R=>R.subBookId==p);u&&u.length>0?f(!0):f(!1)}},[]);const b=d.useCallback(u=>{f(R=>!R),e.onDownload(u)},[]),D=()=>{i(!x),e.handleOpenedSubBook(e.subBookId)};return n.jsxs(qt,{children:[n.jsxs(Yt,{children:[n.jsxs(Xt,{underline:m!=0?"true":"false",progress:m,progresscolor:v,onClick:D,children:[n.jsx(z,{fontFamily:'"Baloo Da 2"',color:k,children:(g=a==null?void 0:a.subBookTitle)==null?void 0:g[O]}),e.currentUser&&m!=0&&n.jsx(z,{fontFamily:'"Baloo Da 2"',color:v,children:m.toString()+"%"})]}),n.jsxs(Jt,{isdownloaded:c?"true":"false",children:[n.jsx(ze,{src:c?w==E.DEFAULT||w==E.EASY_OCEAN?h.download_cancel:h.download_cancel_white:w==E.DEFAULT||w==E.EASY_OCEAN?h.download:h.download_white,onClick:()=>b(p)}),c&&n.jsx(ze,{src:w==E.DEFAULT||w==E.EASY_OCEAN?h.download_refresh:h.download_refresh_white,onClick:()=>e.onDownloadRefresh(p)})]})]}),x&&n.jsxs(Qt,{style:{backgroundColor:I},children:[n.jsxs(Zt,{children:[n.jsx(z,{fontFamily:"Inter",color:P,children:A("Surah")}),n.jsx(z,{fontFamily:"Inter",color:T,children:A("Chapter")})]}),n.jsx(en,{children:o==null?void 0:o.map((u,R)=>n.jsx(on,{disable:u.isTranslated?"false":"true",readalready:l&&l.length>0&&l.includes(u.chapterId)?"true":"false",style:{backgroundColor:j,color:k},readbgcolor:v,readtextcolor:_,onClick:()=>{var $,N;e.moveToReading(u.chapterId,($=e.bookTitle)==null?void 0:$[O],(N=a.subBookTitle)==null?void 0:N[O],a.subBookId)},children:n.jsx(z,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:u.chapterNumber})},R))})]})]})}function an(e){return n.jsx(n.Fragment,{children:e.subBooks&&e.subBooks.length>0&&e.subBooks.map((o,t)=>n.jsx(nn,{bookId:e.bookId,bookTitle:e.bookTitle,subBooks:e.subBooks,subBookId:o.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},t))})}function sn(e){const[o,t]=d.useState(""),[a,s]=d.useState([]),[x,i]=d.useState(1),[c,f]=d.useState([]),{t:m}=le(),{theme:S}=d.useContext(se),{backgroundColor:w,topTextColor:j,mainTextColor:k}=ie(S),I=localStorage.getItem(me)||ke,P=Co(e.deviceHeight),T=x*P,v=T-P,_=e.currentUser&&a.slice(v,T);d.useEffect(()=>{if(e.subBooks&&e.subBooks.length>0){const g=e.subBooks.map(u=>{var R;return{label:(R=u.subBookTitle)==null?void 0:R[I],value:u.subBookId}});g.unshift({label:m("All Books"),value:"all"}),f(g)}},[e.subBooks]),d.useEffect(()=>{c.length>0&&t(c[0].value)},[c]),d.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const g=e.bookmark.filter(u=>u.subBookId===o);s(o==="all"||o===""?e.bookmark:g)}else s([]),i(0);x>1&&_.length==1&&i(g=>g-1)},[e.bookmark]);const A=(g,u)=>{i(u)},O=d.useCallback(g=>{const u=g.target.value;t(u);const R=e.bookmark.filter($=>$.subBookId===u);s(u==="all"?e.bookmark:R)},[e.bookmark]),l=()=>n.jsx(Nt,{style:{backgroundColor:w},children:n.jsx(bt,{label:m("Filter"),detail:n.jsxs(Mt,{children:[n.jsx(z,{color:j,children:m("Show")}),n.jsx(Bo,{label:"",options:c,value:o,backgroundColor:w,textColor:j,onChange:O})]})})}),p=()=>n.jsx(Lt,{children:(_==null?void 0:_.length)>0&&_.map((g,u)=>{var R;return n.jsxs(B,{children:[n.jsxs(Ft,{children:[n.jsxs(zt,{onClick:()=>e.moveToReadingFromBookmark(g._id),children:[n.jsx(z,{color:k,children:(R=g.subBookTitle)==null?void 0:R[I]}),n.jsx(z,{color:k,children:m("Surah Bookmark")+" "+g.chapterNumber+", "+m("Aya")+" "+g.verseNumber})]}),n.jsx(Ht,{src:S==E.DEFAULT||S==E.EASY_OCEAN||S==E.EASY_SUNRISE?h.black_bookmark:h.white_bookmark,onClick:()=>e.removeBookmark(g._id)})]}),n.jsx(Ut,{})]},u)})}),b=()=>n.jsx(Wt,{buttoncolor:k,children:n.jsx(ht,{count:e.currentUser?Math.ceil(a.length/P):0,page:x,hidePrevButton:!0,hideNextButton:!0,onChange:A})}),D=()=>n.jsxs(Kt,{style:{backgroundColor:w},children:[n.jsx(Gt,{src:S==E.DEFAULT||S==E.BLACK_AND_WHITE?h.swipe:S==E.EASY_OCEAN?h.swipe_easyocean:h.swipe_white}),n.jsx(Vt,{style:{color:j},children:m("Bookmark Help")})]});return n.jsxs($t,{children:[l(),p(),b(),D()]})}function rn(e){const[o,t]=d.useState(F),{t:a}=le(),{theme:s}=d.useContext(se),{mainBGColor:x,headerBGColor:i,buttonColor:c,buttonTextColor:f,mainTextColor:m}=ie(s),S=w=>{e.currentUser?t(w):K.custom(j=>n.jsx(G,{text:a("Bookmark Read Description"),visible:j.visible}))};return n.jsx(Pt,{style:{backgroundColor:i},children:n.jsxs(Dt,{style:{backgroundColor:x},children:[n.jsxs(Ot,{children:[n.jsxs(Me,{active:o==F?"true":"false",style:{backgroundColor:o==F?c:x},bordercolor:m,onClick:()=>S(F),children:[n.jsx(Le,{src:s==E.DEFAULT?h.index:s==E.EASY_OCEAN?o==F?h.index_active:h.index:o==F?h.index:h.index_active}),n.jsx(Fe,{active:o==F?"true":"false",children:n.jsx(z,{fontSize:16,fontWeight:"500",lineHeight:24,color:o==F?f:m,children:a("Index")})})]}),n.jsxs(Me,{active:o==F?"false":"true",style:{backgroundColor:o==xe?c:x},bordercolor:m,onClick:()=>S(xe),children:[n.jsx(Le,{src:s==E.DEFAULT?h.bookmark2_default:s==E.EASY_OCEAN?o==F?h.bookmark2_default:h.bookmark2_white:o==F?h.bookmark2_white:h.bookmark2_default}),n.jsx(Fe,{active:o==F?"false":"true",children:n.jsx(z,{fontSize:16,fontWeight:"500",lineHeight:24,color:o==xe?f:m,children:a("Bookmarks")})})]})]}),o==F?n.jsx(an,{bookId:e.bookId,bookTitle:e.bookTitle,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):n.jsx(sn,{subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark,deviceHeight:e.deviceHeight,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const ln=ro,Y=lo,cn=1;class dn{constructor(){Ie(this,"db",null)}async initDB(){return new Promise((o,t)=>{const a=indexedDB.open(ln,cn);a.onerror=()=>t(a.error),a.onsuccess=()=>{this.db=a.result,o()},a.onupgradeneeded=s=>{s.target.result.createObjectStore(Y,{keyPath:"subBookId"})}})}async saveSubBookInfo(o){return this.db||await this.initDB(),new Promise((t,a)=>{const i=this.db.transaction([Y],"readwrite").objectStore(Y).put(o);i.onerror=()=>a(i.error),i.onsuccess=()=>t()})}async getSubBookInfo(o){return this.db||await this.initDB(),new Promise((t,a)=>{const i=this.db.transaction([Y],"readonly").objectStore(Y).get(o);i.onerror=()=>a(i.error),i.onsuccess=()=>t(i.result)})}async removeSubBookInfo(o){return this.db||await this.initDB(),new Promise((t,a)=>{const i=this.db.transaction([Y],"readwrite").objectStore(Y).delete(o);i.onerror=()=>a(i.error),i.onsuccess=()=>t()})}}const ue=new dn,un=r(B)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function pn(e){const[o,t]=d.useState(),[a,s]=d.useState(!1),i=new URLSearchParams(window.location.search).get("id")||"",c=yo(),{t:f}=le(),{height:m}=mt(),{theme:S}=d.useContext(se),{mainBGColor:w}=ie(S);d.useContext(vo);const j=d.useCallback(()=>{Ee.fetchBookInfo(i).then(l=>{e.dispatch({type:V.ADD_BOOKINFO,payload:{bookInfo:l}}),s(!1),t(l)}).catch(l=>{K.custom(p=>n.jsx(G,{text:f(l),type:be.BOOKMARK,visible:p.visible})),s(!1)})},[i,e.dispatch,f]),k=d.useCallback(async l=>{try{const p=await Ee.fetchSubBookInfo(l);e.dispatch({type:V.ADD_SUBBOOKINFO,payload:{subBookInfo:p}}),await ue.saveSubBookInfo(p),s(!1)}catch(p){K.custom(b=>n.jsx(G,{text:f(p),visible:b.visible})),s(!1)}},[e.dispatch,f]);d.useEffect(()=>{if(s(!0),!e.bookInfos||e.bookInfos.length===0)j();else{const l=e.bookInfos.filter(p=>p.bookId===i);l.length>0?(t(l[0]),s(!1)):j()}e.currentUser&&Te.fetchBookmarks().then(l=>{e.dispatch({type:V.SET_BOOKMARKS,payload:{bookmark:l}})}).catch(l=>{l.status==401&&l.response.data.message==we&&(K.custom(p=>n.jsx(G,{text:f(l.response.data.message),visible:p.visible})),_e.logout(),c("/login"))})},[i,j,e.bookInfos,e.currentUser,e.dispatch,f]);const I=()=>{K.custom(l=>n.jsx(G,{text:f("Not Built Yet"),visible:l.visible}))},P=(l,p,b,D)=>{c(`/reading?chapterId=${l}&book=${p}&subBook=${b}&subBookId=${D}&bookId=${i}`)},T=d.useCallback(async l=>{s(!0),Re()<je?await ue.getSubBookInfo(l)?(await ue.removeSubBookInfo(l),e.dispatch({type:V.REMOVE_SUBBOOKINFO,payload:{subBookId:l}})):await k(l):K.custom(b=>n.jsx(G,{text:f("Not Enough Space"),visible:b.visible})),s(!1)},[k,e.dispatch,f]),v=d.useCallback(async l=>{s(!0),await ue.removeSubBookInfo(l),e.dispatch({type:V.REMOVE_SUBBOOKINFO,payload:{subBookId:l}}),Re()<je?await k(l):K.custom(b=>n.jsx(G,{text:f("Not Enough Space"),visible:b.visible})),s(!1)},[k,e.dispatch,f]),_=d.useCallback(l=>{if(s(!0),e.bookmark&&e.bookmark.length>0){const p=e.bookmark.filter(b=>b._id===l);if(p&&p.length>0){const{chapterId:b,bookTitle:D,subBookId:g,subBookTitle:u,verseId:R}=p[0];c(`/reading?chapterId=${b}&book=${D.en}&subBook=${u.en}&subBookId=${g}&verseId=${R}&bookId=${i}`),s(!1)}}},[i,c,e.bookmark]),A=d.useCallback(l=>{s(!0),Te.deleteBookmark(l).then(p=>{e.dispatch({type:V.REMOVE_BOOKMARK,payload:{bookmarkId:l}}),K.custom(b=>n.jsx(G,{text:f(p.message),type:be.BOOKMARK,visible:b.visible})),s(!1)}).catch(p=>{p.status==401&&p.response.data.message==we&&(K.custom(b=>n.jsx(G,{text:f(p.response.data.message),type:be.BOOKMARK,visible:b.visible})),_e.logout(),c("/login")),s(!1)})},[e.dispatch,f]),O=d.useCallback(l=>{e.openedSubBook&&e.openedSubBook==l?e.dispatch({type:V.SET_OPENED_SUBBOOK,payload:{openedSubBook:""}}):e.dispatch({type:V.SET_OPENED_SUBBOOK,payload:{openedSubBook:l}})},[e.openedSubBook,e.dispatch]);return n.jsxs(un,{style:{backgroundColor:w},children:[n.jsx(tn,{markImg:co+(o==null?void 0:o.bookImage),markTitle:o==null?void 0:o.bookTitle,isLoading:a,onLogoClick:()=>c("/"),onCloseClick:()=>c("/library"),onSettingClick:()=>c("/settings"),onSearchClick:I}),n.jsx(rn,{bookId:i,bookTitle:o==null?void 0:o.bookTitle,subBooks:o==null?void 0:o.subBooks,deviceHeight:m,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.openedSubBook,moveToReading:P,moveToReadingFromBookmark:_,onDownload:T,onDownloadRefresh:v,removeBookmark:A,handleOpenedSubBook:O}),a&&n.jsx(So,{})]})}function gn(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,openedSubBook:e.pageStatus.openedSubBook,currentUser:e.user.currentUser,activeChapterId:e.books.activeChapterId}}const In=ko(gn)(pn);export{In as default};
