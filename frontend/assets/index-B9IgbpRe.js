import{b as s,j as a,Q as P,ai as Xt,U as G,ak as Re,ax as Ze,ay as Be,az as Mt,X as Ut,af as et,$ as De,ab as tt,Y as it,aA as ot,aB as Pe,ad as Z,ae as we,aC as at,aD as Ft,aE as Yt,aF as st,ac as Kt,ag as zt,ap as He,ao as ke}from"./index-DDg5x1vp.js";import{S as ce,g as ue,az as Gt,aA as $t,aB as Qt,aC as Jt,s as B,B as O,aD as Oe,aE as Zt,u as Ot,_ as ee,c as er,d as tr,e as me}from"./App-BWJORKtV.js";import{I as R,T as ie}from"./images-BVMc-T4x.js";import{p as rr}from"./index-Cetu48cf.js";import{C as te,L as nr}from"./index-BSHHknB4.js";import{A as ir,b as lt}from"./bookmark.service-BXq7-26q.js";import{a as We}from"./auth.service-Dnuse4UM.js";import{b as Ve}from"./book.service-2NLq_LIt.js";import"./index-CdQPDgV8.js";import"./axios-BimPEqV4.js";function or(e){const{theme:n}=s.useContext(ce),{buttonColor:i,buttonTextColor:l}=ue(n);return a.jsx(Gt,{ref:e.refer,"data-id":e.dataId,backgroundColor:i,children:a.jsxs($t,{progresscolor:l,children:[a.jsx(Qt,{variant:"determinate",value:e.progress,thickness:2}),a.jsx(Jt,{src:n==P.EASY_OCEAN?R.bookmark2_white:R.bookmark2_default})]})})}var jt={};function ar(e){if(e&&e.__esModule)return e;var n={};if(e!=null){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var l=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};l.get||l.set?Object.defineProperty(n,i,l):n[i]=e[i]}}return n.default=e,n}var Dt=ar,ae={},qe,ct;function sr(){if(ct)return qe;ct=1;function e(n){return n&&n.__esModule?n:{default:n}}return qe=e,qe}var Te,ut;function lr(){if(ut)return Te;ut=1;function e(){return Te=e=Object.assign||function(n){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(n[c]=l[c])}return n},e.apply(this,arguments)}return Te=e,Te}var Xe,dt;function cr(){if(dt)return Xe;dt=1;function e(n,i){if(n==null)return{};var l={},c=Object.keys(n),f,C;for(C=0;C<c.length;C++)f=c[C],!(i.indexOf(f)>=0)&&(l[f]=n[f]);return l}return Xe=e,Xe}var Ue,ft;function ur(){if(ft)return Ue;ft=1;var e=cr();function n(i,l){if(i==null)return{};var c=e(i,l),f,C;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(i);for(C=0;C<x.length;C++)f=x[C],!(l.indexOf(f)>=0)&&Object.prototype.propertyIsEnumerable.call(i,f)&&(c[f]=i[f])}return c}return Ue=n,Ue}var Fe,ht;function dr(){if(ht)return Fe;ht=1;function e(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}return Fe=e,Fe}var Ye,gt;function fr(){if(gt)return Ye;gt=1;function e(i,l){for(var c=0;c<l.length;c++){var f=l[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(i,f.key,f)}}function n(i,l,c){return l&&e(i.prototype,l),c&&e(i,c),i}return Ye=n,Ye}var Se,vt;function hr(){if(vt)return Se;vt=1;function e(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(c){return typeof c}:e=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},e(i)}function n(i){return typeof Symbol=="function"&&e(Symbol.iterator)==="symbol"?Se=n=function(c){return e(c)}:Se=n=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":e(c)},n(i)}return Se=n,Se}var Ke,pt;function gr(){if(pt)return Ke;pt=1;function e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}return Ke=e,Ke}var ze,xt;function vr(){if(xt)return ze;xt=1;var e=hr(),n=gr();function i(l,c){return c&&(e(c)==="object"||typeof c=="function")?c:n(l)}return ze=i,ze}var Ee,mt;function pr(){if(mt)return Ee;mt=1;function e(n){return Ee=e=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},e(n)}return Ee=e,Ee}var Ae,St;function xr(){if(St)return Ae;St=1;function e(n,i){return Ae=e=Object.setPrototypeOf||function(c,f){return c.__proto__=f,c},e(n,i)}return Ae=e,Ae}var Ge,bt;function mr(){if(bt)return Ge;bt=1;var e=xr();function n(i,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(l&&l.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),l&&e(i,l)}return Ge=n,Ge}var $e,yt;function Ht(){if(yt)return $e;yt=1;var e=function(){};return $e=e,$e}var Qe={},Je,_t;function je(){if(_t)return Je;_t=1;function e(n){return n&&n.__esModule?n:{default:n}}return Je=e,Je}var be={},It;function Sr(){if(It)return be;It=1;var e=je();Object.defineProperty(be,"__esModule",{value:!0}),be.default=void 0;var n=e(s);e(Ht());var i=function(f){f.index;var C=f.children;n.default.Children.count(C)},l=i;return be.default=l,be}var Le={},ye={},wt;function Wt(){if(wt)return ye;wt=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.default=void 0;var e={RESISTANCE_COEF:.6,UNCERTAINTY_THRESHOLD:3};return ye.default=e,ye}var Ct;function br(){if(Ct)return Le;Ct=1;var e=je();Object.defineProperty(Le,"__esModule",{value:!0}),Le.default=l;var n=e(s),i=e(Wt());function l(c){var f=c.children,C=c.startIndex,x=c.startX,N=c.pageX,E=c.viewLength,S=c.resistance,k=n.default.Children.count(f)-1,M=C+(x-N)/E,b;return S?M<0?M=Math.exp(M*i.default.RESISTANCE_COEF)-1:M>k&&(M=k+1-Math.exp((k-M)*i.default.RESISTANCE_COEF)):M<0?(M=0,b=(M-C)*E+N):M>k&&(M=k,b=(M-C)*E+N),{index:M,startX:b}}return Le}var _e={},kt;function yr(){if(kt)return _e;kt=1;var e=je();Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var n=e(s),i=function(f,C){var x=!1,N=function(D){return D?D.key:"empty"};if(f.children.length&&C.children.length){var E=n.default.Children.map(f.children,N),S=E[f.index];if(S!=null){var k=n.default.Children.map(C.children,N),M=k[C.index];S===M&&(x=!0)}}return x},l=i;return _e.default=l,_e}var Ie={},Tt;function _r(){if(Tt)return Ie;Tt=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.default=void 0;function e(i,l){var c=i%l;return c<0?c+l:c}var n=e;return Ie.default=n,Ie}var Et;function Ir(){return Et||(Et=1,function(e){var n=je();Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"checkIndexBounds",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"computeIndex",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"constant",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"getDisplaySameSlide",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"mod",{enumerable:!0,get:function(){return C.default}});var i=n(Sr()),l=n(br()),c=n(Wt()),f=n(yr()),C=n(_r())}(Qe)),Qe}var At;function wr(){if(At)return ae;At=1;var e=Dt,n=sr();Object.defineProperty(ae,"__esModule",{value:!0}),ae.getDomTreeShapes=h,ae.findNativeHandler=F,ae.default=ae.SwipeableViewsContext=void 0;var i=n(lr()),l=n(ur()),c=n(dr()),f=n(fr()),C=n(vr()),x=n(pr()),N=n(mr()),E=e(s);n(rr),n(Ht());var S=Ir();function k(o,u,v,t){return o.addEventListener(u,v,t),{remove:function(){o.removeEventListener(u,v,t)}}}var M={container:{direction:"ltr",display:"flex",willChange:"transform"},slide:{width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"}},b={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(u){return"translate(".concat(-u,"%, 0)")},"x-reverse":function(u){return"translate(".concat(u,"%, 0)")},y:function(u){return"translate(0, ".concat(-u,"%)")},"y-reverse":function(u){return"translate(0, ".concat(u,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function D(o,u){var v=u.duration,t=u.easeFunction,r=u.delay;return"".concat(o," ").concat(v," ").concat(t," ").concat(r)}function U(o,u){var v=b.rotationMatrix[u];return{pageX:v.x[0]*o.pageX+v.x[1]*o.pageY,pageY:v.y[0]*o.pageX+v.y[1]*o.pageY}}function j(o){return o.touches=[{pageX:o.pageX,pageY:o.pageY}],o}function h(o,u){for(var v=[];o&&o!==u&&o!==document.body&&!o.hasAttribute("data-swipeable");){var t=window.getComputedStyle(o);t.getPropertyValue("position")==="absolute"||t.getPropertyValue("overflow-x")==="hidden"?v=[]:(o.clientWidth>0&&o.scrollWidth>o.clientWidth||o.clientHeight>0&&o.scrollHeight>o.clientHeight)&&v.push({element:o,scrollWidth:o.scrollWidth,scrollHeight:o.scrollHeight,clientWidth:o.clientWidth,clientHeight:o.clientHeight,scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}),o=o.parentNode}return v}var W=null;function F(o){var u=o.domTreeShapes,v=o.pageX,t=o.startX,r=o.axis;return u.some(function(m){var p=v>=t;(r==="x"||r==="y")&&(p=!p);var _=Math.round(m[b.scrollPosition[r]]),H=_>0,X=_+m[b.clientLength[r]]<m[b.scrollLength[r]];return p&&X||!p&&H?(W=m.element,!0):!1})}var T=E.createContext();ae.SwipeableViewsContext=T;var w=function(o){(0,N.default)(u,o);function u(v){var t;return(0,c.default)(this,u),t=(0,C.default)(this,(0,x.default)(u).call(this,v)),t.rootNode=null,t.containerNode=null,t.ignoreNextScrollEvents=!1,t.viewLength=0,t.startX=0,t.lastX=0,t.vx=0,t.startY=0,t.isSwiping=void 0,t.started=!1,t.startIndex=0,t.transitionListener=null,t.touchMoveListener=null,t.activeSlide=null,t.indexCurrent=null,t.firstRenderTimeout=null,t.setRootNode=function(r){t.rootNode=r},t.setContainerNode=function(r){t.containerNode=r},t.setActiveSlide=function(r){t.activeSlide=r,t.updateHeight()},t.handleSwipeStart=function(r){var m=t.props.axis,p=U(r.touches[0],m);t.viewLength=t.rootNode.getBoundingClientRect()[b.length[m]],t.startX=p.pageX,t.lastX=p.pageX,t.vx=0,t.startY=p.pageY,t.isSwiping=void 0,t.started=!0;var _=window.getComputedStyle(t.containerNode),H=_.getPropertyValue("-webkit-transform")||_.getPropertyValue("transform");if(H&&H!=="none"){var X=H.split("(")[1].split(")")[0].split(","),V=window.getComputedStyle(t.rootNode),Y=U({pageX:parseInt(X[4],10),pageY:parseInt(X[5],10)},m);t.startIndex=-Y.pageX/(t.viewLength-parseInt(V.paddingLeft,10)-parseInt(V.paddingRight,10))||0}},t.handleSwipeMove=function(r){if(!t.started){t.handleTouchStart(r);return}if(!(W!==null&&W!==t.rootNode)){var m=t.props,p=m.axis,_=m.children,H=m.ignoreNativeScroll,X=m.onSwitching,V=m.resistance,Y=U(r.touches[0],p);if(t.isSwiping===void 0){var re=Math.abs(Y.pageX-t.startX),ne=Math.abs(Y.pageY-t.startY),se=re>ne&&re>S.constant.UNCERTAINTY_THRESHOLD;if(!V&&(p==="y"||p==="y-reverse")&&(t.indexCurrent===0&&t.startX<Y.pageX||t.indexCurrent===E.Children.count(t.props.children)-1&&t.startX>Y.pageX)){t.isSwiping=!1;return}if(re>ne&&r.preventDefault(),se===!0||ne>S.constant.UNCERTAINTY_THRESHOLD){t.isSwiping=se,t.startX=Y.pageX;return}}if(t.isSwiping===!0){r.preventDefault(),t.vx=t.vx*.5+(Y.pageX-t.lastX)*.5,t.lastX=Y.pageX;var ve=(0,S.computeIndex)({children:_,resistance:V,pageX:Y.pageX,startIndex:t.startIndex,startX:t.startX,viewLength:t.viewLength}),pe=ve.index,d=ve.startX;if(W===null&&!H){var g=h(r.target,t.rootNode),L=F({domTreeShapes:g,startX:t.startX,pageX:Y.pageX,axis:p});if(L)return}d?t.startX=d:W===null&&(W=t.rootNode),t.setIndexCurrent(pe);var I=function(){X&&X(pe,"move")};(t.state.displaySameSlide||!t.state.isDragging)&&t.setState({displaySameSlide:!1,isDragging:!0},I),I()}}},t.handleSwipeEnd=function(){if(W=null,!!t.started&&(t.started=!1,t.isSwiping===!0)){var r=t.state.indexLatest,m=t.indexCurrent,p=r-m,_;Math.abs(t.vx)>t.props.threshold?t.vx>0?_=Math.floor(m):_=Math.ceil(m):Math.abs(p)>t.props.hysteresis?_=p>0?Math.floor(m):Math.ceil(m):_=r;var H=E.Children.count(t.props.children)-1;_<0?_=0:_>H&&(_=H),t.setIndexCurrent(_),t.setState({indexLatest:_,isDragging:!1},function(){t.props.onSwitching&&t.props.onSwitching(_,"end"),t.props.onChangeIndex&&_!==r&&t.props.onChangeIndex(_,r,{reason:"swipe"}),m===r&&t.handleTransitionEnd()})}},t.handleTouchStart=function(r){t.props.onTouchStart&&t.props.onTouchStart(r),t.handleSwipeStart(r)},t.handleTouchEnd=function(r){t.props.onTouchEnd&&t.props.onTouchEnd(r),t.handleSwipeEnd(r)},t.handleMouseDown=function(r){t.props.onMouseDown&&t.props.onMouseDown(r),r.persist(),t.handleSwipeStart(j(r))},t.handleMouseUp=function(r){t.props.onMouseUp&&t.props.onMouseUp(r),t.handleSwipeEnd(j(r))},t.handleMouseLeave=function(r){t.props.onMouseLeave&&t.props.onMouseLeave(r),t.started&&t.handleSwipeEnd(j(r))},t.handleMouseMove=function(r){t.props.onMouseMove&&t.props.onMouseMove(r),t.started&&t.handleSwipeMove(j(r))},t.handleScroll=function(r){if(t.props.onScroll&&t.props.onScroll(r),r.target===t.rootNode){if(t.ignoreNextScrollEvents){t.ignoreNextScrollEvents=!1;return}var m=t.state.indexLatest,p=Math.ceil(r.target.scrollLeft/r.target.clientWidth)+m;t.ignoreNextScrollEvents=!0,r.target.scrollLeft=0,t.props.onChangeIndex&&p!==m&&t.props.onChangeIndex(p,m,{reason:"focus"})}},t.updateHeight=function(){if(t.activeSlide!==null){var r=t.activeSlide.children[0];r!==void 0&&r.offsetHeight!==void 0&&t.state.heightLatest!==r.offsetHeight&&t.setState({heightLatest:r.offsetHeight})}},t.state={indexLatest:v.index,isDragging:!1,renderOnlyActive:!v.disableLazyLoading,heightLatest:0,displaySameSlide:!0},t.setIndexCurrent(v.index),t}return(0,f.default)(u,[{key:"componentDidMount",value:function(){var t=this;this.transitionListener=k(this.containerNode,"transitionend",function(r){r.target===t.containerNode&&t.handleTransitionEnd()}),this.touchMoveListener=k(this.rootNode,"touchmove",function(r){t.props.disabled||t.handleSwipeMove(r)},{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout(function(){t.setState({renderOnlyActive:!1})},0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var r=t.index;typeof r=="number"&&r!==this.props.index&&(this.setIndexCurrent(r),this.setState({displaySameSlide:(0,S.getDisplaySameSlide)(this.props,t),indexLatest:r}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"getSwipeableViewsContext",value:function(){var t=this;return{slideUpdateHeight:function(){t.updateHeight()}}}},{key:"setIndexCurrent",value:function(t){if(!this.props.animateTransitions&&this.indexCurrent!==t&&this.handleTransitionEnd(),this.indexCurrent=t,this.containerNode){var r=this.props.axis,m=b.transform[r](t*100);this.containerNode.style.WebkitTransform=m,this.containerNode.style.transform=m}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var t=this,r=this.props;r.action;var m=r.animateHeight,p=r.animateTransitions,_=r.axis,H=r.children,X=r.containerStyle,V=r.disabled;r.disableLazyLoading;var Y=r.enableMouseEvents;r.hysteresis,r.ignoreNativeScroll,r.index,r.onChangeIndex,r.onSwitching,r.onTransitionEnd,r.resistance;var re=r.slideStyle,ne=r.slideClassName,se=r.springConfig,ve=r.style;r.threshold;var pe=(0,l.default)(r,["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"]),d=this.state,g=d.displaySameSlide,L=d.heightLatest,I=d.indexLatest,A=d.isDragging,y=d.renderOnlyActive,$=V?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},Q=!V&&Y?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{},de=(0,i.default)({},M.slide,re),oe,fe;if(A||!p||g)oe="all 0s ease 0s",fe="all 0s ease 0s";else if(oe=D("transform",se),fe=D("-webkit-transform",se),L!==0){var q=", ".concat(D("height",se));oe+=q,fe+=q}var J={height:null,WebkitFlexDirection:b.flexDirection[_],flexDirection:b.flexDirection[_],WebkitTransition:fe,transition:oe};if(!y){var K=b.transform[_](this.indexCurrent*100);J.WebkitTransform=K,J.transform=K}return m&&(J.height=L),E.createElement(T.Provider,{value:this.getSwipeableViewsContext()},E.createElement("div",(0,i.default)({ref:this.setRootNode,style:(0,i.default)({},b.root[_],ve)},pe,$,Q,{onScroll:this.handleScroll}),E.createElement("div",{ref:this.setContainerNode,style:(0,i.default)({},J,M.container,X),className:"react-swipeable-view-container"},E.Children.map(H,function(le,xe){if(y&&xe!==I)return null;var he,Ce=!0;return xe===I&&(Ce=!1,m&&(he=t.setActiveSlide,de.overflowY="hidden")),E.createElement("div",{ref:he,style:de,className:ne,"aria-hidden":Ce,"data-swipeable":"true"},le)}))))}}]),u}(E.Component);w.displayName="ReactSwipableView",w.propTypes={},w.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1};var z=w;return ae.default=z,ae}(function(e){var n=Dt;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"SwipeableViewsContext",{enumerable:!0,get:function(){return i.SwipeableViewsContext}});var i=n(wr())})(jt);const Cr=Xt(jt),kr=B(O)({width:"100%",margin:"0px"}),Tr=B(O)({margin:"0px",padding:"0px",position:"relative"}),Er=B(O)({width:"100%",height:"100%",margin:"0px",padding:"0px",position:"relative"}),Vt=B(Cr)(({scrollcolor:e})=>({width:"100%",height:"100%",marginBottom:"8px",padding:"14px 0px 20px 0px","::-webkit-scrollbar-thumb":{background:"red"},"::-webkit-scrollbar-thumb: hover":{backgroundColor:e,opacity:"1"},"& .react-swipeable-view-container":{height:"100%"}})),Ne=B(O)({width:"100%",padding:"0px 14px","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}}),qt=B(O)({height:"10px",width:"100%",position:"absolute",bottom:"0",display:"flex",justifyContent:"center","& :last-child":{marginRight:"0px"}}),Me=B(O)(({active:e,linecolor:n})=>({borderTop:`1px solid ${n}`,width:e=="true"?"20px":e=="false"?"10px":"0px",color:"black",marginRight:"5px",marginTop:"5px"})),Ar=B(O)(({scrollbarcolor:e})=>({width:"100%",height:"100%","::-webkit-scrollbar-thumb":{backgroundColor:"red"},"::-webkit-scrollbar-track":{backgroundColor:"transparent"},scrollbarWidth:"auto",scrollbarColor:`${e} transparent`})),Lt=B(O)({width:"100%",padding:"0px",margin:"0px"}),Lr=B(O)({width:"100%",margin:"auto",padding:"20px 0px","& .MuiBox-root":{textWrap:"wrap"}}),Rr=B(O)({width:"100%",height:"100%",position:"relative",overflowX:"hidden",padding:"0px 15px",scrollbarGutter:"stable both-edges"}),Rt=B("img")({width:"100%"}),Br=B(O)({width:"100%","& .MuiAccordion-gutters":{width:"100%"},"& .MuiAccordion-root .MuiAccordionSummary-root .Mui-expanded":{margin:"12px 0px !important"}}),Pr=B(O)({width:"100%","& .MuiBox-root":{padding:"0px "}}),Nr=B(O)({width:"100%",overflow:"hidden",position:"relative",display:"flex",flexDirection:"column"}),Mr=B(O)({width:"100%",padding:"20px 0px",position:"relative",display:"flex",zIndex:"2","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}}),Or=B(O)({width:"100%",margin:"0px",position:"relative",display:"flex",flexDirection:"column",zIndex:"2","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}});B(O)({width:"40px",height:"100%",backgroundColor:"#FFAA5D",justifyContent:"center",alignItems:"center"});B(O)({width:"20px",height:"50%",position:"relative"});function rt(e){var k,M;const[n,i]=s.useState(0),{theme:l,textSize:c,referenceLanguage:f,showQuranReferences:C,displayType:x}=s.useContext(ce),{topTextColor:N,backgroundColor:E}=ue(l),S=e.verse.verseReference.ref;return x==G.VERSE_BY_VERSE?a.jsxs(Tr,{children:[a.jsxs(Vt,{style:{backgroundColor:E},scrollcolor:N,enableMouseEvents:!0,disabled:!C,onSwitching:b=>i(b),children:[a.jsx(Ne,{children:a.jsx(Lt,{"data-id":e.verse.verseId,"data-index":e.index,ref:e.refer,children:a.jsx(ie,{fontFamily:"Inter",fontSize:c-4,lineHeight:c+6,fontWeight:"700",color:N,dataIndex:e.index.toString(),language:f,direction:f==Re?"rtl":"ltr",children:(k=e.verse.verseText)==null?void 0:k[f]})})}),a.jsx(Ne,{children:S.map((b,D)=>a.jsx(ie,{fontFamily:"Inter",fontWeight:"700",fontSize:c-4,lineHeight:c+6,color:N,children:b},D))})]}),S.length>0&&C&&a.jsxs(qt,{children:[a.jsx(Me,{active:n==0?"true":"false",linecolor:N}),a.jsx(Me,{active:n==1?"true":"false",linecolor:N})]})]}):a.jsx(Lt,{"data-id":e.verse.verseId,"data-index":e.index,ref:e.refer,style:{backgroundColor:E},children:a.jsx(ie,{fontFamily:"Inter",fontSize:c-4,lineHeight:c+6,fontWeight:"700",color:N,dataIndex:e.index.toString(),language:f,direction:f==Re?"rtl":"ltr",onTouchStart:()=>e.onTouchStart&&e.onTouchStart(e.verse.verseReference.ref),onMouseDown:()=>e.onMouseDown&&e.onMouseDown(e.verse.verseReference.ref),children:(M=e.verse.verseText)==null?void 0:M[f]})})}function jr(e){var W,F;const[n,i]=s.useState([]),[l,c]=s.useState(0),{scrollTopVerseIndex:f,setScrollTopVerseIndex:C,setHiddenTopVersePercentage:x,activeScroll:N,setActiveScroll:E}=s.useContext(Oe),S=s.useRef([]);S.current=(W=e.verses)==null?void 0:W.map((T,w)=>S.current[w]??s.createRef());const{theme:k,textSize:M,showQuranReferences:b,displayType:D}=s.useContext(ce),{backgroundColor:U,topTextColor:j}=ue(k);s.useEffect(()=>{var T;if(D==G.SPLIT_PANEL&&f>=0&&(N==Ze||N==Be)){const w=S.current[Number(f)];(T=w==null?void 0:w.current)==null||T.scrollIntoView()}},[f,D]);const h=T=>{if(D==G.SPLIT_PANEL){E(Mt);const w=T.currentTarget.getBoundingClientRect().top,z=T.currentTarget.clientHeight;let o=-1,u=1/0;if(S.current.forEach((v,t)=>{if(v.current){const r=v.current.getBoundingClientRect().top,m=v.current.getBoundingClientRect().bottom,p=r-w;m>w&&r<w+z&&Math.abs(p)<u&&(u=Math.abs(p),o=t)}}),o!==-1){C(o);const v=S.current[o];if(v.current){const t=v.current.getBoundingClientRect().top,r=v.current.clientHeight,m=Math.max(0,Math.min(100,(w-t)/r*100));x(m)}}}};return a.jsx(kr,{style:{height:e.height},children:D===G.SPLIT_PANEL?a.jsxs(Er,{children:[a.jsxs(Vt,{style:{backgroundColor:U},scrollcolor:j,enableMouseEvents:!0,disabled:!b,onScrollCapture:N!=Ze?T=>h(T):()=>{},onSwitching:T=>c(T),children:[a.jsx(Ne,{children:(F=e.verses)==null?void 0:F.map((T,w)=>a.jsx(rt,{refer:S.current[w],verse:T,index:w,onMouseDown:i,onTouchStart:i},w))}),a.jsx(Ne,{children:n&&n.map((T,w)=>a.jsx(ie,{fontFamily:"Inter",fontWeight:"700",fontSize:M-2,color:j,children:T},w))})]}),b&&a.jsxs(qt,{style:{background:U,bottom:"5px"},children:[a.jsx(Me,{active:l===0?"true":"false",linecolor:j}),a.jsx(Me,{active:l===1?"true":"false",linecolor:j})]})]}):a.jsx(Ar,{style:{backgroundColor:U},scrollbarcolor:j,children:e.verses.map((T,w)=>a.jsx(rt,{refer:S.current[w],verse:T,index:w},w))})})}const Dr=B(O)({position:"fixed",zIndex:"3",bottom:"0px",width:"100%",height:"150px",overflow:"hidden"}),Hr=B(O)({position:"relative",display:"flex",justifyContent:"center","& .MuiBox-root":{alignContent:"center"}}),Wr=B("img")({width:"100%",position:"absolute",top:"20px"}),Vr=B(O)({width:"100%",maxWidth:"700px",padding:"0px 20px",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",zIndex:"1",paddingTop:"20px",alignContent:"center","@media (min-width: 600px)":{paddingTop:"25px"}}),qr=B(O)({position:"relative",bottom:"-75px",height:"100px",alignItems:"center",justifyContent:"space-between"}),Xr=B("img")({width:"100%",position:"absolute"}),Ur=B(O)(({readingcontrol:e})=>({height:"100px",width:"100%",maxWidth:"700px",margin:"auto",display:"flex",flexDirection:e==Ut.LEFT_HANDED?"row":"row-reverse",justifyContent:"space-between",alignItems:"center",padding:"0px 15px","@media (min-width: 1075px)":{width:"80%",margin:"auto"}})),Fr=B(O)({width:"90px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px","@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}}),Yr=B(O)({width:"90px",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"20px","@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}}),ge=B("img")({width:"60px",height:"40px",borderRadius:"50%",cursor:"pointer",zIndex:"1"}),Kr=B(O)(({underlinecolor:e})=>({width:"90px",textDecoration:"underline",textDecorationColor:e,textUnderlineOffset:"3px",zIndex:"1",cursor:"pointer",marginBottom:"20px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}})),zr=B(O)({width:"100%",height:"60px",overflow:"hidden",padding:"0 10px"}),Gr=B(Zt)(({barcolor:e})=>({color:e,opacity:"1",height:"5px","& .MuiSlider-thumb":{width:"13.25px",height:"14px",color:e,transition:"0.3s cubic-bezier(.47,1.64,.41,.8)","&::before":{boxShadow:"0 2px 12px 0 rgba(0,0,0,0.4)"},"&:hover, &.Mui-focusVisible":{boxShadow:"0px 0px 0px 8px rgb(0 0 0 / 16%)"},"&.Mui-active":{width:20,height:20}}})),$r=B(O)({display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"-20px"});function Qr(e){const{duration:n,currentTime:i,onTimeChange:l}=e,[c,f]=s.useState(i),{theme:C}=s.useContext(ce),{buttonTextColor:x}=ue(C);s.useEffect(()=>{f(i)},[i]);const N=(E,S)=>{f(S),l(S)};return a.jsxs(zr,{children:[a.jsx(Gr,{"aria-label":"time-indicator",value:c,min:0,max:Math.floor(n),step:1,barcolor:x,onChange:N}),a.jsxs($r,{children:[a.jsx(ie,{color:x,children:Bt(c)}),a.jsx(ie,{color:x,children:"-"+Bt(Math.floor(n-c))})]})]})}function Bt(e){const n=Math.floor(e/60),i=Math.floor(e%60);return`${n}:${i<10?`0${i}`:i}`}function Jr(e){const[n,i]=s.useState(!1),[l,c]=s.useState(0),[f,C]=s.useState(0),[x,N]=s.useState(0),E=s.useRef(new Audio),{setScrollTopVerseIndex:S,setActiveScroll:k}=s.useContext(Oe),{autoScrollText:M,volume:b,audioLanguage:D,readingControls:U,pageControl:j,theme:h}=s.useContext(ce),{logoTextColor:W}=ue(h),{t:F}=Ot();s.useEffect(()=>{const p=E.current;e.src&&(p.src=et+e.src[D||De.TRANSLATION]);const _=()=>{C(p.duration)},H=()=>{c(Math.floor(p.currentTime))};return p.addEventListener("loadedmetadata",_),p.addEventListener("timeupdate",H),()=>{p.removeEventListener("loadedmetadata",_),p.removeEventListener("timeupdate",H)}},[e.src]),s.useEffect(()=>{if(E.current.ended)t();else if(M){const p=e.verses.findIndex((_,H)=>{var Y,re,ne;const X=(Y=_.verseAudioStart)==null?void 0:Y[D||De.TRANSLATION],V=(ne=(re=e.verses[H+1])==null?void 0:re.verseAudioStart)==null?void 0:ne[D||De.TRANSLATION];return l>=X&&l<V});p!==-1&&(p!==x||p==0)&&(S(p),N(p),k(Be))}},[l,e.verses,D,M,n]),s.useEffect(()=>{E.current.volume=b/100},[b]);const T=()=>{const p=E.current;k(Be),p.readyState>=2?(i(!0),p.play().catch(_=>ee.custom(H=>a.jsx(te,{text:F("Audio Play Error"+_),offset:125,visible:H.visible})))):ee.custom(_=>a.jsx(te,{text:F("Audio Not Ready"),offset:125,visible:_.visible}))},w=()=>{i(!1),E.current.pause(),k(tt)},z=()=>{w(),e.moveToSoundSettingPage()},o=()=>{w(),e.setAudioSeekBarStatus(!1)},u=()=>{w(),localStorage.getItem(Z)&&localStorage.removeItem(Z),localStorage.getItem(we)&&localStorage.removeItem(we),e.moveToPrevPage()},v=p=>{E.current.currentTime=p,c(p)},t=()=>{c(0),i(!1),S(0),k(tt)},r=()=>a.jsxs(Hr,{children:[a.jsx(Wr,{src:h==P.DEFAULT||h==P.DARK?R.bar_reading_audio_subtract:h==P.BLACK_AND_WHITE?R.bar_reading_audio_subtract_BAW:h==P.SAPPHIRE?R.bar_reading_audio_subtract_sapphire:R.bar_reading_audio_subtract_easyocean}),a.jsxs(Vr,{children:[a.jsx(ge,{src:h==P.DEFAULT||h==P.DARK?R.btn_sound_setting:h==P.BLACK_AND_WHITE?R.btn_sound_setting_BAW:h==P.SAPPHIRE?R.btn_sound_setting_sapphire:R.btn_sound_setting_easyocean,onClick:z}),a.jsx(Qr,{duration:f,currentTime:l,onTimeChange:v}),a.jsx(ge,{src:h==P.DEFAULT||h==P.DARK?R.btn_close:h==P.BLACK_AND_WHITE?R.btn_close_BAW:h==P.SAPPHIRE?R.btn_close_sapphire:R.btn_close_easyocean,onClick:o})]})]}),m=()=>a.jsxs(qr,{children:[a.jsx(Xr,{src:h==P.DEFAULT||h==P.DARK?R.bar_reading_subtract:h==P.BLACK_AND_WHITE?R.bar_reading_subtract_BAW:h==P.SAPPHIRE?R.bar_reading_subtract_sapphire:R.bar_reading_subtract_easyocean}),a.jsxs(Ur,{readingcontrol:U,children:[a.jsxs(Fr,{children:[a.jsx(ge,{src:h==P.DEFAULT||h==P.DARK?R.btn_arrow_left:h==P.BLACK_AND_WHITE?R.btn_arrow_left_BAW:h==P.SAPPHIRE?R.btn_arrow_left_sapphire:R.btn_arrow_left_easyocean,onClick:()=>e.handleNavigateBtn(j==it.LEFT_TO_RIGHT?ot:Pe)}),a.jsx(ge,{src:h==P.DEFAULT||h==P.DARK?R.btn_arrow_right:h==P.BLACK_AND_WHITE?R.btn_arrow_right_BAW:h==P.SAPPHIRE?R.btn_arrow_right_sapphire:R.btn_arrow_right_easyocean,onClick:()=>e.handleNavigateBtn(j==it.LEFT_TO_RIGHT?Pe:ot)})]}),!e.isIntro&&a.jsx(Yr,{children:e.showAudioSeekBar?n?a.jsx(ge,{src:h==P.DEFAULT||h==P.DARK?R.btn_pause:h==P.BLACK_AND_WHITE?R.btn_pause_BAW:h==P.SAPPHIRE?R.btn_pause_sapphire:R.btn_pause_easyocean,onClick:w}):a.jsx(ge,{src:h==P.DEFAULT||h==P.DARK?R.btn_play:h==P.BLACK_AND_WHITE?R.btn_play_BAW:h==P.SAPPHIRE?R.btn_play_sapphire:R.btn_play_easyocean,onClick:T}):a.jsx(ge,{src:h==P.DEFAULT||h==P.DARK?R.btn_sound:h==P.BLACK_AND_WHITE?R.btn_sound_BAW:h==P.SAPPHIRE?R.btn_sound_sapphire:R.btn_sound_easyocean,onClick:()=>e.setAudioSeekBarStatus(!0)})}),a.jsx(Kr,{underlinecolor:W,onClick:u,children:a.jsx(ie,{color:W,textAlign:"right",children:e.bookTitle+": "+e.subBookTitle})})]})]});return a.jsxs(Dr,{children:[e.showAudioSeekBar&&r(),m()]})}function nt(e){const[n,i]=s.useState(e.isExistingInBookmark?100:0),[l,c]=s.useState(null),[f,C]=s.useState(!1),[x,N]=s.useState(0),[E,S]=s.useState(0),{textSize:k,theme:M,readingLanguage:b}=s.useContext(ce),{mainBGColor:D}=ue(M),U=s.useRef(null),j=s.useRef(n),h=e.refer,W=s.useRef(),F=window.matchMedia("(orientation: portrait)").matches;s.useEffect(()=>{j.current=n},[n]),s.useEffect(()=>{if(U.current&&h.current&&("verseHeader"in e.verse&&(U.current.style.height=`${h.current.getBoundingClientRect().height-4}px`,U.current.style.bottom="2px",U.current.style.alignSelf="self-end"),h.current.offsetHeight>0&&h.current.offsetHeight<=24)){const t=U.current.children[0];t.style.width="20px",t.style.height="20px",t.children[1].style.width="10px",t.children[1].style.height="10px"}},[e.verse,e.translatePanelHeight,F]);const T=s.useCallback(t=>{if(t>0&&t<at){const r=t/at*100,m=e.isExistingInBookmark?100-r:r;i(m),j.current=m}else if(t>0){const r=e.isExistingInBookmark?0:100;i(r),j.current=r}else{const r=e.isExistingInBookmark?100:0;i(r),j.current=r}},[e.isExistingInBookmark]),w=s.useCallback(()=>{if(h.current){const t=Math.max(0,Math.min(E,Yt));h.current.style.transform=`translateX(${t}px)`,T(t-Ft)}f&&(W.current=requestAnimationFrame(w))},[f,E,T]);s.useEffect(()=>(f?W.current=requestAnimationFrame(w):cancelAnimationFrame(W.current),()=>cancelAnimationFrame(W.current)),[f,w]);const z=t=>{var m;!e.language&&C(!0),N(t);const r=(m=h.current)==null?void 0:m.getAttribute("data-id");r&&c(r)},o=t=>{if(!f)return;const r=Math.max(0,t-x);e.isLoggedIn&&r>st&&S(r-st)},u=()=>{C(!1),h.current&&(!e.isExistingInBookmark&&j.current==100||e.isExistingInBookmark&&j.current==0?l&&e.handleBookmark(l):e.isExistingInBookmark?(i(100),j.current=100):(i(0),j.current=0),h.current.style.transition="transform 0.3s ease-out",h.current.style.transform="translateX(0)",setTimeout(()=>{h.current&&(h.current.style.transition="")},300)),S(0)};s.useEffect(()=>{const t=h.current;if(t){const r=V=>{V.preventDefault(),z(V.clientX)},m=V=>{V.preventDefault(),o(V.clientX)},p=V=>{V.preventDefault(),u()},_=V=>{z(V.touches[0].clientX)},H=V=>{o(V.touches[0].clientX)},X=V=>{u()};return t.addEventListener("mousedown",r),document.addEventListener("mousemove",m),document.addEventListener("mouseup",p),t.addEventListener("touchstart",_),t.addEventListener("touchmove",H),t.addEventListener("touchend",X),()=>{t.removeEventListener("mousedown",r),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",p),t.removeEventListener("touchstart",_),t.removeEventListener("touchmove",H),t.removeEventListener("touchend",X)}}},[h,T,e.handleBookmark,x]);const v=t=>{for(var r in t)if(t[r]!==null&&t[r]!=="")return!0;return!1};return a.jsxs(Nr,{children:["verseHeader"in e.verse&&v(e.verse.verseHeader)&&a.jsx(Mr,{"data-id":e.verse.verseId,"data-index":e.index,style:{backgroundColor:D},children:a.jsx(ie,{fontFamily:"Inter",fontWeight:"700",backgroundColor:D,fontSize:k,lineHeight:k+15,direction:e.language||b===Re?"rtl":"ltr",children:e.verse.verseHeader[e.language||b]})}),!e.language&&a.jsx(or,{progress:n,refer:U,backgroundColor:D}),a.jsx(Or,{"data-id":"verseId"in e.verse?e.verse.verseId:e.verse.id,"data-index":e.index,ref:e.refer,children:a.jsx(ie,{fontFamily:"Inter",fontSize:k,backgroundColor:D,dataIndex:e.language?"":e.index.toString(),lineHeight:k+20,direction:b===Re?"rtl":"ltr",children:"verseText"in e.verse?e.verse.verseText[e.language||b]:e.verse.text[e.language||b]})})]})}function Pt(e){var T,w,z;const[n,i]=s.useState([]),[l,c]=s.useState([]),{scrollTopVerseIndex:f,setScrollTopVerseIndex:C,setHiddenTopVersePercentage:x,activeScroll:N,setActiveScroll:E}=s.useContext(Oe),S=s.useRef(null),k=s.useRef([]);k.current=(T=e.verses)==null?void 0:T.map((o,u)=>k.current[u]??s.createRef());const{theme:M,displayType:b}=s.useContext(ce),{mainBGColor:D,textColor:U}=ue(M),j=localStorage.getItem(Kt)||zt,h=s.useCallback(()=>{let o=[];return k.current.forEach(u=>{u.current&&u.current.children[0]&&o.push(u.current.children[0].offsetHeight)}),o},[k]);s.useEffect(()=>{const o=h();i(o);const u=o.reduce((v,t,r)=>(v[r]=(v[r-1]||0)+t,v),[]);c(u)},[e.verses,h]);const W=s.useCallback(()=>{if(!S.current)return;const o=S.current.scrollTop;E(Ze);let u=0,v=l.length-1;for(;u<=v;){const X=Math.floor((u+v)/2);l[X]>o?v=X-1:u=X+1}const t=u-1;C(t);const r=t>0?l[t-1]:0,m=n[t],_=(o-r)/m*100,H=Math.min(Math.max(_,0),100);x(H)},[l,n,C]);s.useEffect(()=>{const o=S.current;if(o)return o.addEventListener("scroll",W),o.addEventListener("scrollend",()=>E(tt)),()=>{o.removeEventListener("scroll",W)}}),s.useEffect(()=>{var o;if((b===G.SPLIT_PANEL||b===G.ONLY_TRNSLATION)&&f>=0&&(N==Mt||N==Be)){const u=k.current[Number(f)];(o=u==null?void 0:u.current)==null||o.scrollIntoView()}},[f]);const F=(o,u)=>{var v;return o.image?a.jsx(Rt,{src:et+"/images/"+o.image,alt:o.title.en||"Intro Image"},u):o.isCollapse?a.jsx(Br,{children:a.jsx(ir,{label:(v=o.title)==null?void 0:v[j],outArrow:!0,detail:a.jsx(Pr,{children:o.content.map((t,r)=>t.image?a.jsx(Rt,{src:et+"/images/"+t.image,alt:o.title.en||"Intro Image"},r):a.jsx(ie,{children:t==null?void 0:t[j]},r))})})},u):a.jsx(nt,{refer:k.current[u],verse:o,index:u,language:j,isExistingInBookmark:e.bookmarks.some(t=>t.id===o.id),isLoggedIn:e.isLoggedIn,translatePanelHeight:e.height,handleBookmark:e.handleBookmark},u)};return a.jsx(Lr,{style:{backgroundColor:D,color:U,height:e.height},children:a.jsxs(Rr,{ref:S,children:[!e.isIntro&&((w=e.verses)==null?void 0:w.map((o,u)=>a.jsx(nt,{refer:k.current[u],verse:o,index:u,isExistingInBookmark:e.bookmarks.some(v=>v.verseId===o.verseId),isLoggedIn:e.isLoggedIn,translatePanelHeight:e.height,handleBookmark:e.handleBookmark},u))),e.isIntro&&((z=e.verses)==null?void 0:z.map((o,u)=>F(o,u)))]})})}const Zr=B(O)({margin:"0px",height:"100dvh"}),Nt=B(O)(({showaudioseekbar:e})=>({width:"100%",padding:"20px",height:e=="true"?"calc(100dvh - 150px)":"calc(100dvh - 100px)"})),en=B(O)({width:"45px",height:"8px",margin:"auto",marginTop:"-4px",position:"relative",zIndex:"2",cursor:"grab","&:active":{cursor:"grabbing"}}),tn=B(O)({width:"100%",height:"100%",overflowX:"hidden",overflowY:"auto",margin:"0px",paddingBottom:"0px"}),rn=B(O)({width:"100%",padding:"15px"});function nn(e){const n=window.matchMedia("(orientation: portrait)").matches,[i,l]=s.useState([]),[c,f]=s.useState(null),[C,x]=s.useState(!1),[N,E]=s.useState(n?200:120),[S,k]=s.useState(!1),{theme:M,displayType:b}=s.useContext(ce),{mainBGColor:D,topTextColor:U}=ue(M),{scrollTopVerseIndex:j,setScrollTopVerseIndex:h}=s.useContext(Oe),W=s.useRef([]),F=s.useRef([]);W.current=i==null?void 0:i.map((d,g)=>W.current[g]??s.createRef()),F.current=i==null?void 0:i.map((d,g)=>F.current[g]??s.createRef());const T=new URLSearchParams(window.location.search),w=100,z=100;window.matchMedia("(orientation: portrait)").addEventListener("change",d=>{const g=d.matches;E(g?200:120)});const[o,u]=s.useState(typeof window<"u"?window.innerHeight:1e3),v=e.showAudioSeekBar?o-150-N:o-100-N,t=tr(),{t:r}=Ot(),m=s.useCallback(d=>{Ve.fetchVerses(d).then(g=>{l(g.verses),g&&g.length>0&&f(g.chapterAudio),e.dispatch({type:me.ADD_CHAPTERINFO,payload:{chapterInfo:g}}),x(!1)}).catch(g=>{x(!1),ee.custom(L=>a.jsx(te,{text:r(g),offset:70,visible:L.visible}))})},[]),p=s.useCallback((d,g)=>{var L;if(k(g),(L=e.chapterInfos)!=null&&L.length){const I=e.chapterInfos.find(A=>A.chapterId===d);I?(k(I.chapterNumber==0),l(I.verses),f(I.chapterAudio)):g?_(d):m(d),x(!1)}else g?_(d):m(d),x(!1)},[]),_=s.useCallback(d=>{Ve.fetchIntroVerses(d).then(g=>{l(g.verses),e.dispatch({type:me.ADD_CHAPTERINFO,payload:{chapterInfo:g}})}).catch(g=>{ee.custom(L=>a.jsx(te,{text:r(g),offset:70,visible:L.visible}))}).finally(()=>{x(!1)})},[]),H=s.useCallback(d=>{for(const g of e.bookInfos)for(const L of g.subBooks){const I=L.chapterInfos.find(A=>A.chapterId==d);if(I)return I}},[]);s.useCallback(d=>{for(const g of e.subBookInfos){const L=g.chapterInfos.find(I=>I.chapterId==d);if(L)return L}},[]),s.useEffect(()=>{var I,A;x(!0);let d="";localStorage.getItem(Z)?d=localStorage.getItem(Z)||"":(d=T.get("chapterId")||"",localStorage.setItem(Z,d));const g=T.get("subBookId"),L=T.get("verseId");if(L){const y=i.find($=>$.verseId==L);y&&(h(y[0].verseNumber-1),b==G.VERSE_BY_VERSE&&((I=F.current[y[0].verseNumber-1].current)==null||I.scrollIntoView()))}if(d){const y=H(d);if(((A=e.subBookInfos)==null?void 0:A.length)>=0){const $=e.subBookInfos.find(Q=>Q.subBookId===g);if($){const Q=$.chapterInfos.find(de=>de.chapterId===d);Q?(k(Q.chapterNumber==0),l(Q.verses),f(Q.chapterAudio)):(k(!!y),p(d,(y==null?void 0:y.chapterNumber)==0))}else k(!!y),p(d,(y==null?void 0:y.chapterNumber)==0)}else k(!!y),p(d,(y==null?void 0:y.chapterNumber)==0)}x(!1)},[S]),s.useEffect(()=>{const d=()=>u(window.innerHeight);return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),s.useEffect(()=>{x(!0);const d=localStorage.getItem(Z)||T.get("chapterId");let g=!1;if(e.userHistory&&e.userHistory.length>0&&e.userHistory.forEach(L=>{if(L.readChapterIds.includes(d)){g=!0,x(!1);return}}),!g){const L={chapterId:d};Ve.saveHistory(L).then(I=>{e.dispatch({type:me.SET_USER_HISTORY,payload:{userHistories:I}}),x(!1)}).catch(I=>{I.status==401&&I.response.data.message==He&&(ee.custom(A=>a.jsx(te,{text:r(I.response.data.message),visible:A.visible})),We.logout(),t("/login")),x(!1)})}},[]),s.useEffect(()=>{(b==G.ONLY_TRNSLATION||S)&&E(0),b!=G.ONLY_TRNSLATION&&!S&&E(n?200:120)},[b,S]),s.useEffect(()=>{var d,g;b==G.VERSE_BY_VERSE&&j>=0&&((g=(d=F.current[j])==null?void 0:d.current)==null||g.scrollIntoView())},[j,b,F,i]);const X=s.useCallback(d=>{var I;x(!0);const g=(I=e.bookmark)==null?void 0:I.find(A=>A.verseId===d),L={verseId:d};try{if(!g)lt.saveBookmark(L).then(A=>{e.dispatch({type:me.ADD_BOOKMARK,payload:{bookmark:A.bookmark}}),x(!1),ee.custom(y=>a.jsx(te,{text:r("Bookmark Saved"),type:ke.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:y.visible}))}).catch(A=>{x(!1),A.status==401&&A.response.data.message==He&&(ee.custom(y=>a.jsx(te,{text:r(A.response.data.message),offset:e.showAudioSeekBar?125:70,visible:y.visible})),We.logout(),t("/login"))});else{const A=e.bookmark.filter(y=>y.verseId==d);A&&A.length>0&&lt.deleteBookmark(A[0]._id).then(()=>{e.dispatch({type:me.REMOVE_BOOKMARK,payload:{bookmarkId:g._id}}),x(!1),ee.custom(y=>a.jsx(te,{text:r("Bookmark Deleted"),type:ke.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:y.visible}))}).catch(y=>{x(!1),y.status==401&&y.response.data.message==He&&(ee.custom($=>a.jsx(te,{text:r(y.response.data.message),type:ke.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:$.visible})),We.logout(),t("/login"))})}}catch(A){x(!1),ee.custom(y=>a.jsx(te,{text:r(A),type:ke.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:y.visible}))}},[e,r]),V=s.useCallback((d,g,L)=>{let I=g+(L-d),A=o-150-I;I<w?(I=w,A=o-150-w):A<z&&(I=o-150-z),E(I)},[o]),Y=d=>{const g=d.clientY,L=N,I=y=>V(g,L,y.clientY),A=()=>{document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",A)};document.addEventListener("mousemove",I),document.addEventListener("mouseup",A)},re=d=>{const g=d.touches[0].clientY,L=N,I=y=>V(g,L,y.touches[0].clientY),A=()=>{document.removeEventListener("touchmove",I),document.removeEventListener("touchend",A)};document.addEventListener("touchmove",I),document.addEventListener("touchend",A)},ne=d=>{e.dispatch({type:me.SET_AUDIO_SEEK_BAR_STATUS,payload:{showAudioSeekBar:d}})},se=()=>{t("/sound-settings")},ve=()=>{localStorage.removeItem(Z),t(-1)},pe=s.useCallback(d=>{var fe;const g=T.get("bookId"),L=localStorage.getItem(Z),I=localStorage.getItem(we);if(x(!0),!L&&T.get("chapterId")){const q=T.get("chapterId");q&&localStorage.setItem(Z,q)}if(!I&&T.get("subBookId")){const q=T.get("subBookId");q&&localStorage.setItem(we,q)}const A=e.bookInfos.find(q=>q.bookId==g);if(!A){x(!1);return}const y=A.subBooks.find(q=>{var J;return(J=q.chapterInfos)==null?void 0:J.some(K=>K.chapterId==L)});if(!y){x(!1);return}const $=y.subBookNumber,Q=A.subBooks.find(q=>q.subBookNumber==$+1),de=A.subBooks.find(q=>q.subBookNumber==$-1),oe=(q,J)=>{if(q&&q.chapterInfos&&q.chapterInfos.length>0){const K=q.chapterInfos[0].chapterId;localStorage.setItem(Z,K),localStorage.setItem(we,q.subBookId);const le=H(K);p(K,(le==null?void 0:le.chapterNumber)==0)}else ee.custom(K=>a.jsx(te,{text:r(J?"Last Chapter":"First Chapter"),offset:e.showAudioSeekBar?125:70,visible:K.visible})),x(!1)};if(y.noChapter)d==Pe?oe(Q,!0):oe(de,!1);else{const q=(fe=y.chapterInfos)==null?void 0:fe.find(xe=>xe.chapterId==L);if(!q){x(!1);return}const J=y.chapterInfos.length,K=q.chapterNumber,le=xe=>{const he=y.chapterInfos.find(Ce=>Ce.chapterNumber==xe);he&&(localStorage.setItem(Z,he.chapterId),p(he.chapterId,he.chapterNumber==0))};d==Pe?K==J-1?oe(Q,!0):le(K+1):K==0?oe(de,!1):le(K-1)}},[]);return a.jsxs(Zr,{style:{backgroundColor:D},children:[!S&&a.jsxs(Nt,{showaudioseekbar:e.showAudioSeekBar?"true":"false",children:[b==G.SPLIT_PANEL&&a.jsxs(a.Fragment,{children:[a.jsx(jr,{verses:i,height:N}),a.jsx(en,{style:{backgroundColor:U},onMouseDown:Y,onTouchStart:re})]}),(b==G.ONLY_TRNSLATION||b==G.SPLIT_PANEL)&&a.jsx(Pt,{verses:i,height:v,originPanelHeight:N,bookmarks:e.bookmark,isLoggedIn:!!e.currentUser,isIntro:S,handleBookmark:X}),b==G.VERSE_BY_VERSE&&a.jsx(tn,{children:i.map((d,g)=>{var L;return a.jsxs(rn,{ref:F.current[g],children:[a.jsx(rt,{verse:d,refer:W.current[g],index:g}),a.jsx(nt,{refer:W.current[g],verse:d,index:g,isLoggedIn:!!e.currentUser,handleBookmark:X,isExistingInBookmark:((L=e.bookmark.filter(I=>I.verseId==d.verseId))==null?void 0:L.length)>0})]},g)})})]}),S&&a.jsx(Nt,{showaudioseekbar:"false",children:a.jsx(Pt,{verses:i,height:v,originPanelHeight:N,bookmarks:e.bookmark,isLoggedIn:!!e.currentUser,isIntro:S,handleBookmark:X})}),a.jsx(Jr,{src:c,bookTitle:T.get("book")||"",subBookTitle:T.get("subBook")||"",showAudioSeekBar:e.showAudioSeekBar,verses:i,isIntro:S,setAudioSeekBarStatus:ne,moveToSoundSettingPage:se,moveToPrevPage:ve,handleNavigateBtn:pe}),C&&a.jsx(nr,{})]})}const on=e=>({bookmark:e.books.bookmark,bookInfos:e.books.bookInfos,subBookInfos:e.books.subBookInfos,chapterInfos:e.books.chapterInfos,userHistory:e.books.userHistory,currentUser:e.user.currentUser,showAudioSeekBar:e.pageStatus.showAudioSeekBar}),pn=er(on)(nn);export{pn as default};
