var I=Object.defineProperty;var P=(t,e,i)=>e in t?I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var T=(t,e,i)=>P(t,typeof e!="symbol"?e+"":e,i);import{b as p,j as a,ay as R,a3 as C,au as k,aC as v}from"./index-CRP-wFOv.js";import{s as r,B as d,S as _,g as B,c as M,u as F,j as w,V as G}from"./App-DJBUTn4I.js";import{L as D}from"./index-D3GzDKEY.js";import{C as N}from"./index-D5bkGesG.js";import{A as z}from"./index-Chsqz-eY.js";import{T as j,I as S}from"./index-DpGKkzTs.js";import{d as W}from"./ArrowBack-IkCX76-W.js";import{a as H}from"./index-C88pvD_q.js";import"./index-C9K3faeS.js";const L=r("img")({width:"100%",marginTop:"20px"}),J=r(d)({width:"100%",height:"100%",padding:"0px 6px",position:"relative",overflowX:"hidden",scrollbarGutter:"stable both-edges"}),U=r(d)({width:"100%",marginTop:"20px","& .MuiAccordion-gutters":{width:"100%"},"& .MuiAccordion-root .MuiAccordionSummary-root .Mui-expanded":{margin:"12px 0px !important"}}),O=r(d)({width:"100%","& .MuiBox-root":{padding:"0px "}}),K=r(d)({width:"100%",margin:"20px 0px","& .MuiBox-root":{textWrap:"wrap"}}),$=r(d)({position:"fixed",zIndex:"3",bottom:"0px",width:"100%",height:"85px",overflow:"hidden"}),X=r("img")({width:"100%",position:"absolute",bottom:"0px","@media (min-width: 750px)":{top:"0px"},"@media (min-width: 1050px)":{top:"-10px"},"@media (min-width: 1450px)":{top:"-20px"}}),q=r(d)(({backgroundcolor:t})=>({display:"flex",width:"110px",justifyContent:"space-between",alignItems:"center",position:"relative",bottom:"-23px",left:"25px",boxSizing:"border-box",padding:"10px 20px",borderRadius:"30px",backgroundColor:t})),Q=r(d)(({textcolor:t})=>({display:"flex",alignItems:"center","& svg":{fill:t}}));function Y(t){var h;const{theme:e,textSize:i}=p.useContext(_),{mainBGColor:u,textColor:g}=B(e),s=(n,l)=>{var x,b,A;return n.image?a.jsx(L,{src:n.image.url,alt:n.image.alt},l):n.isCollapse?a.jsx(U,{children:a.jsx(z,{label:(x=n.title)==null?void 0:x[t.currentLanguage],outArrow:!0,detail:a.jsx(O,{children:n.content.map((o,f)=>!o.url&&!o.isTitle?a.jsx(j,{children:o==null?void 0:o[t.currentLanguage]},f):!o.url&&o.isTitle?a.jsx(j,{fontWeight:"bold",isTitle:!0,children:o==null?void 0:o[t.currentLanguage]},f):a.jsx(L,{src:o.url,alt:o.alt},f))})})},l):a.jsx(j,{fontFamily:"Inter",lineHeight:i+20,direction:t.currentLanguage===R?"rtl":"ltr",fontSize:n.title?i+2:i,fontWeight:n.title?"bold":"500",textAlign:n.title?"center":"left",children:((b=n.title)==null?void 0:b[t.currentLanguage])||((A=n.text)==null?void 0:A[t.currentLanguage])},l)};return a.jsx(K,{style:{backgroundColor:u,color:g},children:a.jsx(J,{children:(h=t.verses)==null?void 0:h.map((n,l)=>s(n,l))})})}function Z(t){const{theme:e}=p.useContext(_),{mainBGColor:i,altTextColor:u}=B(e),g=()=>a.jsx(X,{src:e==C.DEFAULT||e==C.DARK?S.bar_reading_subtract:e==C.BLACK_AND_WHITE?S.bar_reading_subtract_BAW:e==C.SAPPHIRE?S.bar_reading_subtract_sapphire:S.bar_reading_subtract_easyocean}),s=()=>{var h,n,l;return a.jsxs(q,{backgroundcolor:i,onClick:t.goBack,children:[a.jsx(Q,{textcolor:u,children:a.jsx(W,{})}),a.jsx(j,{color:"#17637D",fontFamily:"Inter",fontWeight:"400",fontSize:16,lineHeight:24,children:((l=(n=(h=t.terms)==null?void 0:h.texts.find(x=>(x==null?void 0:x.variable)=="Back"))==null?void 0:n.text)==null?void 0:l[t.appLanguage])||"Back"})]})};return a.jsxs($,{children:[g(),s()]})}const V=r(d)({width:"100%",display:"flex",flexDirection:"column"}),tt=r(d)({width:"100%",height:"calc(100dvh - 100px)",display:"flex",boxSizing:"border-box",padding:"20px"}),et=r(d)({width:"100%",display:"flex",boxSizing:"border-box"});class at{constructor(){T(this,"fetchArticle",e=>new Promise((i,u)=>{const g=k+`/journey/${e}/article`;H.get(g).then(s=>{s.data?i(s.data):u(s.data.error)}).catch(s=>{u(this.getErrorMessage(s))})}))}getErrorMessage(e){let i=e.message;return e.response&&e.response.data&&e.response.data.message&&(i=e.response.data.message),i}}const it=new at;function nt(t){const[e,i]=p.useState(!1),[u,g]=p.useState([]),[s,h]=p.useState(),n=F(),{theme:l,readingLanguage:x}=p.useContext(_),{mainBGColor:b}=B(l),A=()=>{t.dispatch({type:w.SET_PREVIOUS_PAGE,payload:{prevPage:v.READING}}),n("/journey")};p.useEffect(()=>{var y;i(!0);const m=(y=t.articleContent)==null?void 0:y.filter(c=>c.article===t.currentArticle);m&&m.length>0?(g(m),i(!1)):it.fetchArticle(t.currentArticle).then(c=>{t.dispatch({type:w.ADD_ARTICLE_CONTENT,payload:{articleContent:c.verses}}),g(c.verses),i(!1)}).catch(c=>{G.custom(E=>a.jsx(N,{text:c,offset:70,visible:E.visible})),i(!1)})},[]),p.useEffect(()=>{var y;const m=(y=t.terms)==null?void 0:y.find(c=>(c==null?void 0:c.pageTitle)=="Journey Reading");m!=null&&m.isPublished&&h(m)},[t.terms]);const o=()=>a.jsx(tt,{children:a.jsx(Y,{currentLanguage:x,verses:u})}),f=()=>a.jsx(et,{children:a.jsx(Z,{appLanguage:t.appLanguage,terms:s||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},goBack:A})});return a.jsxs(V,{style:{backgroundColor:b},children:[o(),f(),e&&a.jsx(D,{})]})}const ot=t=>({articleContent:t.journeys.articleContent,terms:t.terms.terms,appLanguage:t.user.appLanguage,currentArticle:t.journeys.currentArticle}),ht=M(ot)(nt);export{ht as default};
