import{b as s,j as a,Q as R,ah as Kt,U as J,ak as je,ax as it,ay as De,az as Vt,X as zt,af as ot,$ as Ue,ab as at,Y as ct,aA as ut,aB as He,ad as re,ae as Ae,aC as dt,aD as Gt,aE as $t,aF as ft,ac as Qt,ai as Jt,ap as Fe,ao as Le}from"./index-BPBmJKVk.js";import{S as he,g as ge,aC as Zt,aD as en,aE as tn,aF as nn,s as L,B as H,aG as qe,aH as rn,_ as $,c as on,u as an,d as me}from"./App-C3B7_W4L.js";import{I as B,T as le}from"./images-Bxmz8AG4.js";import{p as sn}from"./index-CPJKCDlJ.js";import{C as Q,a as Ye}from"./auth.service-gATcw1AS.js";import{A as ln,b as ht}from"./bookmark.service-DK1LtL-N.js";import{L as cn}from"./index-CKj2lEu7.js";import{b as Re}from"./book.service-B2LodF4F.js";import"./index-DP38r-_o.js";import"./axios-BimPEqV4.js";function un(e){const{theme:i}=s.useContext(he),{buttonColor:o,buttonTextColor:l}=ge(i);return a.jsx(Zt,{ref:e.refer,"data-id":e.dataId,backgroundColor:o,children:a.jsxs(en,{progresscolor:l,children:[a.jsx(tn,{variant:"determinate",value:e.progress,thickness:2}),a.jsx(nn,{src:i==R.EASY_OCEAN?B.bookmark2_white:B.bookmark2_default})]})})}var Wt={};function dn(e){if(e&&e.__esModule)return e;var i={};if(e!=null){for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var l=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};l.get||l.set?Object.defineProperty(i,o,l):i[o]=e[o]}}return i.default=e,i}var qt=dn,fe={},Ke,gt;function fn(){if(gt)return Ke;gt=1;function e(i){return i&&i.__esModule?i:{default:i}}return Ke=e,Ke}var Pe,vt;function hn(){if(vt)return Pe;vt=1;function e(){return Pe=e=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])}return i},e.apply(this,arguments)}return Pe=e,Pe}var ze,xt;function gn(){if(xt)return ze;xt=1;function e(i,o){if(i==null)return{};var l={},c=Object.keys(i),h,k;for(k=0;k<c.length;k++)h=c[k],!(o.indexOf(h)>=0)&&(l[h]=i[h]);return l}return ze=e,ze}var Ge,mt;function vn(){if(mt)return Ge;mt=1;var e=gn();function i(o,l){if(o==null)return{};var c=e(o,l),h,k;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(o);for(k=0;k<v.length;k++)h=v[k],!(l.indexOf(h)>=0)&&Object.prototype.propertyIsEnumerable.call(o,h)&&(c[h]=o[h])}return c}return Ge=i,Ge}var $e,pt;function xn(){if(pt)return $e;pt=1;function e(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}return $e=e,$e}var Qe,St;function mn(){if(St)return Qe;St=1;function e(o,l){for(var c=0;c<l.length;c++){var h=l[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(o,h.key,h)}}function i(o,l,c){return l&&e(o.prototype,l),c&&e(o,c),o}return Qe=i,Qe}var we,bt;function pn(){if(bt)return we;bt=1;function e(o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(c){return typeof c}:e=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},e(o)}function i(o){return typeof Symbol=="function"&&e(Symbol.iterator)==="symbol"?we=i=function(c){return e(c)}:we=i=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":e(c)},i(o)}return we=i,we}var Je,yt;function Sn(){if(yt)return Je;yt=1;function e(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}return Je=e,Je}var Ze,_t;function bn(){if(_t)return Ze;_t=1;var e=pn(),i=Sn();function o(l,c){return c&&(e(c)==="object"||typeof c=="function")?c:i(l)}return Ze=o,Ze}var Ne,It;function yn(){if(It)return Ne;It=1;function e(i){return Ne=e=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},e(i)}return Ne=e,Ne}var Oe,wt;function _n(){if(wt)return Oe;wt=1;function e(i,o){return Oe=e=Object.setPrototypeOf||function(c,h){return c.__proto__=h,c},e(i,o)}return Oe=e,Oe}var et,kt;function In(){if(kt)return et;kt=1;var e=_n();function i(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),l&&e(o,l)}return et=i,et}var tt,Ct;function Xt(){if(Ct)return tt;Ct=1;var e=function(){};return tt=e,tt}var nt={},rt,Et;function Xe(){if(Et)return rt;Et=1;function e(i){return i&&i.__esModule?i:{default:i}}return rt=e,rt}var ke={},Tt;function wn(){if(Tt)return ke;Tt=1;var e=Xe();Object.defineProperty(ke,"__esModule",{value:!0}),ke.default=void 0;var i=e(s);e(Xt());var o=function(h){h.index;var k=h.children;i.default.Children.count(k)},l=o;return ke.default=l,ke}var Me={},Ce={},At;function Ut(){if(At)return Ce;At=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.default=void 0;var e={RESISTANCE_COEF:.6,UNCERTAINTY_THRESHOLD:3};return Ce.default=e,Ce}var Bt;function kn(){if(Bt)return Me;Bt=1;var e=Xe();Object.defineProperty(Me,"__esModule",{value:!0}),Me.default=l;var i=e(s),o=e(Ut());function l(c){var h=c.children,k=c.startIndex,v=c.startX,P=c.pageX,A=c.viewLength,b=c.resistance,w=i.default.Children.count(h)-1,S=k+(v-P)/A,N;return b?S<0?S=Math.exp(S*o.default.RESISTANCE_COEF)-1:S>w&&(S=w+1-Math.exp((w-S)*o.default.RESISTANCE_COEF)):S<0?(S=0,N=(S-k)*A+P):S>w&&(S=w,N=(S-k)*A+P),{index:S,startX:N}}return Me}var Ee={},Lt;function Cn(){if(Lt)return Ee;Lt=1;var e=Xe();Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.default=void 0;var i=e(s),o=function(h,k){var v=!1,P=function(W){return W?W.key:"empty"};if(h.children.length&&k.children.length){var A=i.default.Children.map(h.children,P),b=A[h.index];if(b!=null){var w=i.default.Children.map(k.children,P),S=w[k.index];b===S&&(v=!0)}}return v},l=o;return Ee.default=l,Ee}var Te={},Rt;function En(){if(Rt)return Te;Rt=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.default=void 0;function e(o,l){var c=o%l;return c<0?c+l:c}var i=e;return Te.default=i,Te}var Pt;function Tn(){return Pt||(Pt=1,function(e){var i=Xe();Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"checkIndexBounds",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"computeIndex",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"constant",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"getDisplaySameSlide",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"mod",{enumerable:!0,get:function(){return k.default}});var o=i(wn()),l=i(kn()),c=i(Ut()),h=i(Cn()),k=i(En())}(nt)),nt}var Nt;function An(){if(Nt)return fe;Nt=1;var e=qt,i=fn();Object.defineProperty(fe,"__esModule",{value:!0}),fe.getDomTreeShapes=g,fe.findNativeHandler=z,fe.default=fe.SwipeableViewsContext=void 0;var o=i(hn()),l=i(vn()),c=i(xn()),h=i(mn()),k=i(bn()),v=i(yn()),P=i(In()),A=e(s);i(sn),i(Xt());var b=Tn();function w(r,d,m,t){return r.addEventListener(d,m,t),{remove:function(){r.removeEventListener(d,m,t)}}}var S={container:{direction:"ltr",display:"flex",willChange:"transform"},slide:{width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"}},N={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(d){return"translate(".concat(-d,"%, 0)")},"x-reverse":function(d){return"translate(".concat(d,"%, 0)")},y:function(d){return"translate(0, ".concat(-d,"%)")},"y-reverse":function(d){return"translate(0, ".concat(d,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function W(r,d){var m=d.duration,t=d.easeFunction,n=d.delay;return"".concat(r," ").concat(m," ").concat(t," ").concat(n)}function j(r,d){var m=N.rotationMatrix[d];return{pageX:m.x[0]*r.pageX+m.x[1]*r.pageY,pageY:m.y[0]*r.pageX+m.y[1]*r.pageY}}function O(r){return r.touches=[{pageX:r.pageX,pageY:r.pageY}],r}function g(r,d){for(var m=[];r&&r!==d&&r!==document.body&&!r.hasAttribute("data-swipeable");){var t=window.getComputedStyle(r);t.getPropertyValue("position")==="absolute"||t.getPropertyValue("overflow-x")==="hidden"?m=[]:(r.clientWidth>0&&r.scrollWidth>r.clientWidth||r.clientHeight>0&&r.scrollHeight>r.clientHeight)&&m.push({element:r,scrollWidth:r.scrollWidth,scrollHeight:r.scrollHeight,clientWidth:r.clientWidth,clientHeight:r.clientHeight,scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}),r=r.parentNode}return m}var U=null;function z(r){var d=r.domTreeShapes,m=r.pageX,t=r.startX,n=r.axis;return d.some(function(p){var x=m>=t;(n==="x"||n==="y")&&(x=!x);var C=Math.round(p[N.scrollPosition[n]]),D=C>0,q=C+p[N.clientLength[n]]<p[N.scrollLength[n]];return x&&q||!x&&D?(U=p.element,!0):!1})}var M=A.createContext();fe.SwipeableViewsContext=M;var _=function(r){(0,P.default)(d,r);function d(m){var t;return(0,c.default)(this,d),t=(0,k.default)(this,(0,v.default)(d).call(this,m)),t.rootNode=null,t.containerNode=null,t.ignoreNextScrollEvents=!1,t.viewLength=0,t.startX=0,t.lastX=0,t.vx=0,t.startY=0,t.isSwiping=void 0,t.started=!1,t.startIndex=0,t.transitionListener=null,t.touchMoveListener=null,t.activeSlide=null,t.indexCurrent=null,t.firstRenderTimeout=null,t.setRootNode=function(n){t.rootNode=n},t.setContainerNode=function(n){t.containerNode=n},t.setActiveSlide=function(n){t.activeSlide=n,t.updateHeight()},t.handleSwipeStart=function(n){var p=t.props.axis,x=j(n.touches[0],p);t.viewLength=t.rootNode.getBoundingClientRect()[N.length[p]],t.startX=x.pageX,t.lastX=x.pageX,t.vx=0,t.startY=x.pageY,t.isSwiping=void 0,t.started=!0;var C=window.getComputedStyle(t.containerNode),D=C.getPropertyValue("-webkit-transform")||C.getPropertyValue("transform");if(D&&D!=="none"){var q=D.split("(")[1].split(")")[0].split(","),V=window.getComputedStyle(t.rootNode),Y=j({pageX:parseInt(q[4],10),pageY:parseInt(q[5],10)},p);t.startIndex=-Y.pageX/(t.viewLength-parseInt(V.paddingLeft,10)-parseInt(V.paddingRight,10))||0}},t.handleSwipeMove=function(n){if(!t.started){t.handleTouchStart(n);return}if(!(U!==null&&U!==t.rootNode)){var p=t.props,x=p.axis,C=p.children,D=p.ignoreNativeScroll,q=p.onSwitching,V=p.resistance,Y=j(n.touches[0],x);if(t.isSwiping===void 0){var ie=Math.abs(Y.pageX-t.startX),te=Math.abs(Y.pageY-t.startY),ce=ie>te&&ie>b.constant.UNCERTAINTY_THRESHOLD;if(!V&&(x==="y"||x==="y-reverse")&&(t.indexCurrent===0&&t.startX<Y.pageX||t.indexCurrent===A.Children.count(t.props.children)-1&&t.startX>Y.pageX)){t.isSwiping=!1;return}if(ie>te&&n.preventDefault(),ce===!0||te>b.constant.UNCERTAINTY_THRESHOLD){t.isSwiping=ce,t.startX=Y.pageX;return}}if(t.isSwiping===!0){n.preventDefault(),t.vx=t.vx*.5+(Y.pageX-t.lastX)*.5,t.lastX=Y.pageX;var Se=(0,b.computeIndex)({children:C,resistance:V,pageX:Y.pageX,startIndex:t.startIndex,startX:t.startX,viewLength:t.viewLength}),be=Se.index,oe=Se.startX;if(U===null&&!D){var _e=g(n.target,t.rootNode),ye=z({domTreeShapes:_e,startX:t.startX,pageX:Y.pageX,axis:x});if(ye)return}oe?t.startX=oe:U===null&&(U=t.rootNode),t.setIndexCurrent(be);var ve=function(){q&&q(be,"move")};(t.state.displaySameSlide||!t.state.isDragging)&&t.setState({displaySameSlide:!1,isDragging:!0},ve),ve()}}},t.handleSwipeEnd=function(){if(U=null,!!t.started&&(t.started=!1,t.isSwiping===!0)){var n=t.state.indexLatest,p=t.indexCurrent,x=n-p,C;Math.abs(t.vx)>t.props.threshold?t.vx>0?C=Math.floor(p):C=Math.ceil(p):Math.abs(x)>t.props.hysteresis?C=x>0?Math.floor(p):Math.ceil(p):C=n;var D=A.Children.count(t.props.children)-1;C<0?C=0:C>D&&(C=D),t.setIndexCurrent(C),t.setState({indexLatest:C,isDragging:!1},function(){t.props.onSwitching&&t.props.onSwitching(C,"end"),t.props.onChangeIndex&&C!==n&&t.props.onChangeIndex(C,n,{reason:"swipe"}),p===n&&t.handleTransitionEnd()})}},t.handleTouchStart=function(n){t.props.onTouchStart&&t.props.onTouchStart(n),t.handleSwipeStart(n)},t.handleTouchEnd=function(n){t.props.onTouchEnd&&t.props.onTouchEnd(n),t.handleSwipeEnd(n)},t.handleMouseDown=function(n){t.props.onMouseDown&&t.props.onMouseDown(n),n.persist(),t.handleSwipeStart(O(n))},t.handleMouseUp=function(n){t.props.onMouseUp&&t.props.onMouseUp(n),t.handleSwipeEnd(O(n))},t.handleMouseLeave=function(n){t.props.onMouseLeave&&t.props.onMouseLeave(n),t.started&&t.handleSwipeEnd(O(n))},t.handleMouseMove=function(n){t.props.onMouseMove&&t.props.onMouseMove(n),t.started&&t.handleSwipeMove(O(n))},t.handleScroll=function(n){if(t.props.onScroll&&t.props.onScroll(n),n.target===t.rootNode){if(t.ignoreNextScrollEvents){t.ignoreNextScrollEvents=!1;return}var p=t.state.indexLatest,x=Math.ceil(n.target.scrollLeft/n.target.clientWidth)+p;t.ignoreNextScrollEvents=!0,n.target.scrollLeft=0,t.props.onChangeIndex&&x!==p&&t.props.onChangeIndex(x,p,{reason:"focus"})}},t.updateHeight=function(){if(t.activeSlide!==null){var n=t.activeSlide.children[0];n!==void 0&&n.offsetHeight!==void 0&&t.state.heightLatest!==n.offsetHeight&&t.setState({heightLatest:n.offsetHeight})}},t.state={indexLatest:m.index,isDragging:!1,renderOnlyActive:!m.disableLazyLoading,heightLatest:0,displaySameSlide:!0},t.setIndexCurrent(m.index),t}return(0,h.default)(d,[{key:"componentDidMount",value:function(){var t=this;this.transitionListener=w(this.containerNode,"transitionend",function(n){n.target===t.containerNode&&t.handleTransitionEnd()}),this.touchMoveListener=w(this.rootNode,"touchmove",function(n){t.props.disabled||t.handleSwipeMove(n)},{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout(function(){t.setState({renderOnlyActive:!1})},0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var n=t.index;typeof n=="number"&&n!==this.props.index&&(this.setIndexCurrent(n),this.setState({displaySameSlide:(0,b.getDisplaySameSlide)(this.props,t),indexLatest:n}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"getSwipeableViewsContext",value:function(){var t=this;return{slideUpdateHeight:function(){t.updateHeight()}}}},{key:"setIndexCurrent",value:function(t){if(!this.props.animateTransitions&&this.indexCurrent!==t&&this.handleTransitionEnd(),this.indexCurrent=t,this.containerNode){var n=this.props.axis,p=N.transform[n](t*100);this.containerNode.style.WebkitTransform=p,this.containerNode.style.transform=p}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var t=this,n=this.props;n.action;var p=n.animateHeight,x=n.animateTransitions,C=n.axis,D=n.children,q=n.containerStyle,V=n.disabled;n.disableLazyLoading;var Y=n.enableMouseEvents;n.hysteresis,n.ignoreNativeScroll,n.index,n.onChangeIndex,n.onSwitching,n.onTransitionEnd,n.resistance;var ie=n.slideStyle,te=n.slideClassName,ce=n.springConfig,Se=n.style;n.threshold;var be=(0,l.default)(n,["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"]),oe=this.state,_e=oe.displaySameSlide,ye=oe.heightLatest,ve=oe.indexLatest,u=oe.isDragging,f=oe.renderOnlyActive,I=V?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},E=!V&&Y?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{},T=(0,o.default)({},S.slide,ie),y,K;if(u||!x||_e)y="all 0s ease 0s",K="all 0s ease 0s";else if(y=W("transform",ce),K=W("-webkit-transform",ce),ye!==0){var G=", ".concat(W("height",ce));y+=G,K+=G}var ne={height:null,WebkitFlexDirection:N.flexDirection[C],flexDirection:N.flexDirection[C],WebkitTransition:K,transition:y};if(!f){var Ie=N.transform[C](this.indexCurrent*100);ne.WebkitTransform=Ie,ne.transform=Ie}return p&&(ne.height=ye),A.createElement(M.Provider,{value:this.getSwipeableViewsContext()},A.createElement("div",(0,o.default)({ref:this.setRootNode,style:(0,o.default)({},N.root[C],Se)},be,I,E,{onScroll:this.handleScroll}),A.createElement("div",{ref:this.setContainerNode,style:(0,o.default)({},ne,S.container,q),className:"react-swipeable-view-container"},A.Children.map(D,function(Be,X){if(f&&X!==ve)return null;var ue,Z=!0;return X===ve&&(Z=!1,p&&(ue=t.setActiveSlide,T.overflowY="hidden")),A.createElement("div",{ref:ue,style:T,className:te,"aria-hidden":Z,"data-swipeable":"true"},Be)}))))}}]),d}(A.Component);_.displayName="ReactSwipableView",_.propTypes={},_.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1};var F=_;return fe.default=F,fe}(function(e){var i=qt;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"SwipeableViewsContext",{enumerable:!0,get:function(){return o.SwipeableViewsContext}});var o=i(An())})(Wt);const Bn=Kt(Wt),Ln=L(H)({width:"100%",margin:"0px"}),Rn=L(H)({margin:"0px",padding:"0px",position:"relative"}),Pn=L(H)({width:"100%",height:"100%",margin:"0px",padding:"0px",position:"relative"}),Ft=L(Bn)(({scrollcolor:e})=>({width:"100%",height:"100%",marginBottom:"8px",padding:"14px 0px 20px 0px","::-webkit-scrollbar-thumb":{background:"red"},"::-webkit-scrollbar-thumb: hover":{backgroundColor:e,opacity:"1"},"& .react-swipeable-view-container":{height:"100%"}})),Ve=L(H)({width:"100%",padding:"0px 14px","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}}),Yt=L(H)({height:"10px",width:"100%",position:"absolute",bottom:"0",display:"flex",justifyContent:"center","& :last-child":{marginRight:"0px"}}),We=L(H)(({active:e,linecolor:i})=>({borderTop:`1px solid ${i}`,width:e=="true"?"20px":e=="false"?"10px":"0px",color:"black",marginRight:"5px",marginTop:"5px"})),Nn=L(H)(({scrollbarcolor:e})=>({width:"100%",height:"100%","::-webkit-scrollbar-thumb":{backgroundColor:"red"},"::-webkit-scrollbar-track":{backgroundColor:"transparent"},scrollbarWidth:"auto",scrollbarColor:`${e} transparent`})),Ot=L(H)({width:"100%",padding:"0px",margin:"0px"}),On=L(H)({width:"100%",margin:"auto",padding:"20px 0px","& .MuiBox-root":{textWrap:"wrap"}}),Mn=L(H)({width:"100%",height:"100%",position:"relative",overflowX:"hidden",padding:"0px 15px",scrollbarGutter:"stable both-edges"}),Mt=L("img")({width:"100%"}),jn=L(H)({width:"100%","& .MuiAccordion-gutters":{width:"100%"},"& .MuiAccordion-root .MuiAccordionSummary-root .Mui-expanded":{margin:"12px 0px !important"}}),Dn=L(H)({width:"100%","& .MuiBox-root":{padding:"0px "}}),Hn=L(H)({width:"100%",overflow:"hidden",position:"relative",display:"flex",flexDirection:"column"}),Vn=L(H)({width:"100%",padding:"20px 0px",position:"relative",display:"flex",zIndex:"2","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}}),Wn=L(H)({width:"100%",margin:"0px",position:"relative",display:"flex",flexDirection:"column",zIndex:"2","& .MuiBox-root":{userSelect:"none"},"& .MuiBox-root:active":{cursor:"grabbing"}});L(H)({width:"40px",height:"100%",backgroundColor:"#FFAA5D",justifyContent:"center",alignItems:"center"});L(H)({width:"20px",height:"50%",position:"relative"});function st(e){var w,S;const[i,o]=s.useState(0),{theme:l,textSize:c,referenceLanguage:h,showQuranReferences:k,displayType:v}=s.useContext(he),{topTextColor:P,backgroundColor:A}=ge(l),b=e.verse.verseReference.ref;return v==J.VERSE_BY_VERSE?a.jsxs(Rn,{children:[a.jsxs(Ft,{style:{backgroundColor:A},scrollcolor:P,enableMouseEvents:!0,disabled:!k,onSwitching:N=>o(N),children:[a.jsx(Ve,{children:a.jsx(Ot,{"data-id":e.verse.verseId,"data-index":e.index,ref:e.refer,children:a.jsx(le,{fontFamily:"Inter",fontSize:c,lineHeight:c+20,fontWeight:"700",color:P,dataIndex:e.index.toString(),language:h,direction:h==je?"rtl":"ltr",children:(w=e.verse.verseText)==null?void 0:w[h]})})}),a.jsx(Ve,{children:b&&b.map((N,W)=>a.jsx(le,{fontFamily:"Inter",fontWeight:"700",fontSize:c,lineHeight:c+20,color:P,children:N},W))})]}),b&&b.length>0&&k&&a.jsxs(Yt,{children:[a.jsx(We,{active:i==0?"true":"false",linecolor:P}),a.jsx(We,{active:i==1?"true":"false",linecolor:P})]})]}):a.jsx(Ot,{"data-id":e.verse.verseId,"data-index":e.index,ref:e.refer,style:{backgroundColor:A},children:a.jsx(le,{fontFamily:"Inter",fontSize:c,lineHeight:c+20,fontWeight:"700",color:P,dataIndex:e.index.toString(),language:h,direction:h==je?"rtl":"ltr",onTouchStart:()=>e.onTouchStart&&e.onTouchStart(e.verse.verseReference.ref),onMouseDown:()=>e.onMouseDown&&e.onMouseDown(e.verse.verseReference.ref),children:(S=e.verse.verseText)==null?void 0:S[h]})})}function qn(e){var U,z;const[i,o]=s.useState([]),[l,c]=s.useState(0),{scrollTopVerseIndex:h,setScrollTopVerseIndex:k,setHiddenTopVersePercentage:v,activeScroll:P,setActiveScroll:A}=s.useContext(qe),b=s.useRef([]);b.current=(U=e.verses)==null?void 0:U.map((M,_)=>b.current[_]??s.createRef());const{theme:w,textSize:S,showQuranReferences:N,displayType:W}=s.useContext(he),{backgroundColor:j,topTextColor:O}=ge(w);s.useEffect(()=>{var M;if(((M=e.verses)==null?void 0:M.length)>0){const _=b.current[0];_!=null&&_.current&&_.current.scrollIntoView(),k(0),v(0)}},[e.verses]),s.useEffect(()=>{var M;if(W==J.SPLIT_PANEL&&h>=0&&(P==it||P==De)){const _=b.current[Number(h)];(M=_==null?void 0:_.current)==null||M.scrollIntoView()}},[h,W]);const g=M=>{if(W==J.SPLIT_PANEL){A(Vt);const _=M.currentTarget.getBoundingClientRect().top,F=M.currentTarget.clientHeight;let r=-1,d=1/0;if(b.current.forEach((m,t)=>{if(m.current){const n=m.current.getBoundingClientRect().top,p=m.current.getBoundingClientRect().bottom,x=n-_;p>_&&n<_+F&&Math.abs(x)<d&&(d=Math.abs(x),r=t)}}),r!==-1){k(r);const m=b.current[r];if(m.current){const t=m.current.getBoundingClientRect().top,n=m.current.clientHeight,p=Math.max(0,Math.min(100,(_-t)/n*100));v(p)}}}};return a.jsx(Ln,{style:{height:e.height},children:W===J.SPLIT_PANEL?a.jsxs(Pn,{children:[a.jsxs(Ft,{style:{backgroundColor:j},scrollcolor:O,enableMouseEvents:!0,disabled:!N,onScrollCapture:P!=it?M=>g(M):()=>{},onSwitching:M=>c(M),children:[a.jsx(Ve,{children:(z=e.verses)==null?void 0:z.map((M,_)=>a.jsx(st,{refer:b.current[_],verse:M,index:_,onMouseDown:o,onTouchStart:o},_))}),a.jsx(Ve,{children:i&&i.map((M,_)=>a.jsx(le,{fontFamily:"Inter",fontWeight:"700",fontSize:S-2,color:O,children:M},_))})]}),N&&a.jsxs(Yt,{style:{background:j,bottom:"5px"},children:[a.jsx(We,{active:l===0?"true":"false",linecolor:O}),a.jsx(We,{active:l===1?"true":"false",linecolor:O})]})]}):a.jsx(Nn,{style:{backgroundColor:j},scrollbarcolor:O,children:e.verses.map((M,_)=>a.jsx(st,{refer:b.current[_],verse:M,index:_},_))})})}const Xn=L(H)({position:"fixed",zIndex:"3",bottom:"0px",width:"100%",height:"150px",overflow:"hidden"}),Un=L(H)({position:"relative",display:"flex",justifyContent:"center","& .MuiBox-root":{alignContent:"center"}}),Fn=L("img")({width:"100%",position:"absolute",top:"20px"}),Yn=L(H)({width:"100%",maxWidth:"700px",padding:"0px 20px",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",zIndex:"1",paddingTop:"20px",alignContent:"center","@media (min-width: 600px)":{paddingTop:"25px"}}),Kn=L(H)({position:"relative",bottom:"-75px",height:"100px",alignItems:"center",justifyContent:"space-between"}),zn=L("img")({width:"100%",position:"absolute"}),Gn=L(H)(({readingcontrol:e})=>({height:"100px",width:"100%",maxWidth:"700px",margin:"auto",display:"flex",flexDirection:e==zt.LEFT_HANDED?"row":"row-reverse",justifyContent:"space-between",alignItems:"center",padding:"0px 15px","@media (min-width: 1075px)":{width:"80%",margin:"auto"}})),$n=L(H)({width:"90px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px","@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}}),Qn=L(H)({width:"90px",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"20px","@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}}),pe=L("img")({width:"60px",height:"40px",borderRadius:"50%",cursor:"pointer",zIndex:"1"}),Jn=L(H)(({underlinecolor:e})=>({width:"90px",textDecoration:"underline",textDecorationColor:e,textUnderlineOffset:"3px",zIndex:"1",cursor:"pointer",marginBottom:"20px","& .MuiBox-root":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"@media (min-width: 400px) and (max-width: 499px)":{width:"120px"},"@media (min-width: 500px)":{width:"180px"}})),Zn=L(H)({width:"100%",height:"60px",overflow:"hidden",padding:"0 10px"}),er=L(rn)(({barcolor:e})=>({color:e,opacity:"1",height:"5px","& .MuiSlider-thumb":{width:"13.25px",height:"14px",color:e,transition:"0.3s cubic-bezier(.47,1.64,.41,.8)","&::before":{boxShadow:"0 2px 12px 0 rgba(0,0,0,0.4)"},"&:hover, &.Mui-focusVisible":{boxShadow:"0px 0px 0px 8px rgb(0 0 0 / 16%)"},"&.Mui-active":{width:20,height:20}}})),tr=L(H)({display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"-20px"});function nr(e){const{duration:i,currentTime:o,onTimeChange:l}=e,[c,h]=s.useState(o),{theme:k}=s.useContext(he),{buttonTextColor:v}=ge(k);s.useEffect(()=>{h(o)},[o]);const P=(A,b)=>{h(b),l(b)};return a.jsxs(Zn,{children:[a.jsx(er,{"aria-label":"time-indicator",value:c,min:0,max:Math.floor(i),step:1,barcolor:v,onChange:P}),a.jsxs(tr,{children:[a.jsx(le,{color:v,children:jt(c)}),a.jsx(le,{color:v,children:"-"+jt(Math.floor(i-c))})]})]})}function jt(e){const i=Math.floor(e/60),o=Math.floor(e%60);return`${i}:${o<10?`0${o}`:o}`}function rr(e){const[i,o]=s.useState(!1),[l,c]=s.useState(0),[h,k]=s.useState(0),[v,P]=s.useState(0),A=s.useRef(new Audio),{setScrollTopVerseIndex:b,setActiveScroll:w}=s.useContext(qe),{autoScrollText:S,volume:N,audioLanguage:W,readingControls:j,pageControl:O,theme:g,readingLanguage:U}=s.useContext(he),{logoTextColor:z}=ge(g);s.useEffect(()=>{const x=A.current;e.src&&(x.src=ot+e.src[W||Ue.TRANSLATION]);const C=()=>{k(x.duration)},D=()=>{c(Math.floor(x.currentTime))};return x.addEventListener("loadedmetadata",C),x.addEventListener("timeupdate",D),()=>{x.removeEventListener("loadedmetadata",C),x.removeEventListener("timeupdate",D)}},[e.src]),s.useEffect(()=>{if(A.current.ended)t();else if(S){const x=e.verses.findIndex((C,D)=>{var Y,ie,te;const q=(Y=C.verseAudioStart)==null?void 0:Y[W||Ue.TRANSLATION],V=(te=(ie=e.verses[D+1])==null?void 0:ie.verseAudioStart)==null?void 0:te[W||Ue.TRANSLATION];return l>=q&&l<V});x!==-1&&(x!==v||x==0)&&(b(x),P(x),w(De))}},[l,e.verses,W,S,i]),s.useEffect(()=>{A.current.volume=N/100},[N]);const M=()=>{const x=A.current;w(De),x.readyState>=2?(o(!0),x.play().catch(C=>$.custom(D=>{var q,V;return a.jsx(Q,{text:((V=(q=e.terms.texts.find(Y=>Y.variable=="Audio Play Error"))==null?void 0:q.text)==null?void 0:V[U])||"",offset:125,visible:D.visible})}))):$.custom(C=>{var D,q;return a.jsx(Q,{text:((q=(D=e.terms.texts.find(V=>V.variable=="Audio Not Ready"))==null?void 0:D.text)==null?void 0:q[U])||"",offset:125,visible:C.visible})})},_=()=>{o(!1),A.current.pause(),w(at)},F=()=>{_(),e.moveToSoundSettingPage()},r=()=>{_(),e.setAudioSeekBarStatus(!1)},d=()=>{_(),localStorage.getItem(re)&&localStorage.removeItem(re),localStorage.getItem(Ae)&&localStorage.removeItem(Ae),e.moveToPrevPage()},m=x=>{A.current.currentTime=x,c(x)},t=()=>{c(0),o(!1),b(0),w(at)},n=()=>a.jsxs(Un,{children:[a.jsx(Fn,{src:g==R.DEFAULT||g==R.DARK?B.bar_reading_audio_subtract:g==R.BLACK_AND_WHITE?B.bar_reading_audio_subtract_BAW:g==R.SAPPHIRE?B.bar_reading_audio_subtract_sapphire:B.bar_reading_audio_subtract_easyocean}),a.jsxs(Yn,{children:[a.jsx(pe,{src:g==R.DEFAULT||g==R.DARK?B.btn_sound_setting:g==R.BLACK_AND_WHITE?B.btn_sound_setting_BAW:g==R.SAPPHIRE?B.btn_sound_setting_sapphire:B.btn_sound_setting_easyocean,onClick:F}),a.jsx(nr,{duration:h,currentTime:l,onTimeChange:m}),a.jsx(pe,{src:g==R.DEFAULT||g==R.DARK?B.btn_close:g==R.BLACK_AND_WHITE?B.btn_close_BAW:g==R.SAPPHIRE?B.btn_close_sapphire:B.btn_close_easyocean,onClick:r})]})]}),p=()=>a.jsxs(Kn,{children:[a.jsx(zn,{src:g==R.DEFAULT||g==R.DARK?B.bar_reading_subtract:g==R.BLACK_AND_WHITE?B.bar_reading_subtract_BAW:g==R.SAPPHIRE?B.bar_reading_subtract_sapphire:B.bar_reading_subtract_easyocean}),a.jsxs(Gn,{readingcontrol:j,children:[a.jsxs($n,{children:[a.jsx(pe,{src:g==R.DEFAULT||g==R.DARK?B.btn_arrow_left:g==R.BLACK_AND_WHITE?B.btn_arrow_left_BAW:g==R.SAPPHIRE?B.btn_arrow_left_sapphire:B.btn_arrow_left_easyocean,onClick:()=>e.handleNavigateBtn(O==ct.LEFT_TO_RIGHT?ut:He)}),a.jsx(pe,{src:g==R.DEFAULT||g==R.DARK?B.btn_arrow_right:g==R.BLACK_AND_WHITE?B.btn_arrow_right_BAW:g==R.SAPPHIRE?B.btn_arrow_right_sapphire:B.btn_arrow_right_easyocean,onClick:()=>e.handleNavigateBtn(O==ct.LEFT_TO_RIGHT?He:ut)})]}),!e.isIntro&&a.jsx(Qn,{children:e.showAudioSeekBar?i?a.jsx(pe,{src:g==R.DEFAULT||g==R.DARK?B.btn_pause:g==R.BLACK_AND_WHITE?B.btn_pause_BAW:g==R.SAPPHIRE?B.btn_pause_sapphire:B.btn_pause_easyocean,onClick:_}):a.jsx(pe,{src:g==R.DEFAULT||g==R.DARK?B.btn_play:g==R.BLACK_AND_WHITE?B.btn_play_BAW:g==R.SAPPHIRE?B.btn_play_sapphire:B.btn_play_easyocean,onClick:M}):a.jsx(pe,{src:g==R.DEFAULT||g==R.DARK?B.btn_sound:g==R.BLACK_AND_WHITE?B.btn_sound_BAW:g==R.SAPPHIRE?B.btn_sound_sapphire:B.btn_sound_easyocean,onClick:()=>e.setAudioSeekBarStatus(!0)})}),a.jsx(Jn,{underlinecolor:z,onClick:d,children:a.jsx(le,{color:z,textAlign:"right",children:e.bookTitle+": "+e.subBookTitle})})]})]});return a.jsxs(Xn,{children:[e.showAudioSeekBar&&n(),p()]})}function lt(e){const[i,o]=s.useState(e.isExistingInBookmark?100:0),[l,c]=s.useState(null),[h,k]=s.useState(!1),[v,P]=s.useState(0),[A,b]=s.useState(0),{textSize:w,theme:S,readingLanguage:N}=s.useContext(he),{mainBGColor:W}=ge(S),j=s.useRef(null),O=s.useRef(i),g=e.refer,U=s.useRef(),z=window.matchMedia("(orientation: portrait)").matches;s.useEffect(()=>{O.current=i},[i]),s.useEffect(()=>{if(j.current&&g.current&&("verseHeader"in e.verse&&(j.current.style.height=`${g.current.getBoundingClientRect().height-4}px`,j.current.style.bottom="2px",j.current.style.alignSelf="self-end"),g.current.offsetHeight>0&&g.current.offsetHeight<=24)){const t=j.current.children[0];t.style.width="20px",t.style.height="20px",t.children[1].style.width="10px",t.children[1].style.height="10px"}},[e.verse,e.translatePanelHeight,z]);const M=s.useCallback(t=>{if(t>0&&t<dt){const n=t/dt*100,p=e.isExistingInBookmark?100-n:n;o(p),O.current=p}else if(t>0){const n=e.isExistingInBookmark?0:100;o(n),O.current=n}else{const n=e.isExistingInBookmark?100:0;o(n),O.current=n}},[e.isExistingInBookmark]),_=s.useCallback(()=>{if(g.current){const t=Math.max(0,Math.min(A,$t));g.current.style.transform=`translateX(${t}px)`,M(t-Gt)}h&&(U.current=requestAnimationFrame(_))},[h,A,M]);s.useEffect(()=>(h?U.current=requestAnimationFrame(_):cancelAnimationFrame(U.current),()=>cancelAnimationFrame(U.current)),[h,_]);const F=t=>{var p;!e.language&&k(!0),P(t);const n=(p=g.current)==null?void 0:p.getAttribute("data-id");n&&c(n)},r=t=>{if(!h)return;const n=Math.max(0,t-v);e.isLoggedIn&&n>ft&&b(n-ft)},d=()=>{k(!1),g.current&&(!e.isExistingInBookmark&&O.current==100||e.isExistingInBookmark&&O.current==0?l&&e.handleBookmark(l):e.isExistingInBookmark?(o(100),O.current=100):(o(0),O.current=0),g.current.style.transition="transform 0.3s ease-out",g.current.style.transform="translateX(0)",setTimeout(()=>{g.current&&(g.current.style.transition="")},300)),b(0)};s.useEffect(()=>{const t=g.current;if(t){const n=V=>{V.preventDefault(),F(V.clientX)},p=V=>{V.preventDefault(),r(V.clientX)},x=V=>{V.preventDefault(),d()},C=V=>{F(V.touches[0].clientX)},D=V=>{r(V.touches[0].clientX)},q=V=>{d()};return t.addEventListener("mousedown",n),document.addEventListener("mousemove",p),document.addEventListener("mouseup",x),t.addEventListener("touchstart",C),t.addEventListener("touchmove",D),t.addEventListener("touchend",q),()=>{t.removeEventListener("mousedown",n),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",x),t.removeEventListener("touchstart",C),t.removeEventListener("touchmove",D),t.removeEventListener("touchend",q)}}},[g,M,e.handleBookmark,v]);const m=t=>{for(var n in t)if(t[n]!==null&&t[n]!=="")return!0;return!1};return a.jsxs(Hn,{children:["verseHeader"in e.verse&&m(e.verse.verseHeader)&&a.jsx(Vn,{"data-id":e.verse.verseId,"data-index":e.index,style:{backgroundColor:W},children:a.jsx(le,{fontFamily:"Inter",fontWeight:"700",backgroundColor:W,fontSize:w,lineHeight:w+15,direction:e.language||N===je?"rtl":"ltr",children:e.verse.verseHeader[e.language||N]})}),!e.language&&a.jsx(un,{progress:i,refer:j,backgroundColor:W}),a.jsx(Wn,{"data-id":"verseId"in e.verse?e.verse.verseId:e.verse.id,"data-index":e.index,ref:e.refer,children:a.jsx(le,{fontFamily:"Inter",fontSize:w,backgroundColor:W,dataIndex:e.language?"":e.index.toString(),lineHeight:w+20,direction:N===je?"rtl":"ltr",children:"verseText"in e.verse?e.verse.verseText[e.language||N]:e.verse.text[e.language||N]})})]})}function Dt(e){var M,_,F;const[i,o]=s.useState([]),[l,c]=s.useState([]),{scrollTopVerseIndex:h,setScrollTopVerseIndex:k,setHiddenTopVersePercentage:v,activeScroll:P,setActiveScroll:A}=s.useContext(qe),b=s.useRef(null),w=s.useRef([]);w.current=(M=e.verses)==null?void 0:M.map((r,d)=>w.current[d]??s.createRef());const{theme:S,displayType:N}=s.useContext(he),{mainBGColor:W,textColor:j}=ge(S),O=localStorage.getItem(Qt)||Jt,g=s.useCallback(()=>{let r=[];return w.current.forEach(d=>{d.current&&d.current.children[0]&&r.push(d.current.children[0].offsetHeight)}),r},[w]);s.useEffect(()=>{var r;if(((r=e.verses)==null?void 0:r.length)>0){const d=w.current[0];d!=null&&d.current&&d.current.scrollIntoView(),k(0),v(0)}},[e.verses]),s.useEffect(()=>{const r=g();o(r);const d=r.reduce((m,t,n)=>(m[n]=(m[n-1]||0)+t,m),[]);c(d)},[e.verses,g]);const U=s.useCallback(()=>{if(!b.current)return;const r=b.current.scrollTop;A(it);let d=0,m=l.length-1;for(;d<=m;){const q=Math.floor((d+m)/2);l[q]>r?m=q-1:d=q+1}const t=d-1;k(t);const n=t>0?l[t-1]:0,p=i[t],C=(r-n)/p*100,D=Math.min(Math.max(C,0),100);v(D)},[l,i,k]);s.useEffect(()=>{const r=b.current;if(r)return r.addEventListener("scroll",U),r.addEventListener("scrollend",()=>A(at)),()=>{r.removeEventListener("scroll",U)}}),s.useEffect(()=>{var r;if((N===J.SPLIT_PANEL||N===J.ONLY_TRNSLATION)&&h>=0&&(P==Vt||P==De)){const d=w.current[Number(h)];(r=d==null?void 0:d.current)==null||r.scrollIntoView()}},[h]);const z=(r,d)=>{var m,t;return r.image?a.jsx(Mt,{src:ot+"/images/"+r.image,alt:((m=r.title)==null?void 0:m.en)||"Intro Image"},d):r.isCollapse?a.jsx(jn,{children:a.jsx(ln,{label:(t=r.title)==null?void 0:t[O],outArrow:!0,detail:a.jsx(Dn,{children:r.content.map((n,p)=>{var x;return n.image?a.jsx(Mt,{src:ot+"/images/"+n.image,alt:((x=r.title)==null?void 0:x.en)||"Intro Image"},p):a.jsx(le,{children:n==null?void 0:n[O]},p)})})})},d):a.jsx(lt,{refer:w.current[d],verse:r,index:d,language:O,isExistingInBookmark:e.bookmarks.some(n=>n.id===r.id),isLoggedIn:e.isLoggedIn,translatePanelHeight:e.height,handleBookmark:e.handleBookmark},d)};return a.jsx(On,{style:{backgroundColor:W,color:j,height:e.height},children:a.jsxs(Mn,{ref:b,children:[!e.isIntro&&((_=e.verses)==null?void 0:_.map((r,d)=>a.jsx(lt,{refer:w.current[d],verse:r,index:d,isExistingInBookmark:e.bookmarks.some(m=>m.verseId===r.verseId),isLoggedIn:e.isLoggedIn,translatePanelHeight:e.height,handleBookmark:e.handleBookmark},d))),e.isIntro&&((F=e.verses)==null?void 0:F.map((r,d)=>z(r,d)))]})})}const ir=L(H)({margin:"0px",height:"100dvh"}),Ht=L(H)(({showaudioseekbar:e})=>({width:"100%",padding:"20px",height:e=="true"?"calc(100dvh - 150px)":"calc(100dvh - 100px)"})),or=L(H)({width:"45px",height:"8px",margin:"auto",marginTop:"-4px",position:"relative",zIndex:"2",cursor:"grab","&:active":{cursor:"grabbing"}}),ar=L(H)({width:"100%",height:"100%",overflowX:"hidden",overflowY:"auto",margin:"0px",paddingBottom:"0px"}),sr=L(H)({width:"100%",padding:"15px"});function lr(e){const i=window.matchMedia("(orientation: portrait)").matches,[o,l]=s.useState([]),[c,h]=s.useState(null),[k,v]=s.useState(!1),[P,A]=s.useState(i?200:120),[b,w]=s.useState(!1),[S,N]=s.useState(),{theme:W,displayType:j,readingLanguage:O}=s.useContext(he),{mainBGColor:g,topTextColor:U}=ge(W),{scrollTopVerseIndex:z,setScrollTopVerseIndex:M}=s.useContext(qe),_=s.useRef([]),F=s.useRef([]);_.current=o==null?void 0:o.map((u,f)=>_.current[f]??s.createRef()),F.current=o==null?void 0:o.map((u,f)=>F.current[f]??s.createRef());const r=new URLSearchParams(window.location.search),d=100,m=100;window.matchMedia("(orientation: portrait)").addEventListener("change",u=>{const f=u.matches;A(f?200:120)});const[t,n]=s.useState(typeof window<"u"?window.innerHeight:1e3),p=e.showAudioSeekBar?t-150-P:t-100-P,x=an(),C=s.useCallback(u=>{Re.fetchVerses(u).then(f=>{l(f.verses),f&&f.length>0&&h(f.chapterAudio),e.dispatch({type:me.ADD_CHAPTERINFO,payload:{chapterInfo:f}}),v(!1)}).catch(f=>{v(!1),$.custom(I=>a.jsx(Q,{text:f,offset:70,visible:I.visible}))})},[]),D=s.useCallback((u,f)=>{var I;if(w(f),(I=e.chapterInfos)!=null&&I.length){const E=e.chapterInfos.find(T=>T.chapterId===u);E?(w(E.chapterNumber==0),l(E.verses),h(E.chapterAudio)):f?q(u):C(u),v(!1)}else f?q(u):C(u),v(!1)},[]),q=s.useCallback(u=>{Re.fetchIntroVerses(u).then(f=>{l(f.verses),e.dispatch({type:me.ADD_CHAPTERINFO,payload:{chapterInfo:f}})}).catch(f=>{$.custom(I=>a.jsx(Q,{text:f,offset:70,visible:I.visible}))}).finally(()=>{v(!1)})},[]),V=s.useCallback(async u=>{try{const f=await Re.fetchSubBookInfo(u);e.dispatch({type:me.ADD_SUBBOOK,payload:{subBook:f}})}catch(f){$.custom(I=>a.jsx(Q,{text:f,visible:I.visible}))}finally{v(!1)}},[e.subBooks]),Y=s.useCallback(u=>{for(const f of e.bookInfos)for(const I of f.subBooks){const E=I.chapterInfos.find(T=>T.chapterId==u);if(E)return E}},[]),ie=s.useCallback(u=>{for(const f of e.subBooks){const I=f.chapterInfos.find(E=>E.chapterId==u);if(I)return I}},[]);s.useEffect(()=>{var f;const u=e.terms.find(I=>I.pageTitle=="Reading Page");(f=u==null?void 0:u.isPublished)!=null&&f[O]?N(u):$.custom(I=>a.jsx(Q,{text:"The terminologies for this page are not published.",visible:I.visible}))},[e.terms]),s.useEffect(()=>{const u=r.get("subBookId");!e.subBooks.find(I=>I.subBookId==u)&&u&&V(u)},[e.subBooks]),s.useEffect(()=>{var E,T;v(!0);let u="";localStorage.getItem(re)?u=localStorage.getItem(re)||"":(u=r.get("chapterId")||"",localStorage.setItem(re,u));const f=r.get("subBookId"),I=r.get("verseId");if(I){const y=o.find(K=>K.verseId==I);y&&(M(y[0].verseNumber-1),j==J.VERSE_BY_VERSE&&((E=F.current[y[0].verseNumber-1].current)==null||E.scrollIntoView()))}if(u){const y=Y(u);if(((T=e.subBookInfos)==null?void 0:T.length)>=0){const K=e.subBookInfos.find(G=>G.subBookId===f);if(K){const G=K.chapterInfos.find(ne=>ne.chapterId===u);G?(w(G.chapterNumber==0),l(G.verses),h(G.chapterAudio)):(w(!!y),D(u,(y==null?void 0:y.chapterNumber)==0))}else w(!!y),D(u,(y==null?void 0:y.chapterNumber)==0)}else w(!!y),D(u,(y==null?void 0:y.chapterNumber)==0)}v(!1)},[b]),s.useEffect(()=>{const u=()=>n(window.innerHeight);return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]),s.useEffect(()=>{v(!0);const u=localStorage.getItem(re)||r.get("chapterId");let f=!1;if(e.userHistory&&e.userHistory.length>0&&e.userHistory.forEach(I=>{if(I.readChapterIds.includes(u)){f=!0,v(!1);return}}),!f){const I={chapterId:u};Re.saveHistory(I).then(E=>{e.dispatch({type:me.SET_USER_HISTORY,payload:{userHistories:E}}),v(!1)}).catch(E=>{E.status==401&&E.response.data.message==Fe&&($.custom(T=>a.jsx(Q,{text:E.response.data.message,visible:T.visible})),Ye.logout(),x("/login")),v(!1)})}},[]),s.useEffect(()=>{(j==J.ONLY_TRNSLATION||b)&&A(0),j!=J.ONLY_TRNSLATION&&!b&&A(i?200:120)},[j,b]),s.useEffect(()=>{var u,f;j==J.VERSE_BY_VERSE&&z>=0&&((f=(u=F.current[z])==null?void 0:u.current)==null||f.scrollIntoView())},[z,j,F,o]),s.useEffect(()=>{var u,f;j==J.VERSE_BY_VERSE&&z>=0&&((f=(u=F.current[0])==null?void 0:u.current)==null||f.scrollIntoView(),M(0))},[j,o,F]),s.useEffect(()=>{const u=r.get("bothTranslated");j!=J.ONLY_TRNSLATION&&u=="false"&&$.custom(f=>{var I,E;return a.jsx(Q,{text:((E=(I=S==null?void 0:S.texts.find(T=>T.variable=="One Translated"))==null?void 0:I.text)==null?void 0:E[O])||"",offset:e.showAudioSeekBar?125:70,visible:f.visible})})},[j]);const te=s.useCallback(u=>{var E;v(!0);const f=(E=e.bookmark)==null?void 0:E.find(T=>T.verseId===u),I={verseId:u};try{if(!f)ht.saveBookmark(I).then(T=>{e.dispatch({type:me.ADD_BOOKMARK,payload:{bookmark:T.bookmark}}),v(!1),$.custom(y=>{var K,G;return a.jsx(Q,{text:((G=(K=S==null?void 0:S.texts.find(ne=>ne.variable=="Bookmark Saved"))==null?void 0:K.text)==null?void 0:G[O])||"",type:Le.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:y.visible})})}).catch(T=>{v(!1),T.status==401&&T.response.data.message==Fe&&($.custom(y=>a.jsx(Q,{text:T.response.data.message,offset:e.showAudioSeekBar?125:70,visible:y.visible})),Ye.logout(),x("/login"))});else{const T=e.bookmark.filter(y=>y.verseId==u);T&&T.length>0&&ht.deleteBookmark(T[0]._id).then(()=>{e.dispatch({type:me.REMOVE_BOOKMARK,payload:{bookmarkId:f._id}}),v(!1),$.custom(y=>{var K,G;return a.jsx(Q,{text:((G=(K=S==null?void 0:S.texts.find(ne=>ne.variable=="Bookmark Deleted"))==null?void 0:K.text)==null?void 0:G[O])||"",type:Le.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:y.visible})})}).catch(y=>{v(!1),y.status==401&&y.response.data.message==Fe&&($.custom(K=>a.jsx(Q,{text:y.response.data.message,type:Le.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:K.visible})),Ye.logout(),x("/login"))})}}catch(T){v(!1),$.custom(y=>a.jsx(Q,{text:T,type:Le.BOOKMARK,offset:e.showAudioSeekBar?125:70,visible:y.visible}))}},[e]),ce=s.useCallback((u,f,I)=>{let E=f+(I-u),T=t-150-E;E<d?(E=d,T=t-150-d):T<m&&(E=t-150-m),A(E)},[t]),Se=u=>{const f=u.clientY,I=P,E=y=>ce(f,I,y.clientY),T=()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",T)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",T)},be=u=>{const f=u.touches[0].clientY,I=P,E=y=>ce(f,I,y.touches[0].clientY),T=()=>{document.removeEventListener("touchmove",E),document.removeEventListener("touchend",T)};document.addEventListener("touchmove",E),document.addEventListener("touchend",T)},oe=u=>{e.dispatch({type:me.SET_AUDIO_SEEK_BAR_STATUS,payload:{showAudioSeekBar:u}})},_e=()=>{x("/sound-settings")},ye=()=>{localStorage.removeItem(re),x(-1)},ve=s.useCallback(u=>{var Be;const f=r.get("bookId"),I=localStorage.getItem(re),E=localStorage.getItem(Ae);if(v(!0),!I&&r.get("chapterId")){const X=r.get("chapterId");X&&localStorage.setItem(re,X)}if(!E&&r.get("subBookId")){const X=r.get("subBookId");X&&localStorage.setItem(Ae,X)}const T=e.bookInfos.find(X=>X.bookId==f);if(!T){v(!1);return}const y=e.subBooks.find(X=>{var ue;return(ue=X.chapterInfos)==null?void 0:ue.some(Z=>Z.chapterId==I)});if(!y){v(!1);return}const K=y.subBookNumber,G=T.subBooks.find(X=>X.subBookNumber==K+1),ne=T.subBooks.find(X=>X.subBookNumber==K-1),Ie=(X,ue)=>{if(X&&X.chapterInfos&&X.chapterInfos.length>0){const Z=X.chapterInfos[0].chapterId;localStorage.setItem(re,Z),localStorage.setItem(Ae,X.subBookId);const de=ie(Z);D(Z,(de==null?void 0:de.chapterNumber)==0)}else $.custom(Z=>{var de,ae,ee,se;return a.jsx(Q,{text:ue?((ae=(de=S==null?void 0:S.texts.find(xe=>xe.variable=="Last Chapter"))==null?void 0:de.text)==null?void 0:ae[O])||"":((se=(ee=S==null?void 0:S.texts.find(xe=>xe.variable=="First Chapter"))==null?void 0:ee.text)==null?void 0:se[O])||"",offset:e.showAudioSeekBar?125:70,visible:Z.visible})}),v(!1)};if(y!=null&&y.noChapter)u==He?Ie(G,!0):Ie(ne,!1);else{const X=(Be=y.chapterInfos)==null?void 0:Be.find(ae=>ae.chapterId==I);if(!X){v(!1);return}const ue=y.chapterInfos.length,Z=X.chapterNumber,de=ae=>{const ee=y.chapterInfos.find(se=>se.chapterNumber==ae);ee&&(localStorage.setItem(re,ee.chapterId),ee.chapterNumber==0?w(!0):w(!1),l(ee.verses),v(!1))};u==He?Z>=ue-1?(v(!1),$.custom(ae=>{var ee,se;return a.jsx(Q,{text:((se=(ee=S==null?void 0:S.texts.find(xe=>xe.variable=="Last Chapter"))==null?void 0:ee.text)==null?void 0:se[O])||"",offset:70,visible:ae.visible})})):de(Z+1):Z==0?(v(!1),$.custom(ae=>{var ee,se;return a.jsx(Q,{text:((se=(ee=S==null?void 0:S.texts.find(xe=>xe.variable=="First Chapter"))==null?void 0:ee.text)==null?void 0:se[O])||"",offset:70,visible:ae.visible})})):de(Z-1)}},[e.subBooks]);return a.jsxs(ir,{style:{backgroundColor:g},children:[!b&&a.jsxs(Ht,{showaudioseekbar:e.showAudioSeekBar?"true":"false",children:[j==J.SPLIT_PANEL&&a.jsxs(a.Fragment,{children:[a.jsx(qn,{verses:o,height:P}),a.jsx(or,{style:{backgroundColor:U},onMouseDown:Se,onTouchStart:be})]}),(j==J.ONLY_TRNSLATION||j==J.SPLIT_PANEL)&&a.jsx(Dt,{verses:o,height:p,originPanelHeight:P,bookmarks:e.bookmark,isLoggedIn:!!e.currentUser,isIntro:b,handleBookmark:te}),j==J.VERSE_BY_VERSE&&a.jsx(ar,{children:o.map((u,f)=>{var I;return a.jsxs(sr,{ref:F.current[f],children:[a.jsx(st,{verse:u,refer:_.current[f],index:f}),a.jsx(lt,{refer:_.current[f],verse:u,index:f,isLoggedIn:!!e.currentUser,handleBookmark:te,isExistingInBookmark:((I=e.bookmark.filter(E=>E.verseId==u.verseId))==null?void 0:I.length)>0})]},f)})})]}),b&&a.jsx(Ht,{showaudioseekbar:"false",children:a.jsx(Dt,{verses:o,height:p,originPanelHeight:P,bookmarks:e.bookmark,isLoggedIn:!!e.currentUser,isIntro:b,handleBookmark:te})}),a.jsx(rr,{src:c,bookTitle:r.get("book")||"",subBookTitle:r.get("subBook")||"",showAudioSeekBar:e.showAudioSeekBar,verses:o,isIntro:b,terms:S||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},setAudioSeekBarStatus:oe,moveToSoundSettingPage:_e,moveToPrevPage:ye,handleNavigateBtn:ve}),k&&a.jsx(cn,{})]})}const cr=e=>({bookmark:e.books.bookmark,bookInfos:e.books.bookInfos,subBooks:e.books.subBooks,subBookInfos:e.books.subBookInfos,chapterInfos:e.books.chapterInfos,userHistory:e.books.userHistory,currentUser:e.user.currentUser,showAudioSeekBar:e.pageStatus.showAudioSeekBar,terms:e.terms.terms}),br=on(cr)(lr);export{br as default};
