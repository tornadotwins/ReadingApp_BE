var k=Object.defineProperty;var B=(e,t,s)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var v=(e,t,s)=>B(e,typeof t!="symbol"?t+"":t,s);import{b as g,j as n,a3 as A,au as G}from"./index-DC16-UlT.js";import{S as E,g as b,a as H,b as P,s as y,B as U,c as N,u as I,d as u,k as R}from"./App-B6IVJFDP.js";import{u as M}from"./useOrientation-CV8n8uB8.js";import{B as w,S as F,L as K,T as O,H as W,a as _,b as z,c as D}from"./styled-CGOILTeN.js";import{T as p,I as T}from"./index-q08Ug-Dw.js";import{H as Y}from"./index-C_iQBf7r.js";import{B as q}from"./Button-DKySFvha.js";import{L as J}from"./index-B1CaDLjZ.js";import{S as Q}from"./index-DgSPuNxz.js";import{C as V}from"./index-D0ZiCPAQ.js";import{a as X}from"./auth.service-BJ40tbp-.js";import{a as Z}from"./axios-upsvKRUO.js";import"./index-FgFbVugl.js";function $({label:e,checked:t,onChange:s}){const{theme:r}=g.useContext(E),{altTextColor:l}=b(r);return n.jsx(H,{control:n.jsx(P,{checked:t,bordercolor:l,onChange:s}),label:n.jsx(p,{color:l,children:e}),style:{color:l},bordercolor:l})}const ee=y(U)({display:"flex"}),ae=y(ee)({justifyContent:"center",alignItems:"center"}),te=y(ae)({width:"100dvw",height:"100dvh"});function ne(e){const{theme:t,readingLanguage:s}=g.useContext(E),{headerBGColor:r,logoTextColor:l}=b(t),[L,m]=g.useState(""),[S,C]=g.useState("");return g.useEffect(()=>{var c,x,h,f,o,i;if(e.isHeaven){const a=(c=e.pageTerms)==null?void 0:c.texts.find(d=>d.variable=="Welcome Heavenly");m(((x=a==null?void 0:a.text)==null?void 0:x[s])||((h=a==null?void 0:a.text)==null?void 0:h.en)||"")}else{const a=(f=e.pageTerms)==null?void 0:f.texts.find(d=>d.variable=="Welcome");m(((o=a==null?void 0:a.text)==null?void 0:o[s])||((i=a==null?void 0:a.text)==null?void 0:i.en)||"")}},[e.isHeaven,e.pageTerms,s]),g.useEffect(()=>{const c=e.isHeaven?t==A.EASY_OCEAN?T.main_logo_heaven_easyocean:T.main_logo_heaven:t==A.EASY_OCEAN?T.main_logo_easyocean:T.main_logo;C(c)},[e.isHeaven,t]),n.jsxs(w,{style:{backgroundColor:r},children:[n.jsx(F,{children:n.jsx(Y,{isLogin:e.isLoggedIn,textColor:l,itemBgColor:r,terms:e.pageTerms,onLogin:e.onLogin,onSettings:e.onSettings})}),n.jsx(K,{src:S}),n.jsx(O,{children:n.jsx(p,{color:l,fontFamily:"Buenard",fontWeight:"700",textAlign:"center",fontSize:36,lineHeight:47,children:L})})]})}function se(e){var S,C,c,x,h,f,o,i;const{theme:t}=g.useContext(E),{mainBGColor:s,altTextColor:r}=b(t),l=[{value:"en",label:"English"},{value:"ar",label:"Arabic"},{value:"tlg",label:"Tagalog"}],L=a=>{const d=a.target.value;e.handleLanguageChange(d)},m=a=>{e.handleKeepLanguageChange(a.target.checked)};return n.jsxs(W,{style:{backgroundColor:s},children:[n.jsx(p,{color:r,children:((C=(S=e.pageTerms.texts.find(a=>a.variable=="Reading Language"))==null?void 0:S.text)==null?void 0:C[e.appLanguage])||"Reading Language"}),n.jsx(_,{children:n.jsx(Q,{label:"",options:l,value:e.appLanguage,textColor:r,backgroundColor:s,onChange:L})}),n.jsx(_,{children:n.jsx($,{label:((x=(c=e.pageTerms.texts.find(a=>a.variable=="Keep App"))==null?void 0:c.text)==null?void 0:x[e.appLanguage])||"Keep App in English",checked:e.keepLanguage,onChange:m})}),n.jsx(z,{children:n.jsx(q,{label:((f=(h=e.pageTerms.texts.find(a=>a.variable=="Start"))==null?void 0:h.text)==null?void 0:f[e.appLanguage])||"Start",onClick:e.onStartClicked,size:"medium"})}),n.jsx(D,{children:n.jsx(J,{label:((i=(o=e.pageTerms.texts.find(a=>a.variable=="Save App"))==null?void 0:o.text)==null?void 0:i[e.appLanguage])||"Save this as an app"})})]})}class oe{constructor(){v(this,"getAllTerms",()=>new Promise((t,s)=>{const r=G+"/translator/appTexts";Z.get(r).then(l=>{t(l.data)}).catch(l=>{s(this.getErrorMessage(l))})}))}getErrorMessage(t){let s=t.message;return t.response&&t.response.data&&t.response.data.message&&(s=t.response.data.message),s}}const ie=new oe;function le(e){const t=M(),s=I(),[r,l]=g.useState(!1),[L,m]=g.useState(),{readingLanguage:S}=g.useContext(E);g.useEffect(()=>{ie.getAllTerms().then(o=>{var a,d;e.dispatch({type:u.SET_TERMS,payload:{terms:o}});const i=o.find(j=>j.pageTitle="Welcome Page");((a=i==null?void 0:i.isPublished)!=null&&a[S]||(d=i==null?void 0:i.isPublished)!=null&&d.en)&&m(i)}).catch(o=>{R.custom(i=>n.jsx(V,{text:o,visible:i.visible}))})},[]),g.useEffect(()=>{window.location.href.includes("holy")?l(!1):l(!0)},[]),g.useEffect(()=>{const o=e.terms.find(i=>i.pageTitle="Welcome Page");m(o)},[e.terms]);const C=()=>{s("/login")},c=()=>{e.dispatch({type:u.RESET_USER}),e.dispatch({type:u.RESET_BOOK}),e.dispatch({type:u.RESET_PAGE_STATUS}),X.logout()},x=()=>{s("/library")},h=o=>{e.dispatch({type:u.SET_APP_LANGUAGE,payload:{language:o}}),e.dispatch({type:u.SET_READING_LANGUAGE,payload:{language:o}})},f=o=>{e.dispatch({type:u.SET_APP_LANGUAGE,payload:{language:"en"}}),e.dispatch({type:u.SET_READING_LANGUAGE,payload:{language:"en"}}),e.dispatch({type:u.SET_KEEP_EN_LANGUAGE,payload:{keepLanguage:o}})};return n.jsxs(te,{flexDirection:t?"column":"row",children:[n.jsx(ne,{isLoggedIn:e.currentUser!=null,isHeaven:r,pageTerms:L||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},onLogin:e.currentUser?c:C,onSettings:()=>s("/settings")}),n.jsx(se,{pageTerms:L||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},appLanguage:e.appLanguage,readingLanguage:e.readingLanguage,keepLanguage:e.keepLanguage,onStartClicked:x,handleLanguageChange:h,handleKeepLanguageChange:f})]})}function ge(e){return{currentUser:e.user.currentUser,appLanguage:e.user.appLanguage,readingLanguage:e.user.readingLanguage,keepLanguage:e.user.keepEnLanguage,terms:e.terms.terms}}const ye=N(ge)(le);export{ye as default};
