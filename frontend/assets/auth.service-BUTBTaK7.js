var d=Object.defineProperty;var p=(i,e,s)=>e in i?d(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var r=(i,e,s)=>p(i,typeof e!="symbol"?e+"":e,s);import{b as f,j as h,ao as S,Q as E,A as l,af as u}from"./index-BPBmJKVk.js";import{S as _,aS as A,aT as T,g as x}from"./App-CPmoLqX-.js";import{T as w,I as m}from"./images-CmvybGD6.js";import{a as n}from"./axios-BimPEqV4.js";function v({text:i,type:e,offset:s,visible:a}){const{theme:o}=f.useContext(_),{buttonColor:t,buttonTextColor:g}=x(o);let c;return e===S.BOOKMARK&&(c=m.icon_bookmark_shine_dark,o==E.EASY_OCEAN&&(c=m.icon_bookmark_shine_white)),h.jsxs(A,{style:{backgroundColor:t,animation:a?"customerEnter 0.3s ease-out":"customerLeave 0.3s ease-in forwards",bottom:s?s+"px":"20px"},children:[c&&h.jsx(T,{src:c}),h.jsx(w,{fontFamily:"Inter",fontSize:16,color:g,children:i})]})}class k{constructor(){r(this,"setAxiosInterceptors",e=>{n.interceptors.response.use(s=>s,s=>(s.response&&s.response.status===401&&this.setSession(null),Promise.reject(s)))});r(this,"login",e=>new Promise((s,a)=>{const o=u+"/auth/login";n.post(o,e).then(t=>{t.data.user?(this.setSession(t.data.token),s(t.data.user)):a(t.data.error)}).catch(t=>{a(this.getErrorMessage(t))})}));r(this,"signup",e=>new Promise((s,a)=>{const o=u+"/auth/signup";n.post(o,e).then(t=>{t.data.user?s(t.data.user):a(t.data.error)}).catch(t=>{a(this.getErrorMessage(t))})}));r(this,"verifyEmail",e=>new Promise((s,a)=>{const o=u+"/auth/verify_email";n.post(o,e).then(t=>{s(t.data)}).catch(t=>{a(this.getErrorMessage(t))})}));r(this,"forgotPassword",e=>new Promise((s,a)=>{const o=u+"/auth/forgot_password";n.post(o,e).then(t=>{s(t.data)}).catch(t=>{a(this.getErrorMessage(t))})}));r(this,"resetPassword",e=>new Promise((s,a)=>{const o=u+"/auth/reset_password";n.post(o,e).then(t=>{s(t.data)}).catch(t=>{a(this.getErrorMessage(t))})}));r(this,"updateSettings",e=>new Promise((s,a)=>{const o=u+"/auth/update_settings";n.post(o,e).then(t=>{s(t.data)}).catch(t=>{a(t)})}));r(this,"logout",()=>{this.setSession(null)});r(this,"setSession",e=>{e?(localStorage.setItem(l,e),n.defaults.headers.common.Authorization=`Bearer ${e}`):(localStorage.removeItem(l),delete n.defaults.headers.common.Authorization)});r(this,"getAccessToken",()=>localStorage.getItem(l));r(this,"isValidToken",e=>!!e);r(this,"isAuthenticated",()=>!!this.getAccessToken())}handleAuthentication(){const e=this.getAccessToken();e&&(this.isValidToken(e)?this.setSession(e):this.setSession(null))}verifyRecaptchaToken(e){return new Promise((s,a)=>{const o=u+"/auth/verify_recaptcha_token";n.post(o,e).then(t=>{s(t.data)}).catch(t=>{a(this.getErrorMessage(t))})})}getErrorMessage(e){let s=e.message;return e.response&&e.response.data&&e.response.data.message&&(s=e.response.data.message),s}}const b=new k;export{v as C,b as a};
