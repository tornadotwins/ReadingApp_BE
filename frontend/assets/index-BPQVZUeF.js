var tt=Object.defineProperty;var ot=(e,t,i)=>t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var De=(e,t,i)=>ot(e,typeof t!="symbol"?t+"":t,i);import{c as Se,_ as F,j as n,N as Z,b as u,a8 as nt,o as ee,J as at,ac as pe,ag as fe,Q as B,aj as ke,ak as ye,M as z,al as ve,am as it,an as st,ao as be,ap as Ne,aq as Pe,af as rt}from"./index-DDg5x1vp.js";import{x as Ve,y as Xe,z as lt,A as me,s as r,D as ct,E as Je,F as Ce,G as Qe,J as dt,B as h,K as ut,u as se,S as re,g as le,_ as W,c as gt,d as xt,e as q}from"./App-GE3H3y4l.js";import{I as f,T as $,g as bt,a as Re}from"./images-j8WIPT5U.js";import{H as ht}from"./index-DrzNUWhQ.js";import{C as G,L as pt}from"./index-SmND3041.js";import{A as ft,b as Me}from"./bookmark.service-2mLeOBLC.js";import{S as mt}from"./index-Bk30o3J3.js";import{b as Le}from"./book.service-2NLq_LIt.js";import{a as Be}from"./auth.service-Dnuse4UM.js";import"./index-DIuleTOP.js";import"./axios-BimPEqV4.js";function kt(e){return Ve("MuiPagination",e)}Xe("MuiPagination",["root","ul","outlined","text"]);const yt=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function vt(e={}){const{boundaryCount:t=1,componentName:i="usePagination",count:o=1,defaultPage:l=1,disabled:y=!1,hideNextButton:s=!1,hidePrevButton:x=!1,onChange:m,page:k,showFirstButton:C=!1,showLastButton:S=!1,siblingCount:b=1}=e,p=Se(e,yt),[v,N]=lt({controlled:k,default:l,name:i,state:"page"}),w=(a,d)=>{k||N(d),m&&m(a,d)},A=(a,d)=>{const T=d-a+1;return Array.from({length:T},(H,Y)=>a+Y)},O=A(1,Math.min(t,o)),E=A(Math.max(o-t+1,t+1),o),P=Math.max(Math.min(v-b,o-t-b*2-1),t+2),R=Math.min(Math.max(v+b,t+b*2+2),E.length>0?E[0]-2:o-1),M=[...C?["first"]:[],...x?[]:["previous"],...O,...P>t+2?["start-ellipsis"]:t+1<o-t?[t+1]:[],...A(P,R),...R<o-t-1?["end-ellipsis"]:o-t>t?[o-t]:[],...E,...s?[]:["next"],...S?["last"]:[]],D=a=>{switch(a){case"first":return 1;case"previous":return v-1;case"next":return v+1;case"last":return o;default:return null}},c=M.map(a=>typeof a=="number"?{onClick:d=>{w(d,a)},type:"page",page:a,selected:a===v,disabled:y,"aria-current":a===v?"true":void 0}:{onClick:d=>{w(d,D(a))},type:a,page:D(a),selected:!1,disabled:y||a.indexOf("ellipsis")===-1&&(a==="next"||a==="last"?v>=o:v<=1)});return F({items:c},p)}function Bt(e){return Ve("MuiPaginationItem",e)}const K=Xe("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),$e=me(n.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Fe=me(n.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Ue=me(n.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),ze=me(n.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Ct=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Ze=(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],t[`size${ee(i.size)}`],i.variant==="text"&&t[`text${ee(i.color)}`],i.variant==="outlined"&&t[`outlined${ee(i.color)}`],i.shape==="rounded"&&t.rounded,i.type==="page"&&t.page,(i.type==="start-ellipsis"||i.type==="end-ellipsis")&&t.ellipsis,(i.type==="previous"||i.type==="next")&&t.previousNext,(i.type==="first"||i.type==="last")&&t.firstLast]},St=e=>{const{classes:t,color:i,disabled:o,selected:l,size:y,shape:s,type:x,variant:m}=e,k={root:["root",`size${ee(y)}`,m,s,i!=="standard"&&`color${ee(i)}`,i!=="standard"&&`${m}${ee(i)}`,o&&"disabled",l&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[x]],icon:["icon"]};return Qe(k,Bt,t)},It=r("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Ze})(({theme:e,ownerState:t})=>F({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${K.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),Tt=r(ct,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Ze})(({theme:e,ownerState:t})=>F({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${K.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${K.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${K.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Z(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${K.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Z(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${K.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:t})=>F({},t.variant==="text"&&{[`&.${K.selected}`]:F({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}},[`&.${K.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}},{[`&.${K.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},t.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${K.selected}`]:F({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:Z(e.palette[t.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:Z(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Z(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${K.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Z(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${K.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),wt=r("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})(({theme:e,ownerState:t})=>F({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(22)})),jt=u.forwardRef(function(t,i){const o=Je({props:t,name:"MuiPaginationItem"}),{className:l,color:y="standard",component:s,components:x={},disabled:m=!1,page:k,selected:C=!1,shape:S="circular",size:b="medium",slots:p={},type:v="page",variant:N="text"}=o,w=Se(o,Ct),A=F({},o,{color:y,disabled:m,selected:C,shape:S,size:b,type:v,variant:N}),O=nt(),E=St(A),R=(O?{previous:p.next||x.next||ze,next:p.previous||x.previous||Ue,last:p.first||x.first||$e,first:p.last||x.last||Fe}:{previous:p.previous||x.previous||Ue,next:p.next||x.next||ze,first:p.first||x.first||$e,last:p.last||x.last||Fe})[v];return v==="start-ellipsis"||v==="end-ellipsis"?n.jsx(It,{ref:i,ownerState:A,className:Ce(E.root,l),children:"â€¦"}):n.jsxs(Tt,F({ref:i,ownerState:A,component:s,disabled:m,className:Ce(E.root,l)},w,{children:[v==="page"&&k,R?n.jsx(wt,{as:R,ownerState:A,className:E.icon}):null]}))}),_t=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],At=e=>{const{classes:t,variant:i}=e;return Qe({root:["root",i],ul:["ul"]},kt,t)},Ot=r("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant]]}})({}),Et=r("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function Dt(e,t,i){return e==="page"?`${i?"":"Go to "}page ${t}`:`Go to ${e} page`}const Nt=u.forwardRef(function(t,i){const o=Je({props:t,name:"MuiPagination"}),{boundaryCount:l=1,className:y,color:s="standard",count:x=1,defaultPage:m=1,disabled:k=!1,getItemAriaLabel:C=Dt,hideNextButton:S=!1,hidePrevButton:b=!1,renderItem:p=c=>n.jsx(jt,F({},c)),shape:v="circular",showFirstButton:N=!1,showLastButton:w=!1,siblingCount:A=1,size:O="medium",variant:E="text"}=o,P=Se(o,_t),{items:R}=vt(F({},o,{componentName:"Pagination"})),M=F({},o,{boundaryCount:l,color:s,count:x,defaultPage:m,disabled:k,getItemAriaLabel:C,hideNextButton:S,hidePrevButton:b,renderItem:p,shape:v,showFirstButton:N,showLastButton:w,siblingCount:A,size:O,variant:E}),D=At(M);return n.jsx(Ot,F({"aria-label":"pagination navigation",className:Ce(D.root,y),ownerState:M,ref:i},P,{children:n.jsx(Et,{className:D.ul,ownerState:M,children:R.map((c,a)=>n.jsx("li",{children:p(F({},c,{color:s,"aria-label":C(c.type,c.page,c.selected),shape:v,size:O,variant:E}))},a))})}))});function Pt(e){return n.jsx(Nt,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function He(){const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}function Rt(){const[e,t]=u.useState(He());return u.useEffect(()=>{function i(){t(He())}return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),e}var Ie={},Mt=at;Object.defineProperty(Ie,"__esModule",{value:!0});var et=Ie.default=void 0,Lt=Mt(dt()),$t=n;et=Ie.default=(0,Lt.default)((0,$t.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const Ft=r(h)({display:"flex",position:"relative",width:"100%"}),Ut=r("img")({width:"100%",marginTop:"57px"}),zt=r(h)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),Ht=r(h)({display:"flex",alignItems:"baseline"}),Kt=r(h)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),Wt=r("img")({width:"100%",height:"100%"}),Gt=r(h)({margin:0,marginLeft:"12px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),Yt=r(h)(({hamburgercolor:e})=>({position:"absolute",top:"12px",right:"15px",width:"46px","& .hamburger-react":{width:"46px !important",color:e},"& .hamburger-react ~ .MuiBox-root ":{border:`1px solid ${e}`},"@media (max-height: 639px)":{top:"8px",right:"10px"},"@media screen and (orientation: landscape)":{right:"15px"}})),qt=r("img")({cursor:"pointer","&:active":{opacity:"0.8"}}),Vt=r(h)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),Xt=r("img")({width:"100%","&:active":{opacity:"0.8"}});r("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}});const Jt=r(h)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Qt=r(h)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Zt=r(h)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),Ke=r(h)(({active:e,bordercolor:t})=>({width:"50%",height:"37.9px",border:`1px solid ${t}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer",marginBottom:"20px"})),We=r("img")({}),Ge=r(h)(({active:e})=>({marginLeft:"5px"})),eo=r(h)({width:"100%",display:"flex",flexDirection:"column"}),to=r(h)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),oo=r(h)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});r(h)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const no=r(h)({display:"flex",flexDirection:"column"}),ao=r(h)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),io=r(h)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});r(h)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const so=r(h)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),ro=r("img")({cursor:"pointer",marginRight:"15px"}),lo=r(ut)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),co=r(h)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),uo=r("img")({width:"63px"}),go=r(h)({margin:"0px",marginLeft:"24px","@media (max-height: 600px)":{"& .MuiBox-root":{fontSize:"14px !important"}}}),xo=r(h)({width:"100%",justifyContent:"space-between",alignItems:"center",margin:"10px 0px"}),bo=r(h)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"center",padding:"0px 7px"});r(et)({marginLeft:"-33px",color:"#17637D",height:"30px"});const ho=r(h)(({progress:e,progresscolor:t})=>({width:"calc(100% - 60px)",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",borderBottom:`1px solid ${t}`,"::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${e}%`,borderBottom:e!=0?`2px solid ${t}`:"none"}})),po=r(h)(({istransliteration:e,translatestatus:t})=>({margin:"5px 0px 5px 0px",display:"flex",justifyContent:"space-between",opacity:t=="one"||t=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& .MuiBox-root:first-of-type":{width:"48%"},"& .MuiBox-root:last-child":{marginInlineEnd:"auto",width:e=="true"?"48%":"75%"}})),fo=r(h)({display:"flex",justifyContent:"space-between"}),mo=r(h)(({translatestatus:e})=>({width:"80%",display:"flex",opacity:e=="one"||e=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}})),ko=r("img")({width:"20px",marginLeft:"10px"}),yo=r(h)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),Ye=r("img")({marginLeft:"3px",cursor:"pointer"}),vo=r(h)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),Bo=r(h)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),Co=r(h)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),qe=r(h)(({style:e,translatestatus:t,readalready:i,readbgcolor:o,readtextcolor:l})=>({opacity:t=="one"||t=="none"?"0.5":"1",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:i=="true"?`${o} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:i=="true"?`${l} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:i=="true"?`${l} !important`:`${e.color} !important`}})),So=r("img")({width:"50%",height:"50%"});function Io(e){var S;const[t,i]=u.useState(""),[o,l]=u.useState(""),{t:y}=se(),{theme:s}=u.useContext(re),{buttonTextColor:x,logoTextColor:m,headerBGColor:k}=le(s),C=localStorage.getItem(pe)||fe;return u.useEffect(()=>{var b;e.markTitle?i((b=e.markTitle)==null?void 0:b[C]):i(y("Default Book Title")),e.markImg?l(e.markImg):l(f.default_cover)},[e.markTitle,e.markImg]),n.jsxs(Ft,{children:[n.jsx(Ut,{src:s==B.DEFAULT||s==B.DARK?f.book_subtract:s==B.BLACK_AND_WHITE?f.book_subtract_BAW:s==B.SAPPHIRE?f.book_subtract_sapphire:f.book_subtract_easyocean}),n.jsxs(zt,{children:[n.jsxs(Ht,{children:[n.jsxs(Kt,{onClick:e.onLogoClick,children:[n.jsx(Wt,{src:o}),n.jsx($,{fontFamily:"Kapakana",fontSize:25,lineHeight:24,fontWeight:"400",color:x,children:(S=e.markTitle)==null?void 0:S[C]})]}),n.jsx(Gt,{children:n.jsx($,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:m,children:t})})]}),n.jsx(qt,{src:s==B.EASY_OCEAN?f.search_easyocean:f.search,onClick:e.onSearchClick})]}),n.jsx(Vt,{children:n.jsx(Xt,{src:s==B.DEFAULT||s==B.DARK?f.close2:s==B.BLACK_AND_WHITE?f.close2_BAW:s==B.SAPPHIRE?f.close2_sapphire:f.close2_easyocean,onClick:e.onCloseClick})}),n.jsx(Yt,{hamburgercolor:k,children:n.jsx(ht,{isLogin:e.isLogIn,textColor:m,itemBgColor:k,onLogin:e.onLogin,onSettings:e.onSettings})})]})}function To(e){var Y,te,j,ce,de,ue,ge,J,Te,we,je,_e,Ae;const[t,i]=u.useState([]),[o,l]=u.useState(),[y,s]=u.useState(!1),[x,m]=u.useState(!1),[k,C]=u.useState(0),{theme:S,referenceLanguage:b,readingLanguage:p,displayType:v}=u.useContext(re),{mainBGColor:N,altTextColor:w,backgroundColor:A,topTextColor:O,highlightColor:E,buttonColor:P,buttonTextColor:R}=le(S),{t:M}=se(),D=localStorage.getItem(pe)||fe,c=u.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const g=e.userHistory.filter(_=>_.bookId==e.bookId);if(g&&g.length>0)return g[0].readChapterIds}return[]},[e.userHistory]),a=e.subBookId;u.useEffect(()=>{e.openedSubBook==e.subBookId?s(!0):s(!1)},[e.openedSubBook]),u.useEffect(()=>{var I,V;const g=e.subBooks.filter(L=>L.subBookId===a);let _=0;if(g&&g.length>0&&(_=(I=g[0].chapterInfos)==null?void 0:I.length,l(g[0])),e.currentUser){const L=e.userHistory.filter(U=>U.bookId==e.bookId);if(L&&L.length>0){const U=L[0].subBooks.filter(Q=>Q.subBookId==a);U&&U.length>0&&C(Math.floor(((V=U[0])==null?void 0:V.readChapters)/_*100))}}if(e.subBooks&&e.subBooks.length>0){const L=e.subBooks.filter(U=>U.subBookId==a);if(L&&L.length>0){let U=L[0].chapterInfos;U.sort((Q,xe)=>Q.chapterNumber-xe.chapterNumber),i(U)}}},[e.subBooks,e.userHistory]),u.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const g=e.subBookInfos.filter(_=>_.subBookId==a);g&&g.length>0?m(!0):m(!1)}},[]);const d=u.useCallback(g=>{m(_=>!_),e.onDownload(g)},[]),T=()=>{var g,_;if(o!=null&&o.noChapter){const I=o==null?void 0:o.chapterInfos[0].isTranslated;!(I!=null&&I[b])&&!(I!=null&&I[p])?W.custom(V=>n.jsx(G,{text:M("None Translated"),visible:V.visible})):e.moveToReading(o==null?void 0:o.chapterInfos[0].chapterId,(g=e.bookTitle)==null?void 0:g[D],(_=o.subBookTitle)==null?void 0:_[D],o.subBookId,!!(I!=null&&I[b]&&(I!=null&&I[p])))}else s(!y),e.handleOpenedSubBook(e.subBookId)},H=(g,_)=>{var I,V;_=="none"?W.custom(L=>n.jsx(G,{text:M("None Translated"),visible:L.visible})):e.moveToReading(g,(I=e.bookTitle)==null?void 0:I[D],(V=o.subBookTitle)==null?void 0:V[D],o.subBookId,_=="both")};return n.jsxs(xo,{children:[n.jsxs(bo,{children:[n.jsxs(ho,{progress:k,progresscolor:P,onClick:T,children:[(o==null?void 0:o.subBookNumber)!=0&&n.jsxs(po,{istransliteration:((Y=o==null?void 0:o.subBookTitle)==null?void 0:Y[ke])!=null?"true":"false",translatestatus:(o==null?void 0:o.noChapter)&&(!((te=o==null?void 0:o.chapterInfos[0].isTranslated)!=null&&te[b])&&!((j=o==null?void 0:o.chapterInfos[0].isTranslated)!=null&&j[p])?"none":!((ce=o==null?void 0:o.chapterInfos[0].isTranslated)!=null&&ce[b])||!((de=o==null?void 0:o.chapterInfos[0].isTranslated)!=null&&de[p])?"one":"both"),children:[((ue=o==null?void 0:o.subBookTitle)==null?void 0:ue[ke])&&n.jsx($,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:w,language:ye,children:(o==null?void 0:o.subBookNumber)+". "+((ge=o==null?void 0:o.subBookTitle)==null?void 0:ge[ke])}),n.jsx($,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:w,language:ye,direction:"rtl",children:(J=o==null?void 0:o.subBookTitle)==null?void 0:J[ye]})]}),n.jsxs(fo,{children:[n.jsxs(mo,{translatestatus:(o==null?void 0:o.noChapter)&&(!((Te=o==null?void 0:o.chapterInfos[0].isTranslated)!=null&&Te[b])&&!((we=o==null?void 0:o.chapterInfos[0].isTranslated)!=null&&we[p])?"none":!((je=o==null?void 0:o.chapterInfos[0].isTranslated)!=null&&je[b])||!((_e=o==null?void 0:o.chapterInfos[0].isTranslated)!=null&&_e[p])?"one":"both"),children:[n.jsx($,{fontFamily:'"Baloo Da 2"',color:w,children:(Ae=o==null?void 0:o.subBookTitle)==null?void 0:Ae[D]}),(o==null?void 0:o.subBookNumber)==0&&n.jsx(ko,{src:f.icon_intro})]}),e.currentUser&&k!==0&&!(o!=null&&o.noChapter)&&n.jsx($,{fontFamily:'"Baloo Da 2"',color:P,children:`${k}%`})]})]}),n.jsxs(yo,{isdownloaded:x?"true":"false",children:[n.jsx(Ye,{src:x?S==B.DEFAULT||S==B.EASY_OCEAN?f.download_cancel:f.download_cancel_white:S==B.DEFAULT||S==B.EASY_OCEAN?f.download:f.download_white,onClick:()=>d(a)}),x&&n.jsx(Ye,{src:S==B.DEFAULT||S==B.EASY_OCEAN?f.download_refresh:f.download_refresh_white,onClick:()=>e.onDownloadRefresh(a)})]})]}),y&&n.jsxs(vo,{style:{backgroundColor:A},children:[n.jsxs(Bo,{children:[n.jsx($,{fontFamily:"Inter",color:O,children:M("Surah")}),n.jsx($,{fontFamily:"Inter",color:E,children:M("Chapter")})]}),n.jsx(Co,{children:t==null?void 0:t.map((g,_)=>{var I,V,L,U,Q,xe,Oe,Ee;return g.chapterNumber==0?n.jsx(qe,{translatestatus:!((I=g.isTranslated)!=null&&I[b])&&!((V=g.isTranslated)!=null&&V[p])?"none":!((L=g.isTranslated)!=null&&L[b])||!((U=g.isTranslated)!=null&&U[p])?"one":"both",readalready:c&&c.length>0&&c.includes(g.chapterId)?"true":"false",style:{backgroundColor:N,color:w},readbgcolor:P,readtextcolor:R,onClick:()=>{var oe,ne,ae,ie;return H(g.chapterId,!((oe=g.isTranslated)!=null&&oe[b])&&!((ne=g.isTranslated)!=null&&ne[p])?"none":!((ae=g.isTranslated)!=null&&ae[b])||!((ie=g.isTranslated)!=null&&ie[p])?"one":"both")},children:n.jsx(So,{src:f.icon_intro})},_):n.jsx(qe,{translatestatus:!((Q=g.isTranslated)!=null&&Q[b])&&!((xe=g.isTranslated)!=null&&xe[p])?"none":!((Oe=g.isTranslated)!=null&&Oe[b])||!((Ee=g.isTranslated)!=null&&Ee[p])?"one":"both",readalready:c&&c.length>0&&c.includes(g.chapterId)?"true":"false",style:{backgroundColor:N,color:w},readbgcolor:P,readtextcolor:R,onClick:()=>{var oe,ne,ae,ie;return H(g.chapterId,!((oe=g.isTranslated)!=null&&oe[b])&&!((ne=g.isTranslated)!=null&&ne[p])?"none":!((ae=g.isTranslated)!=null&&ae[b])||!((ie=g.isTranslated)!=null&&ie[p])?"one":"both")},children:n.jsx($,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:g.chapterNumber})},_)})})]})]})}function wo(e){const[t,i]=u.useState([]);return u.useEffect(()=>{let o=e.subBooks;o&&o.sort((l,y)=>l.subBookNumber-y.subBookNumber),i(o)},[e.subBooks]),n.jsx(n.Fragment,{children:t&&t.length>0&&t.map((o,l)=>n.jsx(To,{bookId:e.bookId,bookTitle:e.bookTitle,subBooks:t,subBookId:o.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},l))})}function jo(e){const[t,i]=u.useState(""),[o,l]=u.useState([]),[y,s]=u.useState(1),[x,m]=u.useState([]),{t:k}=se(),{theme:C}=u.useContext(re),{backgroundColor:S,topTextColor:b,mainTextColor:p}=le(C),v=localStorage.getItem(pe)||fe,N=bt(e.deviceHeight),w=y*N,A=w-N,O=e.currentUser&&o.slice(A,w);u.useEffect(()=>{if(e.subBooks&&e.subBooks.length>0){const a=e.subBooks.map(d=>{var T;return{label:(T=d.subBookTitle)==null?void 0:T[v],value:d.subBookId}});a.unshift({label:k("All Books"),value:"all"}),m(a)}},[e.subBooks]),u.useEffect(()=>{x.length>0&&i(x[0].value)},[x]),u.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const a=e.bookmark.filter(d=>d.subBookId===t);l(t==="all"||t===""?e.bookmark:a)}else l([]),s(0);y>1&&O.length==1&&s(a=>a-1)},[e.bookmark]);const E=(a,d)=>{s(d)},P=u.useCallback(a=>{const d=a.target.value;i(d);const T=e.bookmark.filter(H=>H.subBookId===d);l(d==="all"?e.bookmark:T)},[e.bookmark]),R=()=>n.jsx(to,{style:{backgroundColor:S},children:n.jsx(ft,{label:k("Filter"),detail:n.jsxs(oo,{children:[n.jsx($,{color:b,children:k("Show")}),n.jsx(mt,{label:"",options:x,value:t,backgroundColor:S,textColor:b,onChange:P})]})})}),M=()=>n.jsx(no,{children:(O==null?void 0:O.length)>0&&O.map((a,d)=>{var T;return n.jsxs(h,{children:[n.jsxs(ao,{children:[n.jsxs(io,{onClick:()=>e.moveToReadingFromBookmark(a._id),children:[n.jsx($,{color:p,children:(T=a.subBookTitle)==null?void 0:T[v]}),n.jsx($,{color:p,children:a.chapterNumber>0?`${k("Surah Bookmark")} ${a.chapterNumber}, ${k("Aya")} ${a.verseNumber}`:`${k("Surah Bookmark")} _ , ${k("Aya")} ${a.verseNumber}`})]}),n.jsx(ro,{src:C==B.DEFAULT||C==B.EASY_OCEAN||C==B.EASY_SUNRISE?f.black_bookmark:f.white_bookmark,onClick:()=>e.removeBookmark(a._id)})]}),n.jsx(so,{})]},d)})}),D=()=>n.jsx(lo,{buttoncolor:p,children:n.jsx(Pt,{count:e.currentUser?Math.ceil(o.length/N):0,page:y,hidePrevButton:!0,hideNextButton:!0,onChange:E})}),c=()=>n.jsxs(co,{style:{backgroundColor:S},children:[n.jsx(uo,{src:C==B.DEFAULT||C==B.BLACK_AND_WHITE?f.swipe:C==B.EASY_OCEAN?f.swipe_easyocean:f.swipe_white}),n.jsx(go,{style:{color:b},children:k("Bookmark Help")})]});return n.jsxs(eo,{children:[R(),M(),D(),c()]})}function _o(e){const[t,i]=u.useState(z),{t:o}=se(),{theme:l}=u.useContext(re),{mainBGColor:y,headerBGColor:s,buttonColor:x,buttonTextColor:m,mainTextColor:k}=le(l),C=S=>{e.currentUser?i(S):W.custom(b=>n.jsx(G,{text:o("Bookmark Read Description"),visible:b.visible}))};return n.jsx(Jt,{style:{backgroundColor:s},children:n.jsxs(Qt,{style:{backgroundColor:y},children:[n.jsxs(Zt,{children:[n.jsxs(Ke,{active:t==z?"true":"false",style:{backgroundColor:t==z?x:y},bordercolor:k,onClick:()=>C(z),children:[n.jsx(We,{src:l==B.DEFAULT?f.index:l==B.EASY_OCEAN?t==z?f.index_active:f.index:t==z?f.index:f.index_active}),n.jsx(Ge,{active:t==z?"true":"false",children:n.jsx($,{fontSize:16,fontWeight:"500",lineHeight:24,color:t==z?m:k,children:o("Index")})})]}),n.jsxs(Ke,{active:t==z?"false":"true",style:{backgroundColor:t==ve?x:y},bordercolor:k,onClick:()=>C(ve),children:[n.jsx(We,{src:l==B.DEFAULT?f.bookmark2_default:l==B.EASY_OCEAN?t==z?f.bookmark2_default:f.bookmark2_white:t==z?f.bookmark2_white:f.bookmark2_default}),n.jsx(Ge,{active:t==z?"false":"true",children:n.jsx($,{fontSize:16,fontWeight:"500",lineHeight:24,color:t==ve?m:k,children:o("Bookmarks")})})]})]}),t==z?n.jsx(wo,{bookId:e.bookId,bookTitle:e.bookTitle,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):n.jsx(jo,{subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark,deviceHeight:e.deviceHeight,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const Ao=it,X=st,Oo=1;class Eo{constructor(){De(this,"db",null)}async initDB(){return new Promise((t,i)=>{const o=indexedDB.open(Ao,Oo);o.onerror=()=>i(o.error),o.onsuccess=()=>{this.db=o.result,t()},o.onupgradeneeded=l=>{l.target.result.createObjectStore(X,{keyPath:"subBookId"})}})}async saveSubBookInfo(t){return this.db||await this.initDB(),new Promise((i,o)=>{const s=this.db.transaction([X],"readwrite").objectStore(X).put(t);s.onerror=()=>o(s.error),s.onsuccess=()=>i()})}async getSubBookInfo(t){return this.db||await this.initDB(),new Promise((i,o)=>{const s=this.db.transaction([X],"readonly").objectStore(X).get(t);s.onerror=()=>o(s.error),s.onsuccess=()=>i(s.result)})}async removeSubBookInfo(t){return this.db||await this.initDB(),new Promise((i,o)=>{const s=this.db.transaction([X],"readwrite").objectStore(X).delete(t);s.onerror=()=>o(s.error),s.onsuccess=()=>i()})}}const he=new Eo,Do=r(h)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function No(e){const[t,i]=u.useState(),[o,l]=u.useState(!1),s=new URLSearchParams(window.location.search).get("id")||"",x=xt(),{t:m}=se(),{height:k}=Rt(),{theme:C}=u.useContext(re),{mainBGColor:S}=le(C),b=localStorage.getItem(pe)||fe,p=u.useCallback(()=>{s&&Le.fetchBookInfo(s).then(c=>{var a,d,T,H,Y;if(e.dispatch({type:q.ADD_BOOKINFO,payload:{bookInfo:c}}),i(c),e.currentUser&&!e.userHistory.some(j=>j.bookId==s)&&c.subBooks){const j=c.subBooks.find(J=>J.subBookNumber==0),ce=(a=j==null?void 0:j.chapterInfos[0])==null?void 0:a.chapterId,de=(d=c.bookTitle)==null?void 0:d[b],ue=(T=j==null?void 0:j.subBookTitle)==null?void 0:T[b],ge=j==null?void 0:j.subBookId;(Y=(H=j==null?void 0:j.chapterInfos[0])==null?void 0:H.isTranslated)!=null&&Y[b]?w(ce,de,ue,ge,!0):W.custom(J=>n.jsx(G,{text:m("None Translated"),type:be.BOOKMARK,visible:J.visible}))}}).catch(c=>{W.custom(a=>n.jsx(G,{text:m(c),type:be.BOOKMARK,visible:a.visible}))}).finally(()=>{l(!1)})},[s,e.dispatch,e.userHistory,e.currentUser]),v=u.useCallback(async c=>{try{const a=await Le.fetchSubBookInfo(c);e.dispatch({type:q.ADD_SUBBOOKINFO,payload:{subBookInfo:a}}),e.dispatch({type:q.ADD_SUBBOOK,payload:{subBook:a}}),await he.saveSubBookInfo(a),l(!1)}catch(a){W.custom(d=>n.jsx(G,{text:m(a),visible:d.visible})),l(!1)}},[e.dispatch]);u.useEffect(()=>{(async()=>{var a;l(!0),!((a=e.bookInfos)!=null&&a.length)||!e.bookInfos.some(d=>d.bookId===s)?await p():(i(e.bookInfos.find(d=>d.bookId===s)),l(!1))})(),e.currentUser&&Me.fetchBookmarks().then(a=>{e.dispatch({type:q.SET_BOOKMARKS,payload:{bookmark:a}})}).catch(a=>{a.status===401&&a.response.data.message===Ne&&(W.custom(d=>n.jsx(G,{text:m(a.response.data.message),visible:d.visible})),Be.logout(),x("/login"))})},[s,e.bookInfos,e.currentUser,e.dispatch]);const N=()=>{W.custom(c=>n.jsx(G,{text:m("Not Built Yet"),visible:c.visible}))},w=(c,a,d,T,H)=>{x(`/reading?chapterId=${c}&book=${a}&subBook=${d}&subBookId=${T}&bookId=${s}&bothTranslated=${H}`)},A=u.useCallback(async c=>{l(!0),Re()<Pe?await he.getSubBookInfo(c)?(await he.removeSubBookInfo(c),e.dispatch({type:q.REMOVE_SUBBOOKINFO,payload:{subBookId:c}})):await v(c):W.custom(d=>n.jsx(G,{text:m("Not Enough Space"),visible:d.visible})),l(!1)},[v,e.dispatch]),O=u.useCallback(async c=>{l(!0),await he.removeSubBookInfo(c),e.dispatch({type:q.REMOVE_SUBBOOKINFO,payload:{subBookId:c}}),Re()<Pe?await v(c):W.custom(d=>n.jsx(G,{text:m("Not Enough Space"),visible:d.visible})),l(!1)},[v,e.dispatch]),E=u.useCallback(c=>{if(l(!0),e.bookmark&&e.bookmark.length>0){const a=e.bookmark.find(d=>d._id===c);if(a){const{chapterId:d,bookTitle:T,subBookId:H,subBookTitle:Y,verseId:te}=a;x(`/reading?chapterId=${d}&book=${T==null?void 0:T[b]}&subBook=${Y==null?void 0:Y[b]}&subBookId=${H}&verseId=${te}&bookId=${s}`),l(!1)}}},[s,x,e.bookmark]),P=u.useCallback(c=>{l(!0),Me.deleteBookmark(c).then(a=>{e.dispatch({type:q.REMOVE_BOOKMARK,payload:{bookmarkId:c}}),W.custom(d=>n.jsx(G,{text:m(a.message),type:be.BOOKMARK,visible:d.visible})),l(!1)}).catch(a=>{a.status==401&&a.response.data.message==Ne&&(W.custom(d=>n.jsx(G,{text:m(a.response.data.message),type:be.BOOKMARK,visible:d.visible})),Be.logout(),x("/login")),l(!1)})},[e.dispatch]),R=u.useCallback(c=>{e.dispatch({type:q.SET_OPENED_SUBBOOK,payload:{openedSubBook:e.openedSubBook===c?"":c}})},[e.openedSubBook,e.dispatch]),M=()=>{e.dispatch({type:q.RESET_USER}),e.dispatch({type:q.RESET_BOOK}),e.dispatch({type:q.RESET_PAGE_STATUS}),Be.logout()},D=()=>{x("/login")};return n.jsxs(Do,{style:{backgroundColor:S},children:[n.jsx(Io,{markImg:t&&rt+t.bookImage,markTitle:t==null?void 0:t.bookTitle,isLogIn:!!e.currentUser,onLogoClick:()=>x("/"),onCloseClick:()=>x("/library"),onLogin:e.currentUser?M:D,onSettings:()=>x("/settings"),onSearchClick:N}),n.jsx(_o,{bookId:s,bookTitle:t==null?void 0:t.bookTitle,subBooks:t==null?void 0:t.subBooks,deviceHeight:k,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.openedSubBook,moveToReading:w,moveToReadingFromBookmark:E,onDownload:A,onDownloadRefresh:O,removeBookmark:P,handleOpenedSubBook:R}),o&&n.jsx(pt,{})]})}function Po(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,openedSubBook:e.pageStatus.openedSubBook,currentUser:e.user.currentUser,activeChapterId:e.books.activeChapterId}}const qo=gt(Po)(No);export{qo as default};
