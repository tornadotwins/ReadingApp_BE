import{c as Xe,_ as oe,j as n,b as l,ap as Wt,F as ve,$ as he,X as Gt,a3 as O,ax as Ge,ay as Ct,Z as le,az as Ve,aA as Ke,aB as St,aC as Ye,aD as Bt,au as Vt}from"./index-DEG7EQ5W.js";import{a as $t,b as Ut,F as Yt,G as We,d as Ft,s,e as Qe,f as Ht,J as Zt,r as Qt,B as h,K as Xt,S as He,g as ze,V as ce,c as qt,u as Jt,j as z,M as ea,N as ta,O as Tt}from"./App-3aEmK_pi.js";import{I as S,T as ge,g as aa,t as wt,a as Lt}from"./index-B_PedCrA.js";import{H as oa}from"./index-BWYBFeC7.js";import{C as ue}from"./index-Dw8Hbmdw.js";import{A as na}from"./index-BGpLNKgB.js";import{S as ia}from"./index-C3gTwXTF.js";import{L as sa}from"./index-B3i8CqNy.js";import{b as Pt}from"./book.service-qjkGip4N.js";import{b as pt}from"./bookmark.service-A8OWCLsA.js";import{a as Ze}from"./auth.service-C5exErY4.js";import"./index-PfnPkSiB.js";import"./index-C88pvD_q.js";function la(e){return $t("MuiPagination",e)}Ut("MuiPagination",["root","ul","outlined","text"]);const ra=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function da(e={}){const{boundaryCount:a=1,componentName:i="usePagination",count:t=1,defaultPage:m=1,disabled:g=!1,hideNextButton:I=!1,hidePrevButton:B=!1,onChange:p,page:L,showFirstButton:T=!1,showLastButton:_=!1,siblingCount:d=1}=e,E=Xe(e,ra),[k,q]=Yt({controlled:L,default:m,name:i,state:"page"}),Y=(b,P)=>{L||q(P),p&&p(b,P)},y=(b,P)=>{const U=P-b+1;return Array.from({length:U},(K,Z)=>b+Z)},V=y(1,Math.min(a,t)),N=y(Math.max(t-a+1,a+1),t),$=Math.max(Math.min(k-d,t-a-d*2-1),a+2),ne=Math.min(Math.max(k+d,a+d*2+2),N.length>0?N[0]-2:t-1),J=[...T?["first"]:[],...B?[]:["previous"],...V,...$>a+2?["start-ellipsis"]:a+1<t-a?[a+1]:[],...y($,ne),...ne<t-a-1?["end-ellipsis"]:t-a>a?[t-a]:[],...N,...I?[]:["next"],..._?["last"]:[]],re=b=>{switch(b){case"first":return 1;case"previous":return k-1;case"next":return k+1;case"last":return t;default:return null}},x=J.map(b=>typeof b=="number"?{onClick:P=>{Y(P,b)},type:"page",page:b,selected:b===k,disabled:g,"aria-current":b===k?"true":void 0}:{onClick:P=>{Y(P,re(b))},type:b,page:re(b),selected:!1,disabled:g||b.indexOf("ellipsis")===-1&&(b==="next"||b==="last"?k>=t:k<=1)});return oe({items:x},E)}function ca(e){return $t("MuiPaginationItem",e)}const de=Ut("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),jt=We(n.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),It=We(n.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),_t=We(n.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Et=We(n.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),ua=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],zt=(e,a)=>{const{ownerState:i}=e;return[a.root,a[i.variant],a[`size${ve(i.size)}`],i.variant==="text"&&a[`text${ve(i.color)}`],i.variant==="outlined"&&a[`outlined${ve(i.color)}`],i.shape==="rounded"&&a.rounded,i.type==="page"&&a.page,(i.type==="start-ellipsis"||i.type==="end-ellipsis")&&a.ellipsis,(i.type==="previous"||i.type==="next")&&a.previousNext,(i.type==="first"||i.type==="last")&&a.firstLast]},ga=e=>{const{classes:a,color:i,disabled:t,selected:m,size:g,shape:I,type:B,variant:p}=e,L={root:["root",`size${ve(g)}`,p,I,i!=="standard"&&`color${ve(i)}`,i!=="standard"&&`${p}${ve(i)}`,t&&"disabled",m&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[B]],icon:["icon"]};return Ht(L,ca,a)},xa=s("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:zt})(({theme:e,ownerState:a})=>oe({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${de.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},a.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),ba=s(Zt,{name:"MuiPaginationItem",slot:"Root",overridesResolver:zt})(({theme:e,ownerState:a})=>oe({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${de.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${de.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${de.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:he(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${de.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:he(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${de.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},a.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},a.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:a})=>oe({},a.variant==="text"&&{[`&.${de.selected}`]:oe({},a.color!=="standard"&&{color:(e.vars||e).palette[a.color].contrastText,backgroundColor:(e.vars||e).palette[a.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[a.color].main}},[`&.${de.focusVisible}`]:{backgroundColor:(e.vars||e).palette[a.color].dark}},{[`&.${de.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},a.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${de.selected}`]:oe({},a.color!=="standard"&&{color:(e.vars||e).palette[a.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / 0.5)`:he(e.palette[a.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:he(e.palette[a.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:he(e.palette[a.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${de.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:he(e.palette[a.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${de.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),ma=s("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,a)=>a.icon})(({theme:e,ownerState:a})=>oe({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},a.size==="small"&&{fontSize:e.typography.pxToRem(18)},a.size==="large"&&{fontSize:e.typography.pxToRem(22)})),fa=l.forwardRef(function(a,i){const t=Ft({props:a,name:"MuiPaginationItem"}),{className:m,color:g="standard",component:I,components:B={},disabled:p=!1,page:L,selected:T=!1,shape:_="circular",size:d="medium",slots:E={},type:k="page",variant:q="text"}=t,Y=Xe(t,ua),y=oe({},t,{color:g,disabled:p,selected:T,shape:_,size:d,type:k,variant:q}),V=Wt(),N=ga(y),ne=(V?{previous:E.next||B.next||Et,next:E.previous||B.previous||_t,last:E.first||B.first||jt,first:E.last||B.last||It}:{previous:E.previous||B.previous||_t,next:E.next||B.next||Et,first:E.first||B.first||jt,last:E.last||B.last||It})[k];return k==="start-ellipsis"||k==="end-ellipsis"?n.jsx(xa,{ref:i,ownerState:y,className:Qe(N.root,m),children:"â€¦"}):n.jsxs(ba,oe({ref:i,ownerState:y,component:I,disabled:p,className:Qe(N.root,m)},Y,{children:[k==="page"&&L,ne?n.jsx(ma,{as:ne,ownerState:y,className:N.icon}):null]}))}),ka=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],ha=e=>{const{classes:a,variant:i}=e;return Ht({root:["root",i],ul:["ul"]},la,a)},va=s("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:i}=e;return[a.root,a[i.variant]]}})({}),ya=s("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,a)=>a.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function Ca(e,a,i){return e==="page"?`${i?"":"Go to "}page ${a}`:`Go to ${e} page`}const Sa=l.forwardRef(function(a,i){const t=Ft({props:a,name:"MuiPagination"}),{boundaryCount:m=1,className:g,color:I="standard",count:B=1,defaultPage:p=1,disabled:L=!1,getItemAriaLabel:T=Ca,hideNextButton:_=!1,hidePrevButton:d=!1,renderItem:E=x=>n.jsx(fa,oe({},x)),shape:k="circular",showFirstButton:q=!1,showLastButton:Y=!1,siblingCount:y=1,size:V="medium",variant:N="text"}=t,$=Xe(t,ka),{items:ne}=da(oe({},t,{componentName:"Pagination"})),J=oe({},t,{boundaryCount:m,color:I,count:B,defaultPage:p,disabled:L,getItemAriaLabel:T,hideNextButton:_,hidePrevButton:d,renderItem:E,shape:k,showFirstButton:q,showLastButton:Y,siblingCount:y,size:V,variant:N}),re=ha(J);return n.jsx(va,oe({"aria-label":"pagination navigation",className:Qe(re.root,g),ownerState:J,ref:i},$,{children:n.jsx(ya,{className:re.ul,ownerState:J,children:ne.map((x,b)=>n.jsx("li",{children:E(oe({},x,{color:I,"aria-label":T(x.type,x.page,x.selected),shape:k,size:V,variant:N}))},b))})}))});function Ba(e){return n.jsx(Sa,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function Ot(){const{innerWidth:e,innerHeight:a}=window;return{width:e,height:a}}function Ta(){const[e,a]=l.useState(Ot());return l.useEffect(()=>{function i(){a(Ot())}return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),e}var qe={},wa=Gt;Object.defineProperty(qe,"__esModule",{value:!0});var Kt=qe.default=void 0,La=wa(Qt()),Pa=n;Kt=qe.default=(0,La.default)((0,Pa.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const pa=s(h)({display:"flex",position:"relative",width:"100%"}),ja=s("img")({width:"100%",marginTop:"57px"}),Ia=s(h)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),_a=s(h)({display:"flex",alignItems:"baseline"}),Ea=s(h)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),Oa=s("img")({width:"100%",height:"100%"}),Na=s(h)({margin:0,position:"absolute",top:"50px",left:"75px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),Aa=s(h)(({hamburgercolor:e})=>({position:"absolute",top:"12px",right:"15px",width:"46px","& .hamburger-react":{width:"46px !important",color:e},"& .hamburger-react ~ .MuiBox-root ":{border:`1px solid ${e}`},"@media (max-height: 639px)":{top:"8px",right:"10px"},"@media screen and (orientation: landscape)":{right:"15px"}})),Ra=s("img")({position:"absolute",top:"75px",right:"0px",cursor:"pointer","&:active":{opacity:"0.8"}}),Da=s(h)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),Ma=s("img")({width:"100%","&:active":{opacity:"0.8"}});s("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}});const $a=s(h)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Ua=s(h)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Fa=s(h)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),Nt=s(h)(({active:e,bordercolor:a})=>({width:"50%",height:"37.9px",border:`1px solid ${a}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer",marginBottom:"20px"})),At=s("img")({}),Rt=s(h)(({active:e})=>({marginLeft:"5px"})),Ha=s(h)({width:"100%",display:"flex",flexDirection:"column"}),za=s(h)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),Ka=s(h)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});s(h)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const Wa=s(h)({display:"flex",flexDirection:"column"}),Ga=s(h)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),Va=s(h)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});s(h)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const Ya=s(h)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),Za=s("img")({cursor:"pointer",marginRight:"15px"}),Qa=s(Xt)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),Xa=s(h)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),qa=s("img")({width:"63px"}),Ja=s(h)({margin:"0px",marginLeft:"24px","@media (max-height: 600px)":{"& .MuiBox-root":{fontSize:"14px !important"}}}),eo=s(h)({width:"100%",justifyContent:"space-between",alignItems:"center",margin:"10px 0px"}),to=s(h)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"center",padding:"0px 7px"});s(Kt)({marginLeft:"-33px",color:"#17637D",height:"30px"});const ao=s(h)(({progress:e,progresscolor:a})=>({width:"calc(100% - 60px)",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",borderBottom:`1px solid ${a}`,"::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${e}%`,borderBottom:e!=0?`2px solid ${a}`:"none"}})),oo=s(h)(({istransliteration:e,translatestatus:a})=>({margin:"5px 0px 5px 0px",display:"flex",justifyContent:"space-between",opacity:a=="one"||a=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& .MuiBox-root:first-of-type":{width:"48%"},"& .MuiBox-root:last-child":{marginInlineEnd:"auto",width:e=="true"?"48%":"75%"}})),no=s(h)({display:"flex",justifyContent:"space-between"}),io=s(h)(({translatestatus:e})=>({width:"80%",display:"flex",opacity:e=="one"||e=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}})),so=s("img")({width:"20px",marginLeft:"10px"}),lo=s(h)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),Dt=s("img")({marginLeft:"3px",cursor:"pointer"}),ro=s(h)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),co=s(h)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),uo=s(h)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),Mt=s(h)(({style:e,translatestatus:a,readalready:i,readbgcolor:t,readtextcolor:m})=>({opacity:a=="one"||a=="none"?"0.5":"1",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:i=="true"?`${t} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:i=="true"?`${m} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:i=="true"?`${m} !important`:`${e.color} !important`}})),go=s("img")({width:"50%",height:"50%"});function xo(e){const[a,i]=l.useState(""),[t,m]=l.useState(""),{theme:g}=l.useContext(He),{logoTextColor:I,headerBGColor:B}=ze(g);return l.useEffect(()=>{var p,L,T,_;e.markTitle?i((p=e.markTitle)==null?void 0:p[e.appLanguage||"en"]):i(((_=(T=(L=e.terms)==null?void 0:L.texts.find(d=>d.variable=="Default Book Title"))==null?void 0:T.text)==null?void 0:_[e.appLanguage||"en"])||"Title"),e.markImg?m(e.markImg):m(S.default_cover)},[e.markTitle,e.markImg]),n.jsxs(pa,{children:[n.jsx(ja,{src:g==O.DEFAULT||g==O.DARK?S.book_subtract:g==O.BLACK_AND_WHITE?S.book_subtract_BAW:g==O.SAPPHIRE?S.book_subtract_sapphire:S.book_subtract_easyocean}),n.jsxs(Ia,{children:[n.jsxs(_a,{children:[n.jsx(Ea,{onClick:e.onLogoClick,children:n.jsx(Oa,{src:t})}),n.jsx(Na,{children:n.jsx(ge,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:I,children:a})})]}),n.jsx(Ra,{src:g==O.EASY_OCEAN?S.search_easyocean:S.search,onClick:e.onSearchClick})]}),n.jsx(Da,{children:n.jsx(Ma,{src:g==O.DEFAULT||g==O.DARK?S.close2:g==O.BLACK_AND_WHITE?S.close2_BAW:g==O.SAPPHIRE?S.close2_sapphire:S.close2_easyocean,onClick:e.onCloseClick})}),n.jsx(Aa,{hamburgercolor:B,children:n.jsx(oa,{isLogin:e.isLogIn,textColor:I,itemBgColor:B,toggleColor:B,terms:e.welcomePageTerms,appLanguage:e.appLanguage,onLogin:e.onLogin,onSettings:e.onSettings})})]})}function bo(e){var x,b,P,U,K,Z,ie,se,W,xe,be,F,r,c,u,v,w,f,R,A,Q,ee,te,j,D,ye,Ce,Se,Be,Te,we,Le,Pe,pe,je,Ie,C,Je,et,tt,at,ot,nt,it,st,lt,rt,dt,ct,ut,gt,xt,bt;const[a,i]=l.useState([]),[t,m]=l.useState(),[g,I]=l.useState(!1),[B,p]=l.useState(!1),[L,T]=l.useState(0),{theme:_,referenceLanguage:d}=l.useContext(He),{mainBGColor:E,altTextColor:k,backgroundColor:q,topTextColor:Y,buttonColor:y,buttonTextColor:V}=ze(_),N=l.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const o=e.userHistory.filter(M=>M.bookId==e.bookId);if(o&&o.length>0)return o[0].readChapterIds}return[]},[e.userHistory]),$=e.subBookId;l.useEffect(()=>{e.bookTitle.en=="Qur'an"||e.bookTitle.en=="Zabur"?I(!1):e.openedSubBook==e.subBookId?I(!0):I(!1)},[e.openedSubBook]),l.useEffect(()=>{var ae,X;const o=e.subBooks.filter(G=>G.subBookId===$);let M=0;if(o&&o.length>0&&(M=(ae=o[0].chapterInfos)==null?void 0:ae.length,m(o[0])),e.currentUser){const G=e.userHistory.filter(H=>H.bookId==e.bookId);if(G&&G.length>0){const H=G[0].subBooks.filter(me=>me.subBookId==$);H&&H.length>0&&T(Math.floor(((X=H[0])==null?void 0:X.readChapters)/M*100))}}if(e.subBooks&&e.subBooks.length>0){const G=e.subBooks.filter(H=>H.subBookId==$);if(G&&G.length>0){let H=G[0].chapterInfos;H.sort((me,fe)=>me.chapterNumber-fe.chapterNumber),i(H)}}},[e.subBooks,e.userHistory]),l.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const o=e.subBookInfos.filter(M=>M.subBookId==$);o&&o.length>0?p(!0):p(!1)}},[]);const ne=l.useCallback(o=>{p(M=>!M),e.onDownload(o)},[]),J=()=>{var o,M;if(t!=null&&t.noChapter){const ae=(o=t==null?void 0:t.chapterInfos[0])==null?void 0:o.isTranslated,X=(M=t==null?void 0:t.chapterInfos[0])==null?void 0:M.isPublished;!(ae!=null&&ae[d])&&!(ae!=null&&ae[e.appLanguage])||!(X!=null&&X[d])&&!(X!=null&&X[e.appLanguage])?ce.custom(G=>{var H,me,fe,_e,Ee,Oe;return n.jsx(ue,{text:((fe=(me=(H=e.terms)==null?void 0:H.texts.find(ke=>ke.variable=="None Translated"))==null?void 0:me.text)==null?void 0:fe[e.appLanguage])||((Oe=(Ee=(_e=e.terms)==null?void 0:_e.texts.find(ke=>ke.variable=="None Translated"))==null?void 0:Ee.text)==null?void 0:Oe.en)||"",visible:G.visible})}):e.moveToReading(t==null?void 0:t.chapterInfos[0].chapterId,t.subBookId)}else I(!g),e.handleOpenedSubBook(e.subBookId)},re=(o,M)=>{M=="none"?ce.custom(ae=>{var X,G,H;return n.jsx(ue,{text:((H=(G=(X=e.terms)==null?void 0:X.texts.find(me=>me.variable=="None Translated"))==null?void 0:G.text)==null?void 0:H[e.appLanguage])||"",visible:ae.visible})}):e.moveToReading(o,t.subBookId)};return n.jsxs(eo,{id:e.id,children:[n.jsxs(to,{children:[n.jsxs(ao,{progress:L,progresscolor:y,onClick:J,children:[(t==null?void 0:t.subBookNumber)!=0&&n.jsxs(oo,{istransliteration:((x=t==null?void 0:t.subBookTitle)==null?void 0:x[Ge])!=null?"true":"false",translatestatus:(t==null?void 0:t.noChapter)&&(!((P=(b=t==null?void 0:t.chapterInfos[0])==null?void 0:b.isTranslated)!=null&&P[d])&&!((K=(U=t==null?void 0:t.chapterInfos[0])==null?void 0:U.isTranslated)!=null&&K[e.appLanguage])||!((ie=(Z=t==null?void 0:t.chapterInfos[0])==null?void 0:Z.isPublished)!=null&&ie[d])&&!((W=(se=t==null?void 0:t.chapterInfos[0])==null?void 0:se.isPublished)!=null&&W[e.appLanguage])?"none":(!((be=(xe=t==null?void 0:t.chapterInfos[0])==null?void 0:xe.isTranslated)!=null&&be[d])||!((r=(F=t==null?void 0:t.chapterInfos[0])==null?void 0:F.isTranslated)!=null&&r[e.appLanguage]))&&((u=(c=t==null?void 0:t.chapterInfos[0])==null?void 0:c.isPublished)!=null&&u[d]||!((w=(v=t==null?void 0:t.chapterInfos[0])==null?void 0:v.isPublished)!=null&&w[e.appLanguage]))?"one":"both")||"",children:[((f=t==null?void 0:t.subBookTitle)==null?void 0:f[Ge])&&n.jsx(ge,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:k,language:Ct,children:(t==null?void 0:t.subBookNumber)+". "+((R=t==null?void 0:t.subBookTitle)==null?void 0:R[Ge])}),n.jsx(ge,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:k,language:Ct,direction:"rtl",children:((te=(ee=(Q=(A=e.subBookTerms)==null?void 0:A.texts)==null?void 0:Q.find(o=>{var M;return(o==null?void 0:o.variable)===((M=t==null?void 0:t.subBookTitle)==null?void 0:M.en)}))==null?void 0:ee.text)==null?void 0:te.ar)||((j=t==null?void 0:t.subBookTitle)==null?void 0:j.ar)||((D=t==null?void 0:t.subBookTitle)==null?void 0:D.en)})]}),n.jsxs(no,{children:[n.jsxs(io,{translatestatus:t!=null&&t.noChapter&&(!((Ce=(ye=t==null?void 0:t.chapterInfos[0])==null?void 0:ye.isTranslated)!=null&&Ce[d])&&!((Be=(Se=t==null?void 0:t.chapterInfos[0])==null?void 0:Se.isTranslated)!=null&&Be[e.appLanguage])||!((we=(Te=t==null?void 0:t.chapterInfos[0])==null?void 0:Te.isPublished)!=null&&we[d])&&!((Pe=(Le=t==null?void 0:t.chapterInfos[0])==null?void 0:Le.isPublished)!=null&&Pe[e.appLanguage]))?"none":(!((je=(pe=t==null?void 0:t.chapterInfos[0])==null?void 0:pe.isTranslated)!=null&&je[d])||!((C=(Ie=t==null?void 0:t.chapterInfos[0])==null?void 0:Ie.isTranslated)!=null&&C[e.appLanguage]))&&((et=(Je=t==null?void 0:t.chapterInfos[0])==null?void 0:Je.isPublished)!=null&&et[d]||!((at=(tt=t==null?void 0:t.chapterInfos[0])==null?void 0:tt.isPublished)!=null&&at[e.appLanguage]))?"one":"both",children:[n.jsx(ge,{fontFamily:'"Baloo Da 2"',color:k,children:e.bookTitle.en==="Zabur"&&(t==null?void 0:t.subBookNumber)!=0?(((st=(it=(nt=(ot=e.subBookTerms)==null?void 0:ot.texts)==null?void 0:nt.find(o=>(o==null?void 0:o.variable)==="Psalm"))==null?void 0:it.text)==null?void 0:st[e.appLanguage||"en"])||"Psalm")+` ${t==null?void 0:t.subBookNumber}`:((ct=(dt=(rt=(lt=e.subBookTerms)==null?void 0:lt.texts)==null?void 0:rt.find(o=>{var M;return(o==null?void 0:o.variable)===((M=t==null?void 0:t.subBookTitle)==null?void 0:M.en)}))==null?void 0:dt.text)==null?void 0:ct[e.appLanguage||"en"])||((ut=t==null?void 0:t.subBookTitle)==null?void 0:ut.en)}),(t==null?void 0:t.subBookNumber)==0&&n.jsx(so,{src:S.icon_intro})]}),e.currentUser&&L!==0&&!(t!=null&&t.noChapter)&&n.jsx(ge,{fontFamily:'"Baloo Da 2"',color:y,children:`${L}%`})]})]}),n.jsxs(lo,{isdownloaded:B?"true":"false",children:[n.jsx(Dt,{src:B?_==O.DEFAULT||_==O.EASY_OCEAN?S.download_cancel:S.download_cancel_white:_==O.DEFAULT||_==O.EASY_OCEAN?S.download:S.download_white,onClick:()=>ne($)}),B&&n.jsx(Dt,{src:_==O.DEFAULT||_==O.EASY_OCEAN?S.download_refresh:S.download_refresh_white,onClick:()=>e.onDownloadRefresh($)})]})]}),g&&n.jsxs(ro,{style:{backgroundColor:q},children:[n.jsx(co,{children:n.jsx(ge,{fontFamily:"Inter",color:Y,children:((bt=(xt=(gt=e.terms)==null?void 0:gt.texts.find(o=>o.variable=="Chapter"))==null?void 0:xt.text)==null?void 0:bt[e.appLanguage])||""})}),n.jsx(uo,{children:a==null?void 0:a.map((o,M)=>{var ae,X,G,H,me,fe,_e,Ee,Oe,ke,mt,ft,kt,ht,vt,yt;return o.chapterNumber==0?n.jsx(Mt,{translatestatus:!((ae=o==null?void 0:o.isTranslated)!=null&&ae[d])&&!((X=o==null?void 0:o.isTranslated)!=null&&X[e.appLanguage])||!((G=o==null?void 0:o.isPublished)!=null&&G[d])&&!((H=o==null?void 0:o.isPublished)!=null&&H[e.appLanguage])?"none":(!((me=o==null?void 0:o.isTranslated)!=null&&me[d])||!((fe=o==null?void 0:o.isTranslated)!=null&&fe[e.appLanguage]))&&((_e=o==null?void 0:o.isPublished)!=null&&_e[d]||!((Ee=o==null?void 0:o.isPublished)!=null&&Ee[e.appLanguage]))?"one":"both",readalready:N&&N.length>0&&N.includes(o.chapterId)?"true":"false",style:{backgroundColor:E,color:k},readbgcolor:y,readtextcolor:V,onClick:()=>{var Ne,Ae,Re,De,Me,$e,Ue,Fe;return re(o.chapterId,!((Ne=o==null?void 0:o.isTranslated)!=null&&Ne[d])&&!((Ae=o==null?void 0:o.isTranslated)!=null&&Ae[e.appLanguage])||!((Re=o==null?void 0:o.isPublished)!=null&&Re[d])&&!((De=o==null?void 0:o.isPublished)!=null&&De[e.appLanguage])?"none":(!((Me=o.isTranslated)!=null&&Me[d])||!(($e=o==null?void 0:o.isTranslated)!=null&&$e[e.appLanguage]))&&((Ue=o==null?void 0:o.isPublished)!=null&&Ue[d]||!((Fe=o==null?void 0:o.isPublished)!=null&&Fe[e.appLanguage]))?"one":"both")},children:n.jsx(go,{src:S.icon_intro})},M):n.jsx(Mt,{translatestatus:!((Oe=o==null?void 0:o.isTranslated)!=null&&Oe[d])&&!((ke=o==null?void 0:o.isTranslated)!=null&&ke[e.appLanguage])||!((mt=o==null?void 0:o.isPublished)!=null&&mt[d])&&!((ft=o==null?void 0:o.isPublished)!=null&&ft[e.appLanguage])?"none":(!((kt=o==null?void 0:o.isTranslated)!=null&&kt[d])||!((ht=o==null?void 0:o.isTranslated)!=null&&ht[e.appLanguage]))&&((vt=o==null?void 0:o.isPublished)!=null&&vt[d]||!((yt=o==null?void 0:o.isPublished)!=null&&yt[e.appLanguage]))?"one":"both",readalready:N&&N.length>0&&N.includes(o.chapterId)?"true":"false",style:{backgroundColor:E,color:k},readbgcolor:y,readtextcolor:V,onClick:()=>{var Ne,Ae,Re,De,Me,$e,Ue,Fe;return re(o.chapterId,!((Ne=o==null?void 0:o.isTranslated)!=null&&Ne[d])&&!((Ae=o==null?void 0:o.isTranslated)!=null&&Ae[e.appLanguage])||!((Re=o==null?void 0:o.isPublished)!=null&&Re[d])&&!((De=o==null?void 0:o.isPublished)!=null&&De[e.appLanguage])?"none":(!((Me=o.isTranslated)!=null&&Me[d])||!(($e=o.isTranslated)!=null&&$e[e.appLanguage]))&&(!((Ue=o==null?void 0:o.isPublished)!=null&&Ue[d])||!((Fe=o==null?void 0:o.isPublished)!=null&&Fe[e.appLanguage]))?"one":"both")},children:n.jsx(ge,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:o.chapterNumber})},M)})})]})]})}function mo(e){const[a,i]=l.useState([]);return l.useEffect(()=>{let t=e.subBooks;t&&t.sort((m,g)=>m.subBookNumber-g.subBookNumber),i(t)},[e.subBooks]),n.jsx(n.Fragment,{children:a&&a.length>0&&a.map((t,m)=>n.jsx(bo,{id:`subbook-${t.subBookId}`,bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:a,subBookId:t.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,subBookTerms:e.subBookTerms,appLanguage:e.appLanguage,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},m))})}function fo(e){const[a,i]=l.useState(""),[t,m]=l.useState([]),[g,I]=l.useState(1),[B,p]=l.useState([]),{theme:L,readingLanguage:T}=l.useContext(He),{backgroundColor:_,topTextColor:d,mainTextColor:E}=ze(L),k=aa(e.deviceHeight),q=g*k,Y=q-k,y=e.currentUser&&t.slice(Y,q);l.useEffect(()=>{var x,b,P,U,K,Z,ie,se,W,xe;if(e.subBooks&&e.subBooks.length>0){const be=e.subBooks.map(F=>{var r;return{label:(r=F.subBookTitle)==null?void 0:r[T],value:F.subBookId}});be.unshift({label:((x=e.bookTitle)==null?void 0:x.en)=="Qur'an"||((b=e.bookTitle)==null?void 0:b.en)=="Zabur"?((U=(P=e.terms.texts.find(F=>F.variable=="All Chapters"))==null?void 0:P.text)==null?void 0:U[T])||((Z=(K=e.terms.texts.find(F=>F.variable=="All Chapters"))==null?void 0:K.text)==null?void 0:Z.en):((se=(ie=e.terms.texts.find(F=>F.variable=="All SubBooks"))==null?void 0:ie.text)==null?void 0:se[T])||((xe=(W=e.terms.texts.find(F=>F.variable=="All SubBooks"))==null?void 0:W.text)==null?void 0:xe.en),value:"all"}),p(be)}},[e.subBooks]),l.useEffect(()=>{B.length>0&&i(B[0].value)},[B]),l.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const x=e.bookmark.filter(b=>b.subBookId===a);m(a==="all"||a===""?e.bookmark:x)}else m([]),I(0);g>1&&y.length==1&&I(x=>x-1)},[e.bookmark]);const V=(x,b)=>{I(b)},N=l.useCallback(x=>{const b=x.target.value;i(b);const P=e.bookmark.filter(U=>U.subBookId===b);m(b==="all"?e.bookmark:P)},[e.bookmark]),$=()=>{var x,b,P,U,K,Z,ie,se;return n.jsx(za,{style:{backgroundColor:_},children:n.jsx(na,{label:((b=(x=e.terms.texts.find(W=>W.variable=="Filter"))==null?void 0:x.text)==null?void 0:b[T])||((U=(P=e.terms.texts.find(W=>W.variable=="Filter"))==null?void 0:P.text)==null?void 0:U.en)||"",detail:n.jsxs(Ka,{children:[n.jsx(ge,{color:d,children:((Z=(K=e.terms.texts.find(W=>W.variable=="Show"))==null?void 0:K.text)==null?void 0:Z[T])||((se=(ie=e.terms.texts.find(W=>W.variable=="Show"))==null?void 0:ie.text)==null?void 0:se.en)||""}),n.jsx(ia,{label:"",options:B,value:a,backgroundColor:_,textColor:d,onChange:N})]})})})},ne=()=>n.jsx(Wa,{children:(y==null?void 0:y.length)>0&&y.map((x,b)=>{var P,U,K,Z,ie,se,W,xe,be,F,r,c,u,v,w,f,R,A,Q,ee,te,j,D,ye,Ce,Se,Be,Te,we,Le,Pe,pe,je,Ie;return n.jsxs(h,{children:[n.jsxs(Ga,{children:[n.jsxs(Va,{onClick:()=>e.moveToReadingFromBookmark(x._id),children:[n.jsx(ge,{color:E,children:((P=x.subBookTitle)==null?void 0:P[T])||((U=x.subBookTitle)==null?void 0:U.en)}),n.jsx(ge,{color:E,children:x.bookTitle.en=="Qur'an"||x.bookTitle.en=="Zabur"?x.chapterNumber>0?`${((Z=(K=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:K.text)==null?void 0:Z[T])||((se=(ie=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:ie.text)==null?void 0:se.en)} ${x.chapterNumber}, ${((xe=(W=e.terms.texts.find(C=>C.variable=="Aya"))==null?void 0:W.text)==null?void 0:xe[T])||((F=(be=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:be.text)==null?void 0:F.en)} ${x.verseNumber}`:`${((c=(r=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:r.text)==null?void 0:c[T])||((v=(u=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:u.text)==null?void 0:v.en)} _ , ${((f=(w=e.terms.texts.find(C=>C.variable=="Aya"))==null?void 0:w.text)==null?void 0:f[T])||((A=(R=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:R.text)==null?void 0:A.en)} ${x.verseNumber}`:x.chapterNumber>0?`${((ee=(Q=e.terms.texts.find(C=>C.variable=="Chapter Bookmark"))==null?void 0:Q.text)==null?void 0:ee[T])||((j=(te=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:te.text)==null?void 0:j.en)} ${x.chapterNumber}, ${((ye=(D=e.terms.texts.find(C=>C.variable=="Aya"))==null?void 0:D.text)==null?void 0:ye[T])||((Se=(Ce=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:Ce.text)==null?void 0:Se.en)} ${x.verseNumber}`:`${((Te=(Be=e.terms.texts.find(C=>C.variable=="Chapter Bookmark"))==null?void 0:Be.text)==null?void 0:Te[T])||((Le=(we=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:we.text)==null?void 0:Le.en)} _ , ${((pe=(Pe=e.terms.texts.find(C=>C.variable=="Aya"))==null?void 0:Pe.text)==null?void 0:pe[T])||((Ie=(je=e.terms.texts.find(C=>C.variable=="Surah Bookmark"))==null?void 0:je.text)==null?void 0:Ie.en)} ${x.verseNumber}`})]}),n.jsx(Za,{src:L==O.DEFAULT||L==O.EASY_OCEAN||L==O.EASY_SUNRISE?S.black_bookmark:S.white_bookmark,onClick:()=>e.removeBookmark(x._id)})]}),n.jsx(Ya,{})]},b)})}),J=()=>n.jsx(Qa,{buttoncolor:E,children:n.jsx(Ba,{count:e.currentUser?Math.ceil(t.length/k):0,page:g,hidePrevButton:!0,hideNextButton:!0,onChange:V})}),re=()=>{var x,b,P,U;return n.jsxs(Xa,{style:{backgroundColor:_},children:[n.jsx(qa,{src:L==O.DEFAULT||L==O.BLACK_AND_WHITE?S.swipe:L==O.EASY_OCEAN?S.swipe_easyocean:S.swipe_white}),n.jsx(Ja,{style:{color:d},children:((b=(x=e.terms.texts.find(K=>K.variable=="Bookmark Help"))==null?void 0:x.text)==null?void 0:b[T])||((U=(P=e.terms.texts.find(K=>K.variable=="Bookmark Help"))==null?void 0:P.text)==null?void 0:U.en)})]})};return n.jsxs(Ha,{children:[$(),ne(),J(),re()]})}function ko(e){var T,_,d,E;const[a,i]=l.useState(le),{theme:t}=l.useContext(He),{mainBGColor:m,headerBGColor:g,buttonColor:I,buttonTextColor:B,mainTextColor:p}=ze(t),L=k=>{e.currentUser?i(k):ce.custom(q=>{var Y,y,V,N;return n.jsx(ue,{text:((y=(Y=e.terms.texts.find($=>$.variable=="Bookmark Read Description"))==null?void 0:Y.text)==null?void 0:y[e.appLanguage])||((N=(V=e.terms.texts.find($=>$.variable=="Bookmark Read Description"))==null?void 0:V.text)==null?void 0:N.en)||"",visible:q.visible})})};return n.jsx($a,{style:{backgroundColor:g},children:n.jsxs(Ua,{style:{backgroundColor:m},children:[n.jsxs(Fa,{children:[n.jsxs(Nt,{active:a==le?"true":"false",style:{backgroundColor:a==le?I:m},bordercolor:p,onClick:()=>L(le),children:[n.jsx(At,{src:t==O.DEFAULT?S.index:t==O.EASY_OCEAN?a==le?S.index_active:S.index:a==le?S.index:S.index_active}),n.jsx(Rt,{active:a==le?"true":"false",children:n.jsx(ge,{fontSize:16,fontWeight:"500",lineHeight:24,color:a==le?B:p,children:((_=(T=e.terms.texts.find(k=>k.variable=="Index"))==null?void 0:T.text)==null?void 0:_[e.appLanguage])||"Index"})})]}),n.jsxs(Nt,{active:a==le?"false":"true",style:{backgroundColor:a==Ve?I:m},bordercolor:p,onClick:()=>L(Ve),children:[n.jsx(At,{src:t==O.DEFAULT?S.bookmark2_default:t==O.EASY_OCEAN?a==le?S.bookmark2_default:S.bookmark2_white:a==le?S.bookmark2_white:S.bookmark2_default}),n.jsx(Rt,{active:a==le?"false":"true",children:n.jsx(ge,{fontSize:16,fontWeight:"500",lineHeight:24,color:a==Ve?B:p,children:((E=(d=e.terms.texts.find(k=>k.variable=="Bookmarks"))==null?void 0:d.text)==null?void 0:E[e.appLanguage])||"Bookmarks"})})]})]}),a==le?n.jsx(mo,{bookId:e.bookId,bookTitle:e.bookTitle,bookImage:e.bookImage,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,subBookTerms:e.subBookTerms,appLanguage:e.appLanguage,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):n.jsx(fo,{bookTitle:e.bookTitle,subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark.filter(k=>k.bookId==e.bookId),deviceHeight:e.deviceHeight,terms:e.terms,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const ho=s(h)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function vo(e){var xe,be,F;const[a,i]=l.useState(),[t,m]=l.useState(!1),[g,I]=l.useState(),[B,p]=l.useState(),[L,T]=l.useState(),[_,d]=l.useState(),[E,k]=l.useState(),[q,Y]=l.useState(),y=Jt(),{height:V}=Ta(),{theme:N}=l.useContext(He),{mainBGColor:$}=ze(N),ne=l.useCallback(()=>{e.currentBook&&Pt.fetchBookInfo(e.currentBook).then(r=>{var c,u,v;if(e.dispatch({type:z.ADD_BOOKINFO,payload:{bookInfo:r}}),i(r),e.currentUser&&!e.userHistory.some(f=>f.bookId==e.currentBook)&&r.subBooks){const f=r.subBooks.find(Q=>Q.subBookNumber==0),R=(c=f==null?void 0:f.chapterInfos[0])==null?void 0:c.chapterId,A=f==null?void 0:f.subBookId;(v=(u=f==null?void 0:f.chapterInfos[0])==null?void 0:u.isTranslated)!=null&&v[e.appLanguage]?x(R,A):ce.custom(Q=>{var ee,te,j;return n.jsx(ue,{text:((j=(te=(ee=g==null?void 0:g.texts)==null?void 0:ee.find(D=>D.variable=="None Translated"))==null?void 0:te.text)==null?void 0:j[e.appLanguage])||"",type:Ke.BOOKMARK,visible:Q.visible})})}}).catch(r=>{ce.custom(c=>n.jsx(ue,{text:r,type:Ke.BOOKMARK,visible:c.visible}))}).finally(()=>{m(!1)})},[e.currentBook,e.dispatch,e.userHistory,e.currentUser]),J=l.useCallback(async r=>{var c,u,v;try{const w=await Pt.fetchSubBookInfo(r);e.dispatch({type:z.ADD_SUBBOOKINFO,payload:{subBookInfo:w}}),e.dispatch({type:z.ADD_SUBBOOK,payload:{subBook:w}}),ea(w);const f=(c=e.bookInfos)==null?void 0:c.find(A=>(A==null?void 0:A.bookId)==e.currentBook),R=f&&((u=f==null?void 0:f.subBooks)==null?void 0:u.find(A=>(A==null?void 0:A.subBookId)==r));if(R){const A=(v=R==null?void 0:R.subBookTitle)==null?void 0:v.en;wt("Sub books","download_subbook",A)}m(!1)}catch(w){ce.custom(f=>n.jsx(ue,{text:w,visible:f.visible})),m(!1)}},[e.dispatch]);l.useEffect(()=>{var R,A,Q,ee,te,j;const r=e.terms.find(D=>D.pageTitle=="Index & Bookmark Page"),c=e.terms.find(D=>D.pageTitle=="Welcome Page"),u=e.terms.find(D=>D.pageTitle==="Origin Injil Sub-book Names"),v=e.terms.find(D=>D.pageTitle==="Origin Qur'an Surah Names"),w=e.terms.find(D=>D.pageTitle==="Origin Tawrat Sub-book Names"),f=e.terms.find(D=>D.pageTitle==="Origin Zabur Sub-book Names");(R=r==null?void 0:r.isPublished)!=null&&R[e.appLanguage]&&I(r),(A=c==null?void 0:c.isPublished)!=null&&A[e.appLanguage]&&p(c),(Q=u==null?void 0:u.isPublished)!=null&&Q[e.appLanguage]&&T(u),(ee=v==null?void 0:v.isPublished)!=null&&ee[e.appLanguage]&&d(v),(te=w==null?void 0:w.isPublished)!=null&&te[e.appLanguage]&&k(w),(j=f==null?void 0:f.isPublished)!=null&&j[e.appLanguage]&&Y(f)},[e.terms,e.appLanguage]),l.useEffect(()=>{(async()=>{var c;m(!0),!((c=e.bookInfos)!=null&&c.length)||!e.bookInfos.some(u=>u.bookId===e.currentBook)?await ne():(i(e.bookInfos.find(u=>u.bookId===e.currentBook)),m(!1))})(),e.currentUser&&pt.fetchBookmarks().then(c=>{e.dispatch({type:z.SET_BOOKMARKS,payload:{bookmark:c}})}).catch(c=>{c.status===401&&c.response.data.message===St&&(ce.custom(u=>n.jsx(ue,{text:c.response.data.message,visible:u.visible})),Ze.logout(),y("/login"))})},[e.currentBook,e.bookInfos,e.currentUser,e.dispatch]),l.useEffect(()=>{if(e.currentSubBook&&e.prevPage===Ye.READING){const c=setTimeout(()=>{const u=document.getElementById(`subbook-${e.currentSubBook}`);u&&u.scrollIntoView({behavior:"smooth"})},100);return()=>clearTimeout(c)}},[e.currentSubBook,e.prevPage]);const re=()=>{ce.custom(r=>{var c,u,v;return n.jsx(ue,{text:((v=(u=(c=g==null?void 0:g.texts)==null?void 0:c.find(w=>w.variable=="Not Built Yet"))==null?void 0:u.text)==null?void 0:v[e.appLanguage])||"",visible:r.visible})})},x=(r,c)=>{var f,R,A,Q,ee,te;e.dispatch({type:z.SET_CURRENT_CHAPTER,payload:{currentChapter:r}}),e.dispatch({type:z.SET_CURRENT_SUBBOOK,payload:{currentSubBook:c}}),e.dispatch({type:z.SET_PREVIOUS_PAGE,payload:{prevPage:Ye.BOOKS}});const u=(f=e.bookInfos)==null?void 0:f.find(j=>(j==null?void 0:j.bookId)==e.currentBook),v=u&&((R=u==null?void 0:u.subBooks)==null?void 0:R.find(j=>(j==null?void 0:j.subBookId)==c)),w=(A=v==null?void 0:v.chapterInfos)==null?void 0:A.find(j=>(j==null?void 0:j.chapterId)==r);if(v){const j=(Q=v==null?void 0:v.subBookTitle)==null?void 0:Q.en,D=w==null?void 0:w.chapterNumber;wt("Chapter","read_chapter",((ee=a==null?void 0:a.bookTitle)==null?void 0:ee.en)=="Qur'an"||((te=a==null?void 0:a.bookTitle)==null?void 0:te.en)=="Zabur"?j:`${j}-${D==0?"Introduction":D}`)}y("/reading")},b=()=>{y("/library"),e.dispatch({type:z.SET_PREVIOUS_PAGE,payload:{prevPage:Ye.BOOKS}}),e.dispatch({type:z.SET_CURRENT_SUBBOOK,payload:{currentSubBook:""}})},P=l.useCallback(async r=>{m(!0),Lt()<Bt?await ta(r)?(await Tt(r),e.dispatch({type:z.REMOVE_SUBBOOKINFO,payload:{subBookId:r}})):await J(r):ce.custom(u=>{var v,w,f;return n.jsx(ue,{text:((f=(w=(v=g==null?void 0:g.texts)==null?void 0:v.find(R=>R.variable=="Not Enough Space"))==null?void 0:w.text)==null?void 0:f[e.appLanguage])||"Not enough space",visible:u.visible})}),m(!1)},[J,e.dispatch]),U=l.useCallback(async r=>{m(!0),await Tt(r),e.dispatch({type:z.REMOVE_SUBBOOKINFO,payload:{subBookId:r}}),Lt()<Bt?await J(r):ce.custom(u=>{var v,w,f;return n.jsx(ue,{text:((f=(w=(v=g==null?void 0:g.texts)==null?void 0:v.find(R=>R.variable=="Not Enough Space"))==null?void 0:w.text)==null?void 0:f[e.appLanguage])||"Not enough space",visible:u.visible})}),m(!1)},[J,e.dispatch]),K=l.useCallback(r=>{if(m(!0),e.bookmark&&e.bookmark.length>0){const c=e.bookmark.find(u=>u._id===r);if(c){const{chapterId:u,subBookId:v,verseId:w}=c;e.dispatch({type:z.SET_CURRENT_SUBBOOK,payload:{currentSubBook:v}}),e.dispatch({type:z.SET_CURRENT_CHAPTER,payload:{currentChapter:u}}),e.dispatch({type:z.SET_CURRENT_VERSE,payload:{currentVerse:w}}),y("/reading"),m(!1)}}},[e.currentBook,y,e.bookmark]),Z=l.useCallback(r=>{m(!0),pt.deleteBookmark(r).then(c=>{e.dispatch({type:z.REMOVE_BOOKMARK,payload:{bookmarkId:r}}),ce.custom(u=>n.jsx(ue,{text:c.message,type:Ke.BOOKMARK,visible:u.visible})),m(!1)}).catch(c=>{c.status==401&&c.response.data.message==St&&(ce.custom(u=>n.jsx(ue,{text:c.response.data.message,type:Ke.BOOKMARK,visible:u.visible})),Ze.logout(),y("/login")),m(!1)})},[e.dispatch]),ie=l.useCallback(r=>{e.dispatch({type:z.SET_CURRENT_SUBBOOK,payload:{currentSubBook:e.currentSubBook===r?"":r}})},[e.currentSubBook,e.dispatch]),se=()=>{e.dispatch({type:z.RESET_USER}),e.dispatch({type:z.RESET_BOOK}),e.dispatch({type:z.RESET_PAGE_STATUS}),Ze.logout()},W=()=>{y("/login")};return n.jsxs(ho,{style:{backgroundColor:$},children:[n.jsx(xo,{markImg:a&&Vt+a.bookImage,markTitle:a==null?void 0:a.bookTitle,isLogIn:!!e.currentUser,terms:g||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},welcomePageTerms:B||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},appLanguage:e.appLanguage,onLogoClick:()=>y("/home"),onCloseClick:b,onLogin:e.currentUser?se:W,onSettings:()=>y("/settings"),onSearchClick:re}),n.jsx(ko,{bookId:e.currentBook,bookTitle:a==null?void 0:a.bookTitle,bookImage:a==null?void 0:a.bookImage,subBooks:a==null?void 0:a.subBooks,deviceHeight:V,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.currentSubBook,terms:g||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},subBookTerms:(((xe=a==null?void 0:a.bookTitle)==null?void 0:xe.en)==="Injil"?L:((be=a==null?void 0:a.bookTitle)==null?void 0:be.en)==="Qur'an"?_:((F=a==null?void 0:a.bookTitle)==null?void 0:F.en)==="Zabur"?q:E)||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},appLanguage:e.appLanguage,moveToReading:x,moveToReadingFromBookmark:K,onDownload:P,onDownloadRefresh:U,removeBookmark:Z,handleOpenedSubBook:ie}),t&&n.jsx(sa,{})]})}function yo(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,terms:e.terms.terms,currentBook:e.pageStatus.currentBook,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,currentSubBook:e.pageStatus.currentSubBook,prevPage:e.pageStatus.prevPage,currentUser:e.user.currentUser,appLanguage:e.user.appLanguage,readingLanguage:e.user.readingLanguage,activeChapterId:e.books.activeChapterId}}const No=qt(yo)(vo);export{No as default};
