import{b as s,j as o,Q as S,af as se}from"./index-BPBmJKVk.js";import{S as V,g as G,aK as ae,aL as ie,aM as ce,s as c,B as g,c as le,u as de,d as _,_ as ue}from"./App-Daioa5OK.js";import{I as C,T as m}from"./index-prtcgOaC.js";import{B as K}from"./Button-CwFH10yQ.js";import{S as $}from"./index-0wfcRo-C.js";import{b as Q}from"./book.service-B2LodF4F.js";import{L as he}from"./index-CHHOHi0T.js";import{C as be}from"./index-BavelMNw.js";import"./index-CuhshOTg.js";import"./axios-BimPEqV4.js";function M(e){const{theme:i}=s.useContext(V),{textColor:l}=G(i);return o.jsxs(o.Fragment,{children:[o.jsx(ae,{children:o.jsx(ie,{value:e.value,size:e.size=="small"?"small":"medium",type:e.type,style:{color:l},bordercolor:l,onChange:e.onChange,onBlur:e.onBlur})}),e.error&&o.jsx(ce,{children:e.error})]})}const xe=c(g)({width:"100%",display:"flex",justifyContent:"center",alignItems:"center",boxSizing:"border-box"}),ge=c(g)(({backgroundcolor:e})=>({width:"100%",backgroundColor:e,boxSizing:"border-box",display:"flex"})),ke=c("img")({width:"100%",marginTop:"57px"}),fe=c(g)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),me=c(g)({display:"flex",alignItems:"baseline"}),Se=c(g)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),Ce=c("img")({width:"100%",height:"100%"}),Be=c(g)({margin:0,marginLeft:"12px",position:"relative",top:"-20px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),pe=c(g)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),Ie=c("img")({width:"100%","&:active":{opacity:"0.8"}}),q=c(g)(({backgroundcolor:e})=>({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px",backgroundColor:e,"@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}})),Y=c(g)(({backgroundcolor:e})=>({backgroundColor:e,height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll",paddingTop:"100px",justifySelf:"center","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}})),E=c(g)({display:"flex",alignItems:"center",margin:"10px",maxWidth:"350px",minWidth:"300px","& .MuiBox-root:first-of-type":{width:"50%",paddingRight:"20px"},"& .MuiInputBase-root":{width:"100% !important",backgroundColor:"#FFF"},"& :nth-of-type(2)":{width:"50%","& .MuiBox-root":{paddingRight:"0px"},"& .MuiFormControl-root":{width:"60px","& .MuiInputBase-root":{width:"100% !important",backgroundColor:"#FFF"},"& .css-mat3fe-MuiInputBase-root-MuiOutlinedInput-root-MuiSelect-root":{width:"unset !important",backgroundColor:"#FFF"},"& .MuiSelect-select":{width:"100% !important",padding:"0px !important",backgroundColor:"#FFF"},"& input":{width:"100%",padding:"8px 12px",backgroundColor:"#FFF",textAlign:"center"}}}}),R=c(g)({display:"flex",justifyContent:"space-between",alignItems:"center"}),Z=c(g)(({bordercolor:e})=>({display:"flex",justifyContent:"center",marginTop:"30px","& button":{border:`1px solid ${e}`}})),ye=e=>{var I;const{theme:i,readingLanguage:l}=s.useContext(V),{logoTextColor:d,mainBGColor:p}=G(i);return o.jsxs(ge,{backgroundcolor:p,children:[o.jsx(ke,{src:i==S.DEFAULT||i==S.DARK?C.book_subtract:i==S.BLACK_AND_WHITE?C.book_subtract_BAW:i==S.SAPPHIRE?C.book_subtract_sapphire:C.book_subtract_easyocean}),o.jsx(fe,{children:o.jsxs(me,{children:[o.jsx(Se,{onClick:e.onClickCover,children:o.jsx(Ce,{src:e.bookCover})}),o.jsx(Be,{children:o.jsx(m,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:d,children:(I=e.bookTitle)==null?void 0:I[l||"en"]})})]})}),o.jsx(pe,{children:o.jsx(Ie,{src:i==S.DEFAULT||i==S.DARK?C.close2:i==S.BLACK_AND_WHITE?C.close2_BAW:i==S.SAPPHIRE?C.close2_sapphire:C.close2_easyocean,onClick:e.onClickClose})})]})};function je(e){const{theme:i}=s.useContext(V),{headerBGColor:l,logoTextColor:d,mainBGColor:p}=G(i),I=()=>{var h,B,u,j;return!e.isSpecialBook&&o.jsx(q,{backgroundcolor:l,children:o.jsxs(Y,{backgroundcolor:l,children:[o.jsxs(E,{children:[o.jsx(m,{color:d,textAlign:"right",children:"Go to sub book: "}),o.jsx($,{label:"",options:e.subBookOptions,value:e.subBook,onChange:b=>e.onSubBookChange(b.target.value)})]}),o.jsxs(E,{color:d,children:[o.jsx(m,{color:d,textAlign:"right",children:"Go to chapter: "}),o.jsxs(R,{children:[o.jsx(M,{type:"Number",value:e.chapterNumber,onChange:e.onChapterChange}),o.jsx(m,{color:d,fontSize:13,children:`(${(((B=(h=e.selectedSubBookInfo)==null?void 0:h.chapterInfos)==null?void 0:B.length)||0).toString()} chapters)`})]})]}),o.jsxs(E,{children:[o.jsx(m,{color:d,textAlign:"right",children:"Go to aya: "}),o.jsxs(R,{children:[o.jsx(M,{type:"Number",value:e.verseNumber,onChange:e.onVerseChange}),o.jsx(m,{color:d,fontSize:13,children:`(${(((j=(u=e.selectedChapterInfo)==null?void 0:u.verses)==null?void 0:j.length)||0).toString()} ayat)`})]})]}),o.jsx(Z,{bordercolor:p,children:o.jsx(K,{label:"Go",onClick:e.onGo})})]})})},w=()=>{var h,B;return e.isSpecialBook&&o.jsx(q,{backgroundcolor:l,children:o.jsxs(Y,{backgroundcolor:l,children:[o.jsxs(E,{children:[o.jsx(m,{color:d,textAlign:"right",children:"Go to Surah: "}),o.jsx($,{label:"",options:e.subBookOptions,value:e.subBook,onChange:u=>e.onSubBookChange(u.target.value)})]}),o.jsxs(E,{children:[o.jsx(m,{color:d,textAlign:"right",children:"Go to aya: "}),o.jsxs(R,{children:[o.jsx(M,{type:"Number",value:e.verseNumber,onChange:e.onVerseChange}),o.jsx(m,{color:d,fontSize:13,children:`(${(((B=(h=e.selectedChapterInfo)==null?void 0:h.verses)==null?void 0:B.length)||0).toString()} ayat)`})]})]}),o.jsx(Z,{bordercolor:p,children:o.jsx(K,{label:"Go",onClick:e.onGo})})]})})};return o.jsxs(o.Fragment,{children:[w(),I()]})}function ve(e){const[i,l]=s.useState(!1),[d,p]=s.useState({en:"",ar:""}),[I,w]=s.useState(""),[h,B]=s.useState(),[u,j]=s.useState(),[b,L]=s.useState(),[J,O]=s.useState([]),[y,X]=s.useState(e.currentSubBook),[v,A]=s.useState("1"),[H,T]=s.useState("1"),F=de();s.useEffect(()=>{const t=e.bookInfos.find(a=>a.bookId==e.currentBook);B(t);const n=(t==null?void 0:t.bookTitle)||{en:"",ar:""},r=(t==null?void 0:t.bookImage)||"";p(n),w(se+r)},[e.bookInfos]);const ee=()=>o.jsx(ye,{bookCover:I,bookTitle:d,onClickCover:()=>F("/library"),onClickClose:()=>F(-1)});s.useEffect(()=>{const t=e.bookInfos.find(n=>n.bookId==e.currentBook);if(t!=null&&t.subBooks){const n=t.subBooks.map(r=>{var a;return{label:(a=r.subBookTitle)==null?void 0:a.en,value:r.subBookId}});O(n)}else O([])},[e.bookInfos,e.currentBook]);const oe=()=>{var k,N,z,D,P,W,U;const t=(k=e.bookInfos)==null?void 0:k.find(f=>f.bookId==e.currentBook),n=(N=t==null?void 0:t.subBooks)==null?void 0:N.find(f=>f.subBookId==y),r=(z=n==null?void 0:n.chapterInfos)==null?void 0:z.find(f=>f.chapterNumber==Number(v)),a=r==null?void 0:r.chapterId,x=((U=(W=(P=(D=e.chapterInfos)==null?void 0:D.find(f=>f.chapterId==a))==null?void 0:P.verses)==null?void 0:W.find(f=>f.verseNumber==Number(H)))==null?void 0:U.verseId)||"";e.dispatch({type:_.SET_CURRENT_SUBBOOK,payload:{currentSubBook:y}}),e.dispatch({type:_.SET_CURRENT_CHAPTER,payload:{currentChapter:a}}),e.dispatch({type:_.SET_CURRENT_VERSE,payload:{currentVerse:x}}),F("/reading")},te=t=>{var n;u&&Number(t)<=((n=u.chapterInfos)==null?void 0:n.length)&&A(t)},ne=t=>{var n;b&&Number(t)<=((n=b.verses)==null?void 0:n.length)&&T(t)};s.useEffect(()=>{var r,a;const t=(r=e.bookInfos)==null?void 0:r.find(x=>x.bookId==e.currentBook),n=(a=t==null?void 0:t.subBooks)==null?void 0:a.find(x=>x.subBookId==e.currentSubBook);j(n)},[e.currentSubBook]),s.useEffect(()=>{var t;A(((t=b==null?void 0:b.chapterNumber)==null?void 0:t.toString())||"1"),T("1")},[e.currentChapter,u]),s.useEffect(()=>{var n,r;const t=(n=b==null?void 0:b.verses)==null?void 0:n.find(a=>a.verseId==e.currentVerse);T(((r=t==null?void 0:t.verseNumber)==null?void 0:r.toString())||"1")},[e.currentVerse,b]),s.useEffect(()=>{var r,a;const t=(r=e.bookInfos)==null?void 0:r.find(x=>x.bookId==e.currentBook),n=(a=t==null?void 0:t.subBooks)==null?void 0:a.find(x=>x.subBookId==y);j(n),A("1"),T("1")},[y]),s.useEffect(()=>{v&&(()=>{var a,x;const n=(a=u==null?void 0:u.chapterInfos)==null?void 0:a.find(k=>k.chapterNumber==Number(v));n!=null&&n.chapterId&&Q.fetchVerses(n.chapterId);const r=(x=e.chapterInfos)==null?void 0:x.find(k=>k.chapterId==(n==null?void 0:n.chapterId));r?(L(r),l(!1)):n!=null&&n.chapterId?Q.fetchVerses(n==null?void 0:n.chapterId).then(k=>{e.dispatch({type:_.ADD_CHAPTERINFO,payload:{chapterInfo:k}}),L(k),l(!1)}).catch(k=>{ue.custom(N=>o.jsx(be,{text:k,offset:70,visible:N.visible})),l(!1)}):l(!1)})()},[u,y,v]);const re=()=>{var t,n;return o.jsx(je,{subBookOptions:J,subBook:y,chapterNumber:v,verseNumber:H,selectedSubBookInfo:u,selectedChapterInfo:b,isSpecialBook:((t=h==null?void 0:h.bookTitle)==null?void 0:t.en)=="Qur'an"||((n=h==null?void 0:h.bookTitle)==null?void 0:n.en)=="Zabur",onSubBookChange:r=>X(r),onChapterChange:r=>te(r.target.value),onVerseChange:r=>ne(r.target.value),onGo:oe})};return o.jsxs(xe,{children:[ee(),re(),i&&o.jsx(he,{})]})}const Ee=e=>({bookInfos:e.books.bookInfos,subBooks:e.books.subBooks,chapterInfos:e.books.chapterInfos,currentBook:e.pageStatus.currentBook,currentSubBook:e.pageStatus.currentSubBook,currentChapter:e.pageStatus.currentChapter,currentVerse:e.pageStatus.currentVerse}),Le=le(Ee)(ve);export{Le as default};
