var Rt=Object.defineProperty;var $t=(e,o,s)=>o in e?Rt(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s;var bt=(e,o,s)=>$t(e,typeof o!="symbol"?o+"":o,s);import{c as Re,_ as Y,j as i,N as xe,b as x,a8 as Lt,o as be,J as Mt,ac as $e,ai as Le,Q as _,aj as Ae,ak as Oe,M as q,al as Ee,am as Ft,an as Ut,ao as je,ap as mt,aq as ft,af as zt}from"./index-BPBmJKVk.js";import{v as _t,w as At,x as Ht,y as _e,s as l,z as Wt,A as Ot,D as De,E as Et,F as Kt,B as v,G as Gt,S as pe,g as Te,_ as K,c as Yt,u as qt,d as oe}from"./App-CpYpzDZY.js";import{I as C,T as Q,g as Vt,a as kt}from"./images-YyT0ul_h.js";import{H as Xt}from"./index-CiSzlAV4.js";import{C as G,a as Ne}from"./auth.service-D8rNGPpb.js";import{A as Qt,b as ht}from"./bookmark.service-C1J_DUnn.js";import{S as Zt}from"./index-CY2IAOgk.js";import{L as Jt}from"./index-CrsufzG9.js";import{b as vt}from"./book.service-B2LodF4F.js";import"./index-DGvFd4Hw.js";import"./axios-BimPEqV4.js";function eo(e){return _t("MuiPagination",e)}At("MuiPagination",["root","ul","outlined","text"]);const to=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function oo(e={}){const{boundaryCount:o=1,componentName:s="usePagination",count:t=1,defaultPage:u=1,disabled:r=!1,hideNextButton:y=!1,hidePrevButton:p=!1,onChange:P,page:I,showFirstButton:m=!1,showLastButton:B=!1,siblingCount:g=1}=e,a=Re(e,to),[h,A]=Ht({controlled:I,default:u,name:s,state:"page"}),L=(b,j)=>{I||A(j),P&&P(b,j)},O=(b,j)=>{const U=j-b+1;return Array.from({length:U},(c,d)=>b+d)},N=O(1,Math.min(o,t)),$=O(Math.max(t-o+1,o+1),t),H=Math.max(Math.min(h-g,t-o-g*2-1),o+2),M=Math.min(Math.max(h+g,o+g*2+2),$.length>0?$[0]-2:t-1),W=[...m?["first"]:[],...p?[]:["previous"],...N,...H>o+2?["start-ellipsis"]:o+1<t-o?[o+1]:[],...O(H,M),...M<t-o-1?["end-ellipsis"]:t-o>o?[t-o]:[],...$,...y?[]:["next"],...B?["last"]:[]],Z=b=>{switch(b){case"first":return 1;case"previous":return h-1;case"next":return h+1;case"last":return t;default:return null}},f=W.map(b=>typeof b=="number"?{onClick:j=>{L(j,b)},type:"page",page:b,selected:b===h,disabled:r,"aria-current":b===h?"true":void 0}:{onClick:j=>{L(j,Z(b))},type:b,page:Z(b),selected:!1,disabled:r||b.indexOf("ellipsis")===-1&&(b==="next"||b==="last"?h>=t:h<=1)});return Y({items:f},a)}function no(e){return _t("MuiPaginationItem",e)}const X=At("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),yt=_e(i.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Ct=_e(i.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Bt=_e(i.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),St=_e(i.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),io=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Nt=(e,o)=>{const{ownerState:s}=e;return[o.root,o[s.variant],o[`size${be(s.size)}`],s.variant==="text"&&o[`text${be(s.color)}`],s.variant==="outlined"&&o[`outlined${be(s.color)}`],s.shape==="rounded"&&o.rounded,s.type==="page"&&o.page,(s.type==="start-ellipsis"||s.type==="end-ellipsis")&&o.ellipsis,(s.type==="previous"||s.type==="next")&&o.previousNext,(s.type==="first"||s.type==="last")&&o.firstLast]},so=e=>{const{classes:o,color:s,disabled:t,selected:u,size:r,shape:y,type:p,variant:P}=e,I={root:["root",`size${be(r)}`,P,y,s!=="standard"&&`color${be(s)}`,s!=="standard"&&`${P}${be(s)}`,t&&"disabled",u&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[p]],icon:["icon"]};return Et(I,no,o)},ao=l("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Nt})(({theme:e,ownerState:o})=>Y({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${X.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},o.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},o.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),lo=l(Wt,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Nt})(({theme:e,ownerState:o})=>Y({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${X.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${X.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${X.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:xe(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${X.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:xe(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${X.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},o.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},o.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},o.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:o})=>Y({},o.variant==="text"&&{[`&.${X.selected}`]:Y({},o.color!=="standard"&&{color:(e.vars||e).palette[o.color].contrastText,backgroundColor:(e.vars||e).palette[o.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[o.color].main}},[`&.${X.focusVisible}`]:{backgroundColor:(e.vars||e).palette[o.color].dark}},{[`&.${X.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},o.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${X.selected}`]:Y({},o.color!=="standard"&&{color:(e.vars||e).palette[o.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / 0.5)`:xe(e.palette[o.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:xe(e.palette[o.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:xe(e.palette[o.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${X.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[o.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:xe(e.palette[o.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${X.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),ro=l("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,o)=>o.icon})(({theme:e,ownerState:o})=>Y({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},o.size==="small"&&{fontSize:e.typography.pxToRem(18)},o.size==="large"&&{fontSize:e.typography.pxToRem(22)})),co=x.forwardRef(function(o,s){const t=Ot({props:o,name:"MuiPaginationItem"}),{className:u,color:r="standard",component:y,components:p={},disabled:P=!1,page:I,selected:m=!1,shape:B="circular",size:g="medium",slots:a={},type:h="page",variant:A="text"}=t,L=Re(t,io),O=Y({},t,{color:r,disabled:P,selected:m,shape:B,size:g,type:h,variant:A}),N=Lt(),$=so(O),M=(N?{previous:a.next||p.next||St,next:a.previous||p.previous||Bt,last:a.first||p.first||yt,first:a.last||p.last||Ct}:{previous:a.previous||p.previous||Bt,next:a.next||p.next||St,first:a.first||p.first||yt,last:a.last||p.last||Ct})[h];return h==="start-ellipsis"||h==="end-ellipsis"?i.jsx(ao,{ref:s,ownerState:O,className:De($.root,u),children:"â€¦"}):i.jsxs(lo,Y({ref:s,ownerState:O,component:y,disabled:P,className:De($.root,u)},L,{children:[h==="page"&&I,M?i.jsx(ro,{as:M,ownerState:O,className:$.icon}):null]}))}),uo=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],go=e=>{const{classes:o,variant:s}=e;return Et({root:["root",s],ul:["ul"]},eo,o)},xo=l("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.root,o[s.variant]]}})({}),bo=l("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,o)=>o.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function mo(e,o,s){return e==="page"?`${s?"":"Go to "}page ${o}`:`Go to ${e} page`}const fo=x.forwardRef(function(o,s){const t=Ot({props:o,name:"MuiPagination"}),{boundaryCount:u=1,className:r,color:y="standard",count:p=1,defaultPage:P=1,disabled:I=!1,getItemAriaLabel:m=mo,hideNextButton:B=!1,hidePrevButton:g=!1,renderItem:a=f=>i.jsx(co,Y({},f)),shape:h="circular",showFirstButton:A=!1,showLastButton:L=!1,siblingCount:O=1,size:N="medium",variant:$="text"}=t,H=Re(t,uo),{items:M}=oo(Y({},t,{componentName:"Pagination"})),W=Y({},t,{boundaryCount:u,color:y,count:p,defaultPage:P,disabled:I,getItemAriaLabel:m,hideNextButton:B,hidePrevButton:g,renderItem:a,shape:h,showFirstButton:A,showLastButton:L,siblingCount:O,size:N,variant:$}),Z=go(W);return i.jsx(xo,Y({"aria-label":"pagination navigation",className:De(Z.root,r),ownerState:W,ref:s},H,{children:i.jsx(bo,{className:Z.ul,ownerState:W,children:M.map((f,b)=>i.jsx("li",{children:a(Y({},f,{color:y,"aria-label":m(f.type,f.page,f.selected),shape:h,size:N,variant:$}))},b))})}))});function ko(e){return i.jsx(fo,{count:e.count,hidePrevButton:e.hideNextButton,hideNextButton:e.hideNextButton,page:e.page,siblingCount:0,boundaryCount:1,onChange:e.onChange})}function pt(){const{innerWidth:e,innerHeight:o}=window;return{width:e,height:o}}function ho(){const[e,o]=x.useState(pt());return x.useEffect(()=>{function s(){o(pt())}return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),e}var Me={},vo=Mt;Object.defineProperty(Me,"__esModule",{value:!0});var Dt=Me.default=void 0,yo=vo(Kt()),Co=i;Dt=Me.default=(0,yo.default)((0,Co.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const Bo=l(v)({display:"flex",position:"relative",width:"100%"}),So=l("img")({width:"100%",marginTop:"57px"}),po=l(v)({display:"flex",alignItems:"baseline",justifyContent:"space-between",position:"absolute",left:"30px",top:"30px",width:"calc(100% - 60px)"}),To=l(v)({display:"flex",alignItems:"baseline"}),Io=l(v)({width:"70px",cursor:"pointer",position:"relative","& div":{position:"absolute",top:"28px",width:"100%",textAlign:"center",maxWidth:"65px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}}),wo=l("img")({width:"100%",height:"100%"}),jo=l(v)({margin:0,marginLeft:"12px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none"}),Po=l(v)(({hamburgercolor:e})=>({position:"absolute",top:"12px",right:"15px",width:"46px","& .hamburger-react":{width:"46px !important",color:e},"& .hamburger-react ~ .MuiBox-root ":{border:`1px solid ${e}`},"@media (max-height: 639px)":{top:"8px",right:"10px"},"@media screen and (orientation: landscape)":{right:"15px"}})),_o=l("img")({cursor:"pointer","&:active":{opacity:"0.8"}}),Ao=l(v)({position:"absolute",top:"60px",left:"50%",transform:"translate(-50%, -50%)",cursor:"pointer"}),Oo=l("img")({width:"100%","&:active":{opacity:"0.8"}});l("img")({position:"absolute",top:"18px",right:"30px",cursor:"pointer","&:active":{opacity:"0.8"}});const Eo=l(v)({height:"calc(100dvh - 145px)",width:"100%",position:"absolute",top:"145px",padding:"0px 30px","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),No=l(v)({backgroundColor:"#FFF",height:"calc(100dvh - 145px)",position:"relative",zIndex:"1",display:"flex",flexDirection:"column",padding:"20px",overflowY:"scroll","@media screen and (orientation: landscape)":{height:"calc(100dvh - 145px)"}}),Do=l(v)({width:"100%",display:"flex","& .MuiBox-root:nth-of-type(2)":{borderLeft:"none"}}),Tt=l(v)(({active:e,bordercolor:o})=>({width:"50%",height:"37.9px",border:`1px solid ${o}`,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e=="true"?"#FFAA5D":"#FFF",cursor:"pointer",marginBottom:"20px"})),It=l("img")({}),wt=l(v)(({active:e})=>({marginLeft:"5px"})),Ro=l(v)({width:"100%",display:"flex",flexDirection:"column"}),$o=l(v)({width:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column",padding:"0px",margin:"12px 0px","& .MuiAccordion-root":{width:"100%",backgroundColor:"#F0F5FB",padding:"0px"},"& .MuiTypography-root":{color:"#000",fontFamily:'"Baloo Da 2"',fontWeight:"700",fontSize:"16px",lineHeight:"24px"},"& .MuiAccordionSummary-root":{minHeight:"unset",padding:"8px"},"& .MuiAccordionSummary-content":{margin:"0px !important"},"& .css-o4b71y-MuiAccordionSummary-content.Mui-expand":{margin:"0px !important",minHeight:"unset"},"& .css-1tmu6hb-MuiButtonBase-root-MuiAccordionSummary-root.Mui-expanded":{minHeight:"unset"},"& .MuiAccordionDetails-root":{paddingBottom:"8px"}}),Lo=l(v)({display:"flex",justifyContent:"space-between",alignItems:"center","& .css-1xgh7mm-MuiFormControl-root":{alignItems:"end"}});l(v)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000"});const Mo=l(v)({display:"flex",flexDirection:"column"}),Fo=l(v)({display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"}),Uo=l(v)({display:"flex",flexDirection:"column",width:"75%","& div:first-of-type":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}});l(v)({fontSize:"16px",fontFamily:'"Baloo Da 2"',fontWeight:"400",lineHeight:"24px",color:"#000",margin:"0px"});const zo=l(v)({borderBottom:"1px solid #9C9C9C",marginTop:"3px"}),Ho=l("img")({cursor:"pointer",marginRight:"15px"}),Wo=l(Gt)(({buttoncolor:e})=>({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"10px",backgroundColor:"transparent","& nav":{justifyContent:"center"},"& ul":{justifyContent:"center","& li":{width:"25px"}},"& .MuiPaginationItem-root":{color:e,opacity:"0.5",width:"20px",cursor:"pointer",userSelect:"none",fontFamily:"Inter",fontWeight:"500",fontSize:"16px",textAlign:"center",backgroundColor:"transparent","&.Mui-selected":{color:e,opacity:"1",backgroundColor:"transparent"}}})),Ko=l(v)({width:"100%",padding:"12px",backgroundColor:"#F0F5FB",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"9px 0px","@media (max-height: 600px)":{padding:"8px"},"@media (min-width: 680px)":{justifyContent:"left"}}),Go=l("img")({width:"63px"}),Yo=l(v)({margin:"0px",marginLeft:"24px","@media (max-height: 600px)":{"& .MuiBox-root":{fontSize:"14px !important"}}}),qo=l(v)({width:"100%",justifyContent:"space-between",alignItems:"center",margin:"10px 0px"}),Vo=l(v)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"center",padding:"0px 7px"});l(Dt)({marginLeft:"-33px",color:"#17637D",height:"30px"});const Xo=l(v)(({progress:e,progresscolor:o})=>({width:"calc(100% - 60px)",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",borderBottom:`1px solid ${o}`,"::after":{content:'""',position:"absolute",bottom:0,left:0,width:`${e}%`,borderBottom:e!=0?`2px solid ${o}`:"none"}})),Qo=l(v)(({istransliteration:e,translatestatus:o})=>({margin:"5px 0px 5px 0px",display:"flex",justifyContent:"space-between",opacity:o=="one"||o=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},"& .MuiBox-root:first-of-type":{width:"48%"},"& .MuiBox-root:last-child":{marginInlineEnd:"auto",width:e=="true"?"48%":"75%"}})),Zo=l(v)({display:"flex",justifyContent:"space-between"}),Jo=l(v)(({translatestatus:e})=>({width:"80%",display:"flex",opacity:e=="one"||e=="none"?"0.5":"1","& .MuiBox-root":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}})),en=l("img")({width:"20px",marginLeft:"10px"}),tn=l(v)(({isdownloaded:e})=>({width:"45px",display:"flex",justifyContent:e=="true"?"space-between":"flex-end"})),jt=l("img")({marginLeft:"3px",cursor:"pointer"}),on=l(v)({width:"96%",padding:"17px 14px",backgroundColor:"#F0F5FB",marginTop:"5px !important",margin:"auto"}),nn=l(v)({display:"flex",alignItems:"baseline","& .MuiBox-root:nth-of-type(2)":{marginLeft:"5px"}}),sn=l(v)({display:"flex",flexWrap:"wrap",marginTop:"10px"}),Pt=l(v)(({style:e,translatestatus:o,readalready:s,readbgcolor:t,readtextcolor:u})=>({opacity:o=="one"||o=="none"?"0.5":"1",width:"40px",height:"40px",marginRight:"2px",marginBottom:"2px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:s=="true"?`${t} !important`:`${e.backgroundColor} !important`,borderWidth:"1px",borderStyle:"solid",borderColor:s=="true"?`${u} !important`:`${e.color} !important`,cursor:"pointer","& .MuiBox-root":{color:s=="true"?`${u} !important`:`${e.color} !important`}})),an=l("img")({width:"50%",height:"50%"});function ln(e){const[o,s]=x.useState(""),[t,u]=x.useState(""),{theme:r,readingLanguage:y}=x.useContext(pe),{logoTextColor:p,headerBGColor:P}=Te(r),I=localStorage.getItem($e)||Le;return x.useEffect(()=>{var m,B,g,a;e.markTitle?s((m=e.markTitle)==null?void 0:m[I]):s(((a=(g=(B=e.terms)==null?void 0:B.texts.find(h=>h.variable=="Default Book Title"))==null?void 0:g.text)==null?void 0:a[y])||""),e.markImg?u(e.markImg):u(C.default_cover)},[e.markTitle,e.markImg]),i.jsxs(Bo,{children:[i.jsx(So,{src:r==_.DEFAULT||r==_.DARK?C.book_subtract:r==_.BLACK_AND_WHITE?C.book_subtract_BAW:r==_.SAPPHIRE?C.book_subtract_sapphire:C.book_subtract_easyocean}),i.jsxs(po,{children:[i.jsxs(To,{children:[i.jsx(Io,{onClick:e.onLogoClick,children:i.jsx(wo,{src:t})}),i.jsx(jo,{children:i.jsx(Q,{fontFamily:"Buenard",fontWeight:"700",fontSize:36,lineHeight:47,textAlign:"center",color:p,children:o})})]}),i.jsx(_o,{src:r==_.EASY_OCEAN?C.search_easyocean:C.search,onClick:e.onSearchClick})]}),i.jsx(Ao,{children:i.jsx(Oo,{src:r==_.DEFAULT||r==_.DARK?C.close2:r==_.BLACK_AND_WHITE?C.close2_BAW:r==_.SAPPHIRE?C.close2_sapphire:C.close2_easyocean,onClick:e.onCloseClick})}),i.jsx(Po,{hamburgercolor:P,children:i.jsx(Xt,{isLogin:e.isLogIn,textColor:p,itemBgColor:P,toggleColor:P,terms:e.welcomePageTerms,onLogin:e.onLogin,onSettings:e.onSettings})})]})}function rn(e){var j,U,c,d,k,S,T,F,V,R,le,re,de,ce,ie,se,ae,D,Ie,Fe,Ue,ze,He,We,Ke,Ge,Ye,qe,Ve,Xe,Qe,Ze,Je,et,tt,ot,nt,it,st,at;const[o,s]=x.useState([]),[t,u]=x.useState(),[r,y]=x.useState(!1),[p,P]=x.useState(!1),[I,m]=x.useState(0),{theme:B,referenceLanguage:g,readingLanguage:a}=x.useContext(pe),{mainBGColor:h,altTextColor:A,backgroundColor:L,topTextColor:O,buttonColor:N,buttonTextColor:$}=Te(B),H=localStorage.getItem($e)||Le,M=x.useMemo(()=>{if(e.userHistory&&e.userHistory.length>0){const n=e.userHistory.filter(z=>z.bookId==e.bookId);if(n&&n.length>0)return n[0].readChapterIds}return[]},[e.userHistory]),W=e.subBookId;x.useEffect(()=>{e.openedSubBook==e.subBookId?y(!0):y(!1)},[e.openedSubBook]),x.useEffect(()=>{var J,ee;const n=e.subBooks.filter(w=>w.subBookId===W);let z=0;if(n&&n.length>0&&(z=(J=n[0].chapterInfos)==null?void 0:J.length,u(n[0])),e.currentUser){const w=e.userHistory.filter(E=>E.bookId==e.bookId);if(w&&w.length>0){const E=w[0].subBooks.filter(te=>te.subBookId==W);E&&E.length>0&&m(Math.floor(((ee=E[0])==null?void 0:ee.readChapters)/z*100))}}if(e.subBooks&&e.subBooks.length>0){const w=e.subBooks.filter(E=>E.subBookId==W);if(w&&w.length>0){let E=w[0].chapterInfos;E.sort((te,ne)=>te.chapterNumber-ne.chapterNumber),s(E)}}},[e.subBooks,e.userHistory]),x.useEffect(()=>{if(e.subBookInfos&&e.subBookInfos.length>0){const n=e.subBookInfos.filter(z=>z.subBookId==W);n&&n.length>0?P(!0):P(!1)}},[]);const Z=x.useCallback(n=>{P(z=>!z),e.onDownload(n)},[]),f=()=>{var n,z,J,ee;if(t!=null&&t.noChapter){const w=(n=t==null?void 0:t.chapterInfos[0])==null?void 0:n.isTranslated,E=(z=t==null?void 0:t.chapterInfos[0])==null?void 0:z.isPublished;!(w!=null&&w[g])&&!(w!=null&&w[a])||!(E!=null&&E[g])&&!(E!=null&&E[a])?K.custom(te=>{var ne,ue,me;return i.jsx(G,{text:((me=(ue=(ne=e.terms)==null?void 0:ne.texts.find(we=>we.variable=="None Translated"))==null?void 0:ue.text)==null?void 0:me[a])||"",visible:te.visible})}):e.moveToReading(t==null?void 0:t.chapterInfos[0].chapterId,(J=e.bookTitle)==null?void 0:J[H],(ee=t.subBookTitle)==null?void 0:ee[H],t.subBookId,!!(w!=null&&w[g]&&(w!=null&&w[a])))}else y(!r),e.handleOpenedSubBook(e.subBookId)},b=(n,z)=>{var J,ee;z=="none"?K.custom(w=>{var E,te,ne;return i.jsx(G,{text:((ne=(te=(E=e.terms)==null?void 0:E.texts.find(ue=>ue.variable=="None Translated"))==null?void 0:te.text)==null?void 0:ne[a])||"",visible:w.visible})}):e.moveToReading(n,(J=e.bookTitle)==null?void 0:J[H],(ee=t.subBookTitle)==null?void 0:ee[H],t.subBookId,z=="both")};return i.jsxs(qo,{children:[i.jsxs(Vo,{children:[i.jsxs(Xo,{progress:I,progresscolor:N,onClick:f,children:[(t==null?void 0:t.subBookNumber)!=0&&i.jsxs(Qo,{istransliteration:((j=t==null?void 0:t.subBookTitle)==null?void 0:j[Ae])!=null?"true":"false",translatestatus:(t==null?void 0:t.noChapter)&&(!((c=(U=t==null?void 0:t.chapterInfos[0])==null?void 0:U.isTranslated)!=null&&c[g])&&!((k=(d=t==null?void 0:t.chapterInfos[0])==null?void 0:d.isTranslated)!=null&&k[a])||!((T=(S=t==null?void 0:t.chapterInfos[0])==null?void 0:S.isPublished)!=null&&T[g])&&!((V=(F=t==null?void 0:t.chapterInfos[0])==null?void 0:F.isPublished)!=null&&V[a])?"none":(!((le=(R=t==null?void 0:t.chapterInfos[0])==null?void 0:R.isTranslated)!=null&&le[g])||!((de=(re=t==null?void 0:t.chapterInfos[0])==null?void 0:re.isTranslated)!=null&&de[a]))&&((ie=(ce=t==null?void 0:t.chapterInfos[0])==null?void 0:ce.isPublished)!=null&&ie[g]||!((ae=(se=t==null?void 0:t.chapterInfos[0])==null?void 0:se.isPublished)!=null&&ae[a]))?"one":"both"),children:[((D=t==null?void 0:t.subBookTitle)==null?void 0:D[Ae])&&i.jsx(Q,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:A,language:Oe,children:(t==null?void 0:t.subBookNumber)+". "+((Ie=t==null?void 0:t.subBookTitle)==null?void 0:Ie[Ae])}),i.jsx(Q,{fontFamily:'"Baloo Da 2"',fontWeight:"bold",color:A,language:Oe,direction:"rtl",children:(Fe=t==null?void 0:t.subBookTitle)==null?void 0:Fe[Oe]})]}),i.jsxs(Zo,{children:[i.jsxs(Jo,{translatestatus:(t==null?void 0:t.noChapter)&&(!((ze=(Ue=t==null?void 0:t.chapterInfos[0])==null?void 0:Ue.isTranslated)!=null&&ze[g])&&!((We=(He=t==null?void 0:t.chapterInfos[0])==null?void 0:He.isTranslated)!=null&&We[a])||!((Ge=(Ke=t==null?void 0:t.chapterInfos[0])==null?void 0:Ke.isPublished)!=null&&Ge[g])&&!((qe=(Ye=t==null?void 0:t.chapterInfos[0])==null?void 0:Ye.isPublished)!=null&&qe[a])?"none":(!((Xe=(Ve=t==null?void 0:t.chapterInfos[0])==null?void 0:Ve.isTranslated)!=null&&Xe[g])||!((Ze=(Qe=t==null?void 0:t.chapterInfos[0])==null?void 0:Qe.isTranslated)!=null&&Ze[a]))&&((et=(Je=t==null?void 0:t.chapterInfos[0])==null?void 0:Je.isPublished)!=null&&et[g]||!((ot=(tt=t==null?void 0:t.chapterInfos[0])==null?void 0:tt.isPublished)!=null&&ot[a]))?"one":"both"),children:[i.jsx(Q,{fontFamily:'"Baloo Da 2"',color:A,children:(nt=t==null?void 0:t.subBookTitle)==null?void 0:nt[H]}),(t==null?void 0:t.subBookNumber)==0&&i.jsx(en,{src:C.icon_intro})]}),e.currentUser&&I!==0&&!(t!=null&&t.noChapter)&&i.jsx(Q,{fontFamily:'"Baloo Da 2"',color:N,children:`${I}%`})]})]}),i.jsxs(tn,{isdownloaded:p?"true":"false",children:[i.jsx(jt,{src:p?B==_.DEFAULT||B==_.EASY_OCEAN?C.download_cancel:C.download_cancel_white:B==_.DEFAULT||B==_.EASY_OCEAN?C.download:C.download_white,onClick:()=>Z(W)}),p&&i.jsx(jt,{src:B==_.DEFAULT||B==_.EASY_OCEAN?C.download_refresh:C.download_refresh_white,onClick:()=>e.onDownloadRefresh(W)})]})]}),r&&i.jsxs(on,{style:{backgroundColor:L},children:[i.jsx(nn,{children:i.jsx(Q,{fontFamily:"Inter",color:O,children:((at=(st=(it=e.terms)==null?void 0:it.texts.find(n=>n.variable=="Chapter"))==null?void 0:st.text)==null?void 0:at[a])||""})}),i.jsx(sn,{children:o==null?void 0:o.map((n,z)=>{var J,ee,w,E,te,ne,ue,me,we,lt,rt,dt,ct,ut,gt,xt;return n.chapterNumber==0?i.jsx(Pt,{translatestatus:!((J=n==null?void 0:n.isTranslated)!=null&&J[g])&&!((ee=n==null?void 0:n.isTranslated)!=null&&ee[a])||!((w=n==null?void 0:n.isPublished)!=null&&w[g])&&!((E=n==null?void 0:n.isPublished)!=null&&E[a])?"none":(!((te=n==null?void 0:n.isTranslated)!=null&&te[g])||!((ne=n==null?void 0:n.isTranslated)!=null&&ne[a]))&&((ue=n==null?void 0:n.isPublished)!=null&&ue[g]||!((me=n==null?void 0:n.isPublished)!=null&&me[a]))?"one":"both",readalready:M&&M.length>0&&M.includes(n.chapterId)?"true":"false",style:{backgroundColor:h,color:A},readbgcolor:N,readtextcolor:$,onClick:()=>{var fe,ke,he,ve,ye,Ce,Be,Se;return b(n.chapterId,!((fe=n==null?void 0:n.isTranslated)!=null&&fe[g])&&!((ke=n==null?void 0:n.isTranslated)!=null&&ke[a])||!((he=n==null?void 0:n.isPublished)!=null&&he[g])&&!((ve=n==null?void 0:n.isPublished)!=null&&ve[a])?"none":(!((ye=n.isTranslated)!=null&&ye[g])||!((Ce=n==null?void 0:n.isTranslated)!=null&&Ce[a]))&&((Be=n==null?void 0:n.isPublished)!=null&&Be[g]||!((Se=n==null?void 0:n.isPublished)!=null&&Se[a]))?"one":"both")},children:i.jsx(an,{src:C.icon_intro})},z):i.jsx(Pt,{translatestatus:!((we=n==null?void 0:n.isTranslated)!=null&&we[g])&&!((lt=n==null?void 0:n.isTranslated)!=null&&lt[a])||!((rt=n==null?void 0:n.isPublished)!=null&&rt[g])&&!((dt=n==null?void 0:n.isPublished)!=null&&dt[a])?"none":(!((ct=n==null?void 0:n.isTranslated)!=null&&ct[g])||!((ut=n==null?void 0:n.isTranslated)!=null&&ut[a]))&&((gt=n==null?void 0:n.isPublished)!=null&&gt[g]||!((xt=n==null?void 0:n.isPublished)!=null&&xt[a]))?"one":"both",readalready:M&&M.length>0&&M.includes(n.chapterId)?"true":"false",style:{backgroundColor:h,color:A},readbgcolor:N,readtextcolor:$,onClick:()=>{var fe,ke,he,ve,ye,Ce,Be,Se;return b(n.chapterId,!((fe=n==null?void 0:n.isTranslated)!=null&&fe[g])&&!((ke=n==null?void 0:n.isTranslated)!=null&&ke[a])||!((he=n==null?void 0:n.isPublished)!=null&&he[g])&&!((ve=n==null?void 0:n.isPublished)!=null&&ve[a])?"none":(!((ye=n.isTranslated)!=null&&ye[g])||!((Ce=n.isTranslated)!=null&&Ce[a]))&&(!((Be=n==null?void 0:n.isPublished)!=null&&Be[g])||!((Se=n==null?void 0:n.isPublished)!=null&&Se[a]))?"one":"both")},children:i.jsx(Q,{fontFamily:"Inter",fontWeight:"500",textAlign:"center",children:n.chapterNumber})},z)})})]})]})}function dn(e){const[o,s]=x.useState([]);return x.useEffect(()=>{let t=e.subBooks;t&&t.sort((u,r)=>u.subBookNumber-r.subBookNumber),s(t)},[e.subBooks]),i.jsx(i.Fragment,{children:o&&o.length>0&&o.map((t,u)=>i.jsx(rn,{bookId:e.bookId,bookTitle:e.bookTitle,subBooks:o,subBookId:t.subBookId,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook},u))})}function cn(e){const[o,s]=x.useState(""),[t,u]=x.useState([]),[r,y]=x.useState(1),[p,P]=x.useState([]),{theme:I,readingLanguage:m}=x.useContext(pe),{backgroundColor:B,topTextColor:g,mainTextColor:a}=Te(I),h=Vt(e.deviceHeight),A=r*h,L=A-h,O=e.currentUser&&t.slice(L,A);x.useEffect(()=>{var f,b,j,U,c,d;if(e.subBooks&&e.subBooks.length>0){const k=e.subBooks.map(S=>{var T;return{label:(T=S.subBookTitle)==null?void 0:T[m],value:S.subBookId}});k.unshift({label:((f=e.bookTitle)==null?void 0:f.en)=="Qur'an"||((b=e.bookTitle)==null?void 0:b.en)=="Zabur"?(U=(j=e.terms.texts.find(S=>S.variable=="All Chapters"))==null?void 0:j.text)==null?void 0:U[m]:(d=(c=e.terms.texts.find(S=>S.variable=="All SubBooks"))==null?void 0:c.text)==null?void 0:d[m],value:"all"}),P(k)}},[e.subBooks]),x.useEffect(()=>{p.length>0&&s(p[0].value)},[p]),x.useEffect(()=>{if(e.bookmark&&e.bookmark.length>0){const f=e.bookmark.filter(b=>b.subBookId===o);u(o==="all"||o===""?e.bookmark:f)}else u([]),y(0);r>1&&O.length==1&&y(f=>f-1)},[e.bookmark]);const N=(f,b)=>{y(b)},$=x.useCallback(f=>{const b=f.target.value;s(b);const j=e.bookmark.filter(U=>U.subBookId===b);u(b==="all"?e.bookmark:j)},[e.bookmark]),H=()=>{var f,b,j,U;return i.jsx($o,{style:{backgroundColor:B},children:i.jsx(Qt,{label:((b=(f=e.terms.texts.find(c=>c.variable=="Filter"))==null?void 0:f.text)==null?void 0:b[m])||"",detail:i.jsxs(Lo,{children:[i.jsx(Q,{color:g,children:(U=(j=e.terms.texts.find(c=>c.variable=="Show"))==null?void 0:j.text)==null?void 0:U[m]}),i.jsx(Zt,{label:"",options:p,value:o,backgroundColor:B,textColor:g,onChange:$})]})})})},M=()=>i.jsx(Mo,{children:(O==null?void 0:O.length)>0&&O.map((f,b)=>{var j,U,c,d,k,S,T,F,V,R,le,re,de,ce,ie,se,ae;return i.jsxs(v,{children:[i.jsxs(Fo,{children:[i.jsxs(Uo,{onClick:()=>e.moveToReadingFromBookmark(f._id),children:[i.jsx(Q,{color:a,children:(j=f.subBookTitle)==null?void 0:j[m]}),i.jsx(Q,{color:a,children:f.bookTitle.en=="Qur'an"||f.bookTitle.en=="Zabur"?f.chapterNumber>0?`${(c=(U=e.terms.texts.find(D=>D.variable=="Surah Bookmark"))==null?void 0:U.text)==null?void 0:c[m]} ${f.chapterNumber}, ${(k=(d=e.terms.texts.find(D=>D.variable=="Aya"))==null?void 0:d.text)==null?void 0:k[m]} ${f.verseNumber}`:`${(T=(S=e.terms.texts.find(D=>D.variable=="Surah Bookmark"))==null?void 0:S.text)==null?void 0:T[m]} _ , ${(V=(F=e.terms.texts.find(D=>D.variable=="Aya"))==null?void 0:F.text)==null?void 0:V[m]} ${f.verseNumber}`:f.chapterNumber>0?`${(le=(R=e.terms.texts.find(D=>D.variable=="Chapter Bookmark"))==null?void 0:R.text)==null?void 0:le[m]} ${f.chapterNumber}, ${(de=(re=e.terms.texts.find(D=>D.variable=="Aya"))==null?void 0:re.text)==null?void 0:de[m]} ${f.verseNumber}`:`${(ie=(ce=e.terms.texts.find(D=>D.variable=="Chapter Bookmark"))==null?void 0:ce.text)==null?void 0:ie[m]} _ , ${(ae=(se=e.terms.texts.find(D=>D.variable=="Aya"))==null?void 0:se.text)==null?void 0:ae[m]} ${f.verseNumber}`})]}),i.jsx(Ho,{src:I==_.DEFAULT||I==_.EASY_OCEAN||I==_.EASY_SUNRISE?C.black_bookmark:C.white_bookmark,onClick:()=>e.removeBookmark(f._id)})]}),i.jsx(zo,{})]},b)})}),W=()=>i.jsx(Wo,{buttoncolor:a,children:i.jsx(ko,{count:e.currentUser?Math.ceil(t.length/h):0,page:r,hidePrevButton:!0,hideNextButton:!0,onChange:N})}),Z=()=>{var f,b;return i.jsxs(Ko,{style:{backgroundColor:B},children:[i.jsx(Go,{src:I==_.DEFAULT||I==_.BLACK_AND_WHITE?C.swipe:I==_.EASY_OCEAN?C.swipe_easyocean:C.swipe_white}),i.jsx(Yo,{style:{color:g},children:(b=(f=e.terms.texts.find(j=>j.variable=="Bookmark Help"))==null?void 0:f.text)==null?void 0:b[m]})]})};return i.jsxs(Ro,{children:[H(),M(),W(),Z()]})}function un(e){var B,g,a,h;const[o,s]=x.useState(q),{theme:t,readingLanguage:u}=x.useContext(pe),{mainBGColor:r,headerBGColor:y,buttonColor:p,buttonTextColor:P,mainTextColor:I}=Te(t),m=A=>{e.currentUser?s(A):K.custom(L=>{var O,N;return i.jsx(G,{text:((N=(O=e.terms.texts.find($=>$.variable=="Bookmark Read Description"))==null?void 0:O.text)==null?void 0:N[u])||"",visible:L.visible})})};return i.jsx(Eo,{style:{backgroundColor:y},children:i.jsxs(No,{style:{backgroundColor:r},children:[i.jsxs(Do,{children:[i.jsxs(Tt,{active:o==q?"true":"false",style:{backgroundColor:o==q?p:r},bordercolor:I,onClick:()=>m(q),children:[i.jsx(It,{src:t==_.DEFAULT?C.index:t==_.EASY_OCEAN?o==q?C.index_active:C.index:o==q?C.index:C.index_active}),i.jsx(wt,{active:o==q?"true":"false",children:i.jsx(Q,{fontSize:16,fontWeight:"500",lineHeight:24,color:o==q?P:I,children:((g=(B=e.terms.texts.find(A=>A.variable=="Index"))==null?void 0:B.text)==null?void 0:g[u])||""})})]}),i.jsxs(Tt,{active:o==q?"false":"true",style:{backgroundColor:o==Ee?p:r},bordercolor:I,onClick:()=>m(Ee),children:[i.jsx(It,{src:t==_.DEFAULT?C.bookmark2_default:t==_.EASY_OCEAN?o==q?C.bookmark2_default:C.bookmark2_white:o==q?C.bookmark2_white:C.bookmark2_default}),i.jsx(wt,{active:o==q?"false":"true",children:i.jsx(Q,{fontSize:16,fontWeight:"500",lineHeight:24,color:o==Ee?P:I,children:((h=(a=e.terms.texts.find(A=>A.variable=="Bookmarks"))==null?void 0:a.text)==null?void 0:h[u])||""})})]})]}),o==q?i.jsx(dn,{bookId:e.bookId,bookTitle:e.bookTitle,subBooks:e.subBooks,subBookInfos:e.subBookInfos,currentUser:e.currentUser,userHistory:e.userHistory,openedSubBook:e.openedSubBook,terms:e.terms,moveToReading:e.moveToReading,onDownload:e.onDownload,onDownloadRefresh:e.onDownloadRefresh,handleOpenedSubBook:e.handleOpenedSubBook}):i.jsx(cn,{bookTitle:e.bookTitle,subBooks:e.subBooks,currentUser:e.currentUser,bookmark:e.bookmark.filter(A=>A.bookId==e.bookId),deviceHeight:e.deviceHeight,terms:e.terms,moveToReadingFromBookmark:e.moveToReadingFromBookmark,removeBookmark:e.removeBookmark})]})})}const gn=Ft,ge=Ut,xn=1;class bn{constructor(){bt(this,"db",null)}async initDB(){return new Promise((o,s)=>{const t=indexedDB.open(gn,xn);t.onerror=()=>s(t.error),t.onsuccess=()=>{this.db=t.result,o()},t.onupgradeneeded=u=>{u.target.result.createObjectStore(ge,{keyPath:"subBookId"})}})}async saveSubBookInfo(o){return this.db||await this.initDB(),new Promise((s,t)=>{const y=this.db.transaction([ge],"readwrite").objectStore(ge).put(o);y.onerror=()=>t(y.error),y.onsuccess=()=>s()})}async getSubBookInfo(o){return this.db||await this.initDB(),new Promise((s,t)=>{const y=this.db.transaction([ge],"readonly").objectStore(ge).get(o);y.onerror=()=>t(y.error),y.onsuccess=()=>s(y.result)})}async removeSubBookInfo(o){return this.db||await this.initDB(),new Promise((s,t)=>{const y=this.db.transaction([ge],"readwrite").objectStore(ge).delete(o);y.onerror=()=>t(y.error),y.onsuccess=()=>s()})}}const Pe=new bn,mn=l(v)({display:"flex",flexDirection:"column",margin:"auto",position:"relative",height:"100dvh"});function fn(e){const[o,s]=x.useState(),[t,u]=x.useState(!1),[r,y]=x.useState(),[p,P]=x.useState(),m=new URLSearchParams(window.location.search).get("id")||"",B=qt(),{height:g}=ho(),{theme:a,readingLanguage:h}=x.useContext(pe),{mainBGColor:A}=Te(a),L=localStorage.getItem($e)||Le,O=x.useCallback(()=>{m&&vt.fetchBookInfo(m).then(c=>{var d,k,S,T,F;if(e.dispatch({type:oe.ADD_BOOKINFO,payload:{bookInfo:c}}),s(c),e.currentUser&&!e.userHistory.some(R=>R.bookId==m)&&c.subBooks){const R=c.subBooks.find(ie=>ie.subBookNumber==0),le=(d=R==null?void 0:R.chapterInfos[0])==null?void 0:d.chapterId,re=(k=c.bookTitle)==null?void 0:k[L],de=(S=R==null?void 0:R.subBookTitle)==null?void 0:S[L],ce=R==null?void 0:R.subBookId;(F=(T=R==null?void 0:R.chapterInfos[0])==null?void 0:T.isTranslated)!=null&&F[L]?H(le,re,de,ce,!0):K.custom(ie=>{var se,ae,D;return i.jsx(G,{text:((D=(ae=(se=r==null?void 0:r.texts)==null?void 0:se.find(Ie=>Ie.variable=="None Translated"))==null?void 0:ae.text)==null?void 0:D[h])||"",type:je.BOOKMARK,visible:ie.visible})})}}).catch(c=>{K.custom(d=>i.jsx(G,{text:c,type:je.BOOKMARK,visible:d.visible}))}).finally(()=>{u(!1)})},[m,e.dispatch,e.userHistory,e.currentUser]),N=x.useCallback(async c=>{try{const d=await vt.fetchSubBookInfo(c);e.dispatch({type:oe.ADD_SUBBOOKINFO,payload:{subBookInfo:d}}),e.dispatch({type:oe.ADD_SUBBOOK,payload:{subBook:d}}),await Pe.saveSubBookInfo(d),u(!1)}catch(d){K.custom(k=>i.jsx(G,{text:d,visible:k.visible})),u(!1)}},[e.dispatch]);x.useEffect(()=>{var k,S;const c=e.terms.find(T=>T.pageTitle=="Index & Bookmark Page"),d=e.terms.find(T=>T.pageTitle=="Welcome Page");(k=c==null?void 0:c.isPublished)!=null&&k[h]?y(c):K.custom(T=>i.jsx(G,{text:"The terminologies for this page are not published.",visible:T.visible})),(S=d==null?void 0:d.isPublished)!=null&&S[h]?P(d):K.custom(T=>i.jsx(G,{text:"The terminologies for hamburgur menu are not published.",visible:T.visible}))},[e.terms]),x.useEffect(()=>{(async()=>{var d;u(!0),!((d=e.bookInfos)!=null&&d.length)||!e.bookInfos.some(k=>k.bookId===m)?await O():(s(e.bookInfos.find(k=>k.bookId===m)),u(!1))})(),e.currentUser&&ht.fetchBookmarks().then(d=>{e.dispatch({type:oe.SET_BOOKMARKS,payload:{bookmark:d}})}).catch(d=>{d.status===401&&d.response.data.message===mt&&(K.custom(k=>i.jsx(G,{text:d.response.data.message,visible:k.visible})),Ne.logout(),B("/login"))})},[m,e.bookInfos,e.currentUser,e.dispatch]);const $=()=>{K.custom(c=>{var d,k,S;return i.jsx(G,{text:((S=(k=(d=r==null?void 0:r.texts)==null?void 0:d.find(T=>T.variable=="Not Built Yet"))==null?void 0:k.text)==null?void 0:S[h])||"",visible:c.visible})})},H=(c,d,k,S,T)=>{B(`/reading?chapterId=${c}&book=${d}&subBook=${k}&subBookId=${S}&bookId=${m}&bothTranslated=${T}`)},M=x.useCallback(async c=>{u(!0),kt()<ft?await Pe.getSubBookInfo(c)?(await Pe.removeSubBookInfo(c),e.dispatch({type:oe.REMOVE_SUBBOOKINFO,payload:{subBookId:c}})):await N(c):K.custom(k=>{var S,T,F;return i.jsx(G,{text:((F=(T=(S=r==null?void 0:r.texts)==null?void 0:S.find(V=>V.variable=="Not Enough Space"))==null?void 0:T.text)==null?void 0:F[h])||"",visible:k.visible})}),u(!1)},[N,e.dispatch]),W=x.useCallback(async c=>{u(!0),await Pe.removeSubBookInfo(c),e.dispatch({type:oe.REMOVE_SUBBOOKINFO,payload:{subBookId:c}}),kt()<ft?await N(c):K.custom(k=>{var S,T,F;return i.jsx(G,{text:((F=(T=(S=r==null?void 0:r.texts)==null?void 0:S.find(V=>V.variable=="Not Enough Space"))==null?void 0:T.text)==null?void 0:F[h])||"",visible:k.visible})}),u(!1)},[N,e.dispatch]),Z=x.useCallback(c=>{if(u(!0),e.bookmark&&e.bookmark.length>0){const d=e.bookmark.find(k=>k._id===c);if(d){const{chapterId:k,bookTitle:S,subBookId:T,subBookTitle:F,verseId:V}=d;B(`/reading?chapterId=${k}&book=${S==null?void 0:S[L]}&subBook=${F==null?void 0:F[L]}&subBookId=${T}&verseId=${V}&bookId=${m}`),u(!1)}}},[m,B,e.bookmark]),f=x.useCallback(c=>{u(!0),ht.deleteBookmark(c).then(d=>{e.dispatch({type:oe.REMOVE_BOOKMARK,payload:{bookmarkId:c}}),K.custom(k=>i.jsx(G,{text:d.message,type:je.BOOKMARK,visible:k.visible})),u(!1)}).catch(d=>{d.status==401&&d.response.data.message==mt&&(K.custom(k=>i.jsx(G,{text:d.response.data.message,type:je.BOOKMARK,visible:k.visible})),Ne.logout(),B("/login")),u(!1)})},[e.dispatch]),b=x.useCallback(c=>{e.dispatch({type:oe.SET_OPENED_SUBBOOK,payload:{openedSubBook:e.openedSubBook===c?"":c}})},[e.openedSubBook,e.dispatch]),j=()=>{e.dispatch({type:oe.RESET_USER}),e.dispatch({type:oe.RESET_BOOK}),e.dispatch({type:oe.RESET_PAGE_STATUS}),Ne.logout()},U=()=>{B("/login")};return i.jsxs(mn,{style:{backgroundColor:A},children:[i.jsx(ln,{markImg:o&&zt+o.bookImage,markTitle:o==null?void 0:o.bookTitle,isLogIn:!!e.currentUser,terms:r||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},welcomePageTerms:p||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},onLogoClick:()=>B("/"),onCloseClick:()=>B("/library"),onLogin:e.currentUser?j:U,onSettings:()=>B("/settings"),onSearchClick:$}),i.jsx(un,{bookId:m,bookTitle:o==null?void 0:o.bookTitle,subBooks:o==null?void 0:o.subBooks,deviceHeight:g,subBookInfos:e.subBookInfos,userHistory:e.userHistory,currentUser:e.currentUser,bookmark:e.bookmark,openedSubBook:e.openedSubBook,terms:r||{pageId:"",pageNumber:0,pageTitle:"",isCompleted:{},isPublished:{},texts:[]},moveToReading:H,moveToReadingFromBookmark:Z,onDownload:M,onDownloadRefresh:W,removeBookmark:f,handleOpenedSubBook:b}),t&&i.jsx(Jt,{})]})}function kn(e){return{userHistory:e.books.userHistory,bookmark:e.books.bookmark,subBookInfos:e.books.subBookInfos,bookInfos:e.books.bookInfos,terms:e.terms.terms,currentBookPageOpenTab:e.pageStatus.currentBookPageOpenTab,openedSubBook:e.pageStatus.openedSubBook,currentUser:e.user.currentUser,activeChapterId:e.books.activeChapterId}}const _n=Yt(kn)(fn);export{_n as default};
